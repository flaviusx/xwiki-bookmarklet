<?xml version="1.0" encoding="UTF-8"?>
<xwikidoc>
<web>Bookmarklet</web>
<name>BookmarkletSkin</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>XWiki.XWikiSkins</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1372252677000</creationDate>
<date>1373038484000</date>
<contentUpdateDate>1372615879000</contentUpdateDate>
<version>11.64</version>
<title>BookmarkletSkin</title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>true</minorEdit>
<syntaxId>xwiki/2.1</syntaxId>
<hidden>false</hidden><attachment>
<filename>377.gif</filename>
<filesize>29504</filesize>
<author>XWiki.Admin</author>
<date>1372256013000</date>
<version>1.1</version>
<comment></comment><content>R0lGODlhgACAAIAAAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQICQAAACwAAAAAgACAAAAC
m4yPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1K
p9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2Oz+v3/L7/DxgoOEhYaHiImKi4yNjo+AgZ
KTlJWWl5iZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLK1YAACH5BAgJAAAALAAAAACA
AIAAhSyW3JzO7GSu5NTm9IS+7FzC/Eyi5KT+/Lza9Oz2/Hy67Dya3HS25IzG7Fyq5KzW9Gy25Nzu
/FSq5MTi9Pz+/DSW3Gyy5FSm5PT2/JTG7Mzi9KTS7GSy5NTq/ITC7Eym5Hy+7ESe3LTW9OTy/DSa
3PT6/JTK7Mzm9P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJRwSCwaj8ikMgmoSBxPQuPRKS2v2Kx2y+2iAOBw
cxxyZCZWr3rNbhvHlbF4LjBNKO68fv+ew+VxYBULHgN8h4hef4FijIxgBiYJiZSVR35/YY6ZDB2W
n5SLc5uYYRYnoKl6mHGBm62iAAITqrVqsaOlfoEMk7a/WKyZsMSZcBt4wMqXxbm6zmMXGsvUQ8KP
xdmaYgfV1bjGz4LbAN7fu+jasONg5t/N4eJyTd3uy8Lb6saB9tQPGxkUKLBwYZ28RmH6KUQxQAQB
A/rgVai3cOEIEQwqPMJXseMQDCIc6GvnsaSQCAQ2CipgsiUKDCkNupyJIaOgmThRaCjIMueDTAoB
fAodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qd
S7eu3bt48+rdy7ev37+AAwseTLiw4cOIEytezLix48eQI0ueTLmy5cuYM2vezLmz58+gQ4seTbq0
6dOoU6tezbq169dXggAAIfkECAkAAAAsAAAAAIAAgACFLJbcnM7sXML81Ob0XKrkpOr8vNr0RJ7c
dLbkfL7s7Pb8fOL8rNb0ZLLkxOL0RKbsjMbsPJrc3O78/P78VKbkNJbcpNLsZK7kxP78xN70fLrs
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
iIa8WGUXJgKJRnFbbtGSYKuFuYVw9ZBmJhZjTaLmmkp02eIdZcJ5xVrZSVOnnUlc2WYaWvKZhE17
HUOloEgs1ZYGAyKKRJHwVKOAo0j8GBIqQlI6BI5MJeObpkLIaBBBNYIqBAmdZheoqTlsCFGKrApB
BZaRjEippV6WUaqpFNb2yYWxNqijPxVkCmqUyFCjYKwjtDiPk7Hmt1WePDo6gYnUgGQfqwsoR48G
CETrUo6raipfm/4i2YroNgiOC8C2oKJK21gaUAcqcs5KkoELrJ6W57h7aoosXYZ8SmkB03LyyQo1
sDrwQfQAC6qoEfEVsKMdSJksGrs6ilmOINvr6HU6DmawoBOs0A9C9YJ6mnTearDsre0ymcfFdk4Q
lKuolbGAumaSkFmngqWxQgOUUpwrOjivacKY3qLIAaIT6LJ0pyOEy6fOBPMMQAUmaA1nCIrlS5Qh
D4htZggK/MuzZh3A0HDQbbsLdTIV3FAAv1siUHZoZMG8ZgizRsqkcFasOUHGl+6HBwE5/3g2xHUg
irDGjkPiKAmFOyjPBZRO8PRkPacxg8sqs1QIqxMEMDTUeVQQazgOJDC+cSSQz57DB2UntIruQ3ww
ACHdAF+EALZLY4DxRpBAQd13nM78ERIsMPT0SkzwQQLYd09pEAAh+QQICQAAACwAAAAAgACAAIUs
ltycyuxkruTU5vSk/vx8xvy82vRMouTs9vx8uuys1vTk/vxMsvys0vRstuTc7vw8mtyk0uyMxuzM
4vRcquT8+vyMwuzE4vRUquSEwuw0ltykzuxssuTU6vTE3vRUpuT09vyEvuy01vR0tuTk7vyUxuyc
zuxksuTM5vR02vy83vRMpuR8vuxcruREntyk0vT8/vw0mtzU6vz0+vy02vR0uuTk8vyUyuz///8A
AAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCccEgsGo/IJHImU5RCFAyGogEor9isdsvtEmeXEsUFKJsB
1bJ3zW67kbDJTXAuV9Np9XvP7x8HGRBneINmaX6IiWsINweGaHaPknqKlZZGMg6Qm3Wbd5KXoZYD
J3mmkKeFZqKsfSh0kZOyn7GttmwII5OntLSyt8BaMCYxnJ6dxqigwcxIKB/HeZG+yqqUzdgwJdbT
ndTVm9jiCC2x3Y/f6WfizR6ChNLJ6HW+h+zAEsjzyurx0ve2YOj6RFCft2T1rgG0NAOWQX4Q6XE6
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
</content></attachment><attachment>
<filename>rangy-core.js</filename>
<filesize>143947</filesize>
<author>XWiki.Admin</author>
<date>1372256905000</date>
<version>1.1</version>
<comment></comment><content>LyoqDQogKiBSYW5neSwgYSBjcm9zcy1icm93c2VyIEphdmFTY3JpcHQgcmFuZ2UgYW5kIHNlbGVj
dGlvbiBsaWJyYXJ5DQogKiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcmFuZ3kvDQogKg0KICog
Q29weXJpZ2h0IDIwMTMsIFRpbSBEb3duDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vu
c2UuDQogKiBWZXJzaW9uOiAxLjNhbHBoYS43NzINCiAqIEJ1aWxkIGRhdGU6IDI2IEZlYnJ1YXJ5
IDIwMTMNCiAqLw0KDQp2YXIgcmFuZ3k7DQpyYW5neSA9IHJhbmd5IHx8IChmdW5jdGlvbigpIHsN
Cg0KICAgIHZhciBPQkpFQ1QgPSAib2JqZWN0IiwgRlVOQ1RJT04gPSAiZnVuY3Rpb24iLCBVTkRF
RklORUQgPSAidW5kZWZpbmVkIjsNCg0KICAgIC8vIE1pbmltYWwgc2V0IG9mIHByb3BlcnRpZXMg
cmVxdWlyZWQgZm9yIERPTSBMZXZlbCAyIFJhbmdlIGNvbXBsaWFuY2UuIENvbXBhcmlzb24gY29u
c3RhbnRzIHN1Y2ggYXMgU1RBUlRfVE9fU1RBUlQNCiAgICAvLyBhcmUgb21pdHRlZCBiZWNhdXNl
IHJhbmdlcyBpbiBLSFRNTCBkbyBub3QgaGF2ZSB0aGVtIGJ1dCBvdGhlcndpc2Ugd29yayBwZXJm
ZWN0bHkgd2VsbC4gU2VlIGlzc3VlIDExMy4NCiAgICB2YXIgZG9tUmFuZ2VQcm9wZXJ0aWVzID0g
WyJzdGFydENvbnRhaW5lciIsICJzdGFydE9mZnNldCIsICJlbmRDb250YWluZXIiLCAiZW5kT2Zm
c2V0IiwgImNvbGxhcHNlZCIsDQogICAgICAgICJjb21tb25BbmNlc3RvckNvbnRhaW5lciJdOw0K
DQogICAgLy8gTWluaW1hbCBzZXQgb2YgbWV0aG9kcyByZXF1aXJlZCBmb3IgRE9NIExldmVsIDIg
UmFuZ2UgY29tcGxpYW5jZQ0KICAgIHZhciBkb21SYW5nZU1ldGhvZHMgPSBbInNldFN0YXJ0Iiwg
InNldFN0YXJ0QmVmb3JlIiwgInNldFN0YXJ0QWZ0ZXIiLCAic2V0RW5kIiwgInNldEVuZEJlZm9y
ZSIsDQogICAgICAgICJzZXRFbmRBZnRlciIsICJjb2xsYXBzZSIsICJzZWxlY3ROb2RlIiwgInNl
bGVjdE5vZGVDb250ZW50cyIsICJjb21wYXJlQm91bmRhcnlQb2ludHMiLCAiZGVsZXRlQ29udGVu
dHMiLA0KICAgICAgICAiZXh0cmFjdENvbnRlbnRzIiwgImNsb25lQ29udGVudHMiLCAiaW5zZXJ0
Tm9kZSIsICJzdXJyb3VuZENvbnRlbnRzIiwgImNsb25lUmFuZ2UiLCAidG9TdHJpbmciLCAiZGV0
YWNoIl07DQoNCiAgICB2YXIgdGV4dFJhbmdlUHJvcGVydGllcyA9IFsiYm91bmRpbmdIZWlnaHQi
LCAiYm91bmRpbmdMZWZ0IiwgImJvdW5kaW5nVG9wIiwgImJvdW5kaW5nV2lkdGgiLCAiaHRtbFRl
eHQiLCAidGV4dCJdOw0KDQogICAgLy8gU3Vic2V0IG9mIFRleHRSYW5nZSdzIGZ1bGwgc2V0IG9m
IG1ldGhvZHMgdGhhdCB3ZSdyZSBpbnRlcmVzdGVkIGluDQogICAgdmFyIHRleHRSYW5nZU1ldGhv
ZHMgPSBbImNvbGxhcHNlIiwgImNvbXBhcmVFbmRQb2ludHMiLCAiZHVwbGljYXRlIiwgIm1vdmVU
b0VsZW1lbnRUZXh0IiwgInBhcmVudEVsZW1lbnQiLCAic2VsZWN0IiwNCiAgICAgICAgInNldEVu
ZFBvaW50IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCJdOw0KDQogICAgLyotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgIC8vIFRy
aW8gb2YgZnVuY3Rpb25zIHRha2VuIGZyb20gUGV0ZXIgTWljaGF1eCdzIGFydGljbGU6DQogICAg
Ly8gaHR0cDovL3BldGVyLm1pY2hhdXguY2EvYXJ0aWNsZXMvZmVhdHVyZS1kZXRlY3Rpb24tc3Rh
dGUtb2YtdGhlLWFydC1icm93c2VyLXNjcmlwdGluZw0KICAgIGZ1bmN0aW9uIGlzSG9zdE1ldGhv
ZChvLCBwKSB7DQogICAgICAgIHZhciB0ID0gdHlwZW9mIG9bcF07DQogICAgICAgIHJldHVybiB0
ID09IEZVTkNUSU9OIHx8ICghISh0ID09IE9CSkVDVCAmJiBvW3BdKSkgfHwgdCA9PSAidW5rbm93
biI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNIb3N0T2JqZWN0KG8sIHApIHsNCiAgICAgICAg
cmV0dXJuICEhKHR5cGVvZiBvW3BdID09IE9CSkVDVCAmJiBvW3BdKTsNCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBpc0hvc3RQcm9wZXJ0eShvLCBwKSB7DQogICAgICAgIHJldHVybiB0eXBlb2Ygb1tw
XSAhPSBVTkRFRklORUQ7DQogICAgfQ0KDQogICAgLy8gQ3JlYXRlcyBhIGNvbnZlbmllbmNlIGZ1
bmN0aW9uIHRvIHNhdmUgdmVyYm9zZSByZXBlYXRlZCBjYWxscyB0byB0ZXN0cyBmdW5jdGlvbnMN
CiAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZVByb3BlcnR5VGVzdCh0ZXN0RnVuYykgew0KICAg
ICAgICByZXR1cm4gZnVuY3Rpb24obywgcHJvcHMpIHsNCiAgICAgICAgICAgIHZhciBpID0gcHJv
cHMubGVuZ3RoOw0KICAgICAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAgIGlm
ICghdGVzdEZ1bmMobywgcHJvcHNbaV0pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBm
YWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1
cm4gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICB9DQoNCiAgICAvLyBOZXh0IHRyaW8gb2YgZnVuY3Rp
b25zIGFyZSBhIGNvbnZlbmllbmNlIHRvIHNhdmUgdmVyYm9zZSByZXBlYXRlZCBjYWxscyB0byBw
cmV2aW91cyB0d28gZnVuY3Rpb25zDQogICAgdmFyIGFyZUhvc3RNZXRob2RzID0gY3JlYXRlTXVs
dGlwbGVQcm9wZXJ0eVRlc3QoaXNIb3N0TWV0aG9kKTsNCiAgICB2YXIgYXJlSG9zdE9iamVjdHMg
PSBjcmVhdGVNdWx0aXBsZVByb3BlcnR5VGVzdChpc0hvc3RPYmplY3QpOw0KICAgIHZhciBhcmVI
b3N0UHJvcGVydGllcyA9IGNyZWF0ZU11bHRpcGxlUHJvcGVydHlUZXN0KGlzSG9zdFByb3BlcnR5
KTsNCg0KICAgIGZ1bmN0aW9uIGlzVGV4dFJhbmdlKHJhbmdlKSB7DQogICAgICAgIHJldHVybiBy
YW5nZSAmJiBhcmVIb3N0TWV0aG9kcyhyYW5nZSwgdGV4dFJhbmdlTWV0aG9kcykgJiYgYXJlSG9z
dFByb3BlcnRpZXMocmFuZ2UsIHRleHRSYW5nZVByb3BlcnRpZXMpOw0KICAgIH0NCiAgICANCiAg
ICBmdW5jdGlvbiBnZXRCb2R5KGRvYykgew0KICAgICAgICByZXR1cm4gaXNIb3N0T2JqZWN0KGRv
YywgImJvZHkiKSA/IGRvYy5ib2R5IDogZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5Iilb
MF07DQogICAgfQ0KDQogICAgdmFyIG1vZHVsZXMgPSB7fTsNCiAgICANCiAgICB2YXIgYXBpID0g
ew0KICAgICAgICB2ZXJzaW9uOiAiMS4zYWxwaGEuNzcyIiwNCiAgICAgICAgaW5pdGlhbGl6ZWQ6
IGZhbHNlLA0KICAgICAgICBzdXBwb3J0ZWQ6IHRydWUsDQoNCiAgICAgICAgdXRpbDogew0KICAg
ICAgICAgICAgaXNIb3N0TWV0aG9kOiBpc0hvc3RNZXRob2QsDQogICAgICAgICAgICBpc0hvc3RP
YmplY3Q6IGlzSG9zdE9iamVjdCwNCiAgICAgICAgICAgIGlzSG9zdFByb3BlcnR5OiBpc0hvc3RQ
cm9wZXJ0eSwNCiAgICAgICAgICAgIGFyZUhvc3RNZXRob2RzOiBhcmVIb3N0TWV0aG9kcywNCiAg
ICAgICAgICAgIGFyZUhvc3RPYmplY3RzOiBhcmVIb3N0T2JqZWN0cywNCiAgICAgICAgICAgIGFy
ZUhvc3RQcm9wZXJ0aWVzOiBhcmVIb3N0UHJvcGVydGllcywNCiAgICAgICAgICAgIGlzVGV4dFJh
bmdlOiBpc1RleHRSYW5nZSwNCiAgICAgICAgICAgIGdldEJvZHk6IGdldEJvZHkNCiAgICAgICAg
fSwNCg0KICAgICAgICBmZWF0dXJlczoge30sDQoNCiAgICAgICAgbW9kdWxlczogbW9kdWxlcywN
CiAgICAgICAgY29uZmlnOiB7DQogICAgICAgICAgICBhbGVydE9uRmFpbDogdHJ1ZSwNCiAgICAg
ICAgICAgIGFsZXJ0T25XYXJuOiBmYWxzZSwNCiAgICAgICAgICAgIHByZWZlclRleHRSYW5nZTog
ZmFsc2UNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBjb25zb2xlTG9nKG1zZykg
ew0KICAgICAgICBpZiAoaXNIb3N0T2JqZWN0KHdpbmRvdywgImNvbnNvbGUiKSAmJiBpc0hvc3RN
ZXRob2Qod2luZG93LmNvbnNvbGUsICJsb2ciKSkgew0KICAgICAgICAgICAgd2luZG93LmNvbnNv
bGUubG9nKG1zZyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGVydE9yTG9n
KG1zZywgc2hvdWxkQWxlcnQpIHsNCiAgICAgICAgaWYgKHNob3VsZEFsZXJ0KSB7DQogICAgICAg
ICAgICB3aW5kb3cuYWxlcnQobXNnKTsNCiAgICAgICAgfSBlbHNlICB7DQogICAgICAgICAgICBj
b25zb2xlTG9nKG1zZyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmYWlsKHJl
YXNvbikgew0KICAgICAgICBhcGkuaW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgICAgICBhcGkuc3Vw
cG9ydGVkID0gZmFsc2U7DQogICAgICAgIGFsZXJ0T3JMb2coIlJhbmd5IGlzIG5vdCBzdXBwb3J0
ZWQgb24gdGhpcyBwYWdlIGluIHlvdXIgYnJvd3Nlci4gUmVhc29uOiAiICsgcmVhc29uLCBhcGku
Y29uZmlnLmFsZXJ0T25GYWlsKTsNCiAgICB9DQoNCiAgICBhcGkuZmFpbCA9IGZhaWw7DQoNCiAg
ICBmdW5jdGlvbiB3YXJuKG1zZykgew0KICAgICAgICBhbGVydE9yTG9nKCJSYW5neSB3YXJuaW5n
OiAiICsgbXNnLCBhcGkuY29uZmlnLmFsZXJ0T25XYXJuKTsNCiAgICB9DQoNCiAgICBhcGkud2Fy
biA9IHdhcm47DQoNCiAgICAvLyBBZGQgdXRpbGl0eSBleHRlbmQoKSBtZXRob2QNCiAgICBpZiAo
e30uaGFzT3duUHJvcGVydHkpIHsNCiAgICAgICAgYXBpLnV0aWwuZXh0ZW5kID0gZnVuY3Rpb24o
b2JqLCBwcm9wcywgZGVlcCkgew0KICAgICAgICAgICAgdmFyIG8sIHA7DQogICAgICAgICAgICBm
b3IgKHZhciBpIGluIHByb3BzKSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blBy
b3BlcnR5KGkpKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBvYmpbaV07DQogICAgICAgICAg
ICAgICAgICAgIHAgPSBwcm9wc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgLy9pZiAoZGVlcCkg
YWxlcnQoW28gIT09IG51bGwsIHR5cGVvZiBvID09ICJvYmplY3QiLCBwICE9PSBudWxsLCB0eXBl
b2YgcCA9PSAib2JqZWN0Il0pDQogICAgICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIG8gIT09
IG51bGwgJiYgdHlwZW9mIG8gPT0gIm9iamVjdCIgJiYgcCAhPT0gbnVsbCAmJiB0eXBlb2YgcCA9
PSAib2JqZWN0Iikgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnV0aWwuZXh0ZW5kKG8s
IHAsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG9i
altpXSA9IHA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
cmV0dXJuIG9iajsNCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBmYWlsKCJoYXNP
d25Qcm9wZXJ0eSBub3Qgc3VwcG9ydGVkIik7DQogICAgfQ0KDQogICAgLy8gVGVzdCB3aGV0aGVy
IEFycmF5LnByb3RvdHlwZS5zbGljZSBjYW4gYmUgcmVsaWVkIG9uIGZvciBOb2RlTGlzdHMgYW5k
IHVzZSBhbiBhbHRlcm5hdGl2ZSB0b0FycmF5KCkgaWYgbm90DQogICAgKGZ1bmN0aW9uKCkgew0K
ICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAg
ZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpKTsNCiAgICAgICAg
dmFyIHNsaWNlID0gW10uc2xpY2U7DQogICAgICAgIHZhciB0b0FycmF5Ow0KICAgICAgICB0cnkg
ew0KICAgICAgICAgICAgaWYgKHNsaWNlLmNhbGwoZWwuY2hpbGROb2RlcywgMClbMF0ubm9kZVR5
cGUgPT0gMSkgew0KICAgICAgICAgICAgICAgIHRvQXJyYXkgPSBmdW5jdGlvbihhcnJheUxpa2Up
IHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXlMaWtlLCAwKTsN
CiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlKSB7
fQ0KDQogICAgICAgIGlmICghdG9BcnJheSkgew0KICAgICAgICAgICAgdG9BcnJheSA9IGZ1bmN0
aW9uKGFycmF5TGlrZSkgew0KICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTsNCiAgICAgICAg
ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXlMaWtlLmxlbmd0aDsgaSA8IGxlbjsg
KytpKSB7DQogICAgICAgICAgICAgICAgICAgIGFycltpXSA9IGFycmF5TGlrZVtpXTsNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGFycjsNCiAgICAgICAgICAgIH07
DQogICAgICAgIH0NCg0KICAgICAgICBhcGkudXRpbC50b0FycmF5ID0gdG9BcnJheTsNCiAgICB9
KSgpOw0KDQoNCiAgICAvLyBWZXJ5IHNpbXBsZSBldmVudCBoYW5kbGVyIHdyYXBwZXIgZnVuY3Rp
b24gdGhhdCBkb2Vzbid0IGF0dGVtcHQgdG8gc29sdmUgaXNzdWUgc3VjaCBhcyAidGhpcyIgaGFu
ZGxpbmcgb3INCiAgICAvLyBub3JtYWxpemF0aW9uIG9mIGV2ZW50IHByb3BlcnRpZXMNCiAgICB2
YXIgYWRkTGlzdGVuZXI7DQogICAgaWYgKGlzSG9zdE1ldGhvZChkb2N1bWVudCwgImFkZEV2ZW50
TGlzdGVuZXIiKSkgew0KICAgICAgICBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKG9iaiwgZXZlbnRU
eXBlLCBsaXN0ZW5lcikgew0KICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRU
eXBlLCBsaXN0ZW5lciwgZmFsc2UpOw0KICAgICAgICB9Ow0KICAgIH0gZWxzZSBpZiAoaXNIb3N0
TWV0aG9kKGRvY3VtZW50LCAiYXR0YWNoRXZlbnQiKSkgew0KICAgICAgICBhZGRMaXN0ZW5lciA9
IGZ1bmN0aW9uKG9iaiwgZXZlbnRUeXBlLCBsaXN0ZW5lcikgew0KICAgICAgICAgICAgb2JqLmF0
dGFjaEV2ZW50KCJvbiIgKyBldmVudFR5cGUsIGxpc3RlbmVyKTsNCiAgICAgICAgfTsNCiAgICB9
IGVsc2Ugew0KICAgICAgICBmYWlsKCJEb2N1bWVudCBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIGFk
ZEV2ZW50TGlzdGVuZXIgb3IgYXR0YWNoRXZlbnQgbWV0aG9kIik7DQogICAgfQ0KICAgIA0KICAg
IGFwaS51dGlsLmFkZExpc3RlbmVyID0gYWRkTGlzdGVuZXI7DQoNCiAgICB2YXIgaW5pdExpc3Rl
bmVycyA9IFtdOw0KICAgIA0KICAgIGZ1bmN0aW9uIGdldEVycm9yRGVzYyhleCkgew0KICAgICAg
ICByZXR1cm4gZXgubWVzc2FnZSB8fCBleC5kZXNjcmlwdGlvbiB8fCBTdHJpbmcoZXgpOw0KICAg
IH0NCg0KICAgIC8vIEluaXRpYWxpemF0aW9uDQogICAgZnVuY3Rpb24gaW5pdCgpIHsNCiAgICAg
ICAgaWYgKGFwaS5pbml0aWFsaXplZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9
DQogICAgICAgIHZhciB0ZXN0UmFuZ2U7DQogICAgICAgIHZhciBpbXBsZW1lbnRzRG9tUmFuZ2Ug
PSBmYWxzZSwgaW1wbGVtZW50c1RleHRSYW5nZSA9IGZhbHNlOw0KDQogICAgICAgIC8vIEZpcnN0
LCBwZXJmb3JtIGJhc2ljIGZlYXR1cmUgdGVzdHMNCg0KICAgICAgICBpZiAoaXNIb3N0TWV0aG9k
KGRvY3VtZW50LCAiY3JlYXRlUmFuZ2UiKSkgew0KICAgICAgICAgICAgdGVzdFJhbmdlID0gZG9j
dW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIGlmIChhcmVIb3N0TWV0aG9kcyh0ZXN0
UmFuZ2UsIGRvbVJhbmdlTWV0aG9kcykgJiYgYXJlSG9zdFByb3BlcnRpZXModGVzdFJhbmdlLCBk
b21SYW5nZVByb3BlcnRpZXMpKSB7DQogICAgICAgICAgICAgICAgaW1wbGVtZW50c0RvbVJhbmdl
ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRlc3RSYW5nZS5kZXRhY2goKTsN
CiAgICAgICAgfQ0KDQogICAgICAgIHZhciBib2R5ID0gZ2V0Qm9keShkb2N1bWVudCk7DQogICAg
ICAgIGlmICghYm9keSB8fCBib2R5Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT0gImJvZHkiKSB7
DQogICAgICAgICAgICBmYWlsKCJObyBib2R5IGVsZW1lbnQgZm91bmQiKTsNCiAgICAgICAgICAg
IHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChib2R5ICYmIGlzSG9zdE1ldGhvZChi
b2R5LCAiY3JlYXRlVGV4dFJhbmdlIikpIHsNCiAgICAgICAgICAgIHRlc3RSYW5nZSA9IGJvZHku
Y3JlYXRlVGV4dFJhbmdlKCk7DQogICAgICAgICAgICBpZiAoaXNUZXh0UmFuZ2UodGVzdFJhbmdl
KSkgew0KICAgICAgICAgICAgICAgIGltcGxlbWVudHNUZXh0UmFuZ2UgPSB0cnVlOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFpbXBsZW1lbnRzRG9tUmFuZ2UgJiYg
IWltcGxlbWVudHNUZXh0UmFuZ2UpIHsNCiAgICAgICAgICAgIGZhaWwoIk5laXRoZXIgUmFuZ2Ug
bm9yIFRleHRSYW5nZSBhcmUgYXZhaWxhYmxlIik7DQogICAgICAgICAgICByZXR1cm47DQogICAg
ICAgIH0NCg0KICAgICAgICBhcGkuaW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgICAgICBhcGkuZmVh
dHVyZXMgPSB7DQogICAgICAgICAgICBpbXBsZW1lbnRzRG9tUmFuZ2U6IGltcGxlbWVudHNEb21S
YW5nZSwNCiAgICAgICAgICAgIGltcGxlbWVudHNUZXh0UmFuZ2U6IGltcGxlbWVudHNUZXh0UmFu
Z2UNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBJbml0aWFsaXplIG1vZHVsZXMNCiAgICAgICAg
dmFyIG1vZHVsZSwgZXJyb3JNZXNzYWdlOw0KICAgICAgICBmb3IgKHZhciBtb2R1bGVOYW1lIGlu
IG1vZHVsZXMpIHsNCiAgICAgICAgICAgIGlmICggKG1vZHVsZSA9IG1vZHVsZXNbbW9kdWxlTmFt
ZV0pIGluc3RhbmNlb2YgTW9kdWxlICkgew0KICAgICAgICAgICAgICAgIG1vZHVsZS5pbml0KCk7
DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENhbGwgaW5p
dCBsaXN0ZW5lcnMNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGluaXRMaXN0ZW5lcnMu
bGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAg
ICAgaW5pdExpc3RlbmVyc1tpXShhcGkpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAg
ICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAiUmFuZ3kgaW5pdCBsaXN0ZW5lciB0aHJldyBh
biBleGNlcHRpb24uIENvbnRpbnVpbmcuIERldGFpbDogIiArIGdldEVycm9yRGVzYyhleCk7DQog
ICAgICAgICAgICAgICAgY29uc29sZUxvZyhlcnJvck1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0K
ICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gQWxsb3cgZXh0ZXJuYWwgc2NyaXB0cyB0byBpbml0
aWFsaXplIHRoaXMgbGlicmFyeSBpbiBjYXNlIGl0J3MgbG9hZGVkIGFmdGVyIHRoZSBkb2N1bWVu
dCBoYXMgbG9hZGVkDQogICAgYXBpLmluaXQgPSBpbml0Ow0KDQogICAgLy8gRXhlY3V0ZSBsaXN0
ZW5lciBpbW1lZGlhdGVseSBpZiBhbHJlYWR5IGluaXRpYWxpemVkDQogICAgYXBpLmFkZEluaXRM
aXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7DQogICAgICAgIGlmIChhcGkuaW5pdGlhbGl6
ZWQpIHsNCiAgICAgICAgICAgIGxpc3RlbmVyKGFwaSk7DQogICAgICAgIH0gZWxzZSB7DQogICAg
ICAgICAgICBpbml0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9DQogICAgfTsN
Cg0KICAgIHZhciBjcmVhdGVNaXNzaW5nTmF0aXZlQXBpTGlzdGVuZXJzID0gW107DQoNCiAgICBh
cGkuYWRkQ3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIp
IHsNCiAgICAgICAgY3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVycy5wdXNoKGxpc3RlbmVy
KTsNCiAgICB9Ow0KDQogICAgZnVuY3Rpb24gY3JlYXRlTWlzc2luZ05hdGl2ZUFwaSh3aW4pIHsN
CiAgICAgICAgd2luID0gd2luIHx8IHdpbmRvdzsNCiAgICAgICAgaW5pdCgpOw0KDQogICAgICAg
IC8vIE5vdGlmeSBsaXN0ZW5lcnMNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNyZWF0
ZU1pc3NpbmdOYXRpdmVBcGlMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAg
ICAgICAgIGNyZWF0ZU1pc3NpbmdOYXRpdmVBcGlMaXN0ZW5lcnNbaV0od2luKTsNCiAgICAgICAg
fQ0KICAgIH0NCg0KICAgIGFwaS5jcmVhdGVNaXNzaW5nTmF0aXZlQXBpID0gY3JlYXRlTWlzc2lu
Z05hdGl2ZUFwaTsNCg0KICAgIGZ1bmN0aW9uIE1vZHVsZShuYW1lLCBpbml0aWFsaXplcikgew0K
ICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFs
c2U7DQogICAgICAgIHRoaXMuc3VwcG9ydGVkID0gZmFsc2U7DQogICAgICAgIHRoaXMuaW5pdCA9
IGluaXRpYWxpemVyOw0KICAgIH0NCg0KICAgIE1vZHVsZS5wcm90b3R5cGUgPSB7DQogICAgICAg
IGZhaWw6IGZ1bmN0aW9uKHJlYXNvbikgew0KICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9
IHRydWU7DQogICAgICAgICAgICB0aGlzLnN1cHBvcnRlZCA9IGZhbHNlOw0KICAgICAgICAgICAg
dGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgJyIgKyB0aGlzLm5hbWUgKyAiJyBmYWlsZWQgdG8gbG9h
ZDogIiArIHJlYXNvbik7DQogICAgICAgIH0sDQoNCiAgICAgICAgd2FybjogZnVuY3Rpb24obXNn
KSB7DQogICAgICAgICAgICBhcGkud2FybigiTW9kdWxlICIgKyB0aGlzLm5hbWUgKyAiOiAiICsg
bXNnKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZXByZWNhdGlvbk5vdGljZTogZnVuY3Rpb24o
ZGVwcmVjYXRlZCwgcmVwbGFjZW1lbnQpIHsNCiAgICAgICAgICAgIGFwaS53YXJuKCJERVBSRUNB
VEVEOiAiICsgZGVwcmVjYXRlZCArICIgaW4gbW9kdWxlICIgKyB0aGlzLm5hbWUgKyAiaXMgZGVw
cmVjYXRlZC4gUGxlYXNlIHVzZSAiDQogICAgICAgICAgICAgICAgKyByZXBsYWNlbWVudCArICIg
aW5zdGVhZCIpOw0KICAgICAgICB9LA0KDQogICAgICAgIGNyZWF0ZUVycm9yOiBmdW5jdGlvbiht
c2cpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoIkVycm9yIGluIFJhbmd5ICIgKyB0
aGlzLm5hbWUgKyAiIG1vZHVsZTogIiArIG1zZyk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAg
YXBpLmNyZWF0ZU1vZHVsZSA9IGZ1bmN0aW9uKG5hbWUsIGluaXRGdW5jKSB7DQogICAgICAgIHZh
ciBtb2R1bGUgPSBuZXcgTW9kdWxlKG5hbWUsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYg
KCFtb2R1bGUuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6
ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGlu
aXRGdW5jKGFwaSwgbW9kdWxlKTsNCiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLnN1cHBvcnRl
ZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAg
ICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICJNb2R1bGUgJyIgKyBuYW1lICsgIicgZmFpbGVkIHRv
IGxvYWQ6ICIgKyBnZXRFcnJvckRlc2MoZXgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xl
TG9nKGVycm9yTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9KTsNCiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG1vZHVsZTsNCiAgICB9Ow0KDQogICAg
YXBpLnJlcXVpcmVNb2R1bGVzID0gZnVuY3Rpb24obW9kdWxlTmFtZXMpIHsNCiAgICAgICAgZm9y
ICh2YXIgaSA9IDAsIGxlbiA9IG1vZHVsZU5hbWVzLmxlbmd0aCwgbW9kdWxlLCBtb2R1bGVOYW1l
OyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIG1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lc1tp
XTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbW9kdWxlID0gbW9kdWxlc1ttb2R1bGVOYW1l
XTsNCiAgICAgICAgICAgIGlmICghbW9kdWxlIHx8ICEobW9kdWxlIGluc3RhbmNlb2YgTW9kdWxl
KSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicmVxdWlyZWQgbW9kdWxlICci
ICsgbW9kdWxlTmFtZSArICInIG5vdCBmb3VuZCIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICBtb2R1bGUuaW5pdCgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIW1vZHVs
ZS5zdXBwb3J0ZWQpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInJlcXVpcmVk
IG1vZHVsZSAnIiArIG1vZHVsZU5hbWUgKyAiJyBub3Qgc3VwcG9ydGVkIik7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgIC8vIFdhaXQgZm9yIGRvY3Vt
ZW50IHRvIGxvYWQgYmVmb3JlIHJ1bm5pbmcgdGVzdHMNCg0KICAgIHZhciBkb2NSZWFkeSA9IGZh
bHNlOw0KDQogICAgdmFyIGxvYWRIYW5kbGVyID0gZnVuY3Rpb24oZSkgew0KICAgICAgICBpZiAo
IWRvY1JlYWR5KSB7DQogICAgICAgICAgICBkb2NSZWFkeSA9IHRydWU7DQogICAgICAgICAgICBp
ZiAoIWFwaS5pbml0aWFsaXplZCkgew0KICAgICAgICAgICAgICAgIGluaXQoKTsNCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvLyBUZXN0IHdoZXRoZXIgd2UgaGF2ZSB3
aW5kb3cgYW5kIGRvY3VtZW50IG9iamVjdHMgdGhhdCB3ZSB3aWxsIG5lZWQNCiAgICBpZiAodHlw
ZW9mIHdpbmRvdyA9PSBVTkRFRklORUQpIHsNCiAgICAgICAgZmFpbCgiTm8gd2luZG93IGZvdW5k
Iik7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PSBV
TkRFRklORUQpIHsNCiAgICAgICAgZmFpbCgiTm8gZG9jdW1lbnQgZm91bmQiKTsNCiAgICAgICAg
cmV0dXJuOw0KICAgIH0NCg0KICAgIGlmIChpc0hvc3RNZXRob2QoZG9jdW1lbnQsICJhZGRFdmVu
dExpc3RlbmVyIikpIHsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29u
dGVudExvYWRlZCIsIGxvYWRIYW5kbGVyLCBmYWxzZSk7DQogICAgfQ0KDQogICAgLy8gQWRkIGEg
ZmFsbGJhY2sgaW4gY2FzZSB0aGUgRE9NQ29udGVudExvYWRlZCBldmVudCBpc24ndCBzdXBwb3J0
ZWQNCiAgICBhZGRMaXN0ZW5lcih3aW5kb3csICJsb2FkIiwgbG9hZEhhbmRsZXIpOw0KDQogICAg
cmV0dXJuIGFwaTsNCn0pKCk7DQoKcmFuZ3kuY3JlYXRlTW9kdWxlKCJEb21VdGlsIiwgZnVuY3Rp
b24oYXBpLCBtb2R1bGUpIHsNCiAgICB2YXIgVU5ERUYgPSAidW5kZWZpbmVkIjsNCiAgICB2YXIg
dXRpbCA9IGFwaS51dGlsOw0KDQogICAgLy8gUGVyZm9ybSBmZWF0dXJlIHRlc3RzDQogICAgaWYg
KCF1dGlsLmFyZUhvc3RNZXRob2RzKGRvY3VtZW50LCBbImNyZWF0ZURvY3VtZW50RnJhZ21lbnQi
LCAiY3JlYXRlRWxlbWVudCIsICJjcmVhdGVUZXh0Tm9kZSJdKSkgew0KICAgICAgICBtb2R1bGUu
ZmFpbCgiZG9jdW1lbnQgbWlzc2luZyBhIE5vZGUgY3JlYXRpb24gbWV0aG9kIik7DQogICAgfQ0K
DQogICAgaWYgKCF1dGlsLmlzSG9zdE1ldGhvZChkb2N1bWVudCwgImdldEVsZW1lbnRzQnlUYWdO
YW1lIikpIHsNCiAgICAgICAgbW9kdWxlLmZhaWwoImRvY3VtZW50IG1pc3NpbmcgZ2V0RWxlbWVu
dHNCeVRhZ05hbWUgbWV0aG9kIik7DQogICAgfQ0KDQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3Jl
YXRlRWxlbWVudCgiZGl2Iik7DQogICAgaWYgKCF1dGlsLmFyZUhvc3RNZXRob2RzKGVsLCBbImlu
c2VydEJlZm9yZSIsICJhcHBlbmRDaGlsZCIsICJjbG9uZU5vZGUiXSB8fA0KICAgICAgICAgICAg
IXV0aWwuYXJlSG9zdE9iamVjdHMoZWwsIFsicHJldmlvdXNTaWJsaW5nIiwgIm5leHRTaWJsaW5n
IiwgImNoaWxkTm9kZXMiLCAicGFyZW50Tm9kZSJdKSkpIHsNCiAgICAgICAgbW9kdWxlLmZhaWwo
IkluY29tcGxldGUgRWxlbWVudCBpbXBsZW1lbnRhdGlvbiIpOw0KICAgIH0NCg0KICAgIC8vIGlu
bmVySFRNTCBpcyByZXF1aXJlZCBmb3IgUmFuZ2UncyBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQg
bWV0aG9kDQogICAgaWYgKCF1dGlsLmlzSG9zdFByb3BlcnR5KGVsLCAiaW5uZXJIVE1MIikpIHsN
CiAgICAgICAgbW9kdWxlLmZhaWwoIkVsZW1lbnQgaXMgbWlzc2luZyBpbm5lckhUTUwgcHJvcGVy
dHkiKTsNCiAgICB9DQoNCiAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9k
ZSgidGVzdCIpOw0KICAgIGlmICghdXRpbC5hcmVIb3N0TWV0aG9kcyh0ZXh0Tm9kZSwgWyJzcGxp
dFRleHQiLCAiZGVsZXRlRGF0YSIsICJpbnNlcnREYXRhIiwgImFwcGVuZERhdGEiLCAiY2xvbmVO
b2RlIl0gfHwNCiAgICAgICAgICAgICF1dGlsLmFyZUhvc3RPYmplY3RzKGVsLCBbInByZXZpb3Vz
U2libGluZyIsICJuZXh0U2libGluZyIsICJjaGlsZE5vZGVzIiwgInBhcmVudE5vZGUiXSkgfHwN
CiAgICAgICAgICAgICF1dGlsLmFyZUhvc3RQcm9wZXJ0aWVzKHRleHROb2RlLCBbImRhdGEiXSkp
KSB7DQogICAgICAgIG1vZHVsZS5mYWlsKCJJbmNvbXBsZXRlIFRleHQgTm9kZSBpbXBsZW1lbnRh
dGlvbiIpOw0KICAgIH0NCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICAvLyBSZW1vdmVkIHVzZSBvZiBpbmRleE9m
IGJlY2F1c2Ugb2YgYSBiaXphcnJlIGJ1ZyBpbiBPcGVyYSB0aGF0IGlzIHRocm93biBpbiBvbmUg
b2YgdGhlIEFjaWQzIHRlc3RzLiBJIGhhdmVuJ3QgYmVlbg0KICAgIC8vIGFibGUgdG8gcmVwbGlj
YXRlIGl0IG91dHNpZGUgb2YgdGhlIHRlc3QuIFRoZSBidWcgaXMgdGhhdCBpbmRleE9mIHJldHVy
bnMgLTEgd2hlbiBjYWxsZWQgb24gYW4gQXJyYXkgdGhhdA0KICAgIC8vIGNvbnRhaW5zIGp1c3Qg
dGhlIGRvY3VtZW50IGFzIGEgc2luZ2xlIGVsZW1lbnQgYW5kIHRoZSB2YWx1ZSBzZWFyY2hlZCBm
b3IgaXMgdGhlIGRvY3VtZW50Lg0KICAgIHZhciBhcnJheUNvbnRhaW5zID0gLypBcnJheS5wcm90
b3R5cGUuaW5kZXhPZiA/DQogICAgICAgIGZ1bmN0aW9uKGFyciwgdmFsKSB7DQogICAgICAgICAg
ICByZXR1cm4gYXJyLmluZGV4T2YodmFsKSA+IC0xOw0KICAgICAgICB9OiovDQoNCiAgICAgICAg
ZnVuY3Rpb24oYXJyLCB2YWwpIHsNCiAgICAgICAgICAgIHZhciBpID0gYXJyLmxlbmd0aDsNCiAg
ICAgICAgICAgIHdoaWxlIChpLS0pIHsNCiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09PSB2
YWwpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0K
DQogICAgLy8gT3BlcmEgMTEgcHV0cyBIVE1MIGVsZW1lbnRzIGluIHRoZSBudWxsIG5hbWVzcGFj
ZSwgaXQgc2VlbXMsIGFuZCBJRSA3IGhhcyB1bmRlZmluZWQgbmFtZXNwYWNlVVJJDQogICAgZnVu
Y3Rpb24gaXNIdG1sTmFtZXNwYWNlKG5vZGUpIHsNCiAgICAgICAgdmFyIG5zOw0KICAgICAgICBy
ZXR1cm4gdHlwZW9mIG5vZGUubmFtZXNwYWNlVVJJID09IFVOREVGIHx8ICgobnMgPSBub2RlLm5h
bWVzcGFjZVVSSSkgPT09IG51bGwgfHwgbnMgPT0gImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0
bWwiKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBwYXJlbnRFbGVtZW50KG5vZGUpIHsNCiAgICAg
ICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgcmV0dXJuIChwYXJlbnQu
bm9kZVR5cGUgPT0gMSkgPyBwYXJlbnQgOiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdl
dE5vZGVJbmRleChub2RlKSB7DQogICAgICAgIHZhciBpID0gMDsNCiAgICAgICAgd2hpbGUoIChu
b2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmcpICkgew0KICAgICAgICAgICAgKytpOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldE5vZGVMZW5n
dGgobm9kZSkgew0KICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHsNCiAgICAgICAgICAg
IGNhc2UgNzoNCiAgICAgICAgICAgIGNhc2UgMTA6DQogICAgICAgICAgICAgICAgcmV0dXJuIDA7
DQogICAgICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICBjYXNlIDg6DQogICAgICAgICAgICAg
ICAgcmV0dXJuIG5vZGUubGVuZ3RoOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAg
ICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgIH0NCg0K
ICAgIGZ1bmN0aW9uIGdldENvbW1vbkFuY2VzdG9yKG5vZGUxLCBub2RlMikgew0KICAgICAgICB2
YXIgYW5jZXN0b3JzID0gW10sIG47DQogICAgICAgIGZvciAobiA9IG5vZGUxOyBuOyBuID0gbi5w
YXJlbnROb2RlKSB7DQogICAgICAgICAgICBhbmNlc3RvcnMucHVzaChuKTsNCiAgICAgICAgfQ0K
DQogICAgICAgIGZvciAobiA9IG5vZGUyOyBuOyBuID0gbi5wYXJlbnROb2RlKSB7DQogICAgICAg
ICAgICBpZiAoYXJyYXlDb250YWlucyhhbmNlc3RvcnMsIG4pKSB7DQogICAgICAgICAgICAgICAg
cmV0dXJuIG47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbnVs
bDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc0FuY2VzdG9yT2YoYW5jZXN0b3IsIGRlc2NlbmRh
bnQsIHNlbGZJc0FuY2VzdG9yKSB7DQogICAgICAgIHZhciBuID0gc2VsZklzQW5jZXN0b3IgPyBk
ZXNjZW5kYW50IDogZGVzY2VuZGFudC5wYXJlbnROb2RlOw0KICAgICAgICB3aGlsZSAobikgew0K
ICAgICAgICAgICAgaWYgKG4gPT09IGFuY2VzdG9yKSB7DQogICAgICAgICAgICAgICAgcmV0dXJu
IHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG4gPSBuLnBhcmVu
dE5vZGU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0K
ICAgIH0NCg0KICAgIGZ1bmN0aW9uIGlzT3JJc0FuY2VzdG9yT2YoYW5jZXN0b3IsIGRlc2NlbmRh
bnQpIHsNCiAgICAgICAgcmV0dXJuIGlzQW5jZXN0b3JPZihhbmNlc3RvciwgZGVzY2VuZGFudCwg
dHJ1ZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdEFuY2VzdG9ySW4obm9kZSwg
YW5jZXN0b3IsIHNlbGZJc0FuY2VzdG9yKSB7DQogICAgICAgIHZhciBwLCBuID0gc2VsZklzQW5j
ZXN0b3IgPyBub2RlIDogbm9kZS5wYXJlbnROb2RlOw0KICAgICAgICB3aGlsZSAobikgew0KICAg
ICAgICAgICAgcCA9IG4ucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIGlmIChwID09PSBhbmNlc3Rv
cikgew0KICAgICAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgbiA9IHA7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gaXNDaGFyYWN0ZXJEYXRhTm9kZShub2RlKSB7DQogICAgICAgIHZhciB0ID0gbm9k
ZS5ub2RlVHlwZTsNCiAgICAgICAgcmV0dXJuIHQgPT0gMyB8fCB0ID09IDQgfHwgdCA9PSA4IDsg
Ly8gVGV4dCwgQ0RhdGFTZWN0aW9uIG9yIENvbW1lbnQNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBp
c1RleHRPckNvbW1lbnROb2RlKG5vZGUpIHsNCiAgICAgICAgaWYgKCFub2RlKSB7DQogICAgICAg
ICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHQgPSBub2RlLm5vZGVU
eXBlOw0KICAgICAgICByZXR1cm4gdCA9PSAzIHx8IHQgPT0gOCA7IC8vIFRleHQgb3IgQ29tbWVu
dA0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGluc2VydEFmdGVyKG5vZGUsIHByZWNlZGluZ05vZGUp
IHsNCiAgICAgICAgdmFyIG5leHROb2RlID0gcHJlY2VkaW5nTm9kZS5uZXh0U2libGluZywgcGFy
ZW50ID0gcHJlY2VkaW5nTm9kZS5wYXJlbnROb2RlOw0KICAgICAgICBpZiAobmV4dE5vZGUpIHsN
CiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dE5vZGUpOw0KICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBub2RlOw0KICAgIH0NCg0KICAgIC8vIE5vdGUgdGhhdCB3ZSBj
YW5ub3QgdXNlIHNwbGl0VGV4dCgpIGJlY2F1c2UgaXQgaXMgYnVncmlkZGVuIGluIElFIDkuDQog
ICAgZnVuY3Rpb24gc3BsaXREYXRhTm9kZShub2RlLCBpbmRleCwgcG9zaXRpb25zVG9QcmVzZXJ2
ZSkgew0KICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKTsNCiAgICAg
ICAgbmV3Tm9kZS5kZWxldGVEYXRhKDAsIGluZGV4KTsNCiAgICAgICAgbm9kZS5kZWxldGVEYXRh
KGluZGV4LCBub2RlLmxlbmd0aCAtIGluZGV4KTsNCiAgICAgICAgaW5zZXJ0QWZ0ZXIobmV3Tm9k
ZSwgbm9kZSk7DQoNCiAgICAgICAgLy8gUHJlc2VydmUgcG9zaXRpb25zDQogICAgICAgIGlmIChw
b3NpdGlvbnNUb1ByZXNlcnZlKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgcG9zaXRp
b247IHBvc2l0aW9uID0gcG9zaXRpb25zVG9QcmVzZXJ2ZVtpKytdOyApIHsNCiAgICAgICAgICAg
ICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBwb3NpdGlvbiB3YXMgaW5zaWRlIHRoZSBwb3J0aW9u
IG9mIG5vZGUgYWZ0ZXIgdGhlIHNwbGl0IHBvaW50DQogICAgICAgICAgICAgICAgaWYgKHBvc2l0
aW9uLm5vZGUgPT0gbm9kZSAmJiBwb3NpdGlvbi5vZmZzZXQgPiBpbmRleCkgew0KICAgICAgICAg
ICAgICAgICAgICBwb3NpdGlvbi5ub2RlID0gbmV3Tm9kZTsNCiAgICAgICAgICAgICAgICAgICAg
cG9zaXRpb24ub2Zmc2V0IC09IGluZGV4Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHBvc2l0aW9uIGlzIGEgbm9kZSBvZmZz
ZXQgd2l0aGluIG5vZGUncyBwYXJlbnQNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlv
bi5ub2RlID09IG5vZGUucGFyZW50Tm9kZSAmJiBwb3NpdGlvbi5vZmZzZXQgPiBnZXROb2RlSW5k
ZXgobm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgKytwb3NpdGlvbi5vZmZzZXQ7DQogICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBu
ZXdOb2RlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldERvY3VtZW50KG5vZGUpIHsNCiAgICAg
ICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gOSkgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGU7DQog
ICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUub3duZXJEb2N1bWVudCAhPSBVTkRFRikgew0K
ICAgICAgICAgICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDsNCiAgICAgICAgfSBlbHNlIGlm
ICh0eXBlb2Ygbm9kZS5kb2N1bWVudCAhPSBVTkRFRikgew0KICAgICAgICAgICAgcmV0dXJuIG5v
ZGUuZG9jdW1lbnQ7DQogICAgICAgIH0gZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSB7DQogICAg
ICAgICAgICByZXR1cm4gZ2V0RG9jdW1lbnQobm9kZS5wYXJlbnROb2RlKTsNCiAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiZ2V0RG9jdW1lbnQ6
IG5vIGRvY3VtZW50IGZvdW5kIGZvciBub2RlIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBnZXRXaW5kb3cobm9kZSkgew0KICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnQo
bm9kZSk7DQogICAgICAgIGlmICh0eXBlb2YgZG9jLmRlZmF1bHRWaWV3ICE9IFVOREVGKSB7DQog
ICAgICAgICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5
cGVvZiBkb2MucGFyZW50V2luZG93ICE9IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gZG9j
LnBhcmVudFdpbmRvdzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVs
ZS5jcmVhdGVFcnJvcigiQ2Fubm90IGdldCBhIHdpbmRvdyBvYmplY3QgZm9yIG5vZGUiKTsNCiAg
ICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElmcmFtZURvY3VtZW50KGlmcmFtZUVs
KSB7DQogICAgICAgIGlmICh0eXBlb2YgaWZyYW1lRWwuY29udGVudERvY3VtZW50ICE9IFVOREVG
KSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudERvY3VtZW50Ow0KICAgICAg
ICB9IGVsc2UgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50V2luZG93ICE9IFVOREVGKSB7DQog
ICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudFdpbmRvdy5kb2N1bWVudDsNCiAgICAg
ICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiZ2V0SWZy
YW1lRG9jdW1lbnQ6IE5vIERvY3VtZW50IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1lbnQi
KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElmcmFtZVdpbmRvdyhpZnJh
bWVFbCkgew0KICAgICAgICBpZiAodHlwZW9mIGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cgIT0gVU5E
RUYpIHsNCiAgICAgICAgICAgIHJldHVybiBpZnJhbWVFbC5jb250ZW50V2luZG93Ow0KICAgICAg
ICB9IGVsc2UgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50RG9jdW1lbnQgIT0gVU5ERUYpIHsN
CiAgICAgICAgICAgIHJldHVybiBpZnJhbWVFbC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7
DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aHJvdyBtb2R1bGUuY3JlYXRlRXJyb3Io
ImdldElmcmFtZVdpbmRvdzogTm8gV2luZG93IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1l
bnQiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIFRoaXMgbG9va3MgYmFkLiBJcyBpdCB3
b3J0aCBpdD8NCiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHsNCiAgICAgICAgcmV0dXJuIG9i
aiAmJiB1dGlsLmlzSG9zdE1ldGhvZChvYmosICJzZXRUaW1lb3V0IikgJiYgdXRpbC5pc0hvc3RP
YmplY3Qob2JqLCAiZG9jdW1lbnQiKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDb250ZW50
RG9jdW1lbnQob2JqLCBtb2R1bGUsIG1ldGhvZE5hbWUpIHsNCiAgICAgICAgdmFyIGRvYzsNCg0K
ICAgICAgICBpZiAoIW9iaikgew0KICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQ7DQogICAgICAg
IH0NCg0KICAgICAgICAvLyBUZXN0IGlmIGEgRE9NIG5vZGUgaGFzIGJlZW4gcGFzc2VkIGFuZCBv
YnRhaW4gYSBkb2N1bWVudCBvYmplY3QgZm9yIGl0IGlmIHNvDQogICAgICAgIGVsc2UgaWYgKHV0
aWwuaXNIb3N0UHJvcGVydHkob2JqLCAibm9kZVR5cGUiKSkgew0KICAgICAgICAgICAgZG9jID0g
KG9iai5ub2RlVHlwZSA9PSAxICYmIG9iai50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gImlmcmFt
ZSIpDQogICAgICAgICAgICAgICAgPyBnZXRJZnJhbWVEb2N1bWVudChvYmopIDogZ2V0RG9jdW1l
bnQob2JqKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFRlc3QgaWYgdGhlIGRvYyBwYXJhbWV0
ZXIgYXBwZWFycyB0byBiZSBhIFdpbmRvdyBvYmplY3QNCiAgICAgICAgZWxzZSBpZiAoaXNXaW5k
b3cob2JqKSkgew0KICAgICAgICAgICAgZG9jID0gb2JqLmRvY3VtZW50Ow0KICAgICAgICB9DQoN
CiAgICAgICAgaWYgKCFkb2MpIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJv
cihtZXRob2ROYW1lICsgIigpOiBQYXJhbWV0ZXIgbXVzdCBiZSBhIFdpbmRvdyBvYmplY3Qgb3Ig
RE9NIG5vZGUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBkb2M7DQogICAgfQ0KDQog
ICAgZnVuY3Rpb24gZ2V0Um9vdENvbnRhaW5lcihub2RlKSB7DQogICAgICAgIHZhciBwYXJlbnQ7
DQogICAgICAgIHdoaWxlICggKHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZSkgKSB7DQogICAgICAg
ICAgICBub2RlID0gcGFyZW50Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiBub2RlOw0KICAg
IH0NCg0KICAgIGZ1bmN0aW9uIGNvbXBhcmVQb2ludHMobm9kZUEsIG9mZnNldEEsIG5vZGVCLCBv
ZmZzZXRCKSB7DQogICAgICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwt
Mi1UcmF2ZXJzYWwtUmFuZ2UvcmFuZ2VzLmh0bWwjTGV2ZWwtMi1SYW5nZS1Db21wYXJpbmcNCiAg
ICAgICAgdmFyIG5vZGVDLCByb290LCBjaGlsZEEsIGNoaWxkQiwgbjsNCiAgICAgICAgaWYgKG5v
ZGVBID09IG5vZGVCKSB7DQogICAgICAgICAgICAvLyBDYXNlIDE6IG5vZGVzIGFyZSB0aGUgc2Ft
ZQ0KICAgICAgICAgICAgcmV0dXJuIG9mZnNldEEgPT09IG9mZnNldEIgPyAwIDogKG9mZnNldEEg
PCBvZmZzZXRCKSA/IC0xIDogMTsNCiAgICAgICAgfSBlbHNlIGlmICggKG5vZGVDID0gZ2V0Q2xv
c2VzdEFuY2VzdG9ySW4obm9kZUIsIG5vZGVBLCB0cnVlKSkgKSB7DQogICAgICAgICAgICAvLyBD
YXNlIDI6IG5vZGUgQyAoY29udGFpbmVyIEIgb3IgYW4gYW5jZXN0b3IpIGlzIGEgY2hpbGQgbm9k
ZSBvZiBBDQogICAgICAgICAgICByZXR1cm4gb2Zmc2V0QSA8PSBnZXROb2RlSW5kZXgobm9kZUMp
ID8gLTEgOiAxOw0KICAgICAgICB9IGVsc2UgaWYgKCAobm9kZUMgPSBnZXRDbG9zZXN0QW5jZXN0
b3JJbihub2RlQSwgbm9kZUIsIHRydWUpKSApIHsNCiAgICAgICAgICAgIC8vIENhc2UgMzogbm9k
ZSBDIChjb250YWluZXIgQSBvciBhbiBhbmNlc3RvcikgaXMgYSBjaGlsZCBub2RlIG9mIEINCiAg
ICAgICAgICAgIHJldHVybiBnZXROb2RlSW5kZXgobm9kZUMpIDwgb2Zmc2V0QiAgPyAtMSA6IDE7
DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBDYXNlIDQ6IGNvbnRhaW5lcnMgYXJl
IHNpYmxpbmdzIG9yIGRlc2NlbmRhbnRzIG9mIHNpYmxpbmdzDQogICAgICAgICAgICByb290ID0g
Z2V0Q29tbW9uQW5jZXN0b3Iobm9kZUEsIG5vZGVCKTsNCiAgICAgICAgICAgIGNoaWxkQSA9IChu
b2RlQSA9PT0gcm9vdCkgPyByb290IDogZ2V0Q2xvc2VzdEFuY2VzdG9ySW4obm9kZUEsIHJvb3Qs
IHRydWUpOw0KICAgICAgICAgICAgY2hpbGRCID0gKG5vZGVCID09PSByb290KSA/IHJvb3QgOiBn
ZXRDbG9zZXN0QW5jZXN0b3JJbihub2RlQiwgcm9vdCwgdHJ1ZSk7DQoNCiAgICAgICAgICAgIGlm
IChjaGlsZEEgPT09IGNoaWxkQikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkbid0
IGJlIHBvc3NpYmxlDQogICAgICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJj
b21wYXJlUG9pbnRzIGdvdCB0byBjYXNlIDQgYW5kIGNoaWxkQSBhbmQgY2hpbGRCIGFyZSB0aGUg
c2FtZSEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbiA9IHJvb3Qu
Zmlyc3RDaGlsZDsNCiAgICAgICAgICAgICAgICB3aGlsZSAobikgew0KICAgICAgICAgICAgICAg
ICAgICBpZiAobiA9PT0gY2hpbGRBKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
LTE7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gY2hpbGRCKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgICAgICBuID0gbi5uZXh0U2libGluZzsNCiAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgLy8gVGVzdCBm
b3IgSUUncyBjcmFzaCAoSUUgNi83KSBvciBleGNlcHRpb24gKElFID49IDgpIHdoZW4gYSByZWZl
cmVuY2UgdG8gZ2FyYmFnZS1jb2xsZWN0ZWQgdGV4dCBub2RlIGlzIHF1ZXJpZWQNCiAgICB2YXIg
Y3Jhc2h5VGV4dE5vZGVzID0gZmFsc2U7DQoNCiAgICBmdW5jdGlvbiBpc0Jyb2tlbk5vZGUobm9k
ZSkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlOw0KICAgICAg
ICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIChmdW5jdGlvbigpIHsNCiAgICAg
ICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYiIpOw0KICAgICAgICBlbC5pbm5l
ckhUTUwgPSAiMSI7DQogICAgICAgIHZhciB0ZXh0Tm9kZSA9IGVsLmZpcnN0Q2hpbGQ7DQogICAg
ICAgIGVsLmlubmVySFRNTCA9ICI8YnI+IjsNCiAgICAgICAgY3Jhc2h5VGV4dE5vZGVzID0gaXNC
cm9rZW5Ob2RlKHRleHROb2RlKTsNCg0KICAgICAgICBhcGkuZmVhdHVyZXMuY3Jhc2h5VGV4dE5v
ZGVzID0gY3Jhc2h5VGV4dE5vZGVzOw0KICAgIH0pKCk7DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgZnVuY3Rp
b24gaW5zcGVjdE5vZGUobm9kZSkgew0KICAgICAgICBpZiAoIW5vZGUpIHsNCiAgICAgICAgICAg
IHJldHVybiAiW05vIG5vZGVdIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoY3Jhc2h5VGV4dE5v
ZGVzICYmIGlzQnJva2VuTm9kZShub2RlKSkgew0KICAgICAgICAgICAgcmV0dXJuICJbQnJva2Vu
IG5vZGVdIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNDaGFyYWN0ZXJEYXRhTm9kZShub2Rl
KSkgew0KICAgICAgICAgICAgcmV0dXJuICciJyArIG5vZGUuZGF0YSArICciJzsNCiAgICAgICAg
fQ0KICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7DQogICAgICAgICAgICB2YXIgaWRB
dHRyID0gbm9kZS5pZCA/ICcgaWQ9IicgKyBub2RlLmlkICsgJyInIDogIiI7DQogICAgICAgICAg
ICByZXR1cm4gIjwiICsgbm9kZS5ub2RlTmFtZSArIGlkQXR0ciArICI+WyIgKyBub2RlLmNoaWxk
Tm9kZXMubGVuZ3RoICsgIl1bIiArIG5vZGUuaW5uZXJIVE1MLnNsaWNlKDAsIDIwKSArICJdIjsN
CiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbm9kZS5ub2RlTmFtZTsNCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBmcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW4obm9kZSkgew0KICAgICAgICB2YXIgZnJh
Z21lbnQgPSBnZXREb2N1bWVudChub2RlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIGNoaWxk
Ow0KICAgICAgICB3aGlsZSAoIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkgKSB7DQogICAgICAg
ICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0
dXJuIGZyYWdtZW50Ow0KICAgIH0NCg0KICAgIHZhciBnZXRDb21wdXRlZFN0eWxlUHJvcGVydHk7
DQogICAgaWYgKHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAhPSBVTkRFRikgew0KICAg
ICAgICBnZXRDb21wdXRlZFN0eWxlUHJvcGVydHkgPSBmdW5jdGlvbihlbCwgcHJvcE5hbWUpIHsN
CiAgICAgICAgICAgIHJldHVybiBnZXRXaW5kb3coZWwpLmdldENvbXB1dGVkU3R5bGUoZWwsIG51
bGwpW3Byb3BOYW1lXTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVu
dC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlICE9IFVOREVGKSB7DQogICAgICAgIGdldENv
bXB1dGVkU3R5bGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKGVsLCBwcm9wTmFtZSkgew0KICAgICAgICAg
ICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtwcm9wTmFtZV07DQogICAgICAgIH07DQogICAgfSBl
bHNlIHsNCiAgICAgICAgbW9kdWxlLmZhaWwoIk5vIG1lYW5zIG9mIG9idGFpbmluZyBjb21wdXRl
ZCBzdHlsZSBwcm9wZXJ0aWVzIGZvdW5kIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gTm9kZUl0
ZXJhdG9yKHJvb3QpIHsNCiAgICAgICAgdGhpcy5yb290ID0gcm9vdDsNCiAgICAgICAgdGhpcy5f
bmV4dCA9IHJvb3Q7DQogICAgfQ0KDQogICAgTm9kZUl0ZXJhdG9yLnByb3RvdHlwZSA9IHsNCiAg
ICAgICAgX2N1cnJlbnQ6IG51bGwsDQoNCiAgICAgICAgaGFzTmV4dDogZnVuY3Rpb24oKSB7DQog
ICAgICAgICAgICByZXR1cm4gISF0aGlzLl9uZXh0Ow0KICAgICAgICB9LA0KDQogICAgICAgIG5l
eHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9jdXJyZW50ID0gdGhp
cy5fbmV4dDsNCiAgICAgICAgICAgIHZhciBjaGlsZCwgbmV4dDsNCiAgICAgICAgICAgIGlmICh0
aGlzLl9jdXJyZW50KSB7DQogICAgICAgICAgICAgICAgY2hpbGQgPSBuLmZpcnN0Q2hpbGQ7DQog
ICAgICAgICAgICAgICAgaWYgKGNoaWxkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX25l
eHQgPSBjaGlsZDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg
ICBuZXh0ID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChuICE9PSB0aGlzLnJv
b3QpICYmICEobmV4dCA9IG4ubmV4dFNpYmxpbmcpKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBuID0gbi5wYXJlbnROb2RlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAg
ICAgICAgIHRoaXMuX25leHQgPSBuZXh0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50Ow0KICAgICAgICB9LA0KDQogICAg
ICAgIGRldGFjaDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhp
cy5fbmV4dCA9IHRoaXMucm9vdCA9IG51bGw7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgZnVu
Y3Rpb24gY3JlYXRlSXRlcmF0b3Iocm9vdCkgew0KICAgICAgICByZXR1cm4gbmV3IE5vZGVJdGVy
YXRvcihyb290KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBEb21Qb3NpdGlvbihub2RlLCBvZmZz
ZXQpIHsNCiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTsNCiAgICAgICAgdGhpcy5vZmZzZXQgPSBv
ZmZzZXQ7DQogICAgfQ0KDQogICAgRG9tUG9zaXRpb24ucHJvdG90eXBlID0gew0KICAgICAgICBl
cXVhbHM6IGZ1bmN0aW9uKHBvcykgew0KICAgICAgICAgICAgcmV0dXJuICEhcG9zICYmIHRoaXMu
bm9kZSA9PT0gcG9zLm5vZGUgJiYgdGhpcy5vZmZzZXQgPT0gcG9zLm9mZnNldDsNCiAgICAgICAg
fSwNCg0KICAgICAgICBpbnNwZWN0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAi
W0RvbVBvc2l0aW9uKCIgKyBpbnNwZWN0Tm9kZSh0aGlzLm5vZGUpICsgIjoiICsgdGhpcy5vZmZz
ZXQgKyAiKV0iOw0KICAgICAgICB9LA0KDQogICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsN
CiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3BlY3QoKTsNCiAgICAgICAgfQ0KICAgIH07DQoN
CiAgICBmdW5jdGlvbiBET01FeGNlcHRpb24oY29kZU5hbWUpIHsNCiAgICAgICAgdGhpcy5jb2Rl
ID0gdGhpc1tjb2RlTmFtZV07DQogICAgICAgIHRoaXMuY29kZU5hbWUgPSBjb2RlTmFtZTsNCiAg
ICAgICAgdGhpcy5tZXNzYWdlID0gIkRPTUV4Y2VwdGlvbjogIiArIHRoaXMuY29kZU5hbWU7DQog
ICAgfQ0KDQogICAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZSA9IHsNCiAgICAgICAgSU5ERVhfU0la
RV9FUlI6IDEsDQogICAgICAgIEhJRVJBUkNIWV9SRVFVRVNUX0VSUjogMywNCiAgICAgICAgV1JP
TkdfRE9DVU1FTlRfRVJSOiA0LA0KICAgICAgICBOT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlI6
IDcsDQogICAgICAgIE5PVF9GT1VORF9FUlI6IDgsDQogICAgICAgIE5PVF9TVVBQT1JURURfRVJS
OiA5LA0KICAgICAgICBJTlZBTElEX1NUQVRFX0VSUjogMTENCiAgICB9Ow0KDQogICAgRE9NRXhj
ZXB0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4g
dGhpcy5tZXNzYWdlOw0KICAgIH07DQoNCiAgICBhcGkuZG9tID0gew0KICAgICAgICBhcnJheUNv
bnRhaW5zOiBhcnJheUNvbnRhaW5zLA0KICAgICAgICBpc0h0bWxOYW1lc3BhY2U6IGlzSHRtbE5h
bWVzcGFjZSwNCiAgICAgICAgcGFyZW50RWxlbWVudDogcGFyZW50RWxlbWVudCwNCiAgICAgICAg
Z2V0Tm9kZUluZGV4OiBnZXROb2RlSW5kZXgsDQogICAgICAgIGdldE5vZGVMZW5ndGg6IGdldE5v
ZGVMZW5ndGgsDQogICAgICAgIGdldENvbW1vbkFuY2VzdG9yOiBnZXRDb21tb25BbmNlc3RvciwN
CiAgICAgICAgaXNBbmNlc3Rvck9mOiBpc0FuY2VzdG9yT2YsDQogICAgICAgIGlzT3JJc0FuY2Vz
dG9yT2Y6IGlzT3JJc0FuY2VzdG9yT2YsDQogICAgICAgIGdldENsb3Nlc3RBbmNlc3RvckluOiBn
ZXRDbG9zZXN0QW5jZXN0b3JJbiwNCiAgICAgICAgaXNDaGFyYWN0ZXJEYXRhTm9kZTogaXNDaGFy
YWN0ZXJEYXRhTm9kZSwNCiAgICAgICAgaXNUZXh0T3JDb21tZW50Tm9kZTogaXNUZXh0T3JDb21t
ZW50Tm9kZSwNCiAgICAgICAgaW5zZXJ0QWZ0ZXI6IGluc2VydEFmdGVyLA0KICAgICAgICBzcGxp
dERhdGFOb2RlOiBzcGxpdERhdGFOb2RlLA0KICAgICAgICBnZXREb2N1bWVudDogZ2V0RG9jdW1l
bnQsDQogICAgICAgIGdldFdpbmRvdzogZ2V0V2luZG93LA0KICAgICAgICBnZXRJZnJhbWVXaW5k
b3c6IGdldElmcmFtZVdpbmRvdywNCiAgICAgICAgZ2V0SWZyYW1lRG9jdW1lbnQ6IGdldElmcmFt
ZURvY3VtZW50LA0KICAgICAgICBnZXRCb2R5OiB1dGlsLmdldEJvZHksDQogICAgICAgIGlzV2lu
ZG93OiBpc1dpbmRvdywNCiAgICAgICAgZ2V0Q29udGVudERvY3VtZW50OiBnZXRDb250ZW50RG9j
dW1lbnQsDQogICAgICAgIGdldFJvb3RDb250YWluZXI6IGdldFJvb3RDb250YWluZXIsDQogICAg
ICAgIGNvbXBhcmVQb2ludHM6IGNvbXBhcmVQb2ludHMsDQogICAgICAgIGlzQnJva2VuTm9kZTog
aXNCcm9rZW5Ob2RlLA0KICAgICAgICBpbnNwZWN0Tm9kZTogaW5zcGVjdE5vZGUsDQogICAgICAg
IGdldENvbXB1dGVkU3R5bGVQcm9wZXJ0eTogZ2V0Q29tcHV0ZWRTdHlsZVByb3BlcnR5LA0KICAg
ICAgICBmcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW46IGZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbiwN
CiAgICAgICAgY3JlYXRlSXRlcmF0b3I6IGNyZWF0ZUl0ZXJhdG9yLA0KICAgICAgICBEb21Qb3Np
dGlvbjogRG9tUG9zaXRpb24NCiAgICB9Ow0KDQogICAgYXBpLkRPTUV4Y2VwdGlvbiA9IERPTUV4
Y2VwdGlvbjsNCn0pOwpyYW5neS5jcmVhdGVNb2R1bGUoIkRvbVJhbmdlIiwgZnVuY3Rpb24oYXBp
LCBtb2R1bGUpIHsKICAgIGFwaS5yZXF1aXJlTW9kdWxlcyggWyJEb21VdGlsIl0gKTsKCiAgICB2
YXIgZG9tID0gYXBpLmRvbTsKICAgIHZhciB1dGlsID0gYXBpLnV0aWw7CiAgICB2YXIgRG9tUG9z
aXRpb24gPSBkb20uRG9tUG9zaXRpb247CiAgICB2YXIgRE9NRXhjZXB0aW9uID0gYXBpLkRPTUV4
Y2VwdGlvbjsKCiAgICB2YXIgaXNDaGFyYWN0ZXJEYXRhTm9kZSA9IGRvbS5pc0NoYXJhY3RlckRh
dGFOb2RlOwogICAgdmFyIGdldE5vZGVJbmRleCA9IGRvbS5nZXROb2RlSW5kZXg7CiAgICB2YXIg
aXNPcklzQW5jZXN0b3JPZiA9IGRvbS5pc09ySXNBbmNlc3Rvck9mOwogICAgdmFyIGdldERvY3Vt
ZW50ID0gZG9tLmdldERvY3VtZW50OwogICAgdmFyIGNvbXBhcmVQb2ludHMgPSBkb20uY29tcGFy
ZVBvaW50czsKICAgIHZhciBzcGxpdERhdGFOb2RlID0gZG9tLnNwbGl0RGF0YU5vZGU7CiAgICB2
YXIgZ2V0Q2xvc2VzdEFuY2VzdG9ySW4gPSBkb20uZ2V0Q2xvc2VzdEFuY2VzdG9ySW47CiAgICB2
YXIgZ2V0Tm9kZUxlbmd0aCA9IGRvbS5nZXROb2RlTGVuZ3RoOwogICAgdmFyIGFycmF5Q29udGFp
bnMgPSBkb20uYXJyYXlDb250YWluczsKICAgIHZhciBnZXRSb290Q29udGFpbmVyID0gZG9tLmdl
dFJvb3RDb250YWluZXI7CiAgICB2YXIgY3Jhc2h5VGV4dE5vZGVzID0gYXBpLmZlYXR1cmVzLmNy
YXNoeVRleHROb2RlczsKCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKICAgIC8vIFV0aWxpdHkgZnVuY3Rpb25zCgogICAgZnVu
Y3Rpb24gaXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQobm9kZSwgcmFuZ2UpIHsKICAgICAgICBy
ZXR1cm4gKG5vZGUubm9kZVR5cGUgIT0gMykgJiYKICAgICAgICAgICAgICAgKGlzT3JJc0FuY2Vz
dG9yT2Yobm9kZSwgcmFuZ2Uuc3RhcnRDb250YWluZXIpIHx8IGlzT3JJc0FuY2VzdG9yT2Yobm9k
ZSwgcmFuZ2UuZW5kQ29udGFpbmVyKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmFuZ2VEb2N1
bWVudChyYW5nZSkgewogICAgICAgIHJldHVybiByYW5nZS5kb2N1bWVudCB8fCBnZXREb2N1bWVu
dChyYW5nZS5zdGFydENvbnRhaW5lcik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm91bmRhcnlC
ZWZvcmVOb2RlKG5vZGUpIHsKICAgICAgICByZXR1cm4gbmV3IERvbVBvc2l0aW9uKG5vZGUucGFy
ZW50Tm9kZSwgZ2V0Tm9kZUluZGV4KG5vZGUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCb3Vu
ZGFyeUFmdGVyTm9kZShub2RlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEb21Qb3NpdGlvbihub2Rl
LnBhcmVudE5vZGUsIGdldE5vZGVJbmRleChub2RlKSArIDEpOwogICAgfQoKICAgIGZ1bmN0aW9u
IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIG4sIG8pIHsKICAgICAgICB2YXIgZmlyc3ROb2Rl
SW5zZXJ0ZWQgPSBub2RlLm5vZGVUeXBlID09IDExID8gbm9kZS5maXJzdENoaWxkIDogbm9kZTsK
ICAgICAgICBpZiAoaXNDaGFyYWN0ZXJEYXRhTm9kZShuKSkgewogICAgICAgICAgICBpZiAobyA9
PSBuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgZG9tLmluc2VydEFmdGVyKG5vZGUsIG4pOwog
ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbi5wYXJlbnROb2RlLmluc2VydEJl
Zm9yZShub2RlLCBvID09IDAgPyBuIDogc3BsaXREYXRhTm9kZShuLCBvKSk7CiAgICAgICAgICAg
IH0KICAgICAgICB9IGVsc2UgaWYgKG8gPj0gbi5jaGlsZE5vZGVzLmxlbmd0aCkgewogICAgICAg
ICAgICBuLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG4u
aW5zZXJ0QmVmb3JlKG5vZGUsIG4uY2hpbGROb2Rlc1tvXSk7CiAgICAgICAgfQogICAgICAgIHJl
dHVybiBmaXJzdE5vZGVJbnNlcnRlZDsKICAgIH0KCiAgICBmdW5jdGlvbiByYW5nZXNJbnRlcnNl
Y3QocmFuZ2VBLCByYW5nZUIsIHRvdWNoaW5nSXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICBhc3Nl
cnRSYW5nZVZhbGlkKHJhbmdlQSk7CiAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZChyYW5nZUIpOwoK
ICAgICAgICBpZiAoZ2V0UmFuZ2VEb2N1bWVudChyYW5nZUIpICE9IGdldFJhbmdlRG9jdW1lbnQo
cmFuZ2VBKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJXUk9OR19ET0NV
TUVOVF9FUlIiKTsKICAgICAgICB9CgogICAgICAgIHZhciBzdGFydENvbXBhcmlzb24gPSBjb21w
YXJlUG9pbnRzKHJhbmdlQS5zdGFydENvbnRhaW5lciwgcmFuZ2VBLnN0YXJ0T2Zmc2V0LCByYW5n
ZUIuZW5kQ29udGFpbmVyLCByYW5nZUIuZW5kT2Zmc2V0KSwKICAgICAgICAgICAgZW5kQ29tcGFy
aXNvbiA9IGNvbXBhcmVQb2ludHMocmFuZ2VBLmVuZENvbnRhaW5lciwgcmFuZ2VBLmVuZE9mZnNl
dCwgcmFuZ2VCLnN0YXJ0Q29udGFpbmVyLCByYW5nZUIuc3RhcnRPZmZzZXQpOwoKICAgICAgICBy
ZXR1cm4gdG91Y2hpbmdJc0ludGVyc2VjdGluZyA/IHN0YXJ0Q29tcGFyaXNvbiA8PSAwICYmIGVu
ZENvbXBhcmlzb24gPj0gMCA6IHN0YXJ0Q29tcGFyaXNvbiA8IDAgJiYgZW5kQ29tcGFyaXNvbiA+
IDA7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvbmVTdWJ0cmVlKGl0ZXJhdG9yKSB7CiAgICAgICAg
dmFyIHBhcnRpYWxseVNlbGVjdGVkOwogICAgICAgIGZvciAodmFyIG5vZGUsIGZyYWcgPSBnZXRS
YW5nZURvY3VtZW50KGl0ZXJhdG9yLnJhbmdlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIHN1
Ykl0ZXJhdG9yOyBub2RlID0gaXRlcmF0b3IubmV4dCgpOyApIHsKICAgICAgICAgICAgcGFydGlh
bGx5U2VsZWN0ZWQgPSBpdGVyYXRvci5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpOwogICAg
ICAgICAgICBub2RlID0gbm9kZS5jbG9uZU5vZGUoIXBhcnRpYWxseVNlbGVjdGVkKTsKICAgICAg
ICAgICAgaWYgKHBhcnRpYWxseVNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICBzdWJJdGVyYXRv
ciA9IGl0ZXJhdG9yLmdldFN1YnRyZWVJdGVyYXRvcigpOwogICAgICAgICAgICAgICAgbm9kZS5h
cHBlbmRDaGlsZChjbG9uZVN1YnRyZWUoc3ViSXRlcmF0b3IpKTsKICAgICAgICAgICAgICAgIHN1
Ykl0ZXJhdG9yLmRldGFjaCh0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5v
ZGUubm9kZVR5cGUgPT0gMTApIHsgLy8gRG9jdW1lbnRUeXBlCiAgICAgICAgICAgICAgICB0aHJv
dyBuZXcgRE9NRXhjZXB0aW9uKCJISUVSQVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAgICAgICAg
fQogICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICBy
ZXR1cm4gZnJhZzsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlU3VidHJlZShyYW5nZUl0ZXJh
dG9yLCBmdW5jLCBpdGVyYXRvclN0YXRlKSB7CiAgICAgICAgdmFyIGl0LCBuOwogICAgICAgIGl0
ZXJhdG9yU3RhdGUgPSBpdGVyYXRvclN0YXRlIHx8IHsgc3RvcDogZmFsc2UgfTsKICAgICAgICBm
b3IgKHZhciBub2RlLCBzdWJSYW5nZUl0ZXJhdG9yOyBub2RlID0gcmFuZ2VJdGVyYXRvci5uZXh0
KCk7ICkgewogICAgICAgICAgICBpZiAocmFuZ2VJdGVyYXRvci5pc1BhcnRpYWxseVNlbGVjdGVk
U3VidHJlZSgpKSB7CiAgICAgICAgICAgICAgICBpZiAoZnVuYyhub2RlKSA9PT0gZmFsc2UpIHsK
ICAgICAgICAgICAgICAgICAgICBpdGVyYXRvclN0YXRlLnN0b3AgPSB0cnVlOwogICAgICAgICAg
ICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
ICAgICAgLy8gVGhlIG5vZGUgaXMgcGFydGlhbGx5IHNlbGVjdGVkIGJ5IHRoZSBSYW5nZSwgc28g
d2UgY2FuIHVzZSBhIG5ldyBSYW5nZUl0ZXJhdG9yIG9uIHRoZSBwb3J0aW9uIG9mCiAgICAgICAg
ICAgICAgICAgICAgLy8gdGhlIG5vZGUgc2VsZWN0ZWQgYnkgdGhlIFJhbmdlLgogICAgICAgICAg
ICAgICAgICAgIHN1YlJhbmdlSXRlcmF0b3IgPSByYW5nZUl0ZXJhdG9yLmdldFN1YnRyZWVJdGVy
YXRvcigpOwogICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVTdWJ0cmVlKHN1YlJhbmdlSXRlcmF0
b3IsIGZ1bmMsIGl0ZXJhdG9yU3RhdGUpOwogICAgICAgICAgICAgICAgICAgIHN1YlJhbmdlSXRl
cmF0b3IuZGV0YWNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvclN0YXRl
LnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg
ICAgIC8vIFRoZSB3aG9sZSBub2RlIGlzIHNlbGVjdGVkLCBzbyB3ZSBjYW4gdXNlIGVmZmljaWVu
dCBET00gaXRlcmF0aW9uIHRvIGl0ZXJhdGUgb3ZlciB0aGUgbm9kZSBhbmQgaXRzCiAgICAgICAg
ICAgICAgICAvLyBkZXNjZW5kYW50cwogICAgICAgICAgICAgICAgaXQgPSBkb20uY3JlYXRlSXRl
cmF0b3Iobm9kZSk7CiAgICAgICAgICAgICAgICB3aGlsZSAoIChuID0gaXQubmV4dCgpKSApIHsK
ICAgICAgICAgICAgICAgICAgICBpZiAoZnVuYyhuKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAg
ICAgICAgICAgICAgaXRlcmF0b3JTdGF0ZS5zdG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVTdWJ0cmVlKGl0
ZXJhdG9yKSB7CiAgICAgICAgdmFyIHN1Ykl0ZXJhdG9yOwogICAgICAgIHdoaWxlIChpdGVyYXRv
ci5uZXh0KCkpIHsKICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmlzUGFydGlhbGx5U2VsZWN0ZWRT
dWJ0cmVlKCkpIHsKICAgICAgICAgICAgICAgIHN1Ykl0ZXJhdG9yID0gaXRlcmF0b3IuZ2V0U3Vi
dHJlZUl0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICBkZWxldGVTdWJ0cmVlKHN1Ykl0ZXJhdG9y
KTsKICAgICAgICAgICAgICAgIHN1Ykl0ZXJhdG9yLmRldGFjaCh0cnVlKTsKICAgICAgICAgICAg
fSBlbHNlIHsKICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnJlbW92ZSgpOwogICAgICAgICAgICB9
CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGV4dHJhY3RTdWJ0cmVlKGl0ZXJhdG9yKSB7
CiAgICAgICAgZm9yICh2YXIgbm9kZSwgZnJhZyA9IGdldFJhbmdlRG9jdW1lbnQoaXRlcmF0b3Iu
cmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgc3ViSXRlcmF0b3I7IG5vZGUgPSBpdGVy
YXRvci5uZXh0KCk7ICkgewoKICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmlzUGFydGlhbGx5U2Vs
ZWN0ZWRTdWJ0cmVlKCkpIHsKICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmNsb25lTm9kZShm
YWxzZSk7CiAgICAgICAgICAgICAgICBzdWJJdGVyYXRvciA9IGl0ZXJhdG9yLmdldFN1YnRyZWVJ
dGVyYXRvcigpOwogICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChleHRyYWN0U3VidHJl
ZShzdWJJdGVyYXRvcikpOwogICAgICAgICAgICAgICAgc3ViSXRlcmF0b3IuZGV0YWNoKHRydWUp
OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXRlcmF0b3IucmVtb3ZlKCk7
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMTApIHsgLy8g
RG9jdW1lbnRUeXBlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJISUVS
QVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmcmFnLmFwcGVu
ZENoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZnJhZzsKICAgIH0KCiAgICBm
dW5jdGlvbiBnZXROb2Rlc0luUmFuZ2UocmFuZ2UsIG5vZGVUeXBlcywgZmlsdGVyKSB7CiAgICAg
ICAgdmFyIGZpbHRlck5vZGVUeXBlcyA9ICEhKG5vZGVUeXBlcyAmJiBub2RlVHlwZXMubGVuZ3Ro
KSwgcmVnZXg7CiAgICAgICAgdmFyIGZpbHRlckV4aXN0cyA9ICEhZmlsdGVyOwogICAgICAgIGlm
IChmaWx0ZXJOb2RlVHlwZXMpIHsKICAgICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKCJeKCIg
KyBub2RlVHlwZXMuam9pbigifCIpICsgIikkIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgbm9k
ZXMgPSBbXTsKICAgICAgICBpdGVyYXRlU3VidHJlZShuZXcgUmFuZ2VJdGVyYXRvcihyYW5nZSwg
ZmFsc2UpLCBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgIGlmICgoIWZpbHRlck5vZGVUeXBl
cyB8fCByZWdleC50ZXN0KG5vZGUubm9kZVR5cGUpKSAmJiAoIWZpbHRlckV4aXN0cyB8fCBmaWx0
ZXIobm9kZSkpKSB7CiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpOwogICAgICAgICAg
ICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG5vZGVzOwogICAgfQoKICAgIGZ1bmN0aW9u
IGluc3BlY3QocmFuZ2UpIHsKICAgICAgICB2YXIgbmFtZSA9ICh0eXBlb2YgcmFuZ2UuZ2V0TmFt
ZSA9PSAidW5kZWZpbmVkIikgPyAiUmFuZ2UiIDogcmFuZ2UuZ2V0TmFtZSgpOwogICAgICAgIHJl
dHVybiAiWyIgKyBuYW1lICsgIigiICsgZG9tLmluc3BlY3ROb2RlKHJhbmdlLnN0YXJ0Q29udGFp
bmVyKSArICI6IiArIHJhbmdlLnN0YXJ0T2Zmc2V0ICsgIiwgIiArCiAgICAgICAgICAgICAgICBk
b20uaW5zcGVjdE5vZGUocmFuZ2UuZW5kQ29udGFpbmVyKSArICI6IiArIHJhbmdlLmVuZE9mZnNl
dCArICIpXSI7CiAgICB9CgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyBSYW5nZUl0ZXJhdG9yIGNvZGUgcGFydGlh
bGx5IGJvcnJvd3MgZnJvbSBJRVJhbmdlIGJ5IFRpbSBSeWFuIChodHRwOi8vZ2l0aHViLmNvbS90
aW1jYW1lcm9ucnlhbi9JRVJhbmdlKQoKICAgIGZ1bmN0aW9uIFJhbmdlSXRlcmF0b3IocmFuZ2Us
IGNsb25lUGFydGlhbGx5U2VsZWN0ZWRUZXh0Tm9kZXMpIHsKICAgICAgICB0aGlzLnJhbmdlID0g
cmFuZ2U7CiAgICAgICAgdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzID0gY2xv
bmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlczsKCgogICAgICAgIGlmICghcmFuZ2UuY29sbGFw
c2VkKSB7CiAgICAgICAgICAgIHRoaXMuc2MgPSByYW5nZS5zdGFydENvbnRhaW5lcjsKICAgICAg
ICAgICAgdGhpcy5zbyA9IHJhbmdlLnN0YXJ0T2Zmc2V0OwogICAgICAgICAgICB0aGlzLmVjID0g
cmFuZ2UuZW5kQ29udGFpbmVyOwogICAgICAgICAgICB0aGlzLmVvID0gcmFuZ2UuZW5kT2Zmc2V0
OwogICAgICAgICAgICB2YXIgcm9vdCA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOwoK
ICAgICAgICAgICAgaWYgKHRoaXMuc2MgPT09IHRoaXMuZWMgJiYgaXNDaGFyYWN0ZXJEYXRhTm9k
ZSh0aGlzLnNjKSkgewogICAgICAgICAgICAgICAgdGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFO
b2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0ID0gdGhpcy5fbGFzdCA9IHRo
aXMuX25leHQgPSB0aGlzLnNjOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg
dGhpcy5fZmlyc3QgPSB0aGlzLl9uZXh0ID0gKHRoaXMuc2MgPT09IHJvb3QgJiYgIWlzQ2hhcmFj
dGVyRGF0YU5vZGUodGhpcy5zYykpID8KICAgICAgICAgICAgICAgICAgICB0aGlzLnNjLmNoaWxk
Tm9kZXNbdGhpcy5zb10gOiBnZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLnNjLCByb290LCB0cnVl
KTsKICAgICAgICAgICAgICAgIHRoaXMuX2xhc3QgPSAodGhpcy5lYyA9PT0gcm9vdCAmJiAhaXND
aGFyYWN0ZXJEYXRhTm9kZSh0aGlzLmVjKSkgPwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWMu
Y2hpbGROb2Rlc1t0aGlzLmVvIC0gMV0gOiBnZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLmVjLCBy
b290LCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBSYW5nZUl0ZXJh
dG9yLnByb3RvdHlwZSA9IHsKICAgICAgICBfY3VycmVudDogbnVsbCwKICAgICAgICBfbmV4dDog
bnVsbCwKICAgICAgICBfZmlyc3Q6IG51bGwsCiAgICAgICAgX2xhc3Q6IG51bGwsCiAgICAgICAg
aXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZTogZmFsc2UsCgogICAgICAgIHJlc2V0OiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgdGhpcy5fY3VycmVudCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMu
X25leHQgPSB0aGlzLl9maXJzdDsKICAgICAgICB9LAoKICAgICAgICBoYXNOZXh0OiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fbmV4dDsKICAgICAgICB9LAoKICAgICAg
ICBuZXh0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgLy8gTW92ZSB0byBuZXh0IG5vZGUKICAg
ICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9jdXJyZW50ID0gdGhpcy5fbmV4dDsKICAgICAg
ICAgICAgaWYgKGN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIHRoaXMuX25leHQgPSAoY3VycmVu
dCAhPT0gdGhpcy5fbGFzdCkgPyBjdXJyZW50Lm5leHRTaWJsaW5nIDogbnVsbDsKCiAgICAgICAg
ICAgICAgICAvLyBDaGVjayBmb3IgcGFydGlhbGx5IHNlbGVjdGVkIHRleHQgbm9kZXMKICAgICAg
ICAgICAgICAgIGlmIChpc0NoYXJhY3RlckRhdGFOb2RlKGN1cnJlbnQpICYmIHRoaXMuY2xvbmVQ
YXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlcykgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJy
ZW50ID09PSB0aGlzLmVjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChjdXJyZW50ID0gY3Vy
cmVudC5jbG9uZU5vZGUodHJ1ZSkpLmRlbGV0ZURhdGEodGhpcy5lbywgY3VycmVudC5sZW5ndGgg
LSB0aGlzLmVvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYg
KHRoaXMuX2N1cnJlbnQgPT09IHRoaXMuc2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgKGN1
cnJlbnQgPSBjdXJyZW50LmNsb25lTm9kZSh0cnVlKSkuZGVsZXRlRGF0YSgwLCB0aGlzLnNvKTsK
ICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAg
ICAgICAgICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0sCgogICAgICAgIHJlbW92ZTogZnVu
Y3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5fY3VycmVudCwgc3RhcnQs
IGVuZDsKCiAgICAgICAgICAgIGlmIChpc0NoYXJhY3RlckRhdGFOb2RlKGN1cnJlbnQpICYmIChj
dXJyZW50ID09PSB0aGlzLnNjIHx8IGN1cnJlbnQgPT09IHRoaXMuZWMpKSB7CiAgICAgICAgICAg
ICAgICBzdGFydCA9IChjdXJyZW50ID09PSB0aGlzLnNjKSA/IHRoaXMuc28gOiAwOwogICAgICAg
ICAgICAgICAgZW5kID0gKGN1cnJlbnQgPT09IHRoaXMuZWMpID8gdGhpcy5lbyA6IGN1cnJlbnQu
bGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICE9IGVuZCkgewogICAgICAgICAgICAg
ICAgICAgIGN1cnJlbnQuZGVsZXRlRGF0YShzdGFydCwgZW5kIC0gc3RhcnQpOwogICAgICAgICAg
ICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQu
cGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQucGFyZW50Tm9kZS5yZW1v
dmVDaGlsZChjdXJyZW50KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvLyBDaGVja3MgaWYgdGhlIGN1
cnJlbnQgbm9kZSBpcyBwYXJ0aWFsbHkgc2VsZWN0ZWQKICAgICAgICBpc1BhcnRpYWxseVNlbGVj
dGVkU3VidHJlZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5f
Y3VycmVudDsKICAgICAgICAgICAgcmV0dXJuIGlzTm9uVGV4dFBhcnRpYWxseVNlbGVjdGVkKGN1
cnJlbnQsIHRoaXMucmFuZ2UpOwogICAgICAgIH0sCgogICAgICAgIGdldFN1YnRyZWVJdGVyYXRv
cjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBzdWJSYW5nZTsKICAgICAgICAgICAgaWYg
KHRoaXMuaXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZSkgewogICAgICAgICAgICAgICAgc3ViUmFu
Z2UgPSB0aGlzLnJhbmdlLmNsb25lUmFuZ2UoKTsKICAgICAgICAgICAgICAgIHN1YlJhbmdlLmNv
bGxhcHNlKGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN1YlJh
bmdlID0gbmV3IFJhbmdlKGdldFJhbmdlRG9jdW1lbnQodGhpcy5yYW5nZSkpOwogICAgICAgICAg
ICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9jdXJyZW50OwogICAgICAgICAgICAgICAgdmFyIHN0
YXJ0Q29udGFpbmVyID0gY3VycmVudCwgc3RhcnRPZmZzZXQgPSAwLCBlbmRDb250YWluZXIgPSBj
dXJyZW50LCBlbmRPZmZzZXQgPSBnZXROb2RlTGVuZ3RoKGN1cnJlbnQpOwoKICAgICAgICAgICAg
ICAgIGlmIChpc09ySXNBbmNlc3Rvck9mKGN1cnJlbnQsIHRoaXMuc2MpKSB7CiAgICAgICAgICAg
ICAgICAgICAgc3RhcnRDb250YWluZXIgPSB0aGlzLnNjOwogICAgICAgICAgICAgICAgICAgIHN0
YXJ0T2Zmc2V0ID0gdGhpcy5zbzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm
IChpc09ySXNBbmNlc3Rvck9mKGN1cnJlbnQsIHRoaXMuZWMpKSB7CiAgICAgICAgICAgICAgICAg
ICAgZW5kQ29udGFpbmVyID0gdGhpcy5lYzsKICAgICAgICAgICAgICAgICAgICBlbmRPZmZzZXQg
PSB0aGlzLmVvOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5k
YXJpZXMoc3ViUmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBzdGFydE9mZnNldCwgZW5kQ29udGFpbmVy
LCBlbmRPZmZzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2VJ
dGVyYXRvcihzdWJSYW5nZSwgdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzKTsK
ICAgICAgICB9LAoKICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uKGRldGFjaFJhbmdlKSB7CiAgICAg
ICAgICAgIGlmIChkZXRhY2hSYW5nZSkgewogICAgICAgICAgICAgICAgdGhpcy5yYW5nZS5kZXRh
Y2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5fY3VycmVu
dCA9IHRoaXMuX25leHQgPSB0aGlzLl9maXJzdCA9IHRoaXMuX2xhc3QgPSB0aGlzLnNjID0gdGhp
cy5zbyA9IHRoaXMuZWMgPSB0aGlzLmVvID0gbnVsbDsKICAgICAgICB9CiAgICB9OwoKICAgIC8q
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSov
CgogICAgLy8gRXhjZXB0aW9ucwoKICAgIGZ1bmN0aW9uIFJhbmdlRXhjZXB0aW9uKGNvZGVOYW1l
KSB7CiAgICAgICAgdGhpcy5jb2RlID0gdGhpc1tjb2RlTmFtZV07CiAgICAgICAgdGhpcy5jb2Rl
TmFtZSA9IGNvZGVOYW1lOwogICAgICAgIHRoaXMubWVzc2FnZSA9ICJSYW5nZUV4Y2VwdGlvbjog
IiArIHRoaXMuY29kZU5hbWU7CiAgICB9CgogICAgUmFuZ2VFeGNlcHRpb24ucHJvdG90eXBlID0g
ewogICAgICAgIEJBRF9CT1VOREFSWVBPSU5UU19FUlI6IDEsCiAgICAgICAgSU5WQUxJRF9OT0RF
X1RZUEVfRVJSOiAyCiAgICB9OwoKICAgIFJhbmdlRXhjZXB0aW9uLnByb3RvdHlwZS50b1N0cmlu
ZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7CiAgICB9OwoKICAg
IC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LSovCgogICAgdmFyIGJlZm9yZUFmdGVyTm9kZVR5cGVzID0gWzEsIDMsIDQsIDUsIDcsIDgsIDEw
XTsKICAgIHZhciByb290Q29udGFpbmVyTm9kZVR5cGVzID0gWzIsIDksIDExXTsKICAgIHZhciBy
ZWFkb25seU5vZGVUeXBlcyA9IFs1LCA2LCAxMCwgMTJdOwogICAgdmFyIGluc2VydGFibGVOb2Rl
VHlwZXMgPSBbMSwgMywgNCwgNSwgNywgOCwgMTAsIDExXTsKICAgIHZhciBzdXJyb3VuZE5vZGVU
eXBlcyA9IFsxLCAzLCA0LCA1LCA3LCA4XTsKCiAgICBmdW5jdGlvbiBjcmVhdGVBbmNlc3RvckZp
bmRlcihub2RlVHlwZXMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSwgc2VsZklzQW5j
ZXN0b3IpIHsKICAgICAgICAgICAgdmFyIHQsIG4gPSBzZWxmSXNBbmNlc3RvciA/IG5vZGUgOiBu
b2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgIHdoaWxlIChuKSB7CiAgICAgICAgICAgICAgICB0
ID0gbi5ub2RlVHlwZTsKICAgICAgICAgICAgICAgIGlmIChhcnJheUNvbnRhaW5zKG5vZGVUeXBl
cywgdCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgIG4gPSBuLnBhcmVudE5vZGU7CiAgICAgICAgICAgIH0KICAgICAgICAg
ICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKICAgIH0KCiAgICB2YXIgZ2V0RG9jdW1lbnRPckZy
YWdtZW50Q29udGFpbmVyID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIoIFs5LCAxMV0gKTsKICAgIHZh
ciBnZXRSZWFkb25seUFuY2VzdG9yID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIocmVhZG9ubHlOb2Rl
VHlwZXMpOwogICAgdmFyIGdldERvY1R5cGVOb3RhdGlvbkVudGl0eUFuY2VzdG9yID0gY3JlYXRl
QW5jZXN0b3JGaW5kZXIoIFs2LCAxMCwgMTJdICk7CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9Eb2NU
eXBlTm90YXRpb25FbnRpdHlBbmNlc3Rvcihub2RlLCBhbGxvd1NlbGYpIHsKICAgICAgICBpZiAo
Z2V0RG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgYWxsb3dTZWxmKSkgewogICAg
ICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIklOVkFMSURfTk9ERV9UWVBFX0VSUiIp
OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnROb3REZXRhY2hlZChyYW5nZSkg
ewogICAgICAgIGlmICghcmFuZ2Uuc3RhcnRDb250YWluZXIpIHsKICAgICAgICAgICAgdGhyb3cg
bmV3IERPTUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFURV9FUlIiKTsKICAgICAgICB9CiAgICB9Cgog
ICAgZnVuY3Rpb24gYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBpbnZhbGlkVHlwZXMpIHsKICAg
ICAgICBpZiAoIWFycmF5Q29udGFpbnMoaW52YWxpZFR5cGVzLCBub2RlLm5vZGVUeXBlKSkgewog
ICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIklOVkFMSURfTk9ERV9UWVBFX0VS
UiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRWYWxpZE9mZnNldChub2Rl
LCBvZmZzZXQpIHsKICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgPiAoaXNDaGFyYWN0
ZXJEYXRhTm9kZShub2RlKSA/IG5vZGUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkp
IHsKICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5ERVhfU0laRV9FUlIiKTsK
ICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0U2FtZURvY3VtZW50T3JGcmFnbWVu
dChub2RlMSwgbm9kZTIpIHsKICAgICAgICBpZiAoZ2V0RG9jdW1lbnRPckZyYWdtZW50Q29udGFp
bmVyKG5vZGUxLCB0cnVlKSAhPT0gZ2V0RG9jdW1lbnRPckZyYWdtZW50Q29udGFpbmVyKG5vZGUy
LCB0cnVlKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJXUk9OR19ET0NV
TUVOVF9FUlIiKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU5vdFJl
YWRPbmx5KG5vZGUpIHsKICAgICAgICBpZiAoZ2V0UmVhZG9ubHlBbmNlc3Rvcihub2RlLCB0cnVl
KSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJOT19NT0RJRklDQVRJT05f
QUxMT1dFRF9FUlIiKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZShu
b2RlLCBjb2RlTmFtZSkgewogICAgICAgIGlmICghbm9kZSkgewogICAgICAgICAgICB0aHJvdyBu
ZXcgRE9NRXhjZXB0aW9uKGNvZGVOYW1lKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24g
aXNPcnBoYW4obm9kZSkgewogICAgICAgIHJldHVybiAoY3Jhc2h5VGV4dE5vZGVzICYmIGRvbS5p
c0Jyb2tlbk5vZGUobm9kZSkpIHx8CiAgICAgICAgICAgICFhcnJheUNvbnRhaW5zKHJvb3RDb250
YWluZXJOb2RlVHlwZXMsIG5vZGUubm9kZVR5cGUpICYmICFnZXREb2N1bWVudE9yRnJhZ21lbnRD
b250YWluZXIobm9kZSwgdHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNWYWxpZE9mZnNldChu
b2RlLCBvZmZzZXQpIHsKICAgICAgICByZXR1cm4gb2Zmc2V0IDw9IChpc0NoYXJhY3RlckRhdGFO
b2RlKG5vZGUpID8gbm9kZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKTsKICAgIH0K
CiAgICBmdW5jdGlvbiBpc1JhbmdlVmFsaWQocmFuZ2UpIHsKICAgICAgICByZXR1cm4gKCEhcmFu
Z2Uuc3RhcnRDb250YWluZXIgJiYgISFyYW5nZS5lbmRDb250YWluZXIKICAgICAgICAgICAgICAg
ICYmICFpc09ycGhhbihyYW5nZS5zdGFydENvbnRhaW5lcikKICAgICAgICAgICAgICAgICYmICFp
c09ycGhhbihyYW5nZS5lbmRDb250YWluZXIpCiAgICAgICAgICAgICAgICAmJiBpc1ZhbGlkT2Zm
c2V0KHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCkKICAgICAgICAgICAg
ICAgICYmIGlzVmFsaWRPZmZzZXQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQp
KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRSYW5nZVZhbGlkKHJhbmdlKSB7CiAgICAgICAg
YXNzZXJ0Tm90RGV0YWNoZWQocmFuZ2UpOwogICAgICAgIGlmICghaXNSYW5nZVZhbGlkKHJhbmdl
KSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJhbmdlIGVycm9yOiBSYW5nZSBpcyBu
byBsb25nZXIgdmFsaWQgYWZ0ZXIgRE9NIG11dGF0aW9uICgiICsgcmFuZ2UuaW5zcGVjdCgpICsg
IikiKTsKICAgICAgICB9CiAgICB9CgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyBUZXN0IHRoZSBicm93c2VyJ3Mg
aW5uZXJIVE1MIHN1cHBvcnQgdG8gZGVjaWRlIGhvdyB0byBpbXBsZW1lbnQgY3JlYXRlQ29udGV4
dHVhbEZyYWdtZW50CiAgICB2YXIgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0
eWxlIik7CiAgICB2YXIgaHRtbFBhcnNpbmdDb25mb3JtcyA9IGZhbHNlOwogICAgdHJ5IHsKICAg
ICAgICBzdHlsZUVsLmlubmVySFRNTCA9ICI8Yj54PC9iPiI7CiAgICAgICAgaHRtbFBhcnNpbmdD
b25mb3JtcyA9IChzdHlsZUVsLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT0gMyk7IC8vIE9wZXJhIGlu
Y29ycmVjdGx5IGNyZWF0ZXMgYW4gZWxlbWVudCBub2RlCiAgICB9IGNhdGNoIChlKSB7CiAgICAg
ICAgLy8gSUUgNiBhbmQgNyB0aHJvdwogICAgfQoKICAgIGFwaS5mZWF0dXJlcy5odG1sUGFyc2lu
Z0NvbmZvcm1zID0gaHRtbFBhcnNpbmdDb25mb3JtczsKCiAgICB2YXIgY3JlYXRlQ29udGV4dHVh
bEZyYWdtZW50ID0gaHRtbFBhcnNpbmdDb25mb3JtcyA/CgogICAgICAgIC8vIEltcGxlbWVudGF0
aW9uIGFzIHBlciBIVE1MIHBhcnNpbmcgc3BlYywgdHJ1c3RpbmcgaW4gdGhlIGJyb3dzZXIncyBp
bXBsZW1lbnRhdGlvbiBvZiBpbm5lckhUTUwuIFNlZQogICAgICAgIC8vIGRpc2N1c3Npb24gYW5k
IGJhc2UgY29kZSBmb3IgdGhpcyBpbXBsZW1lbnRhdGlvbiBhdCBpc3N1ZSA2Ny4KICAgICAgICAv
LyBTcGVjOiBodHRwOi8vaHRtbDUub3JnL3NwZWNzL2RvbS1wYXJzaW5nLmh0bWwjZXh0ZW5zaW9u
cy10by10aGUtcmFuZ2UtaW50ZXJmYWNlCiAgICAgICAgLy8gVGhhbmtzIHRvIEFsZWtzIFdpbGxp
YW1zLgogICAgICAgIGZ1bmN0aW9uKGZyYWdtZW50U3RyKSB7CiAgICAgICAgICAgIC8vICJMZXQg
bm9kZSB0aGUgY29udGV4dCBvYmplY3QncyBzdGFydCdzIG5vZGUuIgogICAgICAgICAgICB2YXIg
bm9kZSA9IHRoaXMuc3RhcnRDb250YWluZXI7CiAgICAgICAgICAgIHZhciBkb2MgPSBnZXREb2N1
bWVudChub2RlKTsKCiAgICAgICAgICAgIC8vICJJZiB0aGUgY29udGV4dCBvYmplY3QncyBzdGFy
dCdzIG5vZGUgaXMgbnVsbCwgcmFpc2UgYW4gSU5WQUxJRF9TVEFURV9FUlIKICAgICAgICAgICAg
Ly8gZXhjZXB0aW9uIGFuZCBhYm9ydCB0aGVzZSBzdGVwcy4iCiAgICAgICAgICAgIGlmICghbm9k
ZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFU
RV9FUlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gIkxldCBlbGVtZW50IGJlIGFz
IGZvbGxvd3MsIGRlcGVuZGluZyBvbiBub2RlJ3MgaW50ZXJmYWNlOiIKICAgICAgICAgICAgLy8g
RG9jdW1lbnQsIERvY3VtZW50IEZyYWdtZW50OiBudWxsCiAgICAgICAgICAgIHZhciBlbCA9IG51
bGw7CgogICAgICAgICAgICAvLyAiRWxlbWVudDogbm9kZSIKICAgICAgICAgICAgaWYgKG5vZGUu
bm9kZVR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgZWwgPSBub2RlOwoKICAgICAgICAgICAg
Ly8gIlRleHQsIENvbW1lbnQ6IG5vZGUncyBwYXJlbnRFbGVtZW50IgogICAgICAgICAgICB9IGVs
c2UgaWYgKGlzQ2hhcmFjdGVyRGF0YU5vZGUobm9kZSkpIHsKICAgICAgICAgICAgICAgIGVsID0g
ZG9tLnBhcmVudEVsZW1lbnQobm9kZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICJJ
ZiBlaXRoZXIgZWxlbWVudCBpcyBudWxsIG9yIGVsZW1lbnQncyBvd25lckRvY3VtZW50IGlzIGFu
IEhUTUwgZG9jdW1lbnQKICAgICAgICAgICAgLy8gYW5kIGVsZW1lbnQncyBsb2NhbCBuYW1lIGlz
ICJodG1sIiBhbmQgZWxlbWVudCdzIG5hbWVzcGFjZSBpcyB0aGUgSFRNTAogICAgICAgICAgICAv
LyBuYW1lc3BhY2UiCiAgICAgICAgICAgIGlmIChlbCA9PT0gbnVsbCB8fCAoCiAgICAgICAgICAg
ICAgICBlbC5ub2RlTmFtZSA9PSAiSFRNTCIKICAgICAgICAgICAgICAgICYmIGRvbS5pc0h0bWxO
YW1lc3BhY2UoZ2V0RG9jdW1lbnQoZWwpLmRvY3VtZW50RWxlbWVudCkKICAgICAgICAgICAgICAg
ICYmIGRvbS5pc0h0bWxOYW1lc3BhY2UoZWwpCiAgICAgICAgICAgICkpIHsKCiAgICAgICAgICAg
IC8vICJsZXQgZWxlbWVudCBiZSBhIG5ldyBFbGVtZW50IHdpdGggImJvZHkiIGFzIGl0cyBsb2Nh
bCBuYW1lIGFuZCB0aGUgSFRNTAogICAgICAgICAgICAvLyBuYW1lc3BhY2UgYXMgaXRzIG5hbWVz
cGFjZS4iIgogICAgICAgICAgICAgICAgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgiYm9keSIpOwog
ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWwgPSBlbC5jbG9uZU5vZGUoZmFs
c2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAiSWYgdGhlIG5vZGUncyBkb2N1bWVu
dCBpcyBhbiBIVE1MIGRvY3VtZW50OiBJbnZva2UgdGhlIEhUTUwgZnJhZ21lbnQgcGFyc2luZyBh
bGdvcml0aG0uIgogICAgICAgICAgICAvLyAiSWYgdGhlIG5vZGUncyBkb2N1bWVudCBpcyBhbiBY
TUwgZG9jdW1lbnQ6IEludm9rZSB0aGUgWE1MIGZyYWdtZW50IHBhcnNpbmcgYWxnb3JpdGhtLiIK
ICAgICAgICAgICAgLy8gIkluIGVpdGhlciBjYXNlLCB0aGUgYWxnb3JpdGhtIG11c3QgYmUgaW52
b2tlZCB3aXRoIGZyYWdtZW50IGFzIHRoZSBpbnB1dAogICAgICAgICAgICAvLyBhbmQgZWxlbWVu
dCBhcyB0aGUgY29udGV4dCBlbGVtZW50LiIKICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gZnJh
Z21lbnRTdHI7CgogICAgICAgICAgICAvLyAiSWYgdGhpcyByYWlzZXMgYW4gZXhjZXB0aW9uLCB0
aGVuIGFib3J0IHRoZXNlIHN0ZXBzLiBPdGhlcndpc2UsIGxldCBuZXcKICAgICAgICAgICAgLy8g
Y2hpbGRyZW4gYmUgdGhlIG5vZGVzIHJldHVybmVkLiIKCiAgICAgICAgICAgIC8vICJMZXQgZnJh
Z21lbnQgYmUgYSBuZXcgRG9jdW1lbnRGcmFnbWVudC4iCiAgICAgICAgICAgIC8vICJBcHBlbmQg
YWxsIG5ldyBjaGlsZHJlbiB0byBmcmFnbWVudC4iCiAgICAgICAgICAgIC8vICJSZXR1cm4gZnJh
Z21lbnQuIgogICAgICAgICAgICByZXR1cm4gZG9tLmZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbihl
bCk7CiAgICAgICAgfSA6CgogICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaW5uZXJIVE1MIGNhbm5v
dCBiZSB0cnVzdGVkLCBzbyBmYWxsIGJhY2sgdG8gYSBzaW1wbGVyLCBub24tY29uZm9ybWFudCBp
bXBsZW1lbnRhdGlvbiB0aGF0CiAgICAgICAgLy8gcHJldmlvdXMgdmVyc2lvbnMgb2YgUmFuZ3kg
dXNlZCAod2l0aCB0aGUgZXhjZXB0aW9uIG9mIHVzaW5nIGEgYm9keSBlbGVtZW50IHJhdGhlciB0
aGFuIGEgZGl2KQogICAgICAgIGZ1bmN0aW9uKGZyYWdtZW50U3RyKSB7CiAgICAgICAgICAgIGFz
c2VydE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICB2YXIgZG9jID0gZ2V0UmFuZ2VEb2N1
bWVudCh0aGlzKTsKICAgICAgICAgICAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoImJvZHki
KTsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gZnJhZ21lbnRTdHI7CgogICAgICAgICAgICBy
ZXR1cm4gZG9tLmZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbihlbCk7CiAgICAgICAgfTsKCiAgICBm
dW5jdGlvbiBzcGxpdFJhbmdlQm91bmRhcmllcyhyYW5nZSwgcG9zaXRpb25zVG9QcmVzZXJ2ZSkg
ewogICAgICAgIGFzc2VydFJhbmdlVmFsaWQocmFuZ2UpOwoKICAgICAgICB2YXIgc2MgPSByYW5n
ZS5zdGFydENvbnRhaW5lciwgc28gPSByYW5nZS5zdGFydE9mZnNldCwgZWMgPSByYW5nZS5lbmRD
b250YWluZXIsIGVvID0gcmFuZ2UuZW5kT2Zmc2V0OwogICAgICAgIHZhciBzdGFydEVuZFNhbWUg
PSAoc2MgPT09IGVjKTsKCiAgICAgICAgaWYgKGlzQ2hhcmFjdGVyRGF0YU5vZGUoZWMpICYmIGVv
ID4gMCAmJiBlbyA8IGVjLmxlbmd0aCkgewogICAgICAgICAgICBzcGxpdERhdGFOb2RlKGVjLCBl
bywgcG9zaXRpb25zVG9QcmVzZXJ2ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNDaGFyYWN0
ZXJEYXRhTm9kZShzYykgJiYgc28gPiAwICYmIHNvIDwgc2MubGVuZ3RoKSB7CiAgICAgICAgICAg
IHNjID0gc3BsaXREYXRhTm9kZShzYywgc28sIHBvc2l0aW9uc1RvUHJlc2VydmUpOwogICAgICAg
ICAgICBpZiAoc3RhcnRFbmRTYW1lKSB7CiAgICAgICAgICAgICAgICBlbyAtPSBzbzsKICAgICAg
ICAgICAgICAgIGVjID0gc2M7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWMgPT0gc2MucGFyZW50
Tm9kZSAmJiBlbyA+PSBnZXROb2RlSW5kZXgoc2MpKSB7CiAgICAgICAgICAgICAgICBlbysrOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIHNvID0gMDsKICAgICAgICB9CiAgICAgICAgcmFuZ2Uu
c2V0U3RhcnRBbmRFbmQoc2MsIHNvLCBlYywgZW8pOwogICAgfQoKICAgIC8qLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgdmFyIHJh
bmdlUHJvcGVydGllcyA9IFsic3RhcnRDb250YWluZXIiLCAic3RhcnRPZmZzZXQiLCAiZW5kQ29u
dGFpbmVyIiwgImVuZE9mZnNldCIsICJjb2xsYXBzZWQiLAogICAgICAgICJjb21tb25BbmNlc3Rv
ckNvbnRhaW5lciJdOwoKICAgIHZhciBzMnMgPSAwLCBzMmUgPSAxLCBlMmUgPSAyLCBlMnMgPSAz
OwogICAgdmFyIG5fYiA9IDAsIG5fYSA9IDEsIG5fYl9hID0gMiwgbl9pID0gMzsKCiAgICBmdW5j
dGlvbiBSYW5nZVByb3RvdHlwZSgpIHt9CgogICAgUmFuZ2VQcm90b3R5cGUucHJvdG90eXBlID0g
ewogICAgICAgIGNvbXBhcmVCb3VuZGFyeVBvaW50czogZnVuY3Rpb24oaG93LCByYW5nZSkgewog
ICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3NlcnRTYW1l
RG9jdW1lbnRPckZyYWdtZW50KHRoaXMuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0Q29udGFp
bmVyKTsKCiAgICAgICAgICAgIHZhciBub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNldEI7CiAg
ICAgICAgICAgIHZhciBwcmVmaXhBID0gKGhvdyA9PSBlMnMgfHwgaG93ID09IHMycykgPyAic3Rh
cnQiIDogImVuZCI7CiAgICAgICAgICAgIHZhciBwcmVmaXhCID0gKGhvdyA9PSBzMmUgfHwgaG93
ID09IHMycykgPyAic3RhcnQiIDogImVuZCI7CiAgICAgICAgICAgIG5vZGVBID0gdGhpc1twcmVm
aXhBICsgIkNvbnRhaW5lciJdOwogICAgICAgICAgICBvZmZzZXRBID0gdGhpc1twcmVmaXhBICsg
Ik9mZnNldCJdOwogICAgICAgICAgICBub2RlQiA9IHJhbmdlW3ByZWZpeEIgKyAiQ29udGFpbmVy
Il07CiAgICAgICAgICAgIG9mZnNldEIgPSByYW5nZVtwcmVmaXhCICsgIk9mZnNldCJdOwogICAg
ICAgICAgICByZXR1cm4gY29tcGFyZVBvaW50cyhub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNl
dEIpOwogICAgICAgIH0sCgogICAgICAgIGluc2VydE5vZGU6IGZ1bmN0aW9uKG5vZGUpIHsKICAg
ICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNzZXJ0VmFsaWRO
b2RlVHlwZShub2RlLCBpbnNlcnRhYmxlTm9kZVR5cGVzKTsKICAgICAgICAgICAgYXNzZXJ0Tm9k
ZU5vdFJlYWRPbmx5KHRoaXMuc3RhcnRDb250YWluZXIpOwoKICAgICAgICAgICAgaWYgKGlzT3JJ
c0FuY2VzdG9yT2Yobm9kZSwgdGhpcy5zdGFydENvbnRhaW5lcikpIHsKICAgICAgICAgICAgICAg
IHRocm93IG5ldyBET01FeGNlcHRpb24oIkhJRVJBUkNIWV9SRVFVRVNUX0VSUiIpOwogICAgICAg
ICAgICB9CgogICAgICAgICAgICAvLyBObyBjaGVjayBmb3Igd2hldGhlciB0aGUgY29udGFpbmVy
IG9mIHRoZSBzdGFydCBvZiB0aGUgUmFuZ2UgaXMgb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWxs
b3cKICAgICAgICAgICAgLy8gY2hpbGRyZW4gb2YgdGhlIHR5cGUgb2Ygbm9kZTogdGhlIGJyb3dz
ZXIncyBET00gaW1wbGVtZW50YXRpb24gc2hvdWxkIGRvIHRoaXMgZm9yIHVzIHdoZW4gd2UgYXR0
ZW1wdAogICAgICAgICAgICAvLyB0byBhZGQgdGhlIG5vZGUKCiAgICAgICAgICAgIHZhciBmaXJz
dE5vZGVJbnNlcnRlZCA9IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIHRoaXMuc3RhcnRDb250
YWluZXIsIHRoaXMuc3RhcnRPZmZzZXQpOwogICAgICAgICAgICB0aGlzLnNldFN0YXJ0QmVmb3Jl
KGZpcnN0Tm9kZUluc2VydGVkKTsKICAgICAgICB9LAoKICAgICAgICBjbG9uZUNvbnRlbnRzOiBm
dW5jdGlvbigpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCiAgICAgICAg
ICAgIHZhciBjbG9uZSwgZnJhZzsKICAgICAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkKSB7CiAg
ICAgICAgICAgICAgICByZXR1cm4gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKS5jcmVhdGVEb2N1bWVu
dEZyYWdtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhp
cy5zdGFydENvbnRhaW5lciA9PT0gdGhpcy5lbmRDb250YWluZXIgJiYgaXNDaGFyYWN0ZXJEYXRh
Tm9kZSh0aGlzLnN0YXJ0Q29udGFpbmVyKSkgewogICAgICAgICAgICAgICAgICAgIGNsb25lID0g
dGhpcy5zdGFydENvbnRhaW5lci5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAg
Y2xvbmUuZGF0YSA9IGNsb25lLmRhdGEuc2xpY2UodGhpcy5zdGFydE9mZnNldCwgdGhpcy5lbmRP
ZmZzZXQpOwogICAgICAgICAgICAgICAgICAgIGZyYWcgPSBnZXRSYW5nZURvY3VtZW50KHRoaXMp
LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgICAgICAgICAgICAgICBmcmFnLmFwcGVu
ZENoaWxkKGNsb25lKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhZzsKICAgICAgICAg
ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFJh
bmdlSXRlcmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBjbG9u
ZVN1YnRyZWUoaXRlcmF0b3IpOwogICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmRldGFjaCgp
OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lOwogICAgICAg
ICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgY2FuU3Vycm91bmRDb250ZW50czogZnVuY3Rpb24o
KSB7CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgICAgIGFzc2Vy
dE5vZGVOb3RSZWFkT25seSh0aGlzLnN0YXJ0Q29udGFpbmVyKTsKICAgICAgICAgICAgYXNzZXJ0
Tm9kZU5vdFJlYWRPbmx5KHRoaXMuZW5kQ29udGFpbmVyKTsKCiAgICAgICAgICAgIC8vIENoZWNr
IGlmIHRoZSBjb250ZW50cyBjYW4gYmUgc3Vycm91bmRlZC4gU3BlY2lmaWNhbGx5LCB0aGlzIG1l
YW5zIHdoZXRoZXIgdGhlIHJhbmdlIHBhcnRpYWxseSBzZWxlY3RzCiAgICAgICAgICAgIC8vIG5v
IG5vbi10ZXh0IG5vZGVzLgogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgUmFuZ2VJdGVy
YXRvcih0aGlzLCB0cnVlKTsKICAgICAgICAgICAgdmFyIGJvdW5kYXJpZXNJbnZhbGlkID0gKGl0
ZXJhdG9yLl9maXJzdCAmJiAoaXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2Zp
cnN0LCB0aGlzKSkgfHwKICAgICAgICAgICAgICAgICAgICAoaXRlcmF0b3IuX2xhc3QgJiYgaXNO
b25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2xhc3QsIHRoaXMpKSk7CiAgICAgICAg
ICAgIGl0ZXJhdG9yLmRldGFjaCgpOwogICAgICAgICAgICByZXR1cm4gIWJvdW5kYXJpZXNJbnZh
bGlkOwogICAgICAgIH0sCgogICAgICAgIHN1cnJvdW5kQ29udGVudHM6IGZ1bmN0aW9uKG5vZGUp
IHsKICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBzdXJyb3VuZE5vZGVUeXBl
cyk7CgogICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3Vycm91bmRDb250ZW50cygpKSB7CiAgICAg
ICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIkJBRF9CT1VOREFSWVBPSU5UU19F
UlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgY29udGVudHMK
ICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmV4dHJhY3RDb250ZW50cygpOwoKICAgICAg
ICAgICAgLy8gQ2xlYXIgdGhlIGNoaWxkcmVuIG9mIHRoZSBub2RlCiAgICAgICAgICAgIGlmIChu
b2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgICAgICAgICAgd2hpbGUgKG5vZGUubGFzdENo
aWxkKSB7CiAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGls
ZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEluc2Vy
dCB0aGUgbmV3IG5vZGUgYW5kIGFkZCB0aGUgZXh0cmFjdGVkIGNvbnRlbnRzCiAgICAgICAgICAg
IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3Rh
cnRPZmZzZXQpOwogICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNvbnRlbnQpOwoKICAgICAg
ICAgICAgdGhpcy5zZWxlY3ROb2RlKG5vZGUpOwogICAgICAgIH0sCgogICAgICAgIGNsb25lUmFu
Z2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAg
ICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2UoZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKSk7CiAg
ICAgICAgICAgIHZhciBpID0gcmFuZ2VQcm9wZXJ0aWVzLmxlbmd0aCwgcHJvcDsKICAgICAgICAg
ICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgcHJvcCA9IHJhbmdlUHJvcGVydGllc1tp
XTsKICAgICAgICAgICAgICAgIHJhbmdlW3Byb3BdID0gdGhpc1twcm9wXTsKICAgICAgICAgICAg
fQogICAgICAgICAgICByZXR1cm4gcmFuZ2U7CiAgICAgICAgfSwKCiAgICAgICAgdG9TdHJpbmc6
IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAg
ICAgICB2YXIgc2MgPSB0aGlzLnN0YXJ0Q29udGFpbmVyOwogICAgICAgICAgICBpZiAoc2MgPT09
IHRoaXMuZW5kQ29udGFpbmVyICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUoc2MpKSB7CiAgICAgICAg
ICAgICAgICByZXR1cm4gKHNjLm5vZGVUeXBlID09IDMgfHwgc2Mubm9kZVR5cGUgPT0gNCkgPyBz
Yy5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsIHRoaXMuZW5kT2Zmc2V0KSA6ICIiOwogICAg
ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHRleHRCaXRzID0gW10sIGl0ZXJh
dG9yID0gbmV3IFJhbmdlSXRlcmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBpdGVy
YXRlU3VidHJlZShpdGVyYXRvciwgZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAgICAgICAg
IC8vIEFjY2VwdCBvbmx5IHRleHQgb3IgQ0RBVEEgbm9kZXMsIG5vdCBjb21tZW50cwogICAgICAg
ICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgfHwgbm9kZS5ub2RlVHlwZSA9PSA0
KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRCaXRzLnB1c2gobm9kZS5kYXRhKTsKICAg
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGl0
ZXJhdG9yLmRldGFjaCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRleHRCaXRzLmpvaW4oIiIp
OwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLy8gVGhlIG1ldGhvZHMgYmVsb3cg
YXJlIGFsbCBub24tc3RhbmRhcmQuIFRoZSBmb2xsb3dpbmcgYmF0Y2ggd2VyZSBpbnRyb2R1Y2Vk
IGJ5IE1vemlsbGEgYnV0IGhhdmUgc2luY2UKICAgICAgICAvLyBiZWVuIHJlbW92ZWQgZnJvbSBN
b3ppbGxhLgoKICAgICAgICBjb21wYXJlTm9kZTogZnVuY3Rpb24obm9kZSkgewogICAgICAgICAg
ICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwoKICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUu
cGFyZW50Tm9kZTsKICAgICAgICAgICAgdmFyIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleChub2Rl
KTsKCiAgICAgICAgICAgIGlmICghcGFyZW50KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg
RE9NRXhjZXB0aW9uKCJOT1RfRk9VTkRfRVJSIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg
IHZhciBzdGFydENvbXBhcmlzb24gPSB0aGlzLmNvbXBhcmVQb2ludChwYXJlbnQsIG5vZGVJbmRl
eCksCiAgICAgICAgICAgICAgICBlbmRDb21wYXJpc29uID0gdGhpcy5jb21wYXJlUG9pbnQocGFy
ZW50LCBub2RlSW5kZXggKyAxKTsKCiAgICAgICAgICAgIGlmIChzdGFydENvbXBhcmlzb24gPCAw
KSB7IC8vIE5vZGUgc3RhcnRzIGJlZm9yZQogICAgICAgICAgICAgICAgcmV0dXJuIChlbmRDb21w
YXJpc29uID4gMCkgPyBuX2JfYSA6IG5fYjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgICAgIHJldHVybiAoZW5kQ29tcGFyaXNvbiA+IDApID8gbl9hIDogbl9pOwogICAgICAgICAg
ICB9CiAgICAgICAgfSwKCiAgICAgICAgY29tcGFyZVBvaW50OiBmdW5jdGlvbihub2RlLCBvZmZz
ZXQpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNz
ZXJ0Tm9kZShub2RlLCAiSElFUkFSQ0hZX1JFUVVFU1RfRVJSIik7CiAgICAgICAgICAgIGFzc2Vy
dFNhbWVEb2N1bWVudE9yRnJhZ21lbnQobm9kZSwgdGhpcy5zdGFydENvbnRhaW5lcik7CgogICAg
ICAgICAgICBpZiAoY29tcGFyZVBvaW50cyhub2RlLCBvZmZzZXQsIHRoaXMuc3RhcnRDb250YWlu
ZXIsIHRoaXMuc3RhcnRPZmZzZXQpIDwgMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIC0xOwog
ICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCB0aGlzLmVu
ZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQpID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJu
IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKCiAgICAg
ICAgY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50OiBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQsCgog
ICAgICAgIHRvSHRtbDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQo
dGhpcyk7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbW1vbkFuY2VzdG9yQ29u
dGFpbmVyLnBhcmVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTsKICAgICAgICAgICAgY29udGFpbmVy
LmFwcGVuZENoaWxkKHRoaXMuY2xvbmVDb250ZW50cygpKTsKICAgICAgICAgICAgcmV0dXJuIGNv
bnRhaW5lci5pbm5lckhUTUw7CiAgICAgICAgfSwKCiAgICAgICAgLy8gdG91Y2hpbmdJc0ludGVy
c2VjdGluZyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhpcyBtZXRob2QgY29uc2lkZXJzIGEgbm9kZSB0
aGF0IGJvcmRlcnMgYSByYW5nZSBpbnRlcnNlY3RzCiAgICAgICAgLy8gd2l0aCBpdCAoYXMgaW4g
V2ViS2l0KSBvciBub3QgKGFzIGluIEdlY2tvIHByZS0xLjksIGFuZCB0aGUgZGVmYXVsdCkKICAg
ICAgICBpbnRlcnNlY3RzTm9kZTogZnVuY3Rpb24obm9kZSwgdG91Y2hpbmdJc0ludGVyc2VjdGlu
ZykgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3Nl
cnROb2RlKG5vZGUsICJOT1RfRk9VTkRfRVJSIik7CiAgICAgICAgICAgIGlmIChnZXREb2N1bWVu
dChub2RlKSAhPT0gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKSkgewogICAgICAgICAgICAgICAgcmV0
dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5w
YXJlbnROb2RlLCBvZmZzZXQgPSBnZXROb2RlSW5kZXgobm9kZSk7CiAgICAgICAgICAgIGFzc2Vy
dE5vZGUocGFyZW50LCAiTk9UX0ZPVU5EX0VSUiIpOwoKICAgICAgICAgICAgdmFyIHN0YXJ0Q29t
cGFyaXNvbiA9IGNvbXBhcmVQb2ludHMocGFyZW50LCBvZmZzZXQsIHRoaXMuZW5kQ29udGFpbmVy
LCB0aGlzLmVuZE9mZnNldCksCiAgICAgICAgICAgICAgICBlbmRDb21wYXJpc29uID0gY29tcGFy
ZVBvaW50cyhwYXJlbnQsIG9mZnNldCArIDEsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3Rh
cnRPZmZzZXQpOwoKICAgICAgICAgICAgcmV0dXJuIHRvdWNoaW5nSXNJbnRlcnNlY3RpbmcgPyBz
dGFydENvbXBhcmlzb24gPD0gMCAmJiBlbmRDb21wYXJpc29uID49IDAgOiBzdGFydENvbXBhcmlz
b24gPCAwICYmIGVuZENvbXBhcmlzb24gPiAwOwogICAgICAgIH0sCgogICAgICAgIGlzUG9pbnRJ
blJhbmdlOiBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VW
YWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNzZXJ0Tm9kZShub2RlLCAiSElFUkFSQ0hZX1JFUVVF
U1RfRVJSIik7CiAgICAgICAgICAgIGFzc2VydFNhbWVEb2N1bWVudE9yRnJhZ21lbnQobm9kZSwg
dGhpcy5zdGFydENvbnRhaW5lcik7CgogICAgICAgICAgICByZXR1cm4gKGNvbXBhcmVQb2ludHMo
bm9kZSwgb2Zmc2V0LCB0aGlzLnN0YXJ0Q29udGFpbmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KSA+PSAw
KSAmJgogICAgICAgICAgICAgICAgICAgKGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCB0aGlz
LmVuZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQpIDw9IDApOwogICAgICAgIH0sCgogICAgICAg
IC8vIFRoZSBtZXRob2RzIGJlbG93IGFyZSBub24tc3RhbmRhcmQgYW5kIGludmVudGVkIGJ5IG1l
LgoKICAgICAgICAvLyBTaGFyaW5nIGEgYm91bmRhcnkgc3RhcnQtdG8tZW5kIG9yIGVuZC10by1z
dGFydCBkb2VzIG5vdCBjb3VudCBhcyBpbnRlcnNlY3Rpb24uCiAgICAgICAgaW50ZXJzZWN0c1Jh
bmdlOiBmdW5jdGlvbihyYW5nZSkgewogICAgICAgICAgICByZXR1cm4gcmFuZ2VzSW50ZXJzZWN0
KHRoaXMsIHJhbmdlLCBmYWxzZSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gU2hhcmluZyBhIGJv
dW5kYXJ5IHN0YXJ0LXRvLWVuZCBvciBlbmQtdG8tc3RhcnQgZG9lcyBjb3VudCBhcyBpbnRlcnNl
Y3Rpb24uCiAgICAgICAgaW50ZXJzZWN0c09yVG91Y2hlc1JhbmdlOiBmdW5jdGlvbihyYW5nZSkg
ewogICAgICAgICAgICByZXR1cm4gcmFuZ2VzSW50ZXJzZWN0KHRoaXMsIHJhbmdlLCB0cnVlKTsK
ICAgICAgICB9LAoKICAgICAgICBpbnRlcnNlY3Rpb246IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAg
ICAgICAgIGlmICh0aGlzLmludGVyc2VjdHNSYW5nZShyYW5nZSkpIHsKICAgICAgICAgICAgICAg
IHZhciBzdGFydENvbXBhcmlzb24gPSBjb21wYXJlUG9pbnRzKHRoaXMuc3RhcnRDb250YWluZXIs
IHRoaXMuc3RhcnRPZmZzZXQsIHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNl
dCksCiAgICAgICAgICAgICAgICAgICAgZW5kQ29tcGFyaXNvbiA9IGNvbXBhcmVQb2ludHModGhp
cy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zmc2V0LCByYW5nZS5lbmRDb250YWluZXIsIHJhbmdl
LmVuZE9mZnNldCk7CgogICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvblJhbmdlID0gdGhp
cy5jbG9uZVJhbmdlKCk7CiAgICAgICAgICAgICAgICBpZiAoc3RhcnRDb21wYXJpc29uID09IC0x
KSB7CiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUmFuZ2Uuc2V0U3RhcnQocmFuZ2Uu
c3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KTsKICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgIGlmIChlbmRDb21wYXJpc29uID09IDEpIHsKICAgICAgICAgICAgICAgICAg
ICBpbnRlcnNlY3Rpb25SYW5nZS5zZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRP
ZmZzZXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2Vj
dGlvblJhbmdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg
IH0sCgogICAgICAgIHVuaW9uOiBmdW5jdGlvbihyYW5nZSkgewogICAgICAgICAgICBpZiAodGhp
cy5pbnRlcnNlY3RzT3JUb3VjaGVzUmFuZ2UocmFuZ2UpKSB7CiAgICAgICAgICAgICAgICB2YXIg
dW5pb25SYW5nZSA9IHRoaXMuY2xvbmVSYW5nZSgpOwogICAgICAgICAgICAgICAgaWYgKGNvbXBh
cmVQb2ludHMocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0LCB0aGlzLnN0
YXJ0Q29udGFpbmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KSA9PSAtMSkgewogICAgICAgICAgICAgICAg
ICAgIHVuaW9uUmFuZ2Uuc2V0U3RhcnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0
T2Zmc2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb21wYXJlUG9p
bnRzKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0LCB0aGlzLmVuZENvbnRhaW5l
ciwgdGhpcy5lbmRPZmZzZXQpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB1bmlvblJhbmdl
LnNldEVuZChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7CiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdW5pb25SYW5nZTsKICAgICAgICAgICAgfSBl
bHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUV4Y2VwdGlvbigiUmFuZ2VzIGRv
IG5vdCBpbnRlcnNlY3QiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNvbnRh
aW5zTm9kZTogZnVuY3Rpb24obm9kZSwgYWxsb3dQYXJ0aWFsKSB7CiAgICAgICAgICAgIGlmIChh
bGxvd1BhcnRpYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdHNOb2Rl
KG5vZGUsIGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVy
biB0aGlzLmNvbXBhcmVOb2RlKG5vZGUpID09IG5faTsKICAgICAgICAgICAgfQogICAgICAgIH0s
CgogICAgICAgIGNvbnRhaW5zTm9kZUNvbnRlbnRzOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgIHJldHVybiB0aGlzLmNvbXBhcmVQb2ludChub2RlLCAwKSA+PSAwICYmIHRoaXMuY29tcGFy
ZVBvaW50KG5vZGUsIGdldE5vZGVMZW5ndGgobm9kZSkpIDw9IDA7CiAgICAgICAgfSwKCiAgICAg
ICAgY29udGFpbnNSYW5nZTogZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICAgICAgdmFyIGludGVy
c2VjdGlvbiA9IHRoaXMuaW50ZXJzZWN0aW9uKHJhbmdlKTsKICAgICAgICAgICAgcmV0dXJuIGlu
dGVyc2VjdGlvbiAhPT0gbnVsbCAmJiByYW5nZS5lcXVhbHMoaW50ZXJzZWN0aW9uKTsKICAgICAg
ICB9LAoKICAgICAgICBjb250YWluc05vZGVUZXh0OiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgIHZhciBub2RlUmFuZ2UgPSB0aGlzLmNsb25lUmFuZ2UoKTsKICAgICAgICAgICAgbm9kZVJh
bmdlLnNlbGVjdE5vZGUobm9kZSk7CiAgICAgICAgICAgIHZhciB0ZXh0Tm9kZXMgPSBub2RlUmFu
Z2UuZ2V0Tm9kZXMoWzNdKTsKICAgICAgICAgICAgaWYgKHRleHROb2Rlcy5sZW5ndGggPiAwKSB7
CiAgICAgICAgICAgICAgICBub2RlUmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGVzWzBdLCAwKTsKICAg
ICAgICAgICAgICAgIHZhciBsYXN0VGV4dE5vZGUgPSB0ZXh0Tm9kZXMucG9wKCk7CiAgICAgICAg
ICAgICAgICBub2RlUmFuZ2Uuc2V0RW5kKGxhc3RUZXh0Tm9kZSwgbGFzdFRleHROb2RlLmxlbmd0
aCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmNvbnRhaW5zUmFuZ2Uobm9k
ZVJhbmdlKTsKICAgICAgICAgICAgICAgIG5vZGVSYW5nZS5kZXRhY2goKTsKICAgICAgICAgICAg
ICAgIHJldHVybiBjb250YWluczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg
IHJldHVybiB0aGlzLmNvbnRhaW5zTm9kZUNvbnRlbnRzKG5vZGUpOwogICAgICAgICAgICB9CiAg
ICAgICAgfSwKCiAgICAgICAgZ2V0Tm9kZXM6IGZ1bmN0aW9uKG5vZGVUeXBlcywgZmlsdGVyKSB7
CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgICAgIHJldHVybiBn
ZXROb2Rlc0luUmFuZ2UodGhpcywgbm9kZVR5cGVzLCBmaWx0ZXIpOwogICAgICAgIH0sCgogICAg
ICAgIGdldERvY3VtZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGdldFJhbmdl
RG9jdW1lbnQodGhpcyk7CiAgICAgICAgfSwKCiAgICAgICAgY29sbGFwc2VCZWZvcmU6IGZ1bmN0
aW9uKG5vZGUpIHsKICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CgogICAgICAg
ICAgICB0aGlzLnNldEVuZEJlZm9yZShub2RlKTsKICAgICAgICAgICAgdGhpcy5jb2xsYXBzZShm
YWxzZSk7CiAgICAgICAgfSwKCiAgICAgICAgY29sbGFwc2VBZnRlcjogZnVuY3Rpb24obm9kZSkg
ewogICAgICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0aGlzKTsKCiAgICAgICAgICAgIHRoaXMu
c2V0U3RhcnRBZnRlcihub2RlKTsKICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSh0cnVlKTsKICAg
ICAgICB9LAogICAgICAgIAogICAgICAgIGdldEJvb2ttYXJrOiBmdW5jdGlvbihjb250YWluZXJO
b2RlKSB7CiAgICAgICAgICAgIHZhciBkb2MgPSBnZXRSYW5nZURvY3VtZW50KHRoaXMpOwogICAg
ICAgICAgICB2YXIgcHJlU2VsZWN0aW9uUmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2UoZG9jKTsKICAg
ICAgICAgICAgY29udGFpbmVyTm9kZSA9IGNvbnRhaW5lck5vZGUgfHwgZG9tLmdldEJvZHkoZG9j
KTsKICAgICAgICAgICAgcHJlU2VsZWN0aW9uUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGNvbnRh
aW5lck5vZGUpOwogICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmludGVyc2VjdGlvbihwcmVT
ZWxlY3Rpb25SYW5nZSk7CiAgICAgICAgICAgIHZhciBzdGFydCA9IDAsIGVuZCA9IDA7CiAgICAg
ICAgICAgIGlmIChyYW5nZSkgewogICAgICAgICAgICAgICAgcHJlU2VsZWN0aW9uUmFuZ2Uuc2V0
RW5kKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7CiAgICAgICAgICAg
ICAgICBzdGFydCA9IHByZVNlbGVjdGlvblJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoOwogICAgICAg
ICAgICAgICAgZW5kID0gc3RhcnQgKyByYW5nZS50b1N0cmluZygpLmxlbmd0aDsKICAgICAgICAg
ICAgICAgIHByZVNlbGVjdGlvblJhbmdlLmRldGFjaCgpOwogICAgICAgICAgICB9CgogICAgICAg
ICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICAg
ICAgZW5kOiBlbmQsCiAgICAgICAgICAgICAgICBjb250YWluZXJOb2RlOiBjb250YWluZXJOb2Rl
CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBtb3ZlVG9Cb29rbWFy
azogZnVuY3Rpb24oYm9va21hcmspIHsKICAgICAgICAgICAgdmFyIGNvbnRhaW5lck5vZGUgPSBi
b29rbWFyay5jb250YWluZXJOb2RlOwogICAgICAgICAgICB2YXIgY2hhckluZGV4ID0gMDsKICAg
ICAgICAgICAgdGhpcy5zZXRTdGFydChjb250YWluZXJOb2RlLCAwKTsKICAgICAgICAgICAgdGhp
cy5jb2xsYXBzZSh0cnVlKTsKICAgICAgICAgICAgdmFyIG5vZGVTdGFjayA9IFtjb250YWluZXJO
b2RlXSwgbm9kZSwgZm91bmRTdGFydCA9IGZhbHNlLCBzdG9wID0gZmFsc2U7CiAgICAgICAgICAg
IHZhciBuZXh0Q2hhckluZGV4LCBpLCBjaGlsZE5vZGVzOwoKICAgICAgICAgICAgd2hpbGUgKCFz
dG9wICYmIChub2RlID0gbm9kZVN0YWNrLnBvcCgpKSkgewogICAgICAgICAgICAgICAgaWYgKG5v
ZGUubm9kZVR5cGUgPT0gMykgewogICAgICAgICAgICAgICAgICAgIG5leHRDaGFySW5kZXggPSBj
aGFySW5kZXggKyBub2RlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kU3Rh
cnQgJiYgYm9va21hcmsuc3RhcnQgPj0gY2hhckluZGV4ICYmIGJvb2ttYXJrLnN0YXJ0IDw9IG5l
eHRDaGFySW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGFydChub2Rl
LCBib29rbWFyay5zdGFydCAtIGNoYXJJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZv
dW5kU3RhcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICBpZiAoZm91bmRTdGFydCAmJiBib29rbWFyay5lbmQgPj0gY2hhckluZGV4ICYmIGJvb2ttYXJr
LmVuZCA8PSBuZXh0Q2hhckluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0
RW5kKG5vZGUsIGJvb2ttYXJrLmVuZCAtIGNoYXJJbmRleCk7CiAgICAgICAgICAgICAgICAgICAg
ICAgIHN0b3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICBjaGFySW5kZXggPSBuZXh0Q2hhckluZGV4OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAg
ICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzID0gbm9kZS5jaGlsZE5vZGVzOwogICAgICAgICAg
ICAgICAgICAgIGkgPSBjaGlsZE5vZGVzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB3aGls
ZSAoaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGFjay5wdXNoKGNoaWxkTm9k
ZXNbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgfQogICAgICAgIH0sCgogICAgICAgIGdldE5hbWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAg
ICByZXR1cm4gIkRvbVJhbmdlIjsKICAgICAgICB9LAoKICAgICAgICBlcXVhbHM6IGZ1bmN0aW9u
KHJhbmdlKSB7CiAgICAgICAgICAgIHJldHVybiBSYW5nZS5yYW5nZXNFcXVhbCh0aGlzLCByYW5n
ZSk7CiAgICAgICAgfSwKCiAgICAgICAgaXNWYWxpZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAg
IHJldHVybiBpc1JhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBp
bnNwZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGluc3BlY3QodGhpcyk7CiAg
ICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBjb3B5Q29tcGFyaXNvbkNvbnN0YW50c1RvT2Jq
ZWN0KG9iaikgewogICAgICAgIG9iai5TVEFSVF9UT19TVEFSVCA9IHMyczsKICAgICAgICBvYmou
U1RBUlRfVE9fRU5EID0gczJlOwogICAgICAgIG9iai5FTkRfVE9fRU5EID0gZTJlOwogICAgICAg
IG9iai5FTkRfVE9fU1RBUlQgPSBlMnM7CgogICAgICAgIG9iai5OT0RFX0JFRk9SRSA9IG5fYjsK
ICAgICAgICBvYmouTk9ERV9BRlRFUiA9IG5fYTsKICAgICAgICBvYmouTk9ERV9CRUZPUkVfQU5E
X0FGVEVSID0gbl9iX2E7CiAgICAgICAgb2JqLk5PREVfSU5TSURFID0gbl9pOwogICAgfQoKICAg
IGZ1bmN0aW9uIGNvcHlDb21wYXJpc29uQ29uc3RhbnRzKGNvbnN0cnVjdG9yKSB7CiAgICAgICAg
Y29weUNvbXBhcmlzb25Db25zdGFudHNUb09iamVjdChjb25zdHJ1Y3Rvcik7CiAgICAgICAgY29w
eUNvbXBhcmlzb25Db25zdGFudHNUb09iamVjdChjb25zdHJ1Y3Rvci5wcm90b3R5cGUpOwogICAg
fQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVJhbmdlQ29udGVudFJlbW92ZXIocmVtb3ZlciwgYm91bmRh
cnlVcGRhdGVyKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3Nl
cnRSYW5nZVZhbGlkKHRoaXMpOwoKICAgICAgICAgICAgdmFyIHNjID0gdGhpcy5zdGFydENvbnRh
aW5lciwgc28gPSB0aGlzLnN0YXJ0T2Zmc2V0LCByb290ID0gdGhpcy5jb21tb25BbmNlc3RvckNv
bnRhaW5lcjsKCiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBSYW5nZUl0ZXJhdG9yKHRo
aXMsIHRydWUpOwoKICAgICAgICAgICAgLy8gV29yayBvdXQgd2hlcmUgdG8gcG9zaXRpb24gdGhl
IHJhbmdlIGFmdGVyIGNvbnRlbnQgcmVtb3ZhbAogICAgICAgICAgICB2YXIgbm9kZSwgYm91bmRh
cnk7CiAgICAgICAgICAgIGlmIChzYyAhPT0gcm9vdCkgewogICAgICAgICAgICAgICAgbm9kZSA9
IGdldENsb3Nlc3RBbmNlc3RvckluKHNjLCByb290LCB0cnVlKTsKICAgICAgICAgICAgICAgIGJv
dW5kYXJ5ID0gZ2V0Qm91bmRhcnlBZnRlck5vZGUobm9kZSk7CiAgICAgICAgICAgICAgICBzYyA9
IGJvdW5kYXJ5Lm5vZGU7CiAgICAgICAgICAgICAgICBzbyA9IGJvdW5kYXJ5Lm9mZnNldDsKICAg
ICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hlY2sgbm9uZSBvZiB0aGUgcmFuZ2UgaXMgcmVh
ZC1vbmx5CiAgICAgICAgICAgIGl0ZXJhdGVTdWJ0cmVlKGl0ZXJhdG9yLCBhc3NlcnROb2RlTm90
UmVhZE9ubHkpOwoKICAgICAgICAgICAgaXRlcmF0b3IucmVzZXQoKTsKCiAgICAgICAgICAgIC8v
IFJlbW92ZSB0aGUgY29udGVudAogICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSByZW1vdmVy
KGl0ZXJhdG9yKTsKICAgICAgICAgICAgaXRlcmF0b3IuZGV0YWNoKCk7CgogICAgICAgICAgICAv
LyBNb3ZlIHRvIHRoZSBuZXcgcG9zaXRpb24KICAgICAgICAgICAgYm91bmRhcnlVcGRhdGVyKHRo
aXMsIHNjLCBzbywgc2MsIHNvKTsKCiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICAg
ICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVByb3RvdHlwZVJhbmdlKGNvbnN0cnVj
dG9yLCBib3VuZGFyeVVwZGF0ZXIsIGRldGFjaGVyKSB7CiAgICAgICAgZnVuY3Rpb24gY3JlYXRl
QmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKGlzQmVmb3JlLCBpc1N0YXJ0KSB7CiAgICAgICAgICAgIHJl
dHVybiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0
aGlzKTsKICAgICAgICAgICAgICAgIGFzc2VydFZhbGlkTm9kZVR5cGUobm9kZSwgYmVmb3JlQWZ0
ZXJOb2RlVHlwZXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlwZShnZXRSb290
Q29udGFpbmVyKG5vZGUpLCByb290Q29udGFpbmVyTm9kZVR5cGVzKTsKCiAgICAgICAgICAgICAg
ICB2YXIgYm91bmRhcnkgPSAoaXNCZWZvcmUgPyBnZXRCb3VuZGFyeUJlZm9yZU5vZGUgOiBnZXRC
b3VuZGFyeUFmdGVyTm9kZSkobm9kZSk7CiAgICAgICAgICAgICAgICAoaXNTdGFydCA/IHNldFJh
bmdlU3RhcnQgOiBzZXRSYW5nZUVuZCkodGhpcywgYm91bmRhcnkubm9kZSwgYm91bmRhcnkub2Zm
c2V0KTsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFJhbmdl
U3RhcnQocmFuZ2UsIG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICB2YXIgZWMgPSByYW5nZS5l
bmRDb250YWluZXIsIGVvID0gcmFuZ2UuZW5kT2Zmc2V0OwogICAgICAgICAgICBpZiAobm9kZSAh
PT0gcmFuZ2Uuc3RhcnRDb250YWluZXIgfHwgb2Zmc2V0ICE9PSByYW5nZS5zdGFydE9mZnNldCkg
ewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJvb3QgY29udGFpbmVycyBvZiB0aGUgcmFu
Z2UgYW5kIHRoZSBuZXcgYm91bmRhcnksIGFuZCBhbHNvIGNoZWNrIHdoZXRoZXIgdGhlIG5ldyBi
b3VuZGFyeQogICAgICAgICAgICAgICAgLy8gaXMgYWZ0ZXIgdGhlIGN1cnJlbnQgZW5kLiBJbiBl
aXRoZXIgY2FzZSwgY29sbGFwc2UgdGhlIHJhbmdlIHRvIHRoZSBuZXcgcG9zaXRpb24KICAgICAg
ICAgICAgICAgIGlmIChnZXRSb290Q29udGFpbmVyKG5vZGUpICE9IGdldFJvb3RDb250YWluZXIo
ZWMpIHx8IGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCBlYywgZW8pID09IDEpIHsKICAgICAg
ICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgZW8gPSBvZmZzZXQ7
CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIocmFuZ2Us
IG5vZGUsIG9mZnNldCwgZWMsIGVvKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg
ZnVuY3Rpb24gc2V0UmFuZ2VFbmQocmFuZ2UsIG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICB2
YXIgc2MgPSByYW5nZS5zdGFydENvbnRhaW5lciwgc28gPSByYW5nZS5zdGFydE9mZnNldDsKICAg
ICAgICAgICAgaWYgKG5vZGUgIT09IHJhbmdlLmVuZENvbnRhaW5lciB8fCBvZmZzZXQgIT09IHJh
bmdlLmVuZE9mZnNldCkgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJvb3QgY29udGFp
bmVycyBvZiB0aGUgcmFuZ2UgYW5kIHRoZSBuZXcgYm91bmRhcnksIGFuZCBhbHNvIGNoZWNrIHdo
ZXRoZXIgdGhlIG5ldyBib3VuZGFyeQogICAgICAgICAgICAgICAgLy8gaXMgYWZ0ZXIgdGhlIGN1
cnJlbnQgZW5kLiBJbiBlaXRoZXIgY2FzZSwgY29sbGFwc2UgdGhlIHJhbmdlIHRvIHRoZSBuZXcg
cG9zaXRpb24KICAgICAgICAgICAgICAgIGlmIChnZXRSb290Q29udGFpbmVyKG5vZGUpICE9IGdl
dFJvb3RDb250YWluZXIoc2MpIHx8IGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCBzYywgc28p
ID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgc2MgPSBub2RlOwogICAgICAgICAgICAgICAg
ICAgIHNvID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYm91bmRh
cnlVcGRhdGVyKHJhbmdlLCBzYywgc28sIG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0KICAg
ICAgICB9CgogICAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSYW5nZVByb3RvdHlw
ZSgpOwoKICAgICAgICB1dGlsLmV4dGVuZChjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAg
ICAgICAgc2V0U3RhcnQ6IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICAgICAg
YXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CiAgICAgICAgICAgICAgICBhc3NlcnROb0RvY1R5cGVO
b3RhdGlvbkVudGl0eUFuY2VzdG9yKG5vZGUsIHRydWUpOwogICAgICAgICAgICAgICAgYXNzZXJ0
VmFsaWRPZmZzZXQobm9kZSwgb2Zmc2V0KTsKCiAgICAgICAgICAgICAgICBzZXRSYW5nZVN0YXJ0
KHRoaXMsIG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzZXRFbmQ6
IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNo
ZWQodGhpcyk7CiAgICAgICAgICAgICAgICBhc3NlcnROb0RvY1R5cGVOb3RhdGlvbkVudGl0eUFu
Y2VzdG9yKG5vZGUsIHRydWUpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWRPZmZzZXQobm9k
ZSwgb2Zmc2V0KTsKCiAgICAgICAgICAgICAgICBzZXRSYW5nZUVuZCh0aGlzLCBub2RlLCBvZmZz
ZXQpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZl
bmllbmNlIG1ldGhvZCB0byBzZXQgYSByYW5nZSdzIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcy4g
T3ZlcmxvYWRlZCBhcyBmb2xsb3dzOgogICAgICAgICAgICAgKiAtIFR3byBwYXJhbWV0ZXJzIChu
b2RlLCBvZmZzZXQpIGNyZWF0ZXMgYSBjb2xsYXBzZWQgcmFuZ2UgYXQgdGhhdCBwb3NpdGlvbgog
ICAgICAgICAgICAgKiAtIFRocmVlIHBhcmFtZXRlcnMgKG5vZGUsIHN0YXJ0T2Zmc2V0LCBlbmRP
ZmZzZXQpIGNyZWF0ZXMgYSByYW5nZSBjb250YWluZWQgd2l0aCBub2RlIHN0YXJ0aW5nIGF0CiAg
ICAgICAgICAgICAqICAgc3RhcnRPZmZzZXQgYW5kIGVuZGluZyBhdCBlbmRPZmZzZXQKICAgICAg
ICAgICAgICogLSBGb3VyIHBhcmFtZXRlcnMgKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQsIGVuZE5v
ZGUsIGVuZE9mZnNldCkgY3JlYXRlcyBhIHJhbmdlIHN0YXJ0aW5nIGF0IHN0YXJ0T2Zmc2V0IGlu
CiAgICAgICAgICAgICAqICAgc3RhcnROb2RlIGFuZCBlbmRpbmcgYXQgZW5kT2Zmc2V0IGluIGVu
ZE5vZGUKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHNldFN0YXJ0QW5kRW5kOiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgICAgIGFzc2VydE5vdERldGFjaGVkKHRoaXMpOwoKICAgICAgICAg
ICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgdmFyIHNjID0gYXJn
c1swXSwgc28gPSBhcmdzWzFdLCBlYyA9IHNjLCBlbyA9IHNvOwoKICAgICAgICAgICAgICAgIHN3
aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGVvID0gYXJnc1syXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBl
YyA9IGFyZ3NbMl07CiAgICAgICAgICAgICAgICAgICAgICAgIGVvID0gYXJnc1szXTsKICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg
ICAgYm91bmRhcnlVcGRhdGVyKHRoaXMsIHNjLCBzbywgZWMsIGVvKTsKICAgICAgICAgICAgfSwK
ICAgICAgICAgICAgCiAgICAgICAgICAgIHNldEJvdW5kYXJ5OiBmdW5jdGlvbihub2RlLCBvZmZz
ZXQsIGlzU3RhcnQpIHsKICAgICAgICAgICAgICAgIHRoaXNbInNldCIgKyAoaXNTdGFydCA/ICJT
dGFydCIgOiAiRW5kIildKG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAg
ICBzZXRTdGFydEJlZm9yZTogY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKHRydWUsIHRydWUp
LAogICAgICAgICAgICBzZXRTdGFydEFmdGVyOiBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIo
ZmFsc2UsIHRydWUpLAogICAgICAgICAgICBzZXRFbmRCZWZvcmU6IGNyZWF0ZUJlZm9yZUFmdGVy
Tm9kZVNldHRlcih0cnVlLCBmYWxzZSksCiAgICAgICAgICAgIHNldEVuZEFmdGVyOiBjcmVhdGVC
ZWZvcmVBZnRlck5vZGVTZXR0ZXIoZmFsc2UsIGZhbHNlKSwKCiAgICAgICAgICAgIGNvbGxhcHNl
OiBmdW5jdGlvbihpc1N0YXJ0KSB7CiAgICAgICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRo
aXMpOwogICAgICAgICAgICAgICAgaWYgKGlzU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICBi
b3VuZGFyeVVwZGF0ZXIodGhpcywgdGhpcy5zdGFydENvbnRhaW5lciwgdGhpcy5zdGFydE9mZnNl
dCwgdGhpcy5zdGFydENvbnRhaW5lciwgdGhpcy5zdGFydE9mZnNldCk7CiAgICAgICAgICAgICAg
ICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5VXBkYXRlcih0aGlzLCB0aGlz
LmVuZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQsIHRoaXMuZW5kQ29udGFpbmVyLCB0aGlzLmVu
ZE9mZnNldCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBz
ZWxlY3ROb2RlQ29udGVudHM6IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIGFzc2Vy
dE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0Tm9Eb2NUeXBlTm90YXRp
b25FbnRpdHlBbmNlc3Rvcihub2RlLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBib3VuZGFyeVVw
ZGF0ZXIodGhpcywgbm9kZSwgMCwgbm9kZSwgZ2V0Tm9kZUxlbmd0aChub2RlKSk7CiAgICAgICAg
ICAgIH0sCgogICAgICAgICAgICBzZWxlY3ROb2RlOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0aGlzKTsKICAgICAgICAgICAgICAgIGFzc2VydE5v
RG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgZmFsc2UpOwogICAgICAgICAgICAg
ICAgYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBiZWZvcmVBZnRlck5vZGVUeXBlcyk7CgogICAg
ICAgICAgICAgICAgdmFyIHN0YXJ0ID0gZ2V0Qm91bmRhcnlCZWZvcmVOb2RlKG5vZGUpLCBlbmQg
PSBnZXRCb3VuZGFyeUFmdGVyTm9kZShub2RlKTsKICAgICAgICAgICAgICAgIGJvdW5kYXJ5VXBk
YXRlcih0aGlzLCBzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQsIGVuZC5ub2RlLCBlbmQub2Zmc2V0
KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGV4dHJhY3RDb250ZW50czogY3JlYXRlUmFu
Z2VDb250ZW50UmVtb3ZlcihleHRyYWN0U3VidHJlZSwgYm91bmRhcnlVcGRhdGVyKSwKCiAgICAg
ICAgICAgIGRlbGV0ZUNvbnRlbnRzOiBjcmVhdGVSYW5nZUNvbnRlbnRSZW1vdmVyKGRlbGV0ZVN1
YnRyZWUsIGJvdW5kYXJ5VXBkYXRlciksCgogICAgICAgICAgICBjYW5TdXJyb3VuZENvbnRlbnRz
OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAg
ICAgICAgICAgICAgICBhc3NlcnROb2RlTm90UmVhZE9ubHkodGhpcy5zdGFydENvbnRhaW5lcik7
CiAgICAgICAgICAgICAgICBhc3NlcnROb2RlTm90UmVhZE9ubHkodGhpcy5lbmRDb250YWluZXIp
OwoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250ZW50cyBjYW4gYmUgc3Vycm91
bmRlZC4gU3BlY2lmaWNhbGx5LCB0aGlzIG1lYW5zIHdoZXRoZXIgdGhlIHJhbmdlIHBhcnRpYWxs
eSBzZWxlY3RzCiAgICAgICAgICAgICAgICAvLyBubyBub24tdGV4dCBub2Rlcy4KICAgICAgICAg
ICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBSYW5nZUl0ZXJhdG9yKHRoaXMsIHRydWUpOwogICAg
ICAgICAgICAgICAgdmFyIGJvdW5kYXJpZXNJbnZhbGlkID0gKGl0ZXJhdG9yLl9maXJzdCAmJiAo
aXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2ZpcnN0LCB0aGlzKSkgfHwKICAg
ICAgICAgICAgICAgICAgICAgICAgKGl0ZXJhdG9yLl9sYXN0ICYmIGlzTm9uVGV4dFBhcnRpYWxs
eVNlbGVjdGVkKGl0ZXJhdG9yLl9sYXN0LCB0aGlzKSkpOwogICAgICAgICAgICAgICAgaXRlcmF0
b3IuZGV0YWNoKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gIWJvdW5kYXJpZXNJbnZhbGlkOwog
ICAgICAgICAgICB9LAoKICAgICAgICAgICAgZGV0YWNoOiBmdW5jdGlvbigpIHsKICAgICAgICAg
ICAgICAgIGRldGFjaGVyKHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc3BsaXRC
b3VuZGFyaWVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHNwbGl0UmFuZ2VCb3VuZGFy
aWVzKHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc3BsaXRCb3VuZGFyaWVzUHJl
c2VydmluZ1Bvc2l0aW9uczogZnVuY3Rpb24ocG9zaXRpb25zVG9QcmVzZXJ2ZSkgewogICAgICAg
ICAgICAgICAgc3BsaXRSYW5nZUJvdW5kYXJpZXModGhpcywgcG9zaXRpb25zVG9QcmVzZXJ2ZSk7
CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBub3JtYWxpemVCb3VuZGFyaWVzOiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CgogICAgICAgICAg
ICAgICAgdmFyIHNjID0gdGhpcy5zdGFydENvbnRhaW5lciwgc28gPSB0aGlzLnN0YXJ0T2Zmc2V0
LCBlYyA9IHRoaXMuZW5kQ29udGFpbmVyLCBlbyA9IHRoaXMuZW5kT2Zmc2V0OwoKICAgICAgICAg
ICAgICAgIHZhciBtZXJnZUZvcndhcmQgPSBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAg
ICAgICAgdmFyIHNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAg
IGlmIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT0gbm9kZS5ub2RlVHlwZSkgewogICAg
ICAgICAgICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVv
ID0gbm9kZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kRGF0YShz
aWJsaW5nLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5nLnBhcmVudE5vZGUu
cmVtb3ZlQ2hpbGQoc2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbWVyZ2VCYWNrd2FyZCA9IGZ1bmN0aW9uKG5vZGUp
IHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5n
OwogICAgICAgICAgICAgICAgICAgIGlmIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT0g
bm9kZS5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzYyA9IG5vZGU7CiAgICAg
ICAgICAgICAgICAgICAgICAgIHZhciBub2RlTGVuZ3RoID0gbm9kZS5sZW5ndGg7CiAgICAgICAg
ICAgICAgICAgICAgICAgIHNvID0gc2libGluZy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAg
ICAgIG5vZGUuaW5zZXJ0RGF0YSgwLCBzaWJsaW5nLmRhdGEpOwogICAgICAgICAgICAgICAgICAg
ICAgICBzaWJsaW5nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2libGluZyk7CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIChzYyA9PSBlYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZW8gKz0gc287CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYyA9IHNjOwogICAgICAgICAg
ICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVjID09IG5vZGUucGFyZW50Tm9kZSkgewogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleChub2RlKTsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbyA9PSBub2RlSW5kZXgpIHsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZW8gPSBub2RlTGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg
fSBlbHNlIGlmIChlbyA+IG5vZGVJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGVvLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAg
ICAgICAgICAgIHZhciBub3JtYWxpemVTdGFydCA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYg
KGlzQ2hhcmFjdGVyRGF0YU5vZGUoZWMpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVjLmxl
bmd0aCA9PSBlbykgewogICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUZvcndhcmQoZWMpOwog
ICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICAgICAgaWYgKGVvID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTm9k
ZSA9IGVjLmNoaWxkTm9kZXNbZW8gLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVu
ZE5vZGUgJiYgaXNDaGFyYWN0ZXJEYXRhTm9kZShlbmROb2RlKSkgewogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbWVyZ2VGb3J3YXJkKGVuZE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZVN0
YXJ0ID0gIXRoaXMuY29sbGFwc2VkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAg
IGlmIChub3JtYWxpemVTdGFydCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc0NoYXJhY3Rl
ckRhdGFOb2RlKHNjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc28gPT0gMCkgewog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VCYWNrd2FyZChzYyk7CiAgICAgICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg
ICAgICAgICAgICBpZiAoc28gPCBzYy5jaGlsZE5vZGVzLmxlbmd0aCkgewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHNjLmNoaWxkTm9kZXNbc29dOwogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0Tm9kZSAmJiBpc0NoYXJhY3RlckRhdGFOb2Rl
KHN0YXJ0Tm9kZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUJhY2t3
YXJkKHN0YXJ0Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVs
c2UgewogICAgICAgICAgICAgICAgICAgIHNjID0gZWM7CiAgICAgICAgICAgICAgICAgICAgc28g
PSBlbzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIo
dGhpcywgc2MsIHNvLCBlYywgZW8pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY29sbGFw
c2VUb1BvaW50OiBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgICAgIGFzc2Vy
dE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0Tm9Eb2NUeXBlTm90YXRp
b25FbnRpdHlBbmNlc3Rvcihub2RlLCB0cnVlKTsKICAgICAgICAgICAgICAgIGFzc2VydFZhbGlk
T2Zmc2V0KG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXJ0QW5kRW5k
KG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgY29weUNv
bXBhcmlzb25Db25zdGFudHMoY29uc3RydWN0b3IpOwogICAgfQoKICAgIC8qLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLy8gVXBk
YXRlcyBjb21tb25BbmNlc3RvckNvbnRhaW5lciBhbmQgY29sbGFwc2VkIGFmdGVyIGJvdW5kYXJ5
IGNoYW5nZQogICAgZnVuY3Rpb24gdXBkYXRlQ29sbGFwc2VkQW5kQ29tbW9uQW5jZXN0b3IocmFu
Z2UpIHsKICAgICAgICByYW5nZS5jb2xsYXBzZWQgPSAocmFuZ2Uuc3RhcnRDb250YWluZXIgPT09
IHJhbmdlLmVuZENvbnRhaW5lciAmJiByYW5nZS5zdGFydE9mZnNldCA9PT0gcmFuZ2UuZW5kT2Zm
c2V0KTsKICAgICAgICByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciA9IHJhbmdlLmNvbGxh
cHNlZCA/CiAgICAgICAgICAgIHJhbmdlLnN0YXJ0Q29udGFpbmVyIDogZG9tLmdldENvbW1vbkFu
Y2VzdG9yKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5lbmRDb250YWluZXIpOwogICAgfQoK
ICAgIGZ1bmN0aW9uIHVwZGF0ZUJvdW5kYXJpZXMocmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBzdGFy
dE9mZnNldCwgZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpIHsKICAgICAgICByYW5nZS5zdGFydENv
bnRhaW5lciA9IHN0YXJ0Q29udGFpbmVyOwogICAgICAgIHJhbmdlLnN0YXJ0T2Zmc2V0ID0gc3Rh
cnRPZmZzZXQ7CiAgICAgICAgcmFuZ2UuZW5kQ29udGFpbmVyID0gZW5kQ29udGFpbmVyOwogICAg
ICAgIHJhbmdlLmVuZE9mZnNldCA9IGVuZE9mZnNldDsKICAgICAgICByYW5nZS5kb2N1bWVudCA9
IGRvbS5nZXREb2N1bWVudChzdGFydENvbnRhaW5lcik7CgogICAgICAgIHVwZGF0ZUNvbGxhcHNl
ZEFuZENvbW1vbkFuY2VzdG9yKHJhbmdlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXRhY2gocmFu
Z2UpIHsKICAgICAgICBhc3NlcnROb3REZXRhY2hlZChyYW5nZSk7CiAgICAgICAgcmFuZ2Uuc3Rh
cnRDb250YWluZXIgPSByYW5nZS5zdGFydE9mZnNldCA9IHJhbmdlLmVuZENvbnRhaW5lciA9IHJh
bmdlLmVuZE9mZnNldCA9IHJhbmdlLmRvY3VtZW50ID0gbnVsbDsKICAgICAgICByYW5nZS5jb2xs
YXBzZWQgPSByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciA9IG51bGw7CiAgICB9CgogICAg
ZnVuY3Rpb24gUmFuZ2UoZG9jKSB7CiAgICAgICAgdGhpcy5zdGFydENvbnRhaW5lciA9IGRvYzsK
ICAgICAgICB0aGlzLnN0YXJ0T2Zmc2V0ID0gMDsKICAgICAgICB0aGlzLmVuZENvbnRhaW5lciA9
IGRvYzsKICAgICAgICB0aGlzLmVuZE9mZnNldCA9IDA7CiAgICAgICAgdGhpcy5kb2N1bWVudCA9
IGRvYzsKICAgICAgICB1cGRhdGVDb2xsYXBzZWRBbmRDb21tb25BbmNlc3Rvcih0aGlzKTsKICAg
IH0KCiAgICBjcmVhdGVQcm90b3R5cGVSYW5nZShSYW5nZSwgdXBkYXRlQm91bmRhcmllcywgZGV0
YWNoKTsKCiAgICBhcGkucmFuZ2VQcm90b3R5cGUgPSBSYW5nZVByb3RvdHlwZS5wcm90b3R5cGU7
CgogICAgdXRpbC5leHRlbmQoUmFuZ2UsIHsKICAgICAgICByYW5nZVByb3BlcnRpZXM6IHJhbmdl
UHJvcGVydGllcywKICAgICAgICBSYW5nZUl0ZXJhdG9yOiBSYW5nZUl0ZXJhdG9yLAogICAgICAg
IGNvcHlDb21wYXJpc29uQ29uc3RhbnRzOiBjb3B5Q29tcGFyaXNvbkNvbnN0YW50cywKICAgICAg
ICBjcmVhdGVQcm90b3R5cGVSYW5nZTogY3JlYXRlUHJvdG90eXBlUmFuZ2UsCiAgICAgICAgaW5z
cGVjdDogaW5zcGVjdCwKICAgICAgICBnZXRSYW5nZURvY3VtZW50OiBnZXRSYW5nZURvY3VtZW50
LAogICAgICAgIHJhbmdlc0VxdWFsOiBmdW5jdGlvbihyMSwgcjIpIHsKICAgICAgICAgICAgcmV0
dXJuIHIxLnN0YXJ0Q29udGFpbmVyID09PSByMi5zdGFydENvbnRhaW5lciAmJgogICAgICAgICAg
ICAgICAgcjEuc3RhcnRPZmZzZXQgPT09IHIyLnN0YXJ0T2Zmc2V0ICYmCiAgICAgICAgICAgICAg
ICByMS5lbmRDb250YWluZXIgPT09IHIyLmVuZENvbnRhaW5lciAmJgogICAgICAgICAgICAgICAg
cjEuZW5kT2Zmc2V0ID09PSByMi5lbmRPZmZzZXQ7CiAgICAgICAgfQogICAgfSk7CgogICAgYXBp
LkRvbVJhbmdlID0gUmFuZ2U7CiAgICBhcGkuUmFuZ2VFeGNlcHRpb24gPSBSYW5nZUV4Y2VwdGlv
bjsKfSk7CnJhbmd5LmNyZWF0ZU1vZHVsZSgiV3JhcHBlZFJhbmdlIiwgZnVuY3Rpb24oYXBpLCBt
b2R1bGUpIHsNCiAgICBhcGkucmVxdWlyZU1vZHVsZXMoIFsiRG9tVXRpbCIsICJEb21SYW5nZSJd
ICk7DQoNCiAgICB2YXIgV3JhcHBlZFJhbmdlLCBXcmFwcGVkVGV4dFJhbmdlOw0KICAgIHZhciBk
b20gPSBhcGkuZG9tOw0KICAgIHZhciB1dGlsID0gYXBpLnV0aWw7DQogICAgdmFyIERvbVBvc2l0
aW9uID0gZG9tLkRvbVBvc2l0aW9uOw0KICAgIHZhciBEb21SYW5nZSA9IGFwaS5Eb21SYW5nZTsN
CiAgICB2YXIgZ2V0Qm9keSA9IGRvbS5nZXRCb2R5Ow0KICAgIHZhciBnZXRDb250ZW50RG9jdW1l
bnQgPSBkb20uZ2V0Q29udGVudERvY3VtZW50Ow0KICAgIHZhciBpc0NoYXJhY3RlckRhdGFOb2Rl
ID0gZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGU7DQoNCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICBpZiAoYXBpLmZl
YXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSkgew0KICAgICAgICAvLyBUaGlzIGlzIGEgd3JhcHBl
ciBhcm91bmQgdGhlIGJyb3dzZXIncyBuYXRpdmUgRE9NIFJhbmdlLiBJdCBoYXMgdHdvIGFpbXM6
DQogICAgICAgIC8vIC0gUHJvdmlkZSB3b3JrYXJvdW5kcyBmb3Igc3BlY2lmaWMgYnJvd3NlciBi
dWdzDQogICAgICAgIC8vIC0gcHJvdmlkZSBjb252ZW5pZW50IGV4dGVuc2lvbnMsIHdoaWNoIGFy
ZSBpbmhlcml0ZWQgZnJvbSBSYW5neSdzIERvbVJhbmdlDQoNCiAgICAgICAgKGZ1bmN0aW9uKCkg
ew0KICAgICAgICAgICAgdmFyIHJhbmdlUHJvdG87DQogICAgICAgICAgICB2YXIgcmFuZ2VQcm9w
ZXJ0aWVzID0gRG9tUmFuZ2UucmFuZ2VQcm9wZXJ0aWVzOw0KDQogICAgICAgICAgICBmdW5jdGlv
biB1cGRhdGVSYW5nZVByb3BlcnRpZXMocmFuZ2UpIHsNCiAgICAgICAgICAgICAgICB2YXIgaSA9
IHJhbmdlUHJvcGVydGllcy5sZW5ndGgsIHByb3A7DQogICAgICAgICAgICAgICAgd2hpbGUgKGkt
LSkgew0KICAgICAgICAgICAgICAgICAgICBwcm9wID0gcmFuZ2VQcm9wZXJ0aWVzW2ldOw0KICAg
ICAgICAgICAgICAgICAgICByYW5nZVtwcm9wXSA9IHJhbmdlLm5hdGl2ZVJhbmdlW3Byb3BdOw0K
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGJyb2tlbiBjb2xs
YXBzZWQgcHJvcGVydHkgaW4gSUUgOS4NCiAgICAgICAgICAgICAgICByYW5nZS5jb2xsYXBzZWQg
PSAocmFuZ2Uuc3RhcnRDb250YWluZXIgPT09IHJhbmdlLmVuZENvbnRhaW5lciAmJiByYW5nZS5z
dGFydE9mZnNldCA9PT0gcmFuZ2UuZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAg
ICAgICAgZnVuY3Rpb24gdXBkYXRlTmF0aXZlUmFuZ2UocmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBz
dGFydE9mZnNldCwgZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpIHsNCiAgICAgICAgICAgICAgICB2
YXIgc3RhcnRNb3ZlZCA9IChyYW5nZS5zdGFydENvbnRhaW5lciAhPT0gc3RhcnRDb250YWluZXIg
fHwgcmFuZ2Uuc3RhcnRPZmZzZXQgIT0gc3RhcnRPZmZzZXQpOw0KICAgICAgICAgICAgICAgIHZh
ciBlbmRNb3ZlZCA9IChyYW5nZS5lbmRDb250YWluZXIgIT09IGVuZENvbnRhaW5lciB8fCByYW5n
ZS5lbmRPZmZzZXQgIT0gZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgICAgICB2YXIgbmF0aXZlUmFu
Z2VEaWZmZXJlbnQgPSAhcmFuZ2UuZXF1YWxzKHJhbmdlLm5hdGl2ZVJhbmdlKTsNCg0KICAgICAg
ICAgICAgICAgIC8vIEFsd2F5cyBzZXQgYm90aCBib3VuZGFyaWVzIGZvciB0aGUgYmVuZWZpdCBv
ZiBJRTkgKHNlZSBpc3N1ZSAzNSkNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRNb3ZlZCB8fCBl
bmRNb3ZlZCB8fCBuYXRpdmVSYW5nZURpZmZlcmVudCkgew0KICAgICAgICAgICAgICAgICAgICBy
YW5nZS5zZXRFbmQoZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpOw0KICAgICAgICAgICAgICAgICAg
ICByYW5nZS5zZXRTdGFydChzdGFydENvbnRhaW5lciwgc3RhcnRPZmZzZXQpOw0KICAgICAgICAg
ICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnVuY3Rpb24gZGV0YWNoKHJh
bmdlKSB7DQogICAgICAgICAgICAgICAgcmFuZ2UubmF0aXZlUmFuZ2UuZGV0YWNoKCk7DQogICAg
ICAgICAgICAgICAgcmFuZ2UuZGV0YWNoZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHZhciBp
ID0gcmFuZ2VQcm9wZXJ0aWVzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7
DQogICAgICAgICAgICAgICAgICAgIHJhbmdlWyByYW5nZVByb3BlcnRpZXNbaV0gXSA9IG51bGw7
DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgY3Jl
YXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyOw0KDQogICAgICAgICAgICBXcmFwcGVkUmFuZ2UgPSBm
dW5jdGlvbihyYW5nZSkgew0KICAgICAgICAgICAgICAgIGlmICghcmFuZ2UpIHsNCiAgICAgICAg
ICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJXcmFwcGVkUmFuZ2U6IFJhbmdl
IG11c3QgYmUgc3BlY2lmaWVkIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IHRoaXMubmF0aXZlUmFuZ2UgPSByYW5nZTsNCiAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVBy
b3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBEb21SYW5nZS5j
cmVhdGVQcm90b3R5cGVSYW5nZShXcmFwcGVkUmFuZ2UsIHVwZGF0ZU5hdGl2ZVJhbmdlLCBkZXRh
Y2gpOw0KDQogICAgICAgICAgICByYW5nZVByb3RvID0gV3JhcHBlZFJhbmdlLnByb3RvdHlwZTsN
Cg0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3ROb2RlID0gZnVuY3Rpb24obm9kZSkgew0K
ICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZShub2RlKTsNCiAgICAg
ICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9Ow0K
DQogICAgICAgICAgICByYW5nZVByb3RvLmNsb25lQ29udGVudHMgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jbG9uZUNvbnRlbnRzKCk7DQog
ICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBEdWUgdG8gYSBsb25nLXN0YW5kaW5nIEZp
cmVmb3ggYnVnIHRoYXQgSSBoYXZlIG5vdCBiZWVuIGFibGUgdG8gZmluZCBhIHJlbGlhYmxlIHdh
eSB0byBkZXRlY3QsDQogICAgICAgICAgICAvLyBpbnNlcnROb2RlKCkgaXMgbmV2ZXIgZGVsZWdh
dGVkIHRvIHRoZSBuYXRpdmUgcmFuZ2UuDQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8uc3Vycm91
bmRDb250ZW50cyA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2
ZVJhbmdlLnN1cnJvdW5kQ29udGVudHMobm9kZSk7DQogICAgICAgICAgICAgICAgdXBkYXRlUmFu
Z2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgcmFuZ2VQ
cm90by5jb2xsYXBzZSA9IGZ1bmN0aW9uKGlzU3RhcnQpIHsNCiAgICAgICAgICAgICAgICB0aGlz
Lm5hdGl2ZVJhbmdlLmNvbGxhcHNlKGlzU3RhcnQpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVJh
bmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHJhbmdl
UHJvdG8uY2xvbmVSYW5nZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBu
ZXcgV3JhcHBlZFJhbmdlKHRoaXMubmF0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpKTsNCiAgICAgICAg
ICAgIH07DQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8ucmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0K
ICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAg
IH07DQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS50b1N0cmluZygpOw0KICAgICAg
ICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gQ3JlYXRlIHRlc3QgcmFuZ2UgYW5kIG5vZGUgZm9y
IGZlYXR1cmUgZGV0ZWN0aW9uDQoNCiAgICAgICAgICAgIHZhciB0ZXN0VGV4dE5vZGUgPSBkb2N1
bWVudC5jcmVhdGVUZXh0Tm9kZSgidGVzdCIpOw0KICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVu
dCkuYXBwZW5kQ2hpbGQodGVzdFRleHROb2RlKTsNCiAgICAgICAgICAgIHZhciByYW5nZSA9IGRv
Y3VtZW50LmNyZWF0ZVJhbmdlKCk7DQoNCiAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgICAgICAgICAvLyBUZXN0IGZv
ciBGaXJlZm94IDIgYnVnIHRoYXQgcHJldmVudHMgbW92aW5nIHRoZSBzdGFydCBvZiBhIFJhbmdl
IHRvIGEgcG9pbnQgYWZ0ZXIgaXRzIGN1cnJlbnQgZW5kIGFuZA0KICAgICAgICAgICAgLy8gY29y
cmVjdCBmb3IgaXQNCg0KICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGVzdFRleHROb2RlLCAw
KTsNCiAgICAgICAgICAgIHJhbmdlLnNldEVuZCh0ZXN0VGV4dE5vZGUsIDApOw0KDQogICAgICAg
ICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRlc3RUZXh0Tm9kZSwg
MSk7DQoNCiAgICAgICAgICAgICAgICByYW5nZVByb3RvLnNldFN0YXJ0ID0gZnVuY3Rpb24obm9k
ZSwgb2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2V0U3Rh
cnQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0
aWVzKHRoaXMpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICByYW5nZVBy
b3RvLnNldEVuZCA9IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgew0KICAgICAgICAgICAgICAgICAg
ICB0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgICAg
ICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCg0K
ICAgICAgICAgICAgICAgIGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlciA9IGZ1bmN0aW9uKG5h
bWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2VbbmFtZV0obm9kZSk7DQogICAgICAg
ICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAg
ICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgfSBjYXRjaChl
eCkgew0KDQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRTdGFydCA9IGZ1bmN0aW9uKG5v
ZGUsIG9mZnNldCkgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAg
ICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpOw0KICAgICAg
ICAgICAgICAgICAgICB9IGNhdGNoIChleCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhp
cy5uYXRpdmVSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhp
cyk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uc2V0
RW5kID0gZnVuY3Rpb24obm9kZSwgb2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7
DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChub2RlLCBv
ZmZzZXQpOw0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0
KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5n
ZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAg
IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlciA9IGZ1bmN0aW9uKG5hbWUsIG9wcG9zaXRlTmFt
ZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSkgew0KICAgICAg
ICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlz
Lm5hdGl2ZVJhbmdlW25hbWVdKG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRj
aCAoZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlW29w
cG9zaXRlTmFtZV0obm9kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRp
dmVSYW5nZVtuYW1lXShub2RlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAg
ICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICByYW5nZVByb3RvLnNldFN0YXJ0QmVmb3JlID0gY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0
dGVyKCJzZXRTdGFydEJlZm9yZSIsICJzZXRFbmRCZWZvcmUiKTsNCiAgICAgICAgICAgIHJhbmdl
UHJvdG8uc2V0U3RhcnRBZnRlciA9IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlcigic2V0U3Rh
cnRBZnRlciIsICJzZXRFbmRBZnRlciIpOw0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRFbmRC
ZWZvcmUgPSBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIoInNldEVuZEJlZm9yZSIsICJzZXRT
dGFydEJlZm9yZSIpOw0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRFbmRBZnRlciA9IGNyZWF0
ZUJlZm9yZUFmdGVyTm9kZVNldHRlcigic2V0RW5kQWZ0ZXIiLCAic2V0U3RhcnRBZnRlciIpOw0K
DQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gVGVzdCBmb3IgYW5kIGNvcnJlY3QgRmlyZWZveCAy
IGJlaGF2aW91ciB3aXRoIHNlbGVjdE5vZGVDb250ZW50cyBvbiB0ZXh0IG5vZGVzOiBpdCBjb2xs
YXBzZXMgdGhlIHJhbmdlIHRvDQogICAgICAgICAgICAvLyB0aGUgMHRoIGNoYXJhY3RlciBvZiB0
aGUgdGV4dCBub2RlDQogICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGVzdFRl
eHROb2RlKTsNCiAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydENvbnRhaW5lciA9PSB0ZXN0VGV4
dE5vZGUgJiYgcmFuZ2UuZW5kQ29udGFpbmVyID09IHRlc3RUZXh0Tm9kZSAmJg0KICAgICAgICAg
ICAgICAgICAgICByYW5nZS5zdGFydE9mZnNldCA9PSAwICYmIHJhbmdlLmVuZE9mZnNldCA9PSB0
ZXN0VGV4dE5vZGUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3RO
b2RlQ29udGVudHMgPSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMu
bmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKG5vZGUpOw0KICAgICAgICAgICAgICAgICAg
ICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3ROb2RlQ29u
dGVudHMgPSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3Rh
cnRBbmRFbmQobm9kZSwgMCwgZG9tLmdldE5vZGVMZW5ndGgobm9kZSkpOw0KICAgICAgICAgICAg
ICAgIH07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgICAgICAgICAvLyBUZXN0IGZv
ciBhbmQgY29ycmVjdCBXZWJLaXQgYnVnIHRoYXQgaGFzIHRoZSBiZWhhdmlvdXIgb2YgY29tcGFy
ZUJvdW5kYXJ5UG9pbnRzIHJvdW5kIHRoZSB3cm9uZyB3YXkgZm9yDQogICAgICAgICAgICAvLyBj
b25zdGFudHMgU1RBUlRfVE9fRU5EIGFuZCBFTkRfVE9fU1RBUlQ6IGh0dHBzOi8vYnVncy53ZWJr
aXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDczOA0KDQogICAgICAgICAgICByYW5nZS5zZWxlY3RO
b2RlQ29udGVudHModGVzdFRleHROb2RlKTsNCiAgICAgICAgICAgIHJhbmdlLnNldEVuZCh0ZXN0
VGV4dE5vZGUsIDMpOw0KDQogICAgICAgICAgICB2YXIgcmFuZ2UyID0gZG9jdW1lbnQuY3JlYXRl
UmFuZ2UoKTsNCiAgICAgICAgICAgIHJhbmdlMi5zZWxlY3ROb2RlQ29udGVudHModGVzdFRleHRO
b2RlKTsNCiAgICAgICAgICAgIHJhbmdlMi5zZXRFbmQodGVzdFRleHROb2RlLCA0KTsNCiAgICAg
ICAgICAgIHJhbmdlMi5zZXRTdGFydCh0ZXN0VGV4dE5vZGUsIDIpOw0KDQogICAgICAgICAgICBp
ZiAocmFuZ2UuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKHJhbmdlLlNUQVJUX1RPX0VORCwgcmFuZ2Uy
KSA9PSAtMSAmJg0KICAgICAgICAgICAgICAgICAgICByYW5nZS5jb21wYXJlQm91bmRhcnlQb2lu
dHMocmFuZ2UuRU5EX1RPX1NUQVJULCByYW5nZTIpID09IDEpIHsNCiAgICAgICAgICAgICAgICAv
LyBUaGlzIGlzIHRoZSB3cm9uZyB3YXkgcm91bmQsIHNvIGNvcnJlY3QgZm9yIGl0DQoNCiAgICAg
ICAgICAgICAgICByYW5nZVByb3RvLmNvbXBhcmVCb3VuZGFyeVBvaW50cyA9IGZ1bmN0aW9uKHR5
cGUsIHJhbmdlKSB7DQogICAgICAgICAgICAgICAgICAgIHJhbmdlID0gcmFuZ2UubmF0aXZlUmFu
Z2UgfHwgcmFuZ2U7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IHJhbmdlLlNUQVJU
X1RPX0VORCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHJhbmdlLkVORF9UT19T
VEFSVDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IHJhbmdlLkVORF9U
T19TVEFSVCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHJhbmdlLlNUQVJUX1RP
X0VORDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4g
dGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHModHlwZSwgcmFuZ2UpOw0KICAg
ICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJh
bmdlUHJvdG8uY29tcGFyZUJvdW5kYXJ5UG9pbnRzID0gZnVuY3Rpb24odHlwZSwgcmFuZ2UpIHsN
CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UuY29tcGFyZUJvdW5k
YXJ5UG9pbnRzKHR5cGUsIHJhbmdlLm5hdGl2ZVJhbmdlIHx8IHJhbmdlKTsNCiAgICAgICAgICAg
ICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gVGVzdCBm
b3IgSUUgOSBkZWxldGVDb250ZW50cygpIGFuZCBleHRyYWN0Q29udGVudHMoKSBidWcgYW5kIGNv
cnJlY3QgaXQuIFNlZSBpc3N1ZSAxMDcuDQoNCiAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50
LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gIjEyMyI7
DQogICAgICAgICAgICB2YXIgdGV4dE5vZGUgPSBlbC5maXJzdENoaWxkOw0KICAgICAgICAgICAg
dmFyIGJvZHkgPSBnZXRCb2R5KGRvY3VtZW50KTsNCiAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hp
bGQoZWwpOw0KDQogICAgICAgICAgICByYW5nZS5zZXRTdGFydCh0ZXh0Tm9kZSwgMSk7DQogICAg
ICAgICAgICByYW5nZS5zZXRFbmQodGV4dE5vZGUsIDIpOw0KICAgICAgICAgICAgcmFuZ2UuZGVs
ZXRlQ29udGVudHMoKTsNCg0KICAgICAgICAgICAgaWYgKHRleHROb2RlLmRhdGEgPT0gIjEzIikg
ew0KICAgICAgICAgICAgICAgIC8vIEJlaGF2aW91ciBpcyBjb3JyZWN0IHBlciBET000IFJhbmdl
IHNvIHdyYXAgdGhlIGJyb3dzZXIncyBpbXBsZW1lbnRhdGlvbiBvZiBkZWxldGVDb250ZW50cygp
IGFuZA0KICAgICAgICAgICAgICAgIC8vIGV4dHJhY3RDb250ZW50cygpDQogICAgICAgICAgICAg
ICAgcmFuZ2VQcm90by5kZWxldGVDb250ZW50cyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAg
ICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7DQogICAgICAgICAgICAg
ICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgICAgICB9Ow0K
DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5leHRyYWN0Q29udGVudHMgPSBmdW5jdGlvbigp
IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYWcgPSB0aGlzLm5hdGl2ZVJhbmdlLmV4dHJh
Y3RDb250ZW50cygpOw0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXMo
dGhpcyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmcmFnOw0KICAgICAgICAgICAgICAg
IH07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBi
b2R5LnJlbW92ZUNoaWxkKGVsKTsNCiAgICAgICAgICAgIGJvZHkgPSBudWxsOw0KDQogICAgICAg
ICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8N
Cg0KICAgICAgICAgICAgLy8gVGVzdCBmb3IgZXhpc3RlbmNlIG9mIGNyZWF0ZUNvbnRleHR1YWxG
cmFnbWVudCBhbmQgZGVsZWdhdGUgdG8gaXQgaWYgaXQgZXhpc3RzDQogICAgICAgICAgICBpZiAo
dXRpbC5pc0hvc3RNZXRob2QocmFuZ2UsICJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiKSkgew0K
ICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50ID0gZnVu
Y3Rpb24oZnJhZ21lbnRTdHIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0
aXZlUmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGZyYWdtZW50U3RyKTsNCiAgICAgICAg
ICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gQ2xl
YW4gdXANCiAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLnJlbW92ZUNoaWxkKHRlc3RUZXh0
Tm9kZSk7DQogICAgICAgICAgICByYW5nZS5kZXRhY2goKTsNCiAgICAgICAgICAgIHJhbmdlMi5k
ZXRhY2goKTsNCg0KICAgICAgICAgICAgcmFuZ2VQcm90by5nZXROYW1lID0gZnVuY3Rpb24oKSB7
DQogICAgICAgICAgICAgICAgcmV0dXJuICJXcmFwcGVkUmFuZ2UiOw0KICAgICAgICAgICAgfTsN
Cg0KICAgICAgICAgICAgYXBpLldyYXBwZWRSYW5nZSA9IFdyYXBwZWRSYW5nZTsNCg0KICAgICAg
ICAgICAgYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlID0gZnVuY3Rpb24oZG9jKSB7DQogICAgICAgICAg
ICAgICAgZG9jID0gZ2V0Q29udGVudERvY3VtZW50KGRvYywgbW9kdWxlLCAiY3JlYXRlTmF0aXZl
UmFuZ2UiKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZG9jLmNyZWF0ZVJhbmdlKCk7DQogICAg
ICAgICAgICB9Ow0KICAgICAgICB9KSgpOw0KICAgIH0NCiAgICANCiAgICBpZiAoYXBpLmZlYXR1
cmVzLmltcGxlbWVudHNUZXh0UmFuZ2UpIHsNCiAgICAgICAgLyoNCiAgICAgICAgIFRoaXMgaXMg
YSB3b3JrYXJvdW5kIGZvciBhIGJ1ZyB3aGVyZSBJRSByZXR1cm5zIHRoZSB3cm9uZyBjb250YWlu
ZXIgZWxlbWVudCBmcm9tIHRoZSBUZXh0UmFuZ2UncyBwYXJlbnRFbGVtZW50KCkNCiAgICAgICAg
IG1ldGhvZC4gRm9yIGV4YW1wbGUsIGluIHRoZSBmb2xsb3dpbmcgKHdoZXJlIHBpcGVzIGRlbm90
ZSB0aGUgc2VsZWN0aW9uIGJvdW5kYXJpZXMpOg0KDQogICAgICAgICA8dWwgaWQ9InVsIj48bGkg
aWQ9ImEiPnwgYSA8L2xpPjxsaSBpZD0iYiI+IGIgfDwvbGk+PC91bD4NCg0KICAgICAgICAgdmFy
IHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7DQogICAgICAgICBhbGVy
dChyYW5nZS5wYXJlbnRFbGVtZW50KCkuaWQpOyAvLyBTaG91bGQgYWxlcnQgInVsIiBidXQgYWxl
cnRzICJiIg0KDQogICAgICAgICBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjb21tb24gYW5jZXN0
b3Igbm9kZSBvZiB0aGUgZm9sbG93aW5nOg0KICAgICAgICAgLSB0aGUgcGFyZW50RWxlbWVudCgp
IG9mIHRoZSB0ZXh0UmFuZ2UNCiAgICAgICAgIC0gdGhlIHBhcmVudEVsZW1lbnQoKSBvZiB0aGUg
dGV4dFJhbmdlIGFmdGVyIGNhbGxpbmcgY29sbGFwc2UodHJ1ZSkNCiAgICAgICAgIC0gdGhlIHBh
cmVudEVsZW1lbnQoKSBvZiB0aGUgdGV4dFJhbmdlIGFmdGVyIGNhbGxpbmcgY29sbGFwc2UoZmFs
c2UpDQogICAgICAgICAqLw0KICAgICAgICB2YXIgZ2V0VGV4dFJhbmdlQ29udGFpbmVyRWxlbWVu
dCA9IGZ1bmN0aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgdmFyIHBhcmVudEVsID0gdGV4
dFJhbmdlLnBhcmVudEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHZhciByYW5nZSA9IHRleHRSYW5n
ZS5kdXBsaWNhdGUoKTsNCiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpOw0KICAgICAg
ICAgICAgdmFyIHN0YXJ0RWwgPSByYW5nZS5wYXJlbnRFbGVtZW50KCk7DQogICAgICAgICAgICBy
YW5nZSA9IHRleHRSYW5nZS5kdXBsaWNhdGUoKTsNCiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNl
KGZhbHNlKTsNCiAgICAgICAgICAgIHZhciBlbmRFbCA9IHJhbmdlLnBhcmVudEVsZW1lbnQoKTsN
CiAgICAgICAgICAgIHZhciBzdGFydEVuZENvbnRhaW5lciA9IChzdGFydEVsID09IGVuZEVsKSA/
IHN0YXJ0RWwgOiBkb20uZ2V0Q29tbW9uQW5jZXN0b3Ioc3RhcnRFbCwgZW5kRWwpOw0KDQogICAg
ICAgICAgICByZXR1cm4gc3RhcnRFbmRDb250YWluZXIgPT0gcGFyZW50RWwgPyBzdGFydEVuZENv
bnRhaW5lciA6IGRvbS5nZXRDb21tb25BbmNlc3RvcihwYXJlbnRFbCwgc3RhcnRFbmRDb250YWlu
ZXIpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciB0ZXh0UmFuZ2VJc0NvbGxhcHNlZCA9IGZ1
bmN0aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgcmV0dXJuIHRleHRSYW5nZS5jb21wYXJl
RW5kUG9pbnRzKCJTdGFydFRvRW5kIiwgdGV4dFJhbmdlKSA9PSAwOw0KICAgICAgICB9Ow0KDQog
ICAgICAgIC8vIEdldHMgdGhlIGJvdW5kYXJ5IG9mIGEgVGV4dFJhbmdlIGV4cHJlc3NlZCBhcyBh
IG5vZGUgYW5kIGFuIG9mZnNldCB3aXRoaW4gdGhhdCBub2RlLiBUaGlzIGZ1bmN0aW9uIHN0YXJ0
ZWQgb3V0IGFzDQogICAgICAgIC8vIGFuIGltcHJvdmVkIHZlcnNpb24gb2YgY29kZSBmb3VuZCBp
biBUaW0gQ2FtZXJvbiBSeWFuJ3MgSUVSYW5nZSAoaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ll
cmFuZ2UvKSBidXQgaGFzDQogICAgICAgIC8vIGdyb3duLCBmaXhpbmcgcHJvYmxlbXMgd2l0aCBs
aW5lIGJyZWFrcyBpbiBwcmVmb3JtYXR0ZWQgdGV4dCwgYWRkaW5nIHdvcmthcm91bmQgZm9yIElF
IFRleHRSYW5nZSBidWdzLCBoYW5kbGluZw0KICAgICAgICAvLyBmb3IgaW5wdXRzIGFuZCBpbWFn
ZXMsIHBsdXMgb3B0aW1pemF0aW9ucy4NCiAgICAgICAgdmFyIGdldFRleHRSYW5nZUJvdW5kYXJ5
UG9zaXRpb24gPSBmdW5jdGlvbih0ZXh0UmFuZ2UsIHdob2xlUmFuZ2VDb250YWluZXJFbGVtZW50
LCBpc1N0YXJ0LCBpc0NvbGxhcHNlZCwgc3RhcnRJbmZvKSB7DQogICAgICAgICAgICB2YXIgd29y
a2luZ1JhbmdlID0gdGV4dFJhbmdlLmR1cGxpY2F0ZSgpOw0KICAgICAgICAgICAgd29ya2luZ1Jh
bmdlLmNvbGxhcHNlKGlzU3RhcnQpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lckVsZW1lbnQg
PSB3b3JraW5nUmFuZ2UucGFyZW50RWxlbWVudCgpOw0KDQogICAgICAgICAgICAvLyBTb21ldGlt
ZXMgY29sbGFwc2luZyBhIFRleHRSYW5nZSB0aGF0J3MgYXQgdGhlIHN0YXJ0IG9mIGEgdGV4dCBu
b2RlIGNhbiBtb3ZlIGl0IGludG8gdGhlIHByZXZpb3VzIG5vZGUsIHNvDQogICAgICAgICAgICAv
LyBjaGVjayBmb3IgdGhhdA0KICAgICAgICAgICAgaWYgKCFkb20uaXNPcklzQW5jZXN0b3JPZih3
aG9sZVJhbmdlQ29udGFpbmVyRWxlbWVudCwgY29udGFpbmVyRWxlbWVudCkpIHsNCiAgICAgICAg
ICAgICAgICBjb250YWluZXJFbGVtZW50ID0gd2hvbGVSYW5nZUNvbnRhaW5lckVsZW1lbnQ7DQog
ICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgLy8gRGVhbCB3aXRoIG5vZGVzIHRoYXQgY2Fu
bm90ICJjb250YWluIHJpY2ggSFRNTCBtYXJrdXAiLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyBm
b3JtIGlucHV0cywgaW1hZ2VzIGFuZA0KICAgICAgICAgICAgLy8gc2ltaWxhci4gU2VlIGh0dHA6
Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9hYTcwMzk1MCUyOFZTLjg1JTI5LmFz
cHgNCiAgICAgICAgICAgIGlmICghY29udGFpbmVyRWxlbWVudC5jYW5IYXZlSFRNTCkgew0KICAg
ICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgRG9tUG9zaXRpb24oY29udGFpbmVyRWxlbWVudC5w
YXJlbnROb2RlLCBkb20uZ2V0Tm9kZUluZGV4KGNvbnRhaW5lckVsZW1lbnQpKTsNCiAgICAgICAg
ICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBib3VuZGFyeVBvc2l0aW9uOiBw
b3MsDQogICAgICAgICAgICAgICAgICAgIG5vZGVJbmZvOiB7DQogICAgICAgICAgICAgICAgICAg
ICAgICBub2RlSW5kZXg6IHBvcy5vZmZzZXQsDQogICAgICAgICAgICAgICAgICAgICAgICBjb250
YWluZXJFbGVtZW50OiBwb3Mubm9kZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgICAgfTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHdvcmtpbmdOb2RlID0g
ZG9tLmdldERvY3VtZW50KGNvbnRhaW5lckVsZW1lbnQpLmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsN
Cg0KICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgSFRNTDUgU2hpdidzIGluc2FuZSB2aW9s
YXRpb24gb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgpLiBTZWUgUmFuZ3kgaXNzdWUgMTA0IGFu
ZCBIVE1MNQ0KICAgICAgICAgICAgLy8gU2hpdiBpc3N1ZSA2NDogaHR0cHM6Ly9naXRodWIuY29t
L2FGYXJrYXMvaHRtbDVzaGl2L2lzc3Vlcy82NA0KICAgICAgICAgICAgaWYgKHdvcmtpbmdOb2Rl
LnBhcmVudE5vZGUpIHsNCiAgICAgICAgICAgICAgICB3b3JraW5nTm9kZS5wYXJlbnROb2RlLnJl
bW92ZUNoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFy
IGNvbXBhcmlzb24sIHdvcmtpbmdDb21wYXJpc29uVHlwZSA9IGlzU3RhcnQgPyAiU3RhcnRUb1N0
YXJ0IiA6ICJTdGFydFRvRW5kIjsNCiAgICAgICAgICAgIHZhciBwcmV2aW91c05vZGUsIG5leHRO
b2RlLCBib3VuZGFyeVBvc2l0aW9uLCBib3VuZGFyeU5vZGU7DQogICAgICAgICAgICB2YXIgc3Rh
cnQgPSAoc3RhcnRJbmZvICYmIHN0YXJ0SW5mby5jb250YWluZXJFbGVtZW50ID09IGNvbnRhaW5l
ckVsZW1lbnQpID8gc3RhcnRJbmZvLm5vZGVJbmRleCA6IDA7DQogICAgICAgICAgICB2YXIgY2hp
bGROb2RlQ291bnQgPSBjb250YWluZXJFbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOw0KICAgICAg
ICAgICAgdmFyIGVuZCA9IGNoaWxkTm9kZUNvdW50Ow0KDQogICAgICAgICAgICAvLyBDaGVjayBl
bmQgZmlyc3QuIENvZGUgd2l0aGluIHRoZSBsb29wIGFzc3VtZXMgdGhhdCB0aGUgZW5kdGggY2hp
bGQgbm9kZSBvZiB0aGUgY29udGFpbmVyIGlzIGRlZmluaXRlbHkNCiAgICAgICAgICAgIC8vIGFm
dGVyIHRoZSByYW5nZSBib3VuZGFyeS4NCiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSBlbmQ7
DQoNCiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKG5vZGVJ
bmRleCA9PSBjaGlsZE5vZGVDb3VudCkgew0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJF
bGVtZW50LmFwcGVuZENoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50Lmluc2VydEJlZm9yZSh3b3Jr
aW5nTm9kZSwgY29udGFpbmVyRWxlbWVudC5jaGlsZE5vZGVzW25vZGVJbmRleF0pOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB3b3JraW5nUmFuZ2UubW92ZVRvRWxlbWVudFRl
eHQod29ya2luZ05vZGUpOw0KICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSB3b3JraW5nUmFu
Z2UuY29tcGFyZUVuZFBvaW50cyh3b3JraW5nQ29tcGFyaXNvblR5cGUsIHRleHRSYW5nZSk7DQog
ICAgICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPT0gMCB8fCBzdGFydCA9PSBlbmQpIHsNCiAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21w
YXJpc29uID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gc3RhcnQgKyAx
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBrbm93IHRoZSBlbmR0aCBjaGlsZCBu
b2RlIGlzIGFmdGVyIHRoZSByYW5nZSBib3VuZGFyeSwgc28gd2UgbXVzdCBiZSBkb25lLg0KICAg
ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG5vZGVJbmRleDsNCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAg
IGVuZCA9IChlbmQgPT0gc3RhcnQgKyAxKSA/IHN0YXJ0IDogbm9kZUluZGV4Ow0KICAgICAgICAg
ICAgICAgIH0NCiAgICAgICAgICAgICAgICBub2RlSW5kZXggPSBNYXRoLmZsb29yKChzdGFydCAr
IGVuZCkgLyAyKTsNCiAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50LnJlbW92ZUNoaWxk
KHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAvLyBXZSd2ZSBu
b3cgcmVhY2hlZCBvciBnb25lIHBhc3QgdGhlIGJvdW5kYXJ5IG9mIHRoZSB0ZXh0IHJhbmdlIHdl
J3JlIGludGVyZXN0ZWQgaW4NCiAgICAgICAgICAgIC8vIHNvIGhhdmUgaWRlbnRpZmllZCB0aGUg
bm9kZSB3ZSB3YW50DQogICAgICAgICAgICBib3VuZGFyeU5vZGUgPSB3b3JraW5nTm9kZS5uZXh0
U2libGluZzsNCg0KICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPT0gLTEgJiYgYm91bmRhcnlO
b2RlICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUoYm91bmRhcnlOb2RlKSkgew0KICAgICAgICAgICAg
ICAgIC8vIFRoaXMgaXMgYSBjaGFyYWN0ZXIgZGF0YSBub2RlICh0ZXh0LCBjb21tZW50LCBjZGF0
YSkuIFRoZSB3b3JraW5nIHJhbmdlIGlzIGNvbGxhcHNlZCBhdCB0aGUgc3RhcnQgb2YgdGhlDQog
ICAgICAgICAgICAgICAgLy8gbm9kZSBjb250YWluaW5nIHRoZSB0ZXh0IHJhbmdlJ3MgYm91bmRh
cnksIHNvIHdlIG1vdmUgdGhlIGVuZCBvZiB0aGUgd29ya2luZyByYW5nZSB0byB0aGUgYm91bmRh
cnkgcG9pbnQNCiAgICAgICAgICAgICAgICAvLyBhbmQgbWVhc3VyZSB0aGUgbGVuZ3RoIG9mIGl0
cyB0ZXh0IHRvIGdldCB0aGUgYm91bmRhcnkncyBvZmZzZXQgd2l0aGluIHRoZSBub2RlLg0KICAg
ICAgICAgICAgICAgIHdvcmtpbmdSYW5nZS5zZXRFbmRQb2ludChpc1N0YXJ0ID8gIkVuZFRvU3Rh
cnQiIDogIkVuZFRvRW5kIiwgdGV4dFJhbmdlKTsNCg0KICAgICAgICAgICAgICAgIHZhciBvZmZz
ZXQ7DQoNCiAgICAgICAgICAgICAgICBpZiAoL1tcclxuXS8udGVzdChib3VuZGFyeU5vZGUuZGF0
YSkpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoNCiAgICAgICAgICAgICAgICAgICAgIEZvciB0
aGUgcGFydGljdWxhciBjYXNlIG9mIGEgYm91bmRhcnkgd2l0aGluIGEgdGV4dCBub2RlIGNvbnRh
aW5pbmcgcmVuZGVyZWQgbGluZSBicmVha3MgKHdpdGhpbiBhIDxwcmU+DQogICAgICAgICAgICAg
ICAgICAgICBlbGVtZW50LCBmb3IgZXhhbXBsZSksIHdlIG5lZWQgYSBzbGlnaHRseSBjb21wbGlj
YXRlZCBhcHByb2FjaCB0byBnZXQgdGhlIGJvdW5kYXJ5J3Mgb2Zmc2V0IGluIElFLiBUaGUNCiAg
ICAgICAgICAgICAgICAgICAgIGZhY3RzOg0KDQogICAgICAgICAgICAgICAgICAgICAtIEVhY2gg
bGluZSBicmVhayBpcyByZXByZXNlbnRlZCBhcyBcciBpbiB0aGUgdGV4dCBub2RlJ3MgZGF0YS9u
b2RlVmFsdWUgcHJvcGVydGllcw0KICAgICAgICAgICAgICAgICAgICAgLSBFYWNoIGxpbmUgYnJl
YWsgaXMgcmVwcmVzZW50ZWQgYXMgXHJcbiBpbiB0aGUgVGV4dFJhbmdlJ3MgJ3RleHQnIHByb3Bl
cnR5DQogICAgICAgICAgICAgICAgICAgICAtIFRoZSAndGV4dCcgcHJvcGVydHkgb2YgdGhlIFRl
eHRSYW5nZSBkb2VzIG5vdCBjb250YWluIHRyYWlsaW5nIGxpbmUgYnJlYWtzDQoNCiAgICAgICAg
ICAgICAgICAgICAgIFRvIGdldCByb3VuZCB0aGUgcHJvYmxlbSBwcmVzZW50ZWQgYnkgdGhlIGZp
bmFsIGZhY3QgYWJvdmUsIHdlIGNhbiB1c2UgdGhlIGZhY3QgdGhhdCBUZXh0UmFuZ2Uncw0KICAg
ICAgICAgICAgICAgICAgICAgbW92ZVN0YXJ0KCkgYW5kIG1vdmVFbmQoKSBtZXRob2RzIHJldHVy
biB0aGUgYWN0dWFsIG51bWJlciBvZiBjaGFyYWN0ZXJzIG1vdmVkLCB3aGljaCBpcyBub3QgbmVj
ZXNzYXJpbHkNCiAgICAgICAgICAgICAgICAgICAgIHRoZSBzYW1lIGFzIHRoZSBudW1iZXIgb2Yg
Y2hhcmFjdGVycyBpdCB3YXMgaW5zdHJ1Y3RlZCB0byBtb3ZlLiBUaGUgc2ltcGxlc3QgYXBwcm9h
Y2ggaXMgdG8gdXNlIHRoaXMgdG8NCiAgICAgICAgICAgICAgICAgICAgIHN0b3JlIHRoZSBjaGFy
YWN0ZXJzIG1vdmVkIHdoZW4gbW92aW5nIGJvdGggdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHJh
bmdlIHRvIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQNCiAgICAgICAgICAgICAgICAgICAgIGJv
ZHkgYW5kIHN1YnRyYWN0aW5nIHRoZSBzdGFydCBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mZnNldCAo
dGhlICJtb3ZlLW5lZ2F0aXZlLWdhemlsbGlvbiIgbWV0aG9kKS4NCiAgICAgICAgICAgICAgICAg
ICAgIEhvd2V2ZXIsIHRoaXMgaXMgZXh0cmVtZWx5IHNsb3cgd2hlbiB0aGUgZG9jdW1lbnQgaXMg
bGFyZ2UgYW5kIHRoZSByYW5nZSBpcyBuZWFyIHRoZSBlbmQgb2YgaXQuIENsZWFybHkNCiAgICAg
ICAgICAgICAgICAgICAgIGRvaW5nIHRoZSBtaXJyb3IgaW1hZ2UgKGkuZS4gbW92aW5nIHRoZSBy
YW5nZSBib3VuZGFyaWVzIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50KSBoYXMgdGhlIHNhbWUN
CiAgICAgICAgICAgICAgICAgICAgIHByb2JsZW0uDQoNCiAgICAgICAgICAgICAgICAgICAgIEFu
b3RoZXIgYXBwcm9hY2ggdGhhdCB3b3JrcyBpcyB0byB1c2UgbW92ZVN0YXJ0KCkgdG8gbW92ZSB0
aGUgc3RhcnQgYm91bmRhcnkgb2YgdGhlIHJhbmdlIHVwIHRvIHRoZSBlbmQNCiAgICAgICAgICAg
ICAgICAgICAgIGJvdW5kYXJ5IG9uZSBjaGFyYWN0ZXIgYXQgYSB0aW1lIGFuZCBpbmNyZW1lbnRp
bmcgYSBjb3VudGVyIHdpdGggdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBtb3ZlU3RhcnQoKQ0K
ICAgICAgICAgICAgICAgICAgICAgY2FsbC4gSG93ZXZlciwgdGhlIGNoZWNrIGZvciB3aGV0aGVy
IHRoZSBzdGFydCBib3VuZGFyeSBoYXMgcmVhY2hlZCB0aGUgZW5kIGJvdW5kYXJ5IGlzIGV4cGVu
c2l2ZSwgc28NCiAgICAgICAgICAgICAgICAgICAgIHRoaXMgbWV0aG9kIGlzIHNsb3cgKGFsdGhv
dWdoIHVubGlrZSAibW92ZS1uZWdhdGl2ZS1nYXppbGxpb24iIGlzIGxhcmdlbHkgdW5hZmZlY3Rl
ZCBieSB0aGUgbG9jYXRpb24gb2YNCiAgICAgICAgICAgICAgICAgICAgIHRoZSByYW5nZSB3aXRo
aW4gdGhlIGRvY3VtZW50KS4NCg0KICAgICAgICAgICAgICAgICAgICAgVGhlIG1ldGhvZCBiZWxv
dyBpcyBhIGh5YnJpZCBvZiB0aGUgdHdvIG1ldGhvZHMgYWJvdmUuIEl0IHVzZXMgdGhlIGZhY3Qg
dGhhdCBhIHN0cmluZyBjb250YWluaW5nIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgVGV4dFJh
bmdlJ3MgJ3RleHQnIHByb3BlcnR5IHdpdGggZWFjaCBcclxuIGNvbnZlcnRlZCB0byBhIHNpbmds
ZSBcciBjaGFyYWN0ZXIgY2Fubm90IGJlIGxvbmdlciB0aGFuIHRoZQ0KICAgICAgICAgICAgICAg
ICAgICAgdGV4dCBvZiB0aGUgVGV4dFJhbmdlLCBzbyB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIGlz
IG1vdmVkIHRoYXQgbGVuZ3RoIGluaXRpYWxseSBhbmQgdGhlbiBhIGNoYXJhY3RlciBhdA0KICAg
ICAgICAgICAgICAgICAgICAgYSB0aW1lIHRvIG1ha2UgdXAgZm9yIGFueSB0cmFpbGluZyBsaW5l
IGJyZWFrcyBub3QgY29udGFpbmVkIGluIHRoZSAndGV4dCcgcHJvcGVydHkuIFRoaXMgaGFzIGdv
b2QNCiAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlIGluIG1vc3Qgc2l0dWF0aW9ucyBj
b21wYXJlZCB0byB0aGUgcHJldmlvdXMgdHdvIG1ldGhvZHMuDQogICAgICAgICAgICAgICAgICAg
ICAqLw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFJhbmdlID0gd29ya2luZ1JhbmdlLmR1
cGxpY2F0ZSgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2VMZW5ndGggPSB0ZW1wUmFu
Z2UudGV4dC5yZXBsYWNlKC9cclxuL2csICJcciIpLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAg
ICAgICBvZmZzZXQgPSB0ZW1wUmFuZ2UubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLCByYW5nZUxlbmd0
aCk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGNvbXBhcmlzb24gPSB0ZW1wUmFuZ2Uu
Y29tcGFyZUVuZFBvaW50cygiU3RhcnRUb0VuZCIsIHRlbXBSYW5nZSkpID09IC0xKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICBvZmZzZXQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRl
bXBSYW5nZS5tb3ZlU3RhcnQoImNoYXJhY3RlciIsIDEpOw0KICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0g
d29ya2luZ1JhbmdlLnRleHQubGVuZ3RoOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICBib3VuZGFyeVBvc2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKGJvdW5kYXJ5Tm9kZSwgb2Zm
c2V0KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUg
Ym91bmRhcnkgaW1tZWRpYXRlbHkgZm9sbG93cyBhIGNoYXJhY3RlciBkYXRhIG5vZGUgYW5kIHRo
aXMgaXMgdGhlIGVuZCBib3VuZGFyeSwgd2Ugc2hvdWxkIGZhdm91cg0KICAgICAgICAgICAgICAg
IC8vIGEgcG9zaXRpb24gd2l0aGluIHRoYXQsIGFuZCBsaWtld2lzZSBmb3IgYSBzdGFydCBib3Vu
ZGFyeSBwcmVjZWRpbmcgYSBjaGFyYWN0ZXIgZGF0YSBub2RlDQogICAgICAgICAgICAgICAgcHJl
dmlvdXNOb2RlID0gKGlzQ29sbGFwc2VkIHx8ICFpc1N0YXJ0KSAmJiB3b3JraW5nTm9kZS5wcmV2
aW91c1NpYmxpbmc7DQogICAgICAgICAgICAgICAgbmV4dE5vZGUgPSAoaXNDb2xsYXBzZWQgfHwg
aXNTdGFydCkgJiYgd29ya2luZ05vZGUubmV4dFNpYmxpbmc7DQogICAgICAgICAgICAgICAgaWYg
KG5leHROb2RlICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUobmV4dE5vZGUpKSB7DQogICAgICAgICAg
ICAgICAgICAgIGJvdW5kYXJ5UG9zaXRpb24gPSBuZXcgRG9tUG9zaXRpb24obmV4dE5vZGUsIDAp
Ow0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNOb2RlICYmIGlzQ2hhcmFjdGVy
RGF0YU5vZGUocHJldmlvdXNOb2RlKSkgew0KICAgICAgICAgICAgICAgICAgICBib3VuZGFyeVBv
c2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKHByZXZpb3VzTm9kZSwgcHJldmlvdXNOb2RlLmRhdGEu
bGVuZ3RoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBi
b3VuZGFyeVBvc2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKGNvbnRhaW5lckVsZW1lbnQsIGRvbS5n
ZXROb2RlSW5kZXgod29ya2luZ05vZGUpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICB9DQoNCiAgICAgICAgICAgIC8vIENsZWFuIHVwDQogICAgICAgICAgICB3b3JraW5nTm9kZS5w
YXJlbnROb2RlLnJlbW92ZUNoaWxkKHdvcmtpbmdOb2RlKTsNCg0KICAgICAgICAgICAgcmV0dXJu
IHsNCiAgICAgICAgICAgICAgICBib3VuZGFyeVBvc2l0aW9uOiBib3VuZGFyeVBvc2l0aW9uLA0K
ICAgICAgICAgICAgICAgIG5vZGVJbmZvOiB7DQogICAgICAgICAgICAgICAgICAgIG5vZGVJbmRl
eDogbm9kZUluZGV4LA0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBjb250
YWluZXJFbGVtZW50DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAg
fTsNCg0KICAgICAgICAvLyBSZXR1cm5zIGEgVGV4dFJhbmdlIHJlcHJlc2VudGluZyB0aGUgYm91
bmRhcnkgb2YgYSBUZXh0UmFuZ2UgZXhwcmVzc2VkIGFzIGEgbm9kZSBhbmQgYW4gb2Zmc2V0IHdp
dGhpbiB0aGF0IG5vZGUuDQogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gc3RhcnRlZCBvdXQgYXMg
YW4gb3B0aW1pemVkIHZlcnNpb24gb2YgY29kZSBmb3VuZCBpbiBUaW0gQ2FtZXJvbiBSeWFuJ3Mg
SUVSYW5nZQ0KICAgICAgICAvLyAoaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2llcmFuZ2UvKQ0K
ICAgICAgICB2YXIgY3JlYXRlQm91bmRhcnlUZXh0UmFuZ2UgPSBmdW5jdGlvbihib3VuZGFyeVBv
c2l0aW9uLCBpc1N0YXJ0KSB7DQogICAgICAgICAgICB2YXIgYm91bmRhcnlOb2RlLCBib3VuZGFy
eVBhcmVudCwgYm91bmRhcnlPZmZzZXQgPSBib3VuZGFyeVBvc2l0aW9uLm9mZnNldDsNCiAgICAg
ICAgICAgIHZhciBkb2MgPSBkb20uZ2V0RG9jdW1lbnQoYm91bmRhcnlQb3NpdGlvbi5ub2RlKTsN
CiAgICAgICAgICAgIHZhciB3b3JraW5nTm9kZSwgY2hpbGROb2Rlcywgd29ya2luZ1JhbmdlID0g
Z2V0Qm9keShkb2MpLmNyZWF0ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAgdmFyIG5vZGVJc0Rh
dGFOb2RlID0gaXNDaGFyYWN0ZXJEYXRhTm9kZShib3VuZGFyeVBvc2l0aW9uLm5vZGUpOw0KDQog
ICAgICAgICAgICBpZiAobm9kZUlzRGF0YU5vZGUpIHsNCiAgICAgICAgICAgICAgICBib3VuZGFy
eU5vZGUgPSBib3VuZGFyeVBvc2l0aW9uLm5vZGU7DQogICAgICAgICAgICAgICAgYm91bmRhcnlQ
YXJlbnQgPSBib3VuZGFyeU5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgICAgY2hpbGROb2RlcyA9IGJvdW5kYXJ5UG9zaXRpb24ubm9kZS5jaGlsZE5v
ZGVzOw0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5Tm9kZSA9IChib3VuZGFyeU9mZnNldCA8IGNo
aWxkTm9kZXMubGVuZ3RoKSA/IGNoaWxkTm9kZXNbYm91bmRhcnlPZmZzZXRdIDogbnVsbDsNCiAg
ICAgICAgICAgICAgICBib3VuZGFyeVBhcmVudCA9IGJvdW5kYXJ5UG9zaXRpb24ubm9kZTsNCiAg
ICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUG9zaXRpb24gdGhlIHJhbmdlIGltbWVkaWF0
ZWx5IGJlZm9yZSB0aGUgbm9kZSBjb250YWluaW5nIHRoZSBib3VuZGFyeQ0KICAgICAgICAgICAg
d29ya2luZ05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCgic3BhbiIpOw0KDQogICAgICAgICAgICAv
LyBNYWtpbmcgdGhlIHdvcmtpbmcgZWxlbWVudCBub24tZW1wdHkgZWxlbWVudCBwZXJzdWFkZXMg
SUUgdG8gY29uc2lkZXIgdGhlIFRleHRSYW5nZSBib3VuZGFyeSB0byBiZSB3aXRoaW4gdGhlDQog
ICAgICAgICAgICAvLyBlbGVtZW50IHJhdGhlciB0aGFuIGltbWVkaWF0ZWx5IGJlZm9yZSBvciBh
ZnRlciBpdA0KICAgICAgICAgICAgd29ya2luZ05vZGUuaW5uZXJIVE1MID0gIiYjZmVmZjsiOw0K
DQogICAgICAgICAgICAvLyBpbnNlcnRCZWZvcmUgaXMgc3VwcG9zZWQgdG8gd29yayBsaWtlIGFw
cGVuZENoaWxkIGlmIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIG51bGwuIEhvd2V2ZXIsIGEgYnVn
IHJlcG9ydA0KICAgICAgICAgICAgLy8gZm9yIElFUmFuZ2Ugc3VnZ2VzdHMgdGhhdCBpdCBjYW4g
Y3Jhc2ggdGhlIGJyb3dzZXI6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9pZXJhbmdlL2lzc3Vl
cy9kZXRhaWw/aWQ9MTINCiAgICAgICAgICAgIGlmIChib3VuZGFyeU5vZGUpIHsNCiAgICAgICAg
ICAgICAgICBib3VuZGFyeVBhcmVudC5pbnNlcnRCZWZvcmUod29ya2luZ05vZGUsIGJvdW5kYXJ5
Tm9kZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5UGFy
ZW50LmFwcGVuZENoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAg
ICAgd29ya2luZ1JhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KHdvcmtpbmdOb2RlKTsNCiAgICAgICAg
ICAgIHdvcmtpbmdSYW5nZS5jb2xsYXBzZSghaXNTdGFydCk7DQoNCiAgICAgICAgICAgIC8vIENs
ZWFuIHVwDQogICAgICAgICAgICBib3VuZGFyeVBhcmVudC5yZW1vdmVDaGlsZCh3b3JraW5nTm9k
ZSk7DQoNCiAgICAgICAgICAgIC8vIE1vdmUgdGhlIHdvcmtpbmcgcmFuZ2UgdG8gdGhlIHRleHQg
b2Zmc2V0LCBpZiByZXF1aXJlZA0KICAgICAgICAgICAgaWYgKG5vZGVJc0RhdGFOb2RlKSB7DQog
ICAgICAgICAgICAgICAgd29ya2luZ1JhbmdlW2lzU3RhcnQgPyAibW92ZVN0YXJ0IiA6ICJtb3Zl
RW5kIl0oImNoYXJhY3RlciIsIGJvdW5kYXJ5T2Zmc2V0KTsNCiAgICAgICAgICAgIH0NCg0KICAg
ICAgICAgICAgcmV0dXJuIHdvcmtpbmdSYW5nZTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvKi0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAg
ICAgICAgLy8gVGhpcyBpcyBhIHdyYXBwZXIgYXJvdW5kIGEgVGV4dFJhbmdlLCBwcm92aWRpbmcg
ZnVsbCBET00gUmFuZ2UgZnVuY3Rpb25hbGl0eSB1c2luZyByYW5neSdzIERvbVJhbmdlIGFzIGEN
CiAgICAgICAgLy8gcHJvdG90eXBlDQoNCiAgICAgICAgV3JhcHBlZFRleHRSYW5nZSA9IGZ1bmN0
aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgdGhpcy50ZXh0UmFuZ2UgPSB0ZXh0UmFuZ2U7
DQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBXcmFw
cGVkVGV4dFJhbmdlLnByb3RvdHlwZSA9IG5ldyBEb21SYW5nZShkb2N1bWVudCk7DQoNCiAgICAg
ICAgV3JhcHBlZFRleHRSYW5nZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0KICAg
ICAgICAgICAgdmFyIHN0YXJ0LCBlbmQsIHN0YXJ0Qm91bmRhcnk7DQoNCiAgICAgICAgICAgIC8v
IFRleHRSYW5nZSdzIHBhcmVudEVsZW1lbnQoKSBtZXRob2QgY2Fubm90IGJlIHRydXN0ZWQuIGdl
dFRleHRSYW5nZUNvbnRhaW5lckVsZW1lbnQoKSB3b3JrcyBhcm91bmQgdGhhdC4NCiAgICAgICAg
ICAgIHZhciByYW5nZUNvbnRhaW5lckVsZW1lbnQgPSBnZXRUZXh0UmFuZ2VDb250YWluZXJFbGVt
ZW50KHRoaXMudGV4dFJhbmdlKTsNCg0KICAgICAgICAgICAgaWYgKHRleHRSYW5nZUlzQ29sbGFw
c2VkKHRoaXMudGV4dFJhbmdlKSkgew0KICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ID0gZ2V0
VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJF
bGVtZW50LCB0cnVlLA0KICAgICAgICAgICAgICAgICAgICB0cnVlKS5ib3VuZGFyeVBvc2l0aW9u
Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdGFydEJvdW5kYXJ5ID0g
Z2V0VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWlu
ZXJFbGVtZW50LCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgc3RhcnQgPSBzdGFydEJv
dW5kYXJ5LmJvdW5kYXJ5UG9zaXRpb247DQoNCiAgICAgICAgICAgICAgICAvLyBBbiBvcHRpbWl6
YXRpb24gdXNlZCBoZXJlIGlzIHRoYXQgaWYgdGhlIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcyBo
YXZlIHRoZSBzYW1lIHBhcmVudCBlbGVtZW50LCB0aGUNCiAgICAgICAgICAgICAgICAvLyBzZWFy
Y2ggc2NvcGUgZm9yIHRoZSBlbmQgYm91bmRhcnkgY2FuIGJlIGxpbWl0ZWQgdG8gZXhjbHVkZSB0
aGUgcG9ydGlvbiBvZiB0aGUgZWxlbWVudCB0aGF0IHByZWNlZGVzDQogICAgICAgICAgICAgICAg
Ly8gdGhlIHN0YXJ0IGJvdW5kYXJ5DQogICAgICAgICAgICAgICAgZW5kID0gZ2V0VGV4dFJhbmdl
Qm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJFbGVtZW50LCBm
YWxzZSwgZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHN0YXJ0Qm91bmRhcnkubm9kZUluZm8p
LmJvdW5kYXJ5UG9zaXRpb247DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuc2V0
U3RhcnQoc3RhcnQubm9kZSwgc3RhcnQub2Zmc2V0KTsNCiAgICAgICAgICAgIHRoaXMuc2V0RW5k
KGVuZC5ub2RlLCBlbmQub2Zmc2V0KTsNCiAgICAgICAgfTsNCg0KICAgICAgICBXcmFwcGVkVGV4
dFJhbmdlLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1
cm4gIldyYXBwZWRUZXh0UmFuZ2UiOw0KICAgICAgICB9Ow0KDQogICAgICAgIERvbVJhbmdlLmNv
cHlDb21wYXJpc29uQ29uc3RhbnRzKFdyYXBwZWRUZXh0UmFuZ2UpOw0KDQogICAgICAgIFdyYXBw
ZWRUZXh0UmFuZ2UucmFuZ2VUb1RleHRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAg
ICAgICBpZiAocmFuZ2UuY29sbGFwc2VkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0
ZUJvdW5kYXJ5VGV4dFJhbmdlKG5ldyBEb21Qb3NpdGlvbihyYW5nZS5zdGFydENvbnRhaW5lciwg
cmFuZ2Uuc3RhcnRPZmZzZXQpLCB0cnVlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgdmFyIHN0YXJ0UmFuZ2UgPSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZShuZXcgRG9t
UG9zaXRpb24ocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KSwgdHJ1ZSk7
DQogICAgICAgICAgICAgICAgdmFyIGVuZFJhbmdlID0gY3JlYXRlQm91bmRhcnlUZXh0UmFuZ2Uo
bmV3IERvbVBvc2l0aW9uKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KSwgZmFs
c2UpOw0KICAgICAgICAgICAgICAgIHZhciB0ZXh0UmFuZ2UgPSBnZXRCb2R5KCBEb21SYW5nZS5n
ZXRSYW5nZURvY3VtZW50KHJhbmdlKSApLmNyZWF0ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAg
ICAgIHRleHRSYW5nZS5zZXRFbmRQb2ludCgiU3RhcnRUb1N0YXJ0Iiwgc3RhcnRSYW5nZSk7DQog
ICAgICAgICAgICAgICAgdGV4dFJhbmdlLnNldEVuZFBvaW50KCJFbmRUb0VuZCIsIGVuZFJhbmdl
KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFJhbmdlOw0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9Ow0KDQogICAgICAgIGFwaS5XcmFwcGVkVGV4dFJhbmdlID0gV3JhcHBlZFRleHRSYW5n
ZTsNCg0KICAgICAgICAvLyBJRSA5IGFuZCBhYm92ZSBoYXZlIGJvdGggaW1wbGVtZW50YXRpb25z
IGFuZCBSYW5neSBtYWtlcyBib3RoIGF2YWlsYWJsZS4gVGhlIG5leHQgZmV3IGxpbmVzIHNldHMg
d2hpY2gNCiAgICAgICAgLy8gaW1wbGVtZW50YXRpb24gdG8gdXNlIGJ5IGRlZmF1bHQuDQogICAg
ICAgIGlmICghYXBpLmZlYXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSB8fCBhcGkuY29uZmlnLnBy
ZWZlclRleHRSYW5nZSkgew0KICAgICAgICAgICAgLy8gQWRkIFdyYXBwZWRUZXh0UmFuZ2UgYXMg
dGhlIFJhbmdlIHByb3BlcnR5IG9mIHRoZSBnbG9iYWwgb2JqZWN0IHRvIGFsbG93IGV4cHJlc3Np
b24gbGlrZSBSYW5nZS5FTkRfVE9fRU5EIHRvIHdvcmsNCiAgICAgICAgICAgIHZhciBnbG9iYWxP
YmogPSAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSgpOw0KICAgICAgICAgICAgaWYgKHR5
cGVvZiBnbG9iYWxPYmouUmFuZ2UgPT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgICAgICBn
bG9iYWxPYmouUmFuZ2UgPSBXcmFwcGVkVGV4dFJhbmdlOw0KICAgICAgICAgICAgfQ0KDQogICAg
ICAgICAgICBhcGkuY3JlYXRlTmF0aXZlUmFuZ2UgPSBmdW5jdGlvbihkb2MpIHsNCiAgICAgICAg
ICAgICAgICBkb2MgPSBnZXRDb250ZW50RG9jdW1lbnQoZG9jLCBtb2R1bGUsICJjcmVhdGVOYXRp
dmVSYW5nZSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBnZXRCb2R5KGRvYykuY3JlYXRlVGV4
dFJhbmdlKCk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBhcGkuV3JhcHBlZFJhbmdl
ID0gV3JhcHBlZFRleHRSYW5nZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGFwaS5jcmVhdGVS
YW5nZSA9IGZ1bmN0aW9uKGRvYykgew0KICAgICAgICBkb2MgPSBnZXRDb250ZW50RG9jdW1lbnQo
ZG9jLCBtb2R1bGUsICJjcmVhdGVSYW5nZSIpOw0KICAgICAgICByZXR1cm4gbmV3IGFwaS5XcmFw
cGVkUmFuZ2UoYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvYykpOw0KICAgIH07DQoNCiAgICBhcGku
Y3JlYXRlUmFuZ3lSYW5nZSA9IGZ1bmN0aW9uKGRvYykgew0KICAgICAgICBkb2MgPSBnZXRDb250
ZW50RG9jdW1lbnQoZG9jLCBtb2R1bGUsICJjcmVhdGVSYW5neVJhbmdlIik7DQogICAgICAgIHJl
dHVybiBuZXcgRG9tUmFuZ2UoZG9jKTsNCiAgICB9Ow0KDQogICAgYXBpLmNyZWF0ZUlmcmFtZVJh
bmdlID0gZnVuY3Rpb24oaWZyYW1lRWwpIHsNCiAgICAgICAgbW9kdWxlLmRlcHJlY2F0aW9uTm90
aWNlKCJjcmVhdGVJZnJhbWVSYW5nZSgpIiwgImNyZWF0ZVJhbmdlKGlmcmFtZUVsKSIpOw0KICAg
ICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmdlKGlmcmFtZUVsKTsNCiAgICB9Ow0KDQogICAgYXBp
LmNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2UgPSBmdW5jdGlvbihpZnJhbWVFbCkgew0KICAgICAgICBt
b2R1bGUuZGVwcmVjYXRpb25Ob3RpY2UoImNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2UoKSIsICJjcmVh
dGVSYW5neVJhbmdlKGlmcmFtZUVsKSIpOw0KICAgICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmd5
UmFuZ2UoaWZyYW1lRWwpOw0KICAgIH07DQoNCiAgICBhcGkuYWRkQ3JlYXRlTWlzc2luZ05hdGl2
ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKHdpbikgew0KICAgICAgICB2YXIgZG9jID0gd2luLmRvY3Vt
ZW50Ow0KICAgICAgICBpZiAodHlwZW9mIGRvYy5jcmVhdGVSYW5nZSA9PSAidW5kZWZpbmVkIikg
ew0KICAgICAgICAgICAgZG9jLmNyZWF0ZVJhbmdlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAg
ICAgICAgcmV0dXJuIGFwaS5jcmVhdGVSYW5nZShkb2MpOw0KICAgICAgICAgICAgfTsNCiAgICAg
ICAgfQ0KICAgICAgICBkb2MgPSB3aW4gPSBudWxsOw0KICAgIH0pOw0KfSk7Ci8vIFRoaXMgbW9k
dWxlIGNyZWF0ZXMgYSBzZWxlY3Rpb24gb2JqZWN0IHdyYXBwZXIgdGhhdCBjb25mb3JtcyBhcyBj
bG9zZWx5IGFzIHBvc3NpYmxlIHRvIHRoZSBTZWxlY3Rpb24gc3BlY2lmaWNhdGlvbg0KLy8gaW4g
dGhlIEhUTUwgRWRpdGluZyBzcGVjIChodHRwOi8vZHZjcy53My5vcmcvaGcvZWRpdGluZy9yYXct
ZmlsZS90aXAvZWRpdGluZy5odG1sI3NlbGVjdGlvbnMpDQpyYW5neS5jcmVhdGVNb2R1bGUoIldy
YXBwZWRTZWxlY3Rpb24iLCBmdW5jdGlvbihhcGksIG1vZHVsZSkgew0KICAgIGFwaS5yZXF1aXJl
TW9kdWxlcyggWyJEb21VdGlsIiwgIkRvbVJhbmdlIiwgIldyYXBwZWRSYW5nZSJdICk7DQoNCiAg
ICBhcGkuY29uZmlnLmNoZWNrU2VsZWN0aW9uUmFuZ2VzID0gdHJ1ZTsNCg0KICAgIHZhciBCT09M
RUFOID0gImJvb2xlYW4iOw0KICAgIHZhciBkb20gPSBhcGkuZG9tOw0KICAgIHZhciB1dGlsID0g
YXBpLnV0aWw7DQogICAgdmFyIGlzSG9zdE1ldGhvZCA9IHV0aWwuaXNIb3N0TWV0aG9kOw0KICAg
IHZhciBEb21SYW5nZSA9IGFwaS5Eb21SYW5nZTsNCiAgICB2YXIgV3JhcHBlZFJhbmdlID0gYXBp
LldyYXBwZWRSYW5nZTsNCiAgICB2YXIgRE9NRXhjZXB0aW9uID0gYXBpLkRPTUV4Y2VwdGlvbjsN
CiAgICB2YXIgRG9tUG9zaXRpb24gPSBkb20uRG9tUG9zaXRpb247DQogICAgdmFyIGdldE5hdGl2
ZVNlbGVjdGlvbjsNCiAgICB2YXIgc2VsZWN0aW9uSXNDb2xsYXBzZWQ7DQogICAgdmFyIGZlYXR1
cmVzID0gYXBpLmZlYXR1cmVzOw0KICAgIHZhciBDT05UUk9MID0gIkNvbnRyb2wiOw0KICAgIHZh
ciBnZXREb2N1bWVudCA9IGRvbS5nZXREb2N1bWVudDsNCiAgICB2YXIgZ2V0Qm9keSA9IGRvbS5n
ZXRCb2R5Ow0KICAgIHZhciByYW5nZXNFcXVhbCA9IERvbVJhbmdlLnJhbmdlc0VxdWFsOw0KDQoN
CiAgICAvLyBVdGlsaXR5IGZ1bmN0aW9uIHRvIHN1cHBvcnQgZGlyZWN0aW9uIHBhcmFtZXRlcnMg
aW4gdGhlIEFQSSB0aGF0IG1heSBiZSBhIHN0cmluZyAoImJhY2t3YXJkIiBvciAiZm9yd2FyZCIp
IG9yIGENCiAgICAvLyBCb29sZWFuICh0cnVlIGZvciBiYWNrd2FyZHMpLg0KICAgIGZ1bmN0aW9u
IGlzRGlyZWN0aW9uQmFja3dhcmQoZGlyKSB7DQogICAgICAgIHJldHVybiAodHlwZW9mIGRpciA9
PSAic3RyaW5nIikgPyAoZGlyID09ICJiYWNrd2FyZCIpIDogISFkaXI7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gZ2V0V2luZG93KHdpbiwgbWV0aG9kTmFtZSkgew0KICAgICAgICBpZiAoIXdpbikg
ew0KICAgICAgICAgICAgcmV0dXJuIHdpbmRvdzsNCiAgICAgICAgfSBlbHNlIGlmIChkb20uaXNX
aW5kb3cod2luKSkgew0KICAgICAgICAgICAgcmV0dXJuIHdpbjsNCiAgICAgICAgfSBlbHNlIGlm
ICh3aW4gaW5zdGFuY2VvZiBXcmFwcGVkU2VsZWN0aW9uKSB7DQogICAgICAgICAgICByZXR1cm4g
d2luLndpbjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhciBkb2MgPSBkb20uZ2V0
Q29udGVudERvY3VtZW50KHdpbiwgbW9kdWxlLCBtZXRob2ROYW1lKTsNCiAgICAgICAgICAgIHJl
dHVybiBkb20uZ2V0V2luZG93KGRvYyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlv
biBnZXRXaW5TZWxlY3Rpb24od2luUGFyYW0pIHsNCiAgICAgICAgcmV0dXJuIGdldFdpbmRvdyh3
aW5QYXJhbSwgImdldFdpblNlbGVjdGlvbiIpLmdldFNlbGVjdGlvbigpOw0KICAgIH0NCg0KICAg
IGZ1bmN0aW9uIGdldERvY1NlbGVjdGlvbih3aW5QYXJhbSkgew0KICAgICAgICByZXR1cm4gZ2V0
V2luZG93KHdpblBhcmFtLCAiZ2V0RG9jU2VsZWN0aW9uIikuZG9jdW1lbnQuc2VsZWN0aW9uOw0K
ICAgIH0NCg0KICAgIC8vIFRlc3QgZm9yIHRoZSBSYW5nZS9UZXh0UmFuZ2UgYW5kIFNlbGVjdGlv
biBmZWF0dXJlcyByZXF1aXJlZA0KICAgIC8vIFRlc3QgZm9yIGFiaWxpdHkgdG8gcmV0cmlldmUg
c2VsZWN0aW9uDQogICAgdmFyIGltcGxlbWVudHNXaW5HZXRTZWxlY3Rpb24gPSBpc0hvc3RNZXRo
b2Qod2luZG93LCAiZ2V0U2VsZWN0aW9uIiksDQogICAgICAgIGltcGxlbWVudHNEb2NTZWxlY3Rp
b24gPSB1dGlsLmlzSG9zdE9iamVjdChkb2N1bWVudCwgInNlbGVjdGlvbiIpOw0KDQogICAgZmVh
dHVyZXMuaW1wbGVtZW50c1dpbkdldFNlbGVjdGlvbiA9IGltcGxlbWVudHNXaW5HZXRTZWxlY3Rp
b247DQogICAgZmVhdHVyZXMuaW1wbGVtZW50c0RvY1NlbGVjdGlvbiA9IGltcGxlbWVudHNEb2NT
ZWxlY3Rpb247DQoNCiAgICB2YXIgdXNlRG9jdW1lbnRTZWxlY3Rpb24gPSBpbXBsZW1lbnRzRG9j
U2VsZWN0aW9uICYmICghaW1wbGVtZW50c1dpbkdldFNlbGVjdGlvbiB8fCBhcGkuY29uZmlnLnBy
ZWZlclRleHRSYW5nZSk7DQoNCiAgICBpZiAodXNlRG9jdW1lbnRTZWxlY3Rpb24pIHsNCiAgICAg
ICAgZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0RG9jU2VsZWN0aW9uOw0KICAgICAgICBhcGkuaXNT
ZWxlY3Rpb25WYWxpZCA9IGZ1bmN0aW9uKHdpblBhcmFtKSB7DQogICAgICAgICAgICB2YXIgZG9j
ID0gZ2V0V2luZG93KHdpblBhcmFtLCAiaXNTZWxlY3Rpb25WYWxpZCIpLmRvY3VtZW50LCBuYXRp
dmVTZWwgPSBkb2Muc2VsZWN0aW9uOw0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRo
ZSBzZWxlY3Rpb24gVGV4dFJhbmdlIGlzIGFjdHVhbGx5IGNvbnRhaW5lZCB3aXRoaW4gdGhlIGNv
cnJlY3QgZG9jdW1lbnQNCiAgICAgICAgICAgIHJldHVybiAobmF0aXZlU2VsLnR5cGUgIT0gIk5v
bmUiIHx8IGdldERvY3VtZW50KG5hdGl2ZVNlbC5jcmVhdGVSYW5nZSgpLnBhcmVudEVsZW1lbnQo
KSkgPT0gZG9jKTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKGltcGxlbWVudHNXaW5HZXRT
ZWxlY3Rpb24pIHsNCiAgICAgICAgZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0V2luU2VsZWN0aW9u
Ow0KICAgICAgICBhcGkuaXNTZWxlY3Rpb25WYWxpZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAg
ICAgcmV0dXJuIHRydWU7DQogICAgICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgbW9kdWxl
LmZhaWwoIk5laXRoZXIgZG9jdW1lbnQuc2VsZWN0aW9uIG9yIHdpbmRvdy5nZXRTZWxlY3Rpb24o
KSBkZXRlY3RlZC4iKTsNCiAgICB9DQoNCiAgICBhcGkuZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0
TmF0aXZlU2VsZWN0aW9uOw0KDQogICAgdmFyIHRlc3RTZWxlY3Rpb24gPSBnZXROYXRpdmVTZWxl
Y3Rpb24oKTsNCiAgICB2YXIgdGVzdFJhbmdlID0gYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvY3Vt
ZW50KTsNCiAgICB2YXIgYm9keSA9IGdldEJvZHkoZG9jdW1lbnQpOw0KDQogICAgLy8gT2J0YWlu
aW5nIGEgcmFuZ2UgZnJvbSBhIHNlbGVjdGlvbg0KICAgIHZhciBzZWxlY3Rpb25IYXNBbmNob3JB
bmRGb2N1cyA9IHV0aWwuYXJlSG9zdFByb3BlcnRpZXModGVzdFNlbGVjdGlvbiwNCiAgICAgICAg
WyJhbmNob3JOb2RlIiwgImZvY3VzTm9kZSIsICJhbmNob3JPZmZzZXQiLCAiZm9jdXNPZmZzZXQi
XSk7DQoNCiAgICBmZWF0dXJlcy5zZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyA9IHNlbGVjdGlv
bkhhc0FuY2hvckFuZEZvY3VzOw0KDQogICAgLy8gVGVzdCBmb3IgZXhpc3RlbmNlIG9mIG5hdGl2
ZSBzZWxlY3Rpb24gZXh0ZW5kKCkgbWV0aG9kDQogICAgdmFyIHNlbGVjdGlvbkhhc0V4dGVuZCA9
IGlzSG9zdE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAiZXh0ZW5kIik7DQogICAgZmVhdHVyZXMuc2Vs
ZWN0aW9uSGFzRXh0ZW5kID0gc2VsZWN0aW9uSGFzRXh0ZW5kOw0KDQogICAgLy8gVGVzdCBpZiBy
YW5nZUNvdW50IGV4aXN0cw0KICAgIHZhciBzZWxlY3Rpb25IYXNSYW5nZUNvdW50ID0gKHR5cGVv
ZiB0ZXN0U2VsZWN0aW9uLnJhbmdlQ291bnQgPT0gIm51bWJlciIpOw0KICAgIGZlYXR1cmVzLnNl
bGVjdGlvbkhhc1JhbmdlQ291bnQgPSBzZWxlY3Rpb25IYXNSYW5nZUNvdW50Ow0KDQogICAgdmFy
IHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSBmYWxzZTsNCiAgICB2YXIgY29sbGFw
c2VkTm9uRWRpdGFibGVTZWxlY3Rpb25zU3VwcG9ydGVkID0gdHJ1ZTsNCg0KICAgIGlmICh1dGls
LmFyZUhvc3RNZXRob2RzKHRlc3RTZWxlY3Rpb24sIFsiYWRkUmFuZ2UiLCAiZ2V0UmFuZ2VBdCIs
ICJyZW1vdmVBbGxSYW5nZXMiXSkgJiYNCiAgICAgICAgICAgIHR5cGVvZiB0ZXN0U2VsZWN0aW9u
LnJhbmdlQ291bnQgPT0gIm51bWJlciIgJiYgZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlKSB7
DQoNCiAgICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgLy8gUHJldmlvdXNseSBhbiBp
ZnJhbWUgd2FzIHVzZWQgYnV0IHRoaXMgY2F1c2VkIHByb2JsZW1zIGluIHNvbWUgY2lyY3Vtc3Rh
bmNlcyBpbiBJRSwgc28gdGVzdHMgYXJlDQogICAgICAgICAgICAvLyBwZXJmb3JtZWQgb24gdGhl
IGN1cnJlbnQgZG9jdW1lbnQncyBzZWxlY3Rpb24uIFNlZSBpc3N1ZSAxMDkuDQoNCiAgICAgICAg
ICAgIC8vIE5vdGUgYWxzbyB0aGF0IGlmIGEgc2VsZWN0aW9uIHByZXZpb3VzbHkgZXhpc3RlZCwg
aXQgaXMgd2lwZWQgYnkgdGhlc2UgdGVzdHMuIFRoaXMgc2hvdWxkIHVzdWFsbHkgYmUgZmluZQ0K
ICAgICAgICAgICAgLy8gYmVjYXVzZSBpbml0aWFsaXphdGlvbiB1c3VhbGx5IGhhcHBlbnMgd2hl
biB0aGUgZG9jdW1lbnQgbG9hZHMsIGJ1dCBjb3VsZCBiZSBhIHByb2JsZW0gZm9yIGEgc2NyaXB0
IHRoYXQNCiAgICAgICAgICAgIC8vIGxvYWRzIGFuZCBpbml0aWFsaXplcyBSYW5neSBsYXRlci4g
SWYgYW55b25lIGNvbXBsYWlucywgY29kZSBjb3VsZCBiZSBhZGRlZCB0byBzYXZlIGFuZCByZXN0
b3JlIHRoZQ0KICAgICAgICAgICAgLy8gc2VsZWN0aW9uLg0KICAgICAgICAgICAgdmFyIHNlbCA9
IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsNCiAgICAgICAgICAgIGlmIChzZWwpIHsNCiAgICAgICAg
ICAgICAgICB2YXIgYm9keSA9IGdldEJvZHkoZG9jdW1lbnQpOw0KICAgICAgICAgICAgICAgIHZh
ciB0ZXN0RWwgPSBib2R5LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYi
KSApOw0KICAgICAgICAgICAgICAgIHRlc3RFbC5jb250ZW50RWRpdGFibGUgPSAiZmFsc2UiOw0K
ICAgICAgICAgICAgICAgIHZhciB0ZXh0Tm9kZSA9IHRlc3RFbC5hcHBlbmRDaGlsZCggZG9jdW1l
bnQuY3JlYXRlVGV4dE5vZGUoIlx1MDBhMFx1MDBhMFx1MDBhMCIpICk7DQoNCiAgICAgICAgICAg
ICAgICAvLyBUZXN0IHdoZXRoZXIgdGhlIG5hdGl2ZSBzZWxlY3Rpb24gd2lsbCBhbGxvdyBhIGNv
bGxhcHNlZCBzZWxlY3Rpb24gd2l0aGluIGEgbm9uLWVkaXRhYmxlIGVsZW1lbnQNCiAgICAgICAg
ICAgICAgICB2YXIgcjEgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOw0KDQogICAgICAgICAgICAg
ICAgcjEuc2V0U3RhcnQodGV4dE5vZGUsIDEpOw0KICAgICAgICAgICAgICAgIHIxLmNvbGxhcHNl
KHRydWUpOw0KICAgICAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyMSk7DQogICAgICAgICAgICAg
ICAgY29sbGFwc2VkTm9uRWRpdGFibGVTZWxlY3Rpb25zU3VwcG9ydGVkID0gKHNlbC5yYW5nZUNv
dW50ID09IDEpOw0KICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCg0KICAg
ICAgICAgICAgICAgIC8vIFRlc3Qgd2hldGhlciB0aGUgbmF0aXZlIHNlbGVjdGlvbiBpcyBjYXBh
YmxlIG9mIHN1cHBvcnRpbmcgbXVsdGlwbGUgcmFuZ2VzDQogICAgICAgICAgICAgICAgdmFyIHIy
ID0gcjEuY2xvbmVSYW5nZSgpOw0KICAgICAgICAgICAgICAgIHIxLnNldFN0YXJ0KHRleHROb2Rl
LCAwKTsNCiAgICAgICAgICAgICAgICByMi5zZXRFbmQodGV4dE5vZGUsIDMpOw0KICAgICAgICAg
ICAgICAgIHIyLnNldFN0YXJ0KHRleHROb2RlLCAyKTsNCiAgICAgICAgICAgICAgICBzZWwuYWRk
UmFuZ2UocjEpOw0KICAgICAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyMik7DQoNCiAgICAgICAg
ICAgICAgICBzZWxlY3Rpb25TdXBwb3J0c011bHRpcGxlUmFuZ2VzID0gKHNlbC5yYW5nZUNvdW50
ID09IDIpOw0KDQogICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXANCiAgICAgICAgICAgICAgICBi
b2R5LnJlbW92ZUNoaWxkKHRlc3RFbCk7DQogICAgICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJh
bmdlcygpOw0KICAgICAgICAgICAgICAgIHIxLmRldGFjaCgpOw0KICAgICAgICAgICAgICAgIHIy
LmRldGFjaCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KSgpOw0KICAgIH0NCg0KICAgIGZl
YXR1cmVzLnNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSBzZWxlY3Rpb25TdXBwb3J0
c011bHRpcGxlUmFuZ2VzOw0KICAgIGZlYXR1cmVzLmNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0
aW9uc1N1cHBvcnRlZCA9IGNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0aW9uc1N1cHBvcnRlZDsN
Cg0KICAgIC8vIENvbnRyb2xSYW5nZXMNCiAgICB2YXIgaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9
IGZhbHNlLCB0ZXN0Q29udHJvbFJhbmdlOw0KDQogICAgaWYgKGJvZHkgJiYgaXNIb3N0TWV0aG9k
KGJvZHksICJjcmVhdGVDb250cm9sUmFuZ2UiKSkgew0KICAgICAgICB0ZXN0Q29udHJvbFJhbmdl
ID0gYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTsNCiAgICAgICAgaWYgKHV0aWwuYXJlSG9zdFBy
b3BlcnRpZXModGVzdENvbnRyb2xSYW5nZSwgWyJpdGVtIiwgImFkZCJdKSkgew0KICAgICAgICAg
ICAgaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9IHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAg
ZmVhdHVyZXMuaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9IGltcGxlbWVudHNDb250cm9sUmFuZ2U7
DQoNCiAgICAvLyBTZWxlY3Rpb24gY29sbGFwc2VkbmVzcw0KICAgIGlmIChzZWxlY3Rpb25IYXNB
bmNob3JBbmRGb2N1cykgew0KICAgICAgICBzZWxlY3Rpb25Jc0NvbGxhcHNlZCA9IGZ1bmN0aW9u
KHNlbCkgew0KICAgICAgICAgICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlID09PSBzZWwuZm9jdXNO
b2RlICYmIHNlbC5hbmNob3JPZmZzZXQgPT09IHNlbC5mb2N1c09mZnNldDsNCiAgICAgICAgfTsN
CiAgICB9IGVsc2Ugew0KICAgICAgICBzZWxlY3Rpb25Jc0NvbGxhcHNlZCA9IGZ1bmN0aW9uKHNl
bCkgew0KICAgICAgICAgICAgcmV0dXJuIHNlbC5yYW5nZUNvdW50ID8gc2VsLmdldFJhbmdlQXQo
c2VsLnJhbmdlQ291bnQgLSAxKS5jb2xsYXBzZWQgOiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICB9
DQoNCiAgICBmdW5jdGlvbiB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZShzZWwsIHJhbmdl
LCBiYWNrd2FyZCkgew0KICAgICAgICB2YXIgYW5jaG9yUHJlZml4ID0gYmFja3dhcmQgPyAiZW5k
IiA6ICJzdGFydCIsIGZvY3VzUHJlZml4ID0gYmFja3dhcmQgPyAic3RhcnQiIDogImVuZCI7DQog
ICAgICAgIHNlbC5hbmNob3JOb2RlID0gcmFuZ2VbYW5jaG9yUHJlZml4ICsgIkNvbnRhaW5lciJd
Ow0KICAgICAgICBzZWwuYW5jaG9yT2Zmc2V0ID0gcmFuZ2VbYW5jaG9yUHJlZml4ICsgIk9mZnNl
dCJdOw0KICAgICAgICBzZWwuZm9jdXNOb2RlID0gcmFuZ2VbZm9jdXNQcmVmaXggKyAiQ29udGFp
bmVyIl07DQogICAgICAgIHNlbC5mb2N1c09mZnNldCA9IHJhbmdlW2ZvY3VzUHJlZml4ICsgIk9m
ZnNldCJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbU5h
dGl2ZVNlbGVjdGlvbihzZWwpIHsNCiAgICAgICAgdmFyIG5hdGl2ZVNlbCA9IHNlbC5uYXRpdmVT
ZWxlY3Rpb247DQogICAgICAgIHNlbC5hbmNob3JOb2RlID0gbmF0aXZlU2VsLmFuY2hvck5vZGU7
DQogICAgICAgIHNlbC5hbmNob3JPZmZzZXQgPSBuYXRpdmVTZWwuYW5jaG9yT2Zmc2V0Ow0KICAg
ICAgICBzZWwuZm9jdXNOb2RlID0gbmF0aXZlU2VsLmZvY3VzTm9kZTsNCiAgICAgICAgc2VsLmZv
Y3VzT2Zmc2V0ID0gbmF0aXZlU2VsLmZvY3VzT2Zmc2V0Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9u
IHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCkgew0KICAgICAgICBzZWwuYW5jaG9yTm9kZSA9IHNl
bC5mb2N1c05vZGUgPSBudWxsOw0KICAgICAgICBzZWwuYW5jaG9yT2Zmc2V0ID0gc2VsLmZvY3Vz
T2Zmc2V0ID0gMDsNCiAgICAgICAgc2VsLnJhbmdlQ291bnQgPSAwOw0KICAgICAgICBzZWwuaXND
b2xsYXBzZWQgPSB0cnVlOw0KICAgICAgICBzZWwuX3Jhbmdlcy5sZW5ndGggPSAwOw0KICAgIH0N
Cg0KICAgIGZ1bmN0aW9uIGdldE5hdGl2ZVJhbmdlKHJhbmdlKSB7DQogICAgICAgIHZhciBuYXRp
dmVSYW5nZTsNCiAgICAgICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRG9tUmFuZ2UpIHsNCiAgICAg
ICAgICAgIG5hdGl2ZVJhbmdlID0gYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKHJhbmdlLmdldERvY3Vt
ZW50KCkpOw0KICAgICAgICAgICAgbmF0aXZlUmFuZ2Uuc2V0RW5kKHJhbmdlLmVuZENvbnRhaW5l
ciwgcmFuZ2UuZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgIG5hdGl2ZVJhbmdlLnNldFN0YXJ0KHJh
bmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7DQogICAgICAgIH0gZWxzZSBp
ZiAocmFuZ2UgaW5zdGFuY2VvZiBXcmFwcGVkUmFuZ2UpIHsNCiAgICAgICAgICAgIG5hdGl2ZVJh
bmdlID0gcmFuZ2UubmF0aXZlUmFuZ2U7DQogICAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZXMuaW1w
bGVtZW50c0RvbVJhbmdlICYmIChyYW5nZSBpbnN0YW5jZW9mIGRvbS5nZXRXaW5kb3cocmFuZ2Uu
c3RhcnRDb250YWluZXIpLlJhbmdlKSkgew0KICAgICAgICAgICAgbmF0aXZlUmFuZ2UgPSByYW5n
ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmF0aXZlUmFuZ2U7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gcmFuZ2VDb250YWluc1NpbmdsZUVsZW1lbnQocmFuZ2VOb2Rlcykgew0KICAgICAg
ICBpZiAoIXJhbmdlTm9kZXMubGVuZ3RoIHx8IHJhbmdlTm9kZXNbMF0ubm9kZVR5cGUgIT0gMSkg
ew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFy
IGkgPSAxLCBsZW4gPSByYW5nZU5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAg
ICAgICBpZiAoIWRvbS5pc0FuY2VzdG9yT2YocmFuZ2VOb2Rlc1swXSwgcmFuZ2VOb2Rlc1tpXSkp
IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAg
IH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0U2luZ2xl
RWxlbWVudEZyb21SYW5nZShyYW5nZSkgew0KICAgICAgICB2YXIgbm9kZXMgPSByYW5nZS5nZXRO
b2RlcygpOw0KICAgICAgICBpZiAoIXJhbmdlQ29udGFpbnNTaW5nbGVFbGVtZW50KG5vZGVzKSkg
ew0KICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJnZXRTaW5nbGVFbGVtZW50
RnJvbVJhbmdlOiByYW5nZSAiICsgcmFuZ2UuaW5zcGVjdCgpICsgIiBkaWQgbm90IGNvbnNpc3Qg
b2YgYSBzaW5nbGUgZWxlbWVudCIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBub2Rlc1sw
XTsNCiAgICB9DQoNCiAgICAvLyBTaW1wbGUsIHF1aWNrIHRlc3Qgd2hpY2ggb25seSBuZWVkcyB0
byBkaXN0aW5ndWlzaCBiZXR3ZWVuIGEgVGV4dFJhbmdlIGFuZCBhIENvbnRyb2xSYW5nZQ0KICAg
IGZ1bmN0aW9uIGlzVGV4dFJhbmdlKHJhbmdlKSB7DQogICAgICAgIHJldHVybiAhIXJhbmdlICYm
IHR5cGVvZiByYW5nZS50ZXh0ICE9ICJ1bmRlZmluZWQiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9u
IHVwZGF0ZUZyb21UZXh0UmFuZ2Uoc2VsLCByYW5nZSkgew0KICAgICAgICAvLyBDcmVhdGUgYSBS
YW5nZSBmcm9tIHRoZSBzZWxlY3RlZCBUZXh0UmFuZ2UNCiAgICAgICAgdmFyIHdyYXBwZWRSYW5n
ZSA9IG5ldyBXcmFwcGVkUmFuZ2UocmFuZ2UpOw0KICAgICAgICBzZWwuX3JhbmdlcyA9IFt3cmFw
cGVkUmFuZ2VdOw0KDQogICAgICAgIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwg
d3JhcHBlZFJhbmdlLCBmYWxzZSk7DQogICAgICAgIHNlbC5yYW5nZUNvdW50ID0gMTsNCiAgICAg
ICAgc2VsLmlzQ29sbGFwc2VkID0gd3JhcHBlZFJhbmdlLmNvbGxhcHNlZDsNCiAgICB9DQoNCiAg
ICBmdW5jdGlvbiB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCkgew0KICAgICAgICAvLyBVcGRh
dGUgdGhlIHdyYXBwZWQgc2VsZWN0aW9uIGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2
ZSBzZWxlY3Rpb24NCiAgICAgICAgc2VsLl9yYW5nZXMubGVuZ3RoID0gMDsNCiAgICAgICAgaWYg
KHNlbC5kb2NTZWxlY3Rpb24udHlwZSA9PSAiTm9uZSIpIHsNCiAgICAgICAgICAgIHVwZGF0ZUVt
cHR5U2VsZWN0aW9uKHNlbCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2YXIgY29u
dHJvbFJhbmdlID0gc2VsLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAgICAgICAgICAg
aWYgKGlzVGV4dFJhbmdlKGNvbnRyb2xSYW5nZSkpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlz
IGNhc2UgKHdoZXJlIHRoZSBzZWxlY3Rpb24gdHlwZSBpcyAiQ29udHJvbCIgYW5kIGNhbGxpbmcg
Y3JlYXRlUmFuZ2UoKSBvbiB0aGUgc2VsZWN0aW9uIHJldHVybnMNCiAgICAgICAgICAgICAgICAv
LyBhIFRleHRSYW5nZSkgY2FuIGhhcHBlbiBpbiBJRSA5LiBJdCBoYXBwZW5zLCBmb3IgZXhhbXBs
ZSwgd2hlbiBhbGwgZWxlbWVudHMgaW4gdGhlIHNlbGVjdGVkDQogICAgICAgICAgICAgICAgLy8g
Q29udHJvbFJhbmdlIGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIENvbnRyb2xSYW5nZSBhbmQg
cmVtb3ZlZCBmcm9tIHRoZSBkb2N1bWVudC4NCiAgICAgICAgICAgICAgICB1cGRhdGVGcm9tVGV4
dFJhbmdlKHNlbCwgY29udHJvbFJhbmdlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgc2VsLnJhbmdlQ291bnQgPSBjb250cm9sUmFuZ2UubGVuZ3RoOw0KICAgICAgICAg
ICAgICAgIHZhciByYW5nZSwgZG9jID0gZ2V0RG9jdW1lbnQoY29udHJvbFJhbmdlLml0ZW0oMCkp
Ow0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlQ291bnQ7ICsr
aSkgew0KICAgICAgICAgICAgICAgICAgICByYW5nZSA9IGFwaS5jcmVhdGVSYW5nZShkb2MpOw0K
ICAgICAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlKGNvbnRyb2xSYW5nZS5pdGVtKGkp
KTsNCiAgICAgICAgICAgICAgICAgICAgc2VsLl9yYW5nZXMucHVzaChyYW5nZSk7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbC5yYW5nZUNv
dW50ID09IDEgJiYgc2VsLl9yYW5nZXNbMF0uY29sbGFwc2VkOw0KICAgICAgICAgICAgICAgIHVw
ZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291
bnQgLSAxXSwgZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gYWRkUmFuZ2VUb0NvbnRyb2xTZWxlY3Rpb24oc2VsLCByYW5nZSkgew0KICAgICAg
ICB2YXIgY29udHJvbFJhbmdlID0gc2VsLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAg
ICAgICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7
DQoNCiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IENvbnRyb2xSYW5nZSBjb250YWluaW5nIGFsbCB0
aGUgZWxlbWVudHMgaW4gdGhlIHNlbGVjdGVkIENvbnRyb2xSYW5nZSBwbHVzIHRoZSBlbGVtZW50
DQogICAgICAgIC8vIGNvbnRhaW5lZCBieSB0aGUgc3VwcGxpZWQgcmFuZ2UNCiAgICAgICAgdmFy
IGRvYyA9IGdldERvY3VtZW50KGNvbnRyb2xSYW5nZS5pdGVtKDApKTsNCiAgICAgICAgdmFyIG5l
d0NvbnRyb2xSYW5nZSA9IGdldEJvZHkoZG9jKS5jcmVhdGVDb250cm9sUmFuZ2UoKTsNCiAgICAg
ICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbnRyb2xSYW5nZS5sZW5ndGg7IGkgPCBsZW47ICsr
aSkgew0KICAgICAgICAgICAgbmV3Q29udHJvbFJhbmdlLmFkZChjb250cm9sUmFuZ2UuaXRlbShp
KSk7DQogICAgICAgIH0NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIG5ld0NvbnRyb2xSYW5n
ZS5hZGQocmFuZ2VFbGVtZW50KTsNCiAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAg
IHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiYWRkUmFuZ2UoKTogRWxlbWVudCB3aXRoaW4gdGhl
IHNwZWNpZmllZCBSYW5nZSBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24g
KGRvZXMgaXQgaGF2ZSBsYXlvdXQ/KSIpOw0KICAgICAgICB9DQogICAgICAgIG5ld0NvbnRyb2xS
YW5nZS5zZWxlY3QoKTsNCg0KICAgICAgICAvLyBVcGRhdGUgdGhlIHdyYXBwZWQgc2VsZWN0aW9u
IGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2ZSBzZWxlY3Rpb24NCiAgICAgICAgdXBk
YXRlQ29udHJvbFNlbGVjdGlvbihzZWwpOw0KICAgIH0NCg0KICAgIHZhciBnZXRTZWxlY3Rpb25S
YW5nZUF0Ow0KDQogICAgaWYgKGlzSG9zdE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAiZ2V0UmFuZ2VB
dCIpKSB7DQogICAgICAgIC8vIHRyeS9jYXRjaCBpcyBwcmVzZW50IGJlY2F1c2UgZ2V0UmFuZ2VB
dCgpIG11c3QgaGF2ZSB0aHJvd24gYW4gZXJyb3IgaW4gc29tZSBicm93c2VyIGFuZCBzb21lIHNp
dHVhdGlvbi4NCiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgSSBkaWRuJ3Qgd3JpdGUgYSBjb21t
ZW50IGFib3V0IHRoZSBzcGVjaWZpY3MgYW5kIGFtIG5vdyBzY2FyZWQgdG8gdGFrZSBpdCBvdXQu
IExldCB0aGF0IGJlIGENCiAgICAgICAgLy8gbGVzc29uIHRvIHVzIGFsbCwgZXNwZWNpYWxseSBt
ZS4NCiAgICAgICAgZ2V0U2VsZWN0aW9uUmFuZ2VBdCA9IGZ1bmN0aW9uKHNlbCwgaW5kZXgpIHsN
CiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbC5nZXRSYW5nZUF0
KGluZGV4KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICAgICAgcmV0
dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSBlbHNlIGlmIChzZWxl
Y3Rpb25IYXNBbmNob3JBbmRGb2N1cykgew0KICAgICAgICBnZXRTZWxlY3Rpb25SYW5nZUF0ID0g
ZnVuY3Rpb24oc2VsKSB7DQogICAgICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnQoc2VsLmFu
Y2hvck5vZGUpOw0KICAgICAgICAgICAgdmFyIHJhbmdlID0gYXBpLmNyZWF0ZVJhbmdlKGRvYyk7
DQogICAgICAgICAgICByYW5nZS5zZXRTdGFydEFuZEVuZChzZWwuYW5jaG9yTm9kZSwgc2VsLmFu
Y2hvck9mZnNldCwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTsNCg0KICAgICAgICAg
ICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZW4gdGhlIHNlbGVjdGlvbiB3YXMgc2VsZWN0ZWQgYmFj
a3dhcmRzIChmcm9tIHRoZSBlbmQgdG8gdGhlIHN0YXJ0IGluIHRoZQ0KICAgICAgICAgICAgLy8g
ZG9jdW1lbnQpDQogICAgICAgICAgICBpZiAocmFuZ2UuY29sbGFwc2VkICE9PSB0aGlzLmlzQ29s
bGFwc2VkKSB7DQogICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBbmRFbmQoc2VsLmZvY3Vz
Tm9kZSwgc2VsLmZvY3VzT2Zmc2V0LCBzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCk7
DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiByYW5nZTsNCiAgICAgICAgfTsN
CiAgICB9DQoNCiAgICBmdW5jdGlvbiBXcmFwcGVkU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jU2Vs
ZWN0aW9uLCB3aW4pIHsNCiAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24gPSBzZWxlY3Rpb247
DQogICAgICAgIHRoaXMuZG9jU2VsZWN0aW9uID0gZG9jU2VsZWN0aW9uOw0KICAgICAgICB0aGlz
Ll9yYW5nZXMgPSBbXTsNCiAgICAgICAgdGhpcy53aW4gPSB3aW47DQogICAgICAgIHRoaXMucmVm
cmVzaCgpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRlbGV0ZVByb3BlcnRpZXMoc2VsKSB7DQog
ICAgICAgIHNlbC53aW4gPSBzZWwuYW5jaG9yTm9kZSA9IHNlbC5mb2N1c05vZGUgPSBzZWwuX3Jh
bmdlcyA9IG51bGw7DQogICAgICAgIHNlbC5yYW5nZUNvdW50ID0gc2VsLmFuY2hvck9mZnNldCA9
IHNlbC5mb2N1c09mZnNldCA9IDA7DQogICAgICAgIHNlbC5kZXRhY2hlZCA9IHRydWU7DQogICAg
fQ0KDQogICAgdmFyIGNhY2hlZFJhbmd5U2VsZWN0aW9ucyA9IFtdOw0KDQogICAgZnVuY3Rpb24g
ZmluZENhY2hlZFNlbGVjdGlvbih3aW4sIGFjdGlvbikgew0KICAgICAgICB2YXIgaSA9IGNhY2hl
ZFJhbmd5U2VsZWN0aW9ucy5sZW5ndGgsIGNhY2hlZCwgc2VsOw0KICAgICAgICB3aGlsZSAoaS0t
KSB7DQogICAgICAgICAgICBjYWNoZWQgPSBjYWNoZWRSYW5neVNlbGVjdGlvbnNbaV07DQogICAg
ICAgICAgICBzZWwgPSBjYWNoZWQuc2VsZWN0aW9uOw0KICAgICAgICAgICAgaWYgKGFjdGlvbiA9
PSAiZGVsZXRlQWxsIikgew0KICAgICAgICAgICAgICAgIGRlbGV0ZVByb3BlcnRpZXMoc2VsKTsN
CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FjaGVkLndpbiA9PSB3aW4pIHsNCiAgICAgICAgICAg
ICAgICBpZiAoYWN0aW9uID09ICJkZWxldGUiKSB7DQogICAgICAgICAgICAgICAgICAgIGNhY2hl
ZFJhbmd5U2VsZWN0aW9ucy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVy
biB0cnVlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJl
dHVybiBzZWw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQog
ICAgICAgIGlmIChhY3Rpb24gPT0gImRlbGV0ZUFsbCIpIHsNCiAgICAgICAgICAgIGNhY2hlZFJh
bmd5U2VsZWN0aW9ucy5sZW5ndGggPSAwOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxs
Ow0KICAgIH0NCg0KICAgIHZhciBnZXRTZWxlY3Rpb24gPSBmdW5jdGlvbih3aW4pIHsNCiAgICAg
ICAgLy8gQ2hlY2sgaWYgdGhlIHBhcmFtZXRlciBpcyBhIFJhbmd5IFNlbGVjdGlvbiBvYmplY3QN
CiAgICAgICAgaWYgKHdpbiAmJiB3aW4gaW5zdGFuY2VvZiBXcmFwcGVkU2VsZWN0aW9uKSB7DQog
ICAgICAgICAgICB3aW4ucmVmcmVzaCgpOw0KICAgICAgICAgICAgcmV0dXJuIHdpbjsNCiAgICAg
ICAgfQ0KDQogICAgICAgIHdpbiA9IGdldFdpbmRvdyh3aW4sICJnZXROYXRpdmVTZWxlY3Rpb24i
KTsNCg0KICAgICAgICB2YXIgc2VsID0gZmluZENhY2hlZFNlbGVjdGlvbih3aW4pOw0KICAgICAg
ICB2YXIgbmF0aXZlU2VsID0gZ2V0TmF0aXZlU2VsZWN0aW9uKHdpbiksIGRvY1NlbCA9IGltcGxl
bWVudHNEb2NTZWxlY3Rpb24gPyBnZXREb2NTZWxlY3Rpb24od2luKSA6IG51bGw7DQogICAgICAg
IGlmIChzZWwpIHsNCiAgICAgICAgICAgIHNlbC5uYXRpdmVTZWxlY3Rpb24gPSBuYXRpdmVTZWw7
DQogICAgICAgICAgICBzZWwuZG9jU2VsZWN0aW9uID0gZG9jU2VsOw0KICAgICAgICAgICAgc2Vs
LnJlZnJlc2goKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNlbCA9IG5ldyBXcmFw
cGVkU2VsZWN0aW9uKG5hdGl2ZVNlbCwgZG9jU2VsLCB3aW4pOw0KICAgICAgICAgICAgY2FjaGVk
UmFuZ3lTZWxlY3Rpb25zLnB1c2goIHsgd2luOiB3aW4sIHNlbGVjdGlvbjogc2VsIH0gKTsNCiAg
ICAgICAgfQ0KICAgICAgICByZXR1cm4gc2VsOw0KICAgIH07DQoNCiAgICBhcGkuZ2V0U2VsZWN0
aW9uID0gZ2V0U2VsZWN0aW9uOw0KDQogICAgYXBpLmdldElmcmFtZVNlbGVjdGlvbiA9IGZ1bmN0
aW9uKGlmcmFtZUVsKSB7DQogICAgICAgIG1vZHVsZS5kZXByZWNhdGlvbk5vdGljZSgiZ2V0SWZy
YW1lU2VsZWN0aW9uKCkiLCAiZ2V0U2VsZWN0aW9uKGlmcmFtZUVsKSIpOw0KICAgICAgICByZXR1
cm4gYXBpLmdldFNlbGVjdGlvbihkb20uZ2V0SWZyYW1lV2luZG93KGlmcmFtZUVsKSk7DQogICAg
fTsNCg0KICAgIHZhciBzZWxQcm90byA9IFdyYXBwZWRTZWxlY3Rpb24ucHJvdG90eXBlOw0KDQog
ICAgZnVuY3Rpb24gY3JlYXRlQ29udHJvbFNlbGVjdGlvbihzZWwsIHJhbmdlcykgew0KICAgICAg
ICAvLyBFbnN1cmUgdGhhdCB0aGUgc2VsZWN0aW9uIGJlY29tZXMgb2YgdHlwZSAiQ29udHJvbCIN
CiAgICAgICAgdmFyIGRvYyA9IGdldERvY3VtZW50KHJhbmdlc1swXS5zdGFydENvbnRhaW5lcik7
DQogICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSBnZXRCb2R5KGRvYykuY3JlYXRlQ29udHJvbFJh
bmdlKCk7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBlbDsgaSA8IHJhbmdlQ291bnQ7ICsraSkg
ew0KICAgICAgICAgICAgZWwgPSBnZXRTaW5nbGVFbGVtZW50RnJvbVJhbmdlKHJhbmdlc1tpXSk7
DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnRyb2xSYW5nZS5hZGQoZWwp
Ow0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBtb2R1
bGUuY3JlYXRlRXJyb3IoInNldFJhbmdlcygpOiBFbGVtZW50IHdpdGhpbiB0aGUgb25lIG9mIHRo
ZSBzcGVjaWZpZWQgUmFuZ2VzIGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlv
biAoZG9lcyBpdCBoYXZlIGxheW91dD8pIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAg
ICAgICAgY29udHJvbFJhbmdlLnNlbGVjdCgpOw0KDQogICAgICAgIC8vIFVwZGF0ZSB0aGUgd3Jh
cHBlZCBzZWxlY3Rpb24gYmFzZWQgb24gd2hhdCdzIG5vdyBpbiB0aGUgbmF0aXZlIHNlbGVjdGlv
bg0KICAgICAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgfQ0KDQogICAgLy8g
U2VsZWN0aW5nIGEgcmFuZ2UNCiAgICBpZiAoIXVzZURvY3VtZW50U2VsZWN0aW9uICYmIHNlbGVj
dGlvbkhhc0FuY2hvckFuZEZvY3VzICYmIHV0aWwuYXJlSG9zdE1ldGhvZHModGVzdFNlbGVjdGlv
biwgWyJyZW1vdmVBbGxSYW5nZXMiLCAiYWRkUmFuZ2UiXSkpIHsNCiAgICAgICAgc2VsUHJvdG8u
cmVtb3ZlQWxsUmFuZ2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLm5hdGl2ZVNl
bGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAgIHVwZGF0ZUVtcHR5U2VsZWN0
aW9uKHRoaXMpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciBhZGRSYW5nZUJhY2t3YXJkID0g
ZnVuY3Rpb24oc2VsLCByYW5nZSkgew0KICAgICAgICAgICAgdmFyIGRvYyA9IERvbVJhbmdlLmdl
dFJhbmdlRG9jdW1lbnQocmFuZ2UpOw0KICAgICAgICAgICAgdmFyIGVuZFJhbmdlID0gYXBpLmNy
ZWF0ZVJhbmdlKGRvYyk7DQogICAgICAgICAgICBlbmRSYW5nZS5jb2xsYXBzZVRvUG9pbnQocmFu
Z2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQpOw0KICAgICAgICAgICAgc2VsLm5hdGl2
ZVNlbGVjdGlvbi5hZGRSYW5nZShnZXROYXRpdmVSYW5nZShlbmRSYW5nZSkpOw0KICAgICAgICAg
ICAgc2VsLm5hdGl2ZVNlbGVjdGlvbi5leHRlbmQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdl
LnN0YXJ0T2Zmc2V0KTsNCiAgICAgICAgICAgIHNlbC5yZWZyZXNoKCk7DQogICAgICAgIH07DQoN
CiAgICAgICAgaWYgKHNlbGVjdGlvbkhhc1JhbmdlQ291bnQpIHsNCiAgICAgICAgICAgIHNlbFBy
b3RvLmFkZFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UsIGRpcmVjdGlvbikgew0KICAgICAgICAgICAg
ICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24g
JiYgdGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAgICAgICAgICAg
ICAgIGFkZFJhbmdlVG9Db250cm9sU2VsZWN0aW9uKHRoaXMsIHJhbmdlKTsNCiAgICAgICAgICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3Rpb25CYWNrd2Fy
ZChkaXJlY3Rpb24pICYmIHNlbGVjdGlvbkhhc0V4dGVuZCkgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgYWRkUmFuZ2VCYWNrd2FyZCh0aGlzLCByYW5nZSk7DQogICAgICAgICAgICAgICAgICAg
IH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNSYW5nZUNvdW50
Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVS
YW5nZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1JhbmdlQ291bnQg
PSB0aGlzLnJhbmdlQ291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSYW5nZUNvdW50ID0gMDsNCiAgICAgICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBuYXRp
dmUgcmFuZ2Ugc28gdGhhdCBjaGFuZ2luZyB0aGUgc2VsZWN0ZWQgcmFuZ2UgZG9lcyBub3QgYWZm
ZWN0IHRoZSBzZWxlY3Rpb24uDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGNv
bnRyYXJ5IHRvIHRoZSBzcGVjIGJ1dCBpcyB0aGUgb25seSB3YXkgdG8gYWNoaWV2ZSBjb25zaXN0
ZW5jeSBiZXR3ZWVuIGJyb3dzZXJzLiBTZWUNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlz
c3VlIDgwLg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24uYWRk
UmFuZ2UoZ2V0TmF0aXZlUmFuZ2UocmFuZ2UpLmNsb25lUmFuZ2UoKSk7DQoNCiAgICAgICAgICAg
ICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWRkaW5nIHRoZSByYW5nZSB3YXMgc3VjY2Vz
c2Z1bA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZUNvdW50ID0gdGhpcy5uYXRp
dmVTZWxlY3Rpb24ucmFuZ2VDb3VudDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRo
aXMucmFuZ2VDb3VudCA9PSBwcmV2aW91c1JhbmdlQ291bnQgKyAxKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLy8gVGhlIHJhbmdlIHdhcyBhZGRlZCBzdWNjZXNzZnVsbHkNCg0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIHJhbmdlIHRoYXQg
d2UgYWRkZWQgdG8gdGhlIHNlbGVjdGlvbiBpcyByZWZsZWN0ZWQgaW4gdGhlIGxhc3QgcmFuZ2Ug
ZXh0cmFjdGVkIGZyb20NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VsZWN0
aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaS5jb25maWcuY2hlY2tTZWxl
Y3Rpb25SYW5nZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2
ZVJhbmdlID0gZ2V0U2VsZWN0aW9uUmFuZ2VBdCh0aGlzLm5hdGl2ZVNlbGVjdGlvbiwgdGhpcy5y
YW5nZUNvdW50IC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXRp
dmVSYW5nZSAmJiAhcmFuZ2VzRXF1YWwobmF0aXZlUmFuZ2UsIHJhbmdlKSkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFwcGVucyBpbiBXZWJLaXQgd2l0aCwgZm9y
IGV4YW1wbGUsIGEgc2VsZWN0aW9uIHBsYWNlZCBhdCB0aGUgc3RhcnQgb2YgYSB0ZXh0IG5vZGUN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gbmV3IFdyYXBwZWRS
YW5nZShuYXRpdmVSYW5nZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudCAtIDFdID0gcmFuZ2U7DQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2UodGhpcywgcmFuZ2Us
IHNlbGVjdGlvbklzQmFja3dhcmQodGhpcy5uYXRpdmVTZWxlY3Rpb24pKTsNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sbGFwc2VkID0gc2VsZWN0aW9uSXNDb2xsYXBzZWQo
dGhpcyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC8vIFRoZSByYW5nZSB3YXMgbm90IGFkZGVkIHN1Y2Nlc3NmdWxseS4gVGhl
IHNpbXBsZXN0IHRoaW5nIGlzIHRvIHJlZnJlc2gNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICBzZWxQcm90by5hZGRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlLCBk
aXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3Rpb25CYWNrd2FyZChkaXJl
Y3Rpb24pICYmIHNlbGVjdGlvbkhhc0V4dGVuZCkgew0KICAgICAgICAgICAgICAgICAgICBhZGRS
YW5nZUJhY2t3YXJkKHRoaXMsIHJhbmdlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVNlbGVjdGlvbi5hZGRSYW5nZShnZXROYXRpdmVS
YW5nZShyYW5nZSkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgc2VsUHJv
dG8uc2V0UmFuZ2VzID0gZnVuY3Rpb24ocmFuZ2VzKSB7DQogICAgICAgICAgICBpZiAoaW1wbGVt
ZW50c0NvbnRyb2xSYW5nZSAmJiByYW5nZXMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAg
IGNyZWF0ZUNvbnRyb2xTZWxlY3Rpb24odGhpcywgcmFuZ2VzKTsNCiAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAg
ICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7
DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2VzW2ldKTsNCiAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSBlbHNlIGlmIChpc0hv
c3RNZXRob2QodGVzdFNlbGVjdGlvbiwgImVtcHR5IikgJiYgaXNIb3N0TWV0aG9kKHRlc3RSYW5n
ZSwgInNlbGVjdCIpICYmDQogICAgICAgICAgICAgICBpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYm
IHVzZURvY3VtZW50U2VsZWN0aW9uKSB7DQoNCiAgICAgICAgc2VsUHJvdG8ucmVtb3ZlQWxsUmFu
Z2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBBZGRlZCB0cnkvY2F0Y2ggYXMgZml4
IGZvciBpc3N1ZSAjMjENCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdGhpcy5k
b2NTZWxlY3Rpb24uZW1wdHkoKTsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBlbXB0
eSgpIG5vdCB3b3JraW5nIChpc3N1ZSAjMjQpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9j
U2VsZWN0aW9uLnR5cGUgIT0gIk5vbmUiKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFdvcmsg
YXJvdW5kIGZhaWx1cmUgdG8gZW1wdHkgYSBjb250cm9sIHNlbGVjdGlvbiBieSBpbnN0ZWFkIHNl
bGVjdGluZyBhIFRleHRSYW5nZSBhbmQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAvLyBjYWxs
aW5nIGVtcHR5KCkNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYzsNCiAgICAgICAgICAgICAg
ICAgICAgaWYgKHRoaXMuYW5jaG9yTm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9j
ID0gZ2V0RG9jdW1lbnQodGhpcy5hbmNob3JOb2RlKTsNCiAgICAgICAgICAgICAgICAgICAgfSBl
bHNlIGlmICh0aGlzLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAgICAgICAgICAg
ICAgICAgICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSB0aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVS
YW5nZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xSYW5nZS5sZW5ndGgp
IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSBnZXREb2N1bWVudCggY29udHJv
bFJhbmdlLml0ZW0oMCkgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZG9jKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICB2YXIgdGV4dFJhbmdlID0gZ2V0Qm9keShkb2MpLmNyZWF0ZVRleHRSYW5nZSgp
Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFJhbmdlLnNlbGVjdCgpOw0KICAgICAgICAg
ICAgICAgICAgICAgICAgdGhpcy5kb2NTZWxlY3Rpb24uZW1wdHkoKTsNCiAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHt9DQog
ICAgICAgICAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgfTsNCg0KICAg
ICAgICBzZWxQcm90by5hZGRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAgICAgICBp
ZiAodGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAgICAgICAgICAg
YWRkUmFuZ2VUb0NvbnRyb2xTZWxlY3Rpb24odGhpcywgcmFuZ2UpOw0KICAgICAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgICAgICBXcmFwcGVkUmFuZ2UucmFuZ2VUb1RleHRSYW5nZShyYW5n
ZSkuc2VsZWN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy5fcmFuZ2VzWzBdID0gcmFuZ2U7DQog
ICAgICAgICAgICAgICAgdGhpcy5yYW5nZUNvdW50ID0gMTsNCiAgICAgICAgICAgICAgICB0aGlz
LmlzQ29sbGFwc2VkID0gdGhpcy5fcmFuZ2VzWzBdLmNvbGxhcHNlZDsNCiAgICAgICAgICAgICAg
ICB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZSh0aGlzLCByYW5nZSwgZmFsc2UpOw0KICAg
ICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIHNlbFByb3RvLnNldFJhbmdlcyA9IGZ1
bmN0aW9uKHJhbmdlcykgew0KICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAg
ICAgICAgICAgIHZhciByYW5nZUNvdW50ID0gcmFuZ2VzLmxlbmd0aDsNCiAgICAgICAgICAgIGlm
IChyYW5nZUNvdW50ID4gMSkgew0KICAgICAgICAgICAgICAgIGNyZWF0ZUNvbnRyb2xTZWxlY3Rp
b24odGhpcywgcmFuZ2VzKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2VDb3VudCkgew0K
ICAgICAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2VzWzBdKTsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBtb2R1bGUuZmFpbCgiTm8gbWVhbnMg
b2Ygc2VsZWN0aW5nIGEgUmFuZ2Ugb3IgVGV4dFJhbmdlIHdhcyBmb3VuZCIpOw0KICAgICAgICBy
ZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgc2VsUHJvdG8uZ2V0UmFuZ2VBdCA9IGZ1bmN0aW9u
KGluZGV4KSB7DQogICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5yYW5nZUNv
dW50KSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTkRFWF9TSVpFX0VS
UiIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIHJhbmdlIHRv
IHByZXNlcnZlIHNlbGVjdGlvbi1yYW5nZSBpbmRlcGVuZGVuY2UuIFNlZSBpc3N1ZSA4MC4NCiAg
ICAgICAgICAgIHJldHVybiB0aGlzLl9yYW5nZXNbaW5kZXhdLmNsb25lUmFuZ2UoKTsNCiAgICAg
ICAgfQ0KICAgIH07DQoNCiAgICB2YXIgcmVmcmVzaFNlbGVjdGlvbjsNCg0KICAgIGlmICh1c2VE
b2N1bWVudFNlbGVjdGlvbikgew0KICAgICAgICByZWZyZXNoU2VsZWN0aW9uID0gZnVuY3Rpb24o
c2VsKSB7DQogICAgICAgICAgICB2YXIgcmFuZ2U7DQogICAgICAgICAgICBpZiAoYXBpLmlzU2Vs
ZWN0aW9uVmFsaWQoc2VsLndpbikpIHsNCiAgICAgICAgICAgICAgICByYW5nZSA9IHNlbC5kb2NT
ZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICAgICAgcmFuZ2UgPSBnZXRCb2R5KHNlbC53aW4uZG9jdW1lbnQpLmNyZWF0ZVRleHRSYW5nZSgp
Ow0KICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpOw0KICAgICAgICAgICAgfQ0K
DQogICAgICAgICAgICBpZiAoc2VsLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAg
ICAgICAgICAgICAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9
IGVsc2UgaWYgKGlzVGV4dFJhbmdlKHJhbmdlKSkgew0KICAgICAgICAgICAgICAgIHVwZGF0ZUZy
b21UZXh0UmFuZ2Uoc2VsLCByYW5nZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9DQogICAgICAg
IH07DQogICAgfSBlbHNlIGlmIChpc0hvc3RNZXRob2QodGVzdFNlbGVjdGlvbiwgImdldFJhbmdl
QXQiKSAmJiB0eXBlb2YgdGVzdFNlbGVjdGlvbi5yYW5nZUNvdW50ID09ICJudW1iZXIiKSB7DQog
ICAgICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIGlm
IChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24gJiYgc2Vs
LmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAgICAgICAgICAgICAgICB1cGRhdGVD
b250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgIHNlbC5fcmFuZ2VzLmxlbmd0aCA9IHNlbC5yYW5nZUNvdW50ID0gc2VsLm5hdGl2ZVNlbGVj
dGlvbi5yYW5nZUNvdW50Ow0KICAgICAgICAgICAgICAgIGlmIChzZWwucmFuZ2VDb3VudCkgew0K
ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsLnJhbmdlQ291bnQ7
IGkgPCBsZW47ICsraSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsLl9yYW5nZXNbaV0g
PSBuZXcgYXBpLldyYXBwZWRSYW5nZShzZWwubmF0aXZlU2VsZWN0aW9uLmdldFJhbmdlQXQoaSkp
Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUFuY2hv
ckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291bnQgLSAxXSwg
c2VsZWN0aW9uSXNCYWNrd2FyZChzZWwubmF0aXZlU2VsZWN0aW9uKSk7DQogICAgICAgICAgICAg
ICAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbGVjdGlvbklzQ29sbGFwc2VkKHNlbCk7DQogICAg
ICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTZWxl
Y3Rpb24oc2VsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07
DQogICAgfSBlbHNlIGlmIChzZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyAmJiB0eXBlb2YgdGVz
dFNlbGVjdGlvbi5pc0NvbGxhcHNlZCA9PSBCT09MRUFOICYmIHR5cGVvZiB0ZXN0UmFuZ2UuY29s
bGFwc2VkID09IEJPT0xFQU4gJiYgZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlKSB7DQogICAg
ICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIHZhciBy
YW5nZSwgbmF0aXZlU2VsID0gc2VsLm5hdGl2ZVNlbGVjdGlvbjsNCiAgICAgICAgICAgIGlmIChu
YXRpdmVTZWwuYW5jaG9yTm9kZSkgew0KICAgICAgICAgICAgICAgIHJhbmdlID0gZ2V0U2VsZWN0
aW9uUmFuZ2VBdChuYXRpdmVTZWwsIDApOw0KICAgICAgICAgICAgICAgIHNlbC5fcmFuZ2VzID0g
W3JhbmdlXTsNCiAgICAgICAgICAgICAgICBzZWwucmFuZ2VDb3VudCA9IDE7DQogICAgICAgICAg
ICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tTmF0aXZlU2VsZWN0aW9uKHNlbCk7DQogICAg
ICAgICAgICAgICAgc2VsLmlzQ29sbGFwc2VkID0gc2VsZWN0aW9uSXNDb2xsYXBzZWQoc2VsKTsN
CiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTZWxlY3Rp
b24oc2VsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAg
ICBtb2R1bGUuZmFpbCgiTm8gbWVhbnMgb2Ygb2J0YWluaW5nIGEgUmFuZ2Ugb3IgVGV4dFJhbmdl
IGZyb20gdGhlIHVzZXIncyBzZWxlY3Rpb24gd2FzIGZvdW5kIik7DQogICAgICAgIHJldHVybiBm
YWxzZTsNCiAgICB9DQoNCiAgICBzZWxQcm90by5yZWZyZXNoID0gZnVuY3Rpb24oY2hlY2tGb3JD
aGFuZ2VzKSB7DQogICAgICAgIHZhciBvbGRSYW5nZXMgPSBjaGVja0ZvckNoYW5nZXMgPyB0aGlz
Ll9yYW5nZXMuc2xpY2UoMCkgOiBudWxsOw0KICAgICAgICB2YXIgb2xkQW5jaG9yTm9kZSA9IHRo
aXMuYW5jaG9yTm9kZSwgb2xkQW5jaG9yT2Zmc2V0ID0gdGhpcy5hbmNob3JPZmZzZXQ7DQoNCiAg
ICAgICAgcmVmcmVzaFNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgaWYgKGNoZWNrRm9yQ2hhbmdl
cykgew0KICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJhbmdlIGNvdW50IGZpcnN0DQogICAgICAg
ICAgICB2YXIgaSA9IG9sZFJhbmdlcy5sZW5ndGg7DQogICAgICAgICAgICBpZiAoaSAhPSB0aGlz
Ll9yYW5nZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgZGlyZWN0aW9uLiBDaGVja2lu
ZyB0aGUgYW5jaG9yIHBvc2l0aW9uIGlzIHRoZSBzYW1lIGlzIGVub3VnaCBzaW5jZSB3ZSdyZSBj
aGVja2luZyBhbGwgdGhlDQogICAgICAgICAgICAvLyByYW5nZXMgYWZ0ZXIgdGhpcw0KICAgICAg
ICAgICAgaWYgKHRoaXMuYW5jaG9yTm9kZSAhPSBvbGRBbmNob3JOb2RlIHx8IHRoaXMuYW5jaG9y
T2Zmc2V0ICE9IG9sZEFuY2hvck9mZnNldCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVl
Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBGaW5hbGx5LCBjb21wYXJlIGVhY2gg
cmFuZ2UgaW4gdHVybg0KICAgICAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAg
IGlmICghcmFuZ2VzRXF1YWwob2xkUmFuZ2VzW2ldLCB0aGlzLl9yYW5nZXNbaV0pKSB7DQogICAg
ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAg
ICAvLyBSZW1vdmFsIG9mIGEgc2luZ2xlIHJhbmdlDQogICAgdmFyIHJlbW92ZVJhbmdlTWFudWFs
bHkgPSBmdW5jdGlvbihzZWwsIHJhbmdlKSB7DQogICAgICAgIHZhciByYW5nZXMgPSBzZWwuZ2V0
QWxsUmFuZ2VzKCk7DQogICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgZm9y
ICh2YXIgaSA9IDAsIGxlbiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkgew0KICAgICAg
ICAgICAgaWYgKCFhcGkucmFuZ2VzRXF1YWwocmFuZ2UsIHJhbmdlc1tpXSkpIHsNCiAgICAgICAg
ICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2VzW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
fQ0KICAgICAgICBpZiAoIXNlbC5yYW5nZUNvdW50KSB7DQogICAgICAgICAgICB1cGRhdGVFbXB0
eVNlbGVjdGlvbihzZWwpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIGlmIChpbXBsZW1lbnRz
Q29udHJvbFJhbmdlKSB7DQogICAgICAgIHNlbFByb3RvLnJlbW92ZVJhbmdlID0gZnVuY3Rpb24o
cmFuZ2UpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRS
T0wpIHsNCiAgICAgICAgICAgICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5kb2NTZWxlY3Rp
b24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0
U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7DQoNCiAgICAgICAgICAgICAgICAvLyBDcmVh
dGUgYSBuZXcgQ29udHJvbFJhbmdlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUg
c2VsZWN0ZWQgQ29udHJvbFJhbmdlIG1pbnVzIHRoZQ0KICAgICAgICAgICAgICAgIC8vIGVsZW1l
bnQgY29udGFpbmVkIGJ5IHRoZSBzdXBwbGllZCByYW5nZQ0KICAgICAgICAgICAgICAgIHZhciBk
b2MgPSBnZXREb2N1bWVudChjb250cm9sUmFuZ2UuaXRlbSgwKSk7DQogICAgICAgICAgICAgICAg
dmFyIG5ld0NvbnRyb2xSYW5nZSA9IGdldEJvZHkoZG9jKS5jcmVhdGVDb250cm9sUmFuZ2UoKTsN
CiAgICAgICAgICAgICAgICB2YXIgZWwsIHJlbW92ZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAg
ICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29udHJvbFJhbmdlLmxlbmd0aDsgaSA8IGxlbjsgKytp
KSB7DQogICAgICAgICAgICAgICAgICAgIGVsID0gY29udHJvbFJhbmdlLml0ZW0oaSk7DQogICAg
ICAgICAgICAgICAgICAgIGlmIChlbCAhPT0gcmFuZ2VFbGVtZW50IHx8IHJlbW92ZWQpIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0
ZW0oaSkpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg
ICAgICAgcmVtb3ZlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICAgICAgbmV3Q29udHJvbFJhbmdlLnNlbGVjdCgpOw0KDQogICAg
ICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB3cmFwcGVkIHNlbGVjdGlvbiBiYXNlZCBvbiB3aGF0
J3Mgbm93IGluIHRoZSBuYXRpdmUgc2VsZWN0aW9uDQogICAgICAgICAgICAgICAgdXBkYXRlQ29u
dHJvbFNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgcmVtb3ZlUmFuZ2VNYW51YWxseSh0aGlzLCByYW5nZSk7DQogICAgICAgICAgICB9DQogICAg
ICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgc2VsUHJvdG8ucmVtb3ZlUmFuZ2UgPSBmdW5j
dGlvbihyYW5nZSkgew0KICAgICAgICAgICAgcmVtb3ZlUmFuZ2VNYW51YWxseSh0aGlzLCByYW5n
ZSk7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgLy8gRGV0ZWN0aW5nIGlmIGEgc2VsZWN0aW9u
IGlzIGJhY2t3YXJkDQogICAgdmFyIHNlbGVjdGlvbklzQmFja3dhcmQ7DQogICAgaWYgKCF1c2VE
b2N1bWVudFNlbGVjdGlvbiAmJiBzZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyAmJiBmZWF0dXJl
cy5pbXBsZW1lbnRzRG9tUmFuZ2UpIHsNCiAgICAgICAgc2VsZWN0aW9uSXNCYWNrd2FyZCA9IGZ1
bmN0aW9uKHNlbCkgew0KICAgICAgICAgICAgdmFyIGJhY2t3YXJkID0gZmFsc2U7DQogICAgICAg
ICAgICBpZiAoc2VsLmFuY2hvck5vZGUpIHsNCiAgICAgICAgICAgICAgICBiYWNrd2FyZCA9IChk
b20uY29tcGFyZVBvaW50cyhzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCwgc2VsLmZv
Y3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KSA9PSAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIHJldHVybiBiYWNrd2FyZDsNCiAgICAgICAgfTsNCg0KICAgICAgICBzZWxQcm90by5pc0Jh
Y2t3YXJkID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uSXNCYWNr
d2FyZCh0aGlzKTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBzZWxlY3Rpb25J
c0JhY2t3YXJkID0gc2VsUHJvdG8uaXNCYWNrd2FyZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAg
ICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIC8vIENyZWF0ZSBhbiBh
bGlhcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIEZyb20gMS4zLCBldmVyeXRoaW5nIGlz
ICJiYWNrd2FyZCIgcmF0aGVyIHRoYW4gImJhY2t3YXJkcyINCiAgICBzZWxQcm90by5pc0JhY2t3
YXJkcyA9IHNlbFByb3RvLmlzQmFja3dhcmQ7DQoNCiAgICAvLyBTZWxlY3Rpb24gc3RyaW5naWZp
ZXINCiAgICAvLyBUaGlzIGlzIGNvbmZvcm1hbnQgdG8gdGhlIG9sZCBIVE1MNSBzZWxlY3Rpb25z
IGRyYWZ0IHNwZWMgYnV0IGRpZmZlcnMgZnJvbSBXZWJLaXQgYW5kIE1vemlsbGEncyBpbXBsZW1l
bnRhdGlvbi4NCiAgICAvLyBUaGUgY3VycmVudCBzcGVjIGRvZXMgbm90IHlldCBkZWZpbmUgdGhp
cyBtZXRob2QuDQogICAgc2VsUHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHsNCiAgICAgICAg
dmFyIHJhbmdlVGV4dHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMu
cmFuZ2VDb3VudDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAgICAgICByYW5nZVRleHRzW2ldID0g
IiIgKyB0aGlzLl9yYW5nZXNbaV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJhbmdlVGV4
dHMuam9pbigiIik7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGFzc2VydE5vZGVJblNhbWVEb2N1
bWVudChzZWwsIG5vZGUpIHsNCiAgICAgICAgaWYgKHNlbC53aW4uZG9jdW1lbnQgIT0gZ2V0RG9j
dW1lbnQobm9kZSkpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oIldST05H
X0RPQ1VNRU5UX0VSUiIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gTm8gY3VycmVudCBi
cm93c2VyIGNvbmZvcm1zIGZ1bGx5IHRvIHRoZSBzcGVjIGZvciB0aGlzIG1ldGhvZCwgc28gUmFu
Z3kncyBvd24gbWV0aG9kIGlzIGFsd2F5cyB1c2VkDQogICAgc2VsUHJvdG8uY29sbGFwc2UgPSBm
dW5jdGlvbihub2RlLCBvZmZzZXQpIHsNCiAgICAgICAgYXNzZXJ0Tm9kZUluU2FtZURvY3VtZW50
KHRoaXMsIG5vZGUpOw0KICAgICAgICB2YXIgcmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2Uobm9kZSk7
DQogICAgICAgIHJhbmdlLmNvbGxhcHNlVG9Qb2ludChub2RlLCBvZmZzZXQpOw0KICAgICAgICB0
aGlzLnNldFNpbmdsZVJhbmdlKHJhbmdlKTsNCiAgICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9IHRy
dWU7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9TdGFydCA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50KSB7DQogICAgICAgICAgICB2YXIgcmFuZ2Ug
PSB0aGlzLl9yYW5nZXNbMF07DQogICAgICAgICAgICB0aGlzLmNvbGxhcHNlKHJhbmdlLnN0YXJ0
Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTlZBTElEX1NUQVRFX0VSUiIpOw0KICAgICAg
ICB9DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9FbmQgPSBmdW5jdGlvbigpIHsN
CiAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCkgew0KICAgICAgICAgICAgdmFyIHJhbmdlID0g
dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudCAtIDFdOw0KICAgICAgICAgICAgdGhpcy5jb2xs
YXBzZShyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7DQogICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTlZBTElEX1NUQVRFX0VS
UiIpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIFRoZSBzcGVjIGlzIHZlcnkgc3BlY2lm
aWMgb24gaG93IHNlbGVjdEFsbENoaWxkcmVuIHNob3VsZCBiZSBpbXBsZW1lbnRlZCBzbyB0aGUg
bmF0aXZlIGltcGxlbWVudGF0aW9uIGlzDQogICAgLy8gbmV2ZXIgdXNlZCBieSBSYW5neS4NCiAg
ICBzZWxQcm90by5zZWxlY3RBbGxDaGlsZHJlbiA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAg
YXNzZXJ0Tm9kZUluU2FtZURvY3VtZW50KHRoaXMsIG5vZGUpOw0KICAgICAgICB2YXIgcmFuZ2Ug
PSBhcGkuY3JlYXRlUmFuZ2Uobm9kZSk7DQogICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50
cyhub2RlKTsNCiAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgdGhpcy5h
ZGRSYW5nZShyYW5nZSk7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmRlbGV0ZUZyb21Eb2N1bWVu
dCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAvLyBTZXBjaWFsIGJlaGF2aW91ciByZXF1aXJlZCBm
b3IgQ29udHJvbCBzZWxlY3Rpb25zDQogICAgICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdl
ICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24gJiYgdGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBD
T05UUk9MKSB7DQogICAgICAgICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5kb2NTZWxlY3Rp
b24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIHZhciBlbGVtZW50Ow0KICAgICAgICAgICAg
d2hpbGUgKGNvbnRyb2xSYW5nZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBlbGVtZW50ID0g
Y29udHJvbFJhbmdlLml0ZW0oMCk7DQogICAgICAgICAgICAgICAgY29udHJvbFJhbmdlLnJlbW92
ZShlbGVtZW50KTsNCiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hp
bGQoZWxlbWVudCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsN
CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlQ291bnQpIHsNCiAgICAgICAgICAgIHZhciBy
YW5nZXMgPSB0aGlzLmdldEFsbFJhbmdlcygpOw0KICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5n
dGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbFJhbmdlcygpOw0KICAgICAgICAg
ICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kp
IHsNCiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzW2ldLmRlbGV0ZUNvbnRlbnRzKCk7DQogICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIFRoZSBzcGVjIHNheXMgbm90aGluZyBh
Ym91dCB3aGF0IHRoZSBzZWxlY3Rpb24gc2hvdWxkIGNvbnRhaW4gYWZ0ZXIgY2FsbGluZyBkZWxl
dGVDb250ZW50cyBvbiBlYWNoDQogICAgICAgICAgICAgICAgLy8gcmFuZ2UuIEZpcmVmb3ggbW92
ZXMgdGhlIHNlbGVjdGlvbiB0byB3aGVyZSB0aGUgZmluYWwgc2VsZWN0ZWQgcmFuZ2Ugd2FzLCBz
byB3ZSBlbXVsYXRlIHRoYXQNCiAgICAgICAgICAgICAgICB0aGlzLmFkZFJhbmdlKHJhbmdlc1ts
ZW4gLSAxXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8gVGhl
IGZvbGxvd2luZyBhcmUgbm9uLXN0YW5kYXJkIGV4dGVuc2lvbnMNCiAgICBzZWxQcm90by5lYWNo
UmFuZ2UgPSBmdW5jdGlvbihmdW5jLCByZXR1cm5WYWx1ZSkgew0KICAgICAgICBmb3IgKHZhciBp
ID0gMCwgbGVuID0gdGhpcy5fcmFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAg
ICAgICBpZiAoIGZ1bmMoIHRoaXMuZ2V0UmFuZ2VBdChpKSApICkgew0KICAgICAgICAgICAgICAg
IHJldHVybiByZXR1cm5WYWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoN
CiAgICBzZWxQcm90by5nZXRBbGxSYW5nZXMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIHJh
bmdlcyA9IFtdOw0KICAgICAgICB0aGlzLmVhY2hSYW5nZShmdW5jdGlvbihyYW5nZSkgew0KICAg
ICAgICAgICAgcmFuZ2VzLnB1c2gocmFuZ2UpOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJu
IHJhbmdlczsNCiAgICB9Ow0KDQogICAgc2VsUHJvdG8uc2V0U2luZ2xlUmFuZ2UgPSBmdW5jdGlv
bihyYW5nZSwgZGlyZWN0aW9uKSB7DQogICAgICAgIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQog
ICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2UsIGRpcmVjdGlvbik7DQogICAgfTsNCg0KICAgIHNl
bFByb3RvLmNhbGxNZXRob2RPbkVhY2hSYW5nZSA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUsIHBhcmFt
cykgew0KICAgICAgICB2YXIgcmVzdWx0cyA9IFtdOw0KICAgICAgICB0aGlzLmVhY2hSYW5nZSgg
ZnVuY3Rpb24ocmFuZ2UpIHsNCiAgICAgICAgICAgIHJlc3VsdHMucHVzaCggcmFuZ2VbbWV0aG9k
TmFtZV0uYXBwbHkocmFuZ2UsIHBhcmFtcykgKTsNCiAgICAgICAgfSApOw0KICAgICAgICByZXR1
cm4gcmVzdWx0czsNCiAgICB9Ow0KICAgIA0KICAgIGZ1bmN0aW9uIGNyZWF0ZVN0YXJ0T3JFbmRT
ZXR0ZXIoaXNTdGFydCkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSwgb2Zmc2V0KSB7
DQogICAgICAgICAgICB2YXIgcmFuZ2U7DQogICAgICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50
KSB7DQogICAgICAgICAgICAgICAgcmFuZ2UgPSB0aGlzLmdldFJhbmdlQXQoMCk7DQogICAgICAg
ICAgICAgICAgcmFuZ2VbInNldCIgKyAoaXNTdGFydCA/ICJTdGFydCIgOiAiRW5kIildKG5vZGUs
IG9mZnNldCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJhbmdlID0g
YXBpLmNyZWF0ZVJhbmdlKHRoaXMud2luLmRvY3VtZW50KTsNCiAgICAgICAgICAgICAgICByYW5n
ZS5zZXRTdGFydEFuZEVuZChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgdGhpcy5zZXRTaW5nbGVSYW5nZShyYW5nZSwgdGhpcy5pc0JhY2t3YXJkKCkpOw0KICAgICAg
ICB9Ow0KICAgIH0NCg0KICAgIHNlbFByb3RvLnNldFN0YXJ0ID0gY3JlYXRlU3RhcnRPckVuZFNl
dHRlcih0cnVlKTsNCiAgICBzZWxQcm90by5zZXRFbmQgPSBjcmVhdGVTdGFydE9yRW5kU2V0dGVy
KGZhbHNlKTsNCiAgICANCiAgICAvLyBBZGQgY2hlZWt5IHNlbGVjdCgpIG1ldGhvZCB0byBSYW5n
ZSBwcm90b3R5cGUNCiAgICBhcGkucmFuZ2VQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oZGly
ZWN0aW9uKSB7DQogICAgICAgIGdldFNlbGVjdGlvbiggdGhpcy5nZXREb2N1bWVudCgpICkuc2V0
U2luZ2xlUmFuZ2UodGhpcywgZGlyZWN0aW9uKTsNCiAgICB9Ow0KDQogICAgc2VsUHJvdG8uY2hh
bmdlRWFjaFJhbmdlID0gZnVuY3Rpb24oZnVuYykgew0KICAgICAgICB2YXIgcmFuZ2VzID0gW107
DQogICAgICAgIHZhciBiYWNrd2FyZCA9IHRoaXMuaXNCYWNrd2FyZCgpOw0KDQogICAgICAgIHRo
aXMuZWFjaFJhbmdlKGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAgICAgICBmdW5jKHJhbmdlKTsN
CiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHJhbmdlKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAg
dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgaWYgKGJhY2t3YXJkICYmIHJhbmdlcy5s
ZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShyYW5nZXNbMF0sICJiYWNr
d2FyZCIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zZXRSYW5nZXMocmFu
Z2VzKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBzZWxQcm90by5jb250YWluc05vZGUgPSBm
dW5jdGlvbihub2RlLCBhbGxvd1BhcnRpYWwpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaFJh
bmdlKCBmdW5jdGlvbihyYW5nZSkgew0KICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmNvbnRhaW5z
Tm9kZShub2RlLCBhbGxvd1BhcnRpYWwpOw0KICAgICAgICB9LCB0cnVlICk7DQogICAgfTsNCg0K
ICAgIHNlbFByb3RvLmdldEJvb2ttYXJrID0gZnVuY3Rpb24oY29udGFpbmVyTm9kZSkgew0KICAg
ICAgICByZXR1cm4gew0KICAgICAgICAgICAgYmFja3dhcmQ6IHRoaXMuaXNCYWNrd2FyZCgpLA0K
ICAgICAgICAgICAgcmFuZ2VCb29rbWFya3M6IHRoaXMuY2FsbE1ldGhvZE9uRWFjaFJhbmdlKCJn
ZXRCb29rbWFyayIsIFtjb250YWluZXJOb2RlXSkNCiAgICAgICAgfTsNCiAgICB9Ow0KDQogICAg
c2VsUHJvdG8ubW92ZVRvQm9va21hcmsgPSBmdW5jdGlvbihib29rbWFyaykgew0KICAgICAgICB2
YXIgc2VsUmFuZ2VzID0gW107DQogICAgICAgIGZvciAodmFyIGkgPSAwLCByYW5nZUJvb2ttYXJr
LCByYW5nZTsgcmFuZ2VCb29rbWFyayA9IGJvb2ttYXJrLnJhbmdlQm9va21hcmtzW2krK107ICkg
ew0KICAgICAgICAgICAgcmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2UodGhpcy53aW4pOw0KICAgICAg
ICAgICAgcmFuZ2UubW92ZVRvQm9va21hcmsocmFuZ2VCb29rbWFyayk7DQogICAgICAgICAgICBz
ZWxSYW5nZXMucHVzaChyYW5nZSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGJvb2ttYXJrLmJh
Y2t3YXJkKSB7DQogICAgICAgICAgICB0aGlzLnNldFNpbmdsZVJhbmdlKHNlbFJhbmdlc1swXSwg
ImJhY2t3YXJkIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNldFJhbmdl
cyhzZWxSYW5nZXMpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbFByb3RvLnRvSHRtbCA9
IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kT25FYWNoUmFuZ2Uo
InRvSHRtbCIpLmpvaW4oIiIpOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBpbnNwZWN0KHNlbCkg
ew0KICAgICAgICB2YXIgcmFuZ2VJbnNwZWN0cyA9IFtdOw0KICAgICAgICB2YXIgYW5jaG9yID0g
bmV3IERvbVBvc2l0aW9uKHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTsNCiAgICAg
ICAgdmFyIGZvY3VzID0gbmV3IERvbVBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09m
ZnNldCk7DQogICAgICAgIHZhciBuYW1lID0gKHR5cGVvZiBzZWwuZ2V0TmFtZSA9PSAiZnVuY3Rp
b24iKSA/IHNlbC5nZXROYW1lKCkgOiAiU2VsZWN0aW9uIjsNCg0KICAgICAgICBpZiAodHlwZW9m
IHNlbC5yYW5nZUNvdW50ICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgICBmb3IgKHZhciBp
ID0gMCwgbGVuID0gc2VsLnJhbmdlQ291bnQ7IGkgPCBsZW47ICsraSkgew0KICAgICAgICAgICAg
ICAgIHJhbmdlSW5zcGVjdHNbaV0gPSBEb21SYW5nZS5pbnNwZWN0KHNlbC5nZXRSYW5nZUF0KGkp
KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gIlsiICsgbmFtZSAr
ICIoUmFuZ2VzOiAiICsgcmFuZ2VJbnNwZWN0cy5qb2luKCIsICIpICsNCiAgICAgICAgICAgICAg
ICAiKShhbmNob3I6ICIgKyBhbmNob3IuaW5zcGVjdCgpICsgIiwgZm9jdXM6ICIgKyBmb2N1cy5p
bnNwZWN0KCkgKyAiXSI7DQogICAgfQ0KDQogICAgc2VsUHJvdG8uZ2V0TmFtZSA9IGZ1bmN0aW9u
KCkgew0KICAgICAgICByZXR1cm4gIldyYXBwZWRTZWxlY3Rpb24iOw0KICAgIH07DQoNCiAgICBz
ZWxQcm90by5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiBpbnNwZWN0KHRo
aXMpOw0KICAgIH07DQoNCiAgICBzZWxQcm90by5kZXRhY2ggPSBmdW5jdGlvbigpIHsNCiAgICAg
ICAgZmluZENhY2hlZFNlbGVjdGlvbih0aGlzLndpbiwgImRlbGV0ZSIpOw0KICAgICAgICBkZWxl
dGVQcm9wZXJ0aWVzKHRoaXMpOw0KICAgIH07DQoNCiAgICBXcmFwcGVkU2VsZWN0aW9uLmRldGFj
aEFsbCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBmaW5kQ2FjaGVkU2VsZWN0aW9uKG51bGwsICJk
ZWxldGVBbGwiKTsNCiAgICB9Ow0KDQogICAgV3JhcHBlZFNlbGVjdGlvbi5pbnNwZWN0ID0gaW5z
cGVjdDsNCiAgICBXcmFwcGVkU2VsZWN0aW9uLmlzRGlyZWN0aW9uQmFja3dhcmQgPSBpc0RpcmVj
dGlvbkJhY2t3YXJkOw0KDQogICAgYXBpLlNlbGVjdGlvbiA9IFdyYXBwZWRTZWxlY3Rpb247DQoN
CiAgICBhcGkuc2VsZWN0aW9uUHJvdG90eXBlID0gc2VsUHJvdG87DQoNCiAgICBhcGkuYWRkQ3Jl
YXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKHdpbikgew0KICAgICAgICBpZiAo
dHlwZW9mIHdpbi5nZXRTZWxlY3Rpb24gPT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgIHdp
bi5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0
U2VsZWN0aW9uKHdpbik7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIHdpbiA9
IG51bGw7DQogICAgfSk7DQp9KTsNCg==
</content></attachment><attachment>
<filename>porthole.js</filename>
<filesize>17723</filesize>
<author>XWiki.Admin</author>
<date>1372615879000</date>
<version>1.2</version>
<comment></comment><content>LyoKICAgIENvcHlyaWdodCAoYykgMjAxMS0yMDEyIFRlcm5hcnkgTGFicy4gQWxsIFJpZ2h0cyBS
ZXNlcnZlZC4KCiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJn
ZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFu
ZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVh
bAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRo
b3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdl
LCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVz
IG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3
YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBj
b25kaXRpb25zOgoKICAgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1p
c3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICBhbGwgY29waWVzIG9yIHN1YnN0
YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgICBUSEUgU09GVFdBUkUgSVMgUFJP
VklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgog
ICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBP
RiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBB
TkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1Ig
Q09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RI
RVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQg
T1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBX
SVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAgICBUSEUg
U09GVFdBUkUuCiovCgovKgojIFdlYnNlcXVlbmNlZGlhZ3JhbXMuY29tCnBhcnRpY2lwYW50IGFi
Yy5jb20KcGFydGljaXBhbnQgImlGcmFtZSBwcm94eSB4eXouY29tIgpwYXJ0aWNpcGFudCAiaUZy
YW1lIHByb3h5IGFiYy5jb20iCnBhcnRpY2lwYW50ICJpRnJhbWUgeHl6LmNvbSIKYWJjLmNvbS0+
aUZyYW1lIHByb3h5IHh5ei5jb206IHBvc3RNZXNzYWdlKGRhdGEsIHRhcmdldE9yaWdpbikKbm90
ZSBsZWZ0IG9mICJpRnJhbWUgcHJveHkgeHl6LmNvbSI6IFNldCB1cmwgZnJhZ21lbnQgYW5kIGNo
YW5nZSBzaXplCmlGcmFtZSBwcm94eSB4eXouY29tLT5pRnJhbWUgcHJveHkgeHl6LmNvbTogb25S
ZXNpemUgRXZlbnQKbm90ZSByaWdodCBvZiAiaUZyYW1lIHByb3h5IHh5ei5jb20iOiByZWFkIHVy
bCBmcmFnbWVudAppRnJhbWUgcHJveHkgeHl6LmNvbS0+aUZyYW1lIHh5ei5jb206IGZvcndhcmRN
ZXNzYWdlRXZlbnQoZXZlbnQpCmlGcmFtZSB4eXouY29tLT5pRnJhbWUgcHJveHkgYWJjLmNvbTog
cG9zdE1lc3NhZ2UoZGF0YSwgdGFyZ2V0T3JpZ2luKQpub3RlIHJpZ2h0IG9mICJpRnJhbWUgcHJv
eHkgYWJjLmNvbSI6IFNldCB1cmwgZnJhZ21lbnQgYW5kIGNoYW5nZSBzaXplCmlGcmFtZSBwcm94
eSBhYmMuY29tLT5pRnJhbWUgcHJveHkgYWJjLmNvbTogb25SZXNpemUgRXZlbnQKbm90ZSByaWdo
dCBvZiAiaUZyYW1lIHByb3h5IGFiYy5jb20iOiByZWFkIHVybCBmcmFnbWVudAppRnJhbWUgcHJv
eHkgYWJjLmNvbS0+YWJjLmNvbTogZm9yd2FyZE1lc3NhZ2VFdmVudChldmVudCkKKi8KCi8qIFNp
bXBsZSBKYXZhU2NyaXB0IEluaGVyaXRhbmNlCiAqIEJ5IEpvaG4gUmVzaWcgaHR0cDovL2Vqb2hu
Lm9yZy8KICogTUlUIExpY2Vuc2VkLgogKi8KLy8gSW5zcGlyZWQgYnkgYmFzZTIgYW5kIFByb3Rv
dHlwZQooZnVuY3Rpb24oKXsKICB2YXIgaW5pdGlhbGl6aW5nID0gZmFsc2UsIGZuVGVzdCA9IC94
eXovLnRlc3QoZnVuY3Rpb24oKXt4eXo7fSkgPyAvXGJfc3VwZXJcYi8gOiAvLiovOwogIC8vIFRo
ZSBiYXNlIENsYXNzIGltcGxlbWVudGF0aW9uIChkb2VzIG5vdGhpbmcpCiAgdGhpcy5Qb3J0aG9s
ZUNsYXNzID0gZnVuY3Rpb24oKXt9OwogIAogIC8vIENyZWF0ZSBhIG5ldyBDbGFzcyB0aGF0IGlu
aGVyaXRzIGZyb20gdGhpcyBjbGFzcwogIFBvcnRob2xlQ2xhc3MuZXh0ZW5kID0gZnVuY3Rpb24o
cHJvcCkgewogICAgdmFyIF9zdXBlciA9IHRoaXMucHJvdG90eXBlOwogICAgCiAgICAvLyBJbnN0
YW50aWF0ZSBhIGJhc2UgY2xhc3MgKGJ1dCBvbmx5IGNyZWF0ZSB0aGUgaW5zdGFuY2UsCiAgICAv
LyBkb24ndCBydW4gdGhlIGluaXQgY29uc3RydWN0b3IpCiAgICBpbml0aWFsaXppbmcgPSB0cnVl
OwogICAgdmFyIHByb3RvdHlwZSA9IG5ldyB0aGlzKCk7CiAgICBpbml0aWFsaXppbmcgPSBmYWxz
ZTsKICAgIAogICAgLy8gQ29weSB0aGUgcHJvcGVydGllcyBvdmVyIG9udG8gdGhlIG5ldyBwcm90
b3R5cGUKICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcCkgewogICAgICAvLyBDaGVjayBpZiB3ZSdy
ZSBvdmVyd3JpdGluZyBhbiBleGlzdGluZyBmdW5jdGlvbgogICAgICBwcm90b3R5cGVbbmFtZV0g
PSB0eXBlb2YgcHJvcFtuYW1lXSA9PSAiZnVuY3Rpb24iICYmIAogICAgICAgIHR5cGVvZiBfc3Vw
ZXJbbmFtZV0gPT0gImZ1bmN0aW9uIiAmJiBmblRlc3QudGVzdChwcm9wW25hbWVdKSA/CiAgICAg
ICAgKGZ1bmN0aW9uKG5hbWUsIGZuKXsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAg
ICAgICAgICAgdmFyIHRtcCA9IHRoaXMuX3N1cGVyOwogICAgICAgICAgICAKICAgICAgICAgICAg
Ly8gQWRkIGEgbmV3IC5fc3VwZXIoKSBtZXRob2QgdGhhdCBpcyB0aGUgc2FtZSBtZXRob2QKICAg
ICAgICAgICAgLy8gYnV0IG9uIHRoZSBzdXBlci1jbGFzcwogICAgICAgICAgICB0aGlzLl9zdXBl
ciA9IF9zdXBlcltuYW1lXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFRoZSBtZXRob2Qg
b25seSBuZWVkIHRvIGJlIGJvdW5kIHRlbXBvcmFyaWx5LCBzbyB3ZQogICAgICAgICAgICAvLyBy
ZW1vdmUgaXQgd2hlbiB3ZSdyZSBkb25lIGV4ZWN1dGluZwogICAgICAgICAgICB2YXIgcmV0ID0g
Zm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgICAgICAgIAogICAgICAgICAgICB0aGlzLl9zdXBl
ciA9IHRtcDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9
OwogICAgICAgIH0pKG5hbWUsIHByb3BbbmFtZV0pIDoKICAgICAgICBwcm9wW25hbWVdOwogICAg
fQogICAgCiAgICAvLyBUaGUgZHVtbXkgY2xhc3MgY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFBv
cnRob2xlQ2xhc3MoKSB7CiAgICAgIC8vIEFsbCBjb25zdHJ1Y3Rpb24gaXMgYWN0dWFsbHkgZG9u
ZSBpbiB0aGUgaW5pdCBtZXRob2QKICAgICAgaWYgKCAhaW5pdGlhbGl6aW5nICYmIHRoaXMuaW5p
dCApCiAgICAgICAgdGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICAK
ICAgIC8vIFBvcHVsYXRlIG91ciBjb25zdHJ1Y3RlZCBwcm90b3R5cGUgb2JqZWN0CiAgICBQb3J0
aG9sZUNsYXNzLnByb3RvdHlwZSA9IHByb3RvdHlwZTsKICAgIAogICAgLy8gRW5mb3JjZSB0aGUg
Y29uc3RydWN0b3IgdG8gYmUgd2hhdCB3ZSBleHBlY3QKICAgIFBvcnRob2xlQ2xhc3MucHJvdG90
eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3M7CgogICAgLy8gQW5kIG1ha2UgdGhpcyBjbGFzcyBleHRl
bmRhYmxlCiAgICBQb3J0aG9sZUNsYXNzLmV4dGVuZCA9IGFyZ3VtZW50cy5jYWxsZWU7CiAgICAK
ICAgIHJldHVybiBQb3J0aG9sZUNsYXNzOwogIH07Cn0pKCk7CgooZnVuY3Rpb24gKHdpbmRvdykg
ewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qKgogICAgICogQG92ZXJ2aWV3IFBvcnRob2xlLCBK
YXZhU2NyaXB0IExpYnJhcnkgZm9yIFNlY3VyZSBDcm9zcyBEb21haW4gaUZyYW1lIENvbW11bmlj
YXRpb24uCiAgICAgKiBAYXV0aG9yIDxhIGhyZWY9Im1haWx0bzpnZW9yZ2VzQHRlcm5hcnlsYWJz
LmNvbSI+R2VvcmdlcyBBdWJlcmdlcjwvYT4KICAgICAqIEBjb3B5cmlnaHQgMjAxMS0yMDEyIFRl
cm5hcnkgTGFicywgQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAqCiAgICAgKiBOYW1lc3BhY2Ug
Zm9yIFBvcnRob2xlCiAgICAgKiBAbW9kdWxlIFBvcnRob2xlCiAgICAgKi8KICAgIHZhciBQb3J0
aG9sZSA9IHsKICAgICAgICAvKioKICAgICAgICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIHRyYWNl
IHRvIGNvbnNvbGUKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHRyYWNl
OiBmdW5jdGlvbihzKSB7CiAgICAgICAgICAgIGlmICh3aW5kb3dbJ2NvbnNvbGUnXSAhPT0gdW5k
ZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coJ1BvcnRob2xlOiAn
ICsgcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBV
dGlsaXR5IGZ1bmN0aW9uIHRvIHNlbmQgZXJyb3JzIHRvIGNvbnNvbGUKICAgICAgICAgKiBAcHJp
dmF0ZQogICAgICAgICAqLwogICAgICAgIGVycm9yOiBmdW5jdGlvbihzKSB7CiAgICAgICAgICAg
IGlmICh3aW5kb3dbJ2NvbnNvbGUnXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB3
aW5kb3cuY29uc29sZS5lcnJvcignUG9ydGhvbGU6ICcgKyBzKTsKICAgICAgICAgICAgfQogICAg
ICAgIH0KICAgIH07CgogICAgLyoqCiAgICAgKiBAY2xhc3MKICAgICAqIEBjbGFzc2Rlc2MgUHJv
eHkgd2luZG93IG9iamVjdCB0byBwb3N0IG1lc3NhZ2UgdG8gdGFyZ2V0IHdpbmRvdwogICAgICog
QHBhcmFtIHtzdHJpbmd9IHByb3h5SUZyYW1lVXJsIC0gRnVsbHkgcXVhbGlmaWVkIHVybCB0byBw
cm94eSBpZnJhbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRXaW5kb3dOYW1lIC0gTmFt
ZSBvZiB0aGUgcHJveHkgaWZyYW1lIHdpbmRvdwogICAgICovCiAgICBQb3J0aG9sZS5XaW5kb3dQ
cm94eSA9IGZ1bmN0aW9uKCl7fTsKCiAgICBQb3J0aG9sZS5XaW5kb3dQcm94eS5wcm90b3R5cGUg
PSB7CiAgICAgICAgLyoqCiAgICAgICAgICogUG9zdCBhIG1lc3NhZ2UgdG8gdGhlIHRhcmdldCB3
aW5kb3cgb25seSBpZiB0aGUgY29udGVudCBjb21lcyBmcm9tIHRoZSB0YXJnZXQgb3JpZ2luLgog
ICAgICAgICAqIDxjb2RlPnRhcmdldE9yaWdpbjwvY29kZT4gY2FuIGJlIGEgdXJsIG9yICoKICAg
ICAgICAgKiBAcHVibGljCiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBQYXlsb2Fk
CiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRhcmdldE9yaWdpbgogICAgICAgICAqLwogICAg
ICAgIHBvc3Q6IGZ1bmN0aW9uKGRhdGEsIHRhcmdldE9yaWdpbikge30sCiAgICAgICAgLyoqCiAg
ICAgICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHJlY2VpdmUgbWVzc2FnZXMuCiAgICAg
ICAgICogQHB1YmxpYwogICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGV2ZW50TGlzdGVuZXJD
YWxsYmFjawogICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gZXZlbnRMaXN0ZW5lckNhbGxi
YWNrCiAgICAgICAgICovCiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oZikge30s
CiAgICAgICAgLyoqCiAgICAgICAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyLgogICAgICAg
ICAqIEBwdWJsaWMKICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBldmVudExpc3RlbmVyQ2Fs
bGJhY2sKICAgICAgICAgKi8KICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbihm
KSB7fQogICAgfTsKCiAgICBQb3J0aG9sZS5XaW5kb3dQcm94eUJhc2UgPSBQb3J0aG9sZUNsYXNz
LmV4dGVuZCh7CiAgICAgICAgaW5pdDogZnVuY3Rpb24odGFyZ2V0V2luZG93TmFtZSkgewogICAg
ICAgICAgICBpZiAodGFyZ2V0V2luZG93TmFtZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAg
ICAgICB0YXJnZXRXaW5kb3dOYW1lID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhp
cy50YXJnZXRXaW5kb3dOYW1lID0gdGFyZ2V0V2luZG93TmFtZTsKICAgICAgICAgICAgdGhpcy5v
cmlnaW4gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9u
Lmhvc3Q7CiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBbXTsKICAgICAgICB9LAoK
ICAgICAgICBnZXRUYXJnZXRXaW5kb3dOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0
dXJuIHRoaXMudGFyZ2V0V2luZG93TmFtZTsKICAgICAgICB9LAoKICAgICAgICBnZXRPcmlnaW46
IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW47CiAgICAgICAgfSwK
CiAgICAgICAgLyoqCiAgICAgICAgICogTG9va3VwIHdpbmRvdyBvYmplY3QgYmFzZWQgb24gdGFy
Z2V0IHdpbmRvdyBuYW1lCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKiBAcmV0dXJuIHtz
dHJpbmd9IHRhcmdldFdpbmRvdwogICAgICAgICAqLwogICAgICAgIGdldFRhcmdldFdpbmRvdzog
ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBQb3J0aG9sZS5XaW5kb3dQcm94eS5nZXRU
YXJnZXRXaW5kb3codGhpcy50YXJnZXRXaW5kb3dOYW1lKTsKICAgICAgICB9LAoKICAgICAgICBw
b3N0OiBmdW5jdGlvbihkYXRhLCB0YXJnZXRPcmlnaW4pIHsKICAgICAgICAgICAgaWYgKHRhcmdl
dE9yaWdpbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0YXJnZXRPcmlnaW4gPSAn
Kic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kaXNwYXRjaE1lc3NhZ2UoewogICAg
ICAgICAgICAgICAgJ2RhdGEnIDogZGF0YSwKICAgICAgICAgICAgICAgICdzb3VyY2VPcmlnaW4n
IDogdGhpcy5nZXRPcmlnaW4oKSwKICAgICAgICAgICAgICAgICd0YXJnZXRPcmlnaW4nIDogdGFy
Z2V0T3JpZ2luLAogICAgICAgICAgICAgICAgJ3NvdXJjZVdpbmRvd05hbWUnIDogd2luZG93Lm5h
bWUsCiAgICAgICAgICAgICAgICAndGFyZ2V0V2luZG93TmFtZScgOiB0aGlzLmdldFRhcmdldFdp
bmRvd05hbWUoKQogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBhZGRFdmVudExp
c3RlbmVyOiBmdW5jdGlvbihmKSB7CiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMucHVz
aChmKTsKICAgICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSwKCiAgICAgICAgcmVtb3ZlRXZl
bnRMaXN0ZW5lcjogZnVuY3Rpb24oZikgewogICAgICAgICAgICB2YXIgaW5kZXg7CiAgICAgICAg
ICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuaW5k
ZXhPZihmKTsKICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKGluZGV4
LCAxKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50
TGlzdGVuZXJzID0gW107CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBkaXNwYXRj
aEV2ZW50OiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAg
Zm9yIChpID0gMDsgaSA8IHRoaXMuZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAg
ICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyc1tp
XShldmVudCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIC8qKgogICAgICogTGVnYWN5IGJy
b3dzZXIgaW1wbGVtZW50YXRpb24gb2YgcHJveHkgd2luZG93IG9iamVjdCB0byBwb3N0IG1lc3Nh
Z2UgdG8gdGFyZ2V0IHdpbmRvdwogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAY29uc3Ry
dWN0b3IKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm94eUlGcmFtZVVybCAtIEZ1bGx5IHF1YWxp
ZmllZCB1cmwgdG8gcHJveHkgaWZyYW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0V2lu
ZG93TmFtZSAtIE5hbWUgb2YgdGhlIHByb3h5IGlmcmFtZSB3aW5kb3cKICAgICAqLwogICAgUG9y
dGhvbGUuV2luZG93UHJveHlMZWdhY3kgPSBQb3J0aG9sZS5XaW5kb3dQcm94eUJhc2UuZXh0ZW5k
KHsKICAgICAgICBpbml0OiBmdW5jdGlvbihwcm94eUlGcmFtZVVybCwgdGFyZ2V0V2luZG93TmFt
ZSkgewogICAgICAgICAgICB0aGlzLl9zdXBlcih0YXJnZXRXaW5kb3dOYW1lKTsKICAgICAgICAg
ICAgCiAgICAgICAgICAgIGlmIChwcm94eUlGcmFtZVVybCAhPT0gbnVsbCkgewogICAgICAgICAg
ICAgICAgdGhpcy5wcm94eUlGcmFtZU5hbWUgPSB0aGlzLnRhcmdldFdpbmRvd05hbWUgKyAnUHJv
eHlJRnJhbWUnOwogICAgICAgICAgICAgICAgdGhpcy5wcm94eUlGcmFtZUxvY2F0aW9uID0gcHJv
eHlJRnJhbWVVcmw7CgogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwcm94eSBpRnJhbWUg
YW5kIGFkZCB0byBkb20KICAgICAgICAgICAgICAgIHRoaXMucHJveHlJRnJhbWVFbGVtZW50ID0g
dGhpcy5jcmVhdGVJRnJhbWVQcm94eSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg
ICAgICAgLy8gV29uJ3QgYmUgYWJsZSB0byBzZW5kIG1lc3NhZ2VzCiAgICAgICAgICAgICAgICB0
aGlzLnByb3h5SUZyYW1lRWxlbWVudCA9IG51bGw7CiAgICAgICAgICAgICAgICB0aHJvdyAgbmV3
IEVycm9yKCJwcm94eUlGcmFtZVVybCBjYW4ndCBiZSBudWxsIik7CiAgICAgICAgICAgIH0KICAg
ICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgYW4gaWZyYW1lIGFuZCBsb2Fk
IHRoZSBwcm94eQogICAgICAgICAqCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKiBAcmV0
dXJucyBpZnJhbWUKICAgICAgICAgKi8KICAgICAgICBjcmVhdGVJRnJhbWVQcm94eTogZnVuY3Rp
b24oKSB7CiAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdp
ZnJhbWUnKTsKCiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5wcm94
eUlGcmFtZU5hbWUpOwogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCduYW1lJywgdGhp
cy5wcm94eUlGcmFtZU5hbWUpOwogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMn
LCB0aGlzLnByb3h5SUZyYW1lTG9jYXRpb24pOwogICAgICAgICAgICAvLyBJRSBuZWVkcyB0aGlz
IG90aGVyd2lzZSByZXNpemUgZXZlbnQgaXMgbm90IGZpcmVkCiAgICAgICAgICAgIGlmcmFtZS5z
ZXRBdHRyaWJ1dGUoJ2ZyYW1lQm9yZGVyJywgJzEnKTsKICAgICAgICAgICAgaWZyYW1lLnNldEF0
dHJpYnV0ZSgnc2Nyb2xsaW5nJywgJ2F1dG8nKTsKICAgICAgICAgICAgLy8gTmVlZCBhIGNlcnRh
aW4gc2l6ZSBvdGhlcndpc2UgSUU3IGRvZXMgbm90IGZpcmUgcmVzaXplIGV2ZW50CiAgICAgICAg
ICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMzApOwogICAgICAgICAgICBpZnJhbWUu
c2V0QXR0cmlidXRlKCdoZWlnaHQnLCAzMCk7CiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1
dGUoJ3N0eWxlJywgJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogLTEwMHB4OyB0b3A6MHB4Oycp
OwogICAgICAgICAgICAvLyBJRSBuZWVkcyB0aGlzIGJlY2F1c2Ugc2V0dGluZyBzdHlsZSBhdHRy
aWJ1dGUgaXMgYnJva2VuLiBObyByZWFsbHkuCiAgICAgICAgICAgIGlmIChpZnJhbWUuc3R5bGUu
c2V0QXR0cmlidXRlKSB7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuc2V0QXR0cmlidXRl
KCdjc3NUZXh0JywgJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogLTEwMHB4OyB0b3A6MHB4Oycp
OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZy
YW1lKTsKICAgICAgICAgICAgcmV0dXJuIGlmcmFtZTsKICAgICAgICB9LAoKICAgICAgICBkaXNw
YXRjaE1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAgICAgICAgICAgdmFyIGVuY29kZSA9
IHdpbmRvdy5lbmNvZGVVUklDb21wb25lbnQ7CgogICAgICAgICAgICBpZiAodGhpcy5wcm94eUlG
cmFtZUVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnByb3h5SUZyYW1l
TG9jYXRpb24gKyAnIycgKyBlbmNvZGUoUG9ydGhvbGUuV2luZG93UHJveHkuc2VyaWFsaXplKG1l
c3NhZ2UpKTsKICAgICAgICAgICAgICAgIHRoaXMucHJveHlJRnJhbWVFbGVtZW50LnNldEF0dHJp
YnV0ZSgnc3JjJywgc3JjKTsKICAgICAgICAgICAgICAgIHRoaXMucHJveHlJRnJhbWVFbGVtZW50
LmhlaWdodCA9IHRoaXMucHJveHlJRnJhbWVFbGVtZW50LmhlaWdodCA+IDUwID8gNTAgOiAxMDA7
CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICAvKioKICAgICAqIEltcGxlbWVu
dGF0aW9uIGZvciBtb2Rlcm4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0cyBpdAogICAgICovCiAgICBQ
b3J0aG9sZS5XaW5kb3dQcm94eUhUTUw1ID0gUG9ydGhvbGUuV2luZG93UHJveHlCYXNlLmV4dGVu
ZCh7CiAgICAgICAgaW5pdDogZnVuY3Rpb24ocHJveHlJRnJhbWVVcmwsIHRhcmdldFdpbmRvd05h
bWUpIHsKICAgICAgICAgICAgdGhpcy5fc3VwZXIodGFyZ2V0V2luZG93TmFtZSk7CiAgICAgICAg
ICAgIHRoaXMuZXZlbnRMaXN0ZW5lckNhbGxiYWNrID0gbnVsbDsKICAgICAgICB9LAoKICAgICAg
ICBkaXNwYXRjaE1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAgICAgICAgICAgdGhpcy5n
ZXRUYXJnZXRXaW5kb3coKS5wb3N0TWVzc2FnZShQb3J0aG9sZS5XaW5kb3dQcm94eS5zZXJpYWxp
emUobWVzc2FnZSksIG1lc3NhZ2UudGFyZ2V0T3JpZ2luKTsKICAgICAgICB9LAoKICAgICAgICBh
ZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbihmKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50
TGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlz
OwogICAgICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyQ2FsbGJhY2sgPSBmdW5jdGlvbihl
dmVudCkgeyBzZWxmLmV2ZW50TGlzdGVuZXIoc2VsZiwgZXZlbnQpOyB9OwogICAgICAgICAgICAg
ICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmV2ZW50TGlzdGVuZXJD
YWxsYmFjaywgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9z
dXBlcihmKTsKICAgICAgICB9LAoKICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlv
bihmKSB7CiAgICAgICAgICAgIHRoaXMuX3N1cGVyKGYpOwoKICAgICAgICAgICAgaWYgKHRoaXMu
ZXZlbnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVt
b3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZXZlbnRMaXN0ZW5lckNhbGxiYWNrKTsK
ICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lckNhbGxiYWNrID0gbnVsbDsKICAgICAg
ICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKHNlbGYs
IG5hdGl2ZUV2ZW50KSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gUG9ydGhvbGUuV2luZG93UHJv
eHkudW5zZXJpYWxpemUobmF0aXZlRXZlbnQuZGF0YSk7CiAgICAgICAgICAgIGlmIChkYXRhICYm
IChzZWxmLnRhcmdldFdpbmRvd05hbWUgPT0gJycgfHwgZGF0YS5zb3VyY2VXaW5kb3dOYW1lID09
IHNlbGYudGFyZ2V0V2luZG93TmFtZSkpIHsKICAgICAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hF
dmVudChuZXcgUG9ydGhvbGUuTWVzc2FnZUV2ZW50KGRhdGEuZGF0YSwgbmF0aXZlRXZlbnQub3Jp
Z2luLCBzZWxmKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICBpZiAodHlw
ZW9mIHdpbmRvdy5wb3N0TWVzc2FnZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIFBvcnRob2xl
LnRyYWNlKCdVc2luZyBsZWdhY3kgYnJvd3NlciBzdXBwb3J0Jyk7CiAgICAgICAgUG9ydGhvbGUu
V2luZG93UHJveHkgPSBQb3J0aG9sZS5XaW5kb3dQcm94eUxlZ2FjeS5leHRlbmQoe30pOwogICAg
fSBlbHNlIHsKICAgICAgICBQb3J0aG9sZS50cmFjZSgnVXNpbmcgYnVpbHQtaW4gYnJvd3NlciBz
dXBwb3J0Jyk7CiAgICAgICAgUG9ydGhvbGUuV2luZG93UHJveHkgPSBQb3J0aG9sZS5XaW5kb3dQ
cm94eUhUTUw1LmV4dGVuZCh7fSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXJpYWxpemUgYW4g
b2JqZWN0IHVzaW5nIEpTT04uc3RyaW5naWZ5CiAgICAgKgogICAgICogQHBhcmFtIHtPYmplY3R9
IG9iaiBUaGUgb2JqZWN0IHRvIGJlIHNlcmlhbGl6ZWQKICAgICAqIEByZXR1cm4ge1N0cmluZ30K
ICAgICAqLwogICAgUG9ydGhvbGUuV2luZG93UHJveHkuc2VyaWFsaXplID0gZnVuY3Rpb24ob2Jq
KSB7CiAgICAgICAgaWYgKHR5cGVvZiBKU09OID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAg
ICB0aHJvdyBuZXcgRXJyb3IoJ1BvcnRob2xlIHNlcmlhbGl6YXRpb24gZGVwZW5kcyBvbiBKU09O
IScpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7CiAgICB9
OwoKICAgIC8qKgogICAgICogVW5zZXJpYWxpemUgdXNpbmcgSlNPTi5wYXJzZQogICAgICoKICAg
ICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFNlcmlhbGl6YXRpb24KICAgICAqIEByZXR1cm4ge09i
amVjdH0KICAgICAqLwogICAgUG9ydGhvbGUuV2luZG93UHJveHkudW5zZXJpYWxpemUgPSAgZnVu
Y3Rpb24odGV4dCkgewogICAgICAgIGlmICh0eXBlb2YgSlNPTiA9PT0gJ3VuZGVmaW5lZCcpIHsK
ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3J0aG9sZSB1bnNlcmlhbGl6YXRpb24gZGVw
ZW5kZW5zIG9uIEpTT04hJyk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZh
ciBqc29uID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAg
ICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGpzb247CiAgICB9OwoK
ICAgIFBvcnRob2xlLldpbmRvd1Byb3h5LmdldFRhcmdldFdpbmRvdyA9IGZ1bmN0aW9uKHRhcmdl
dFdpbmRvd05hbWUpIHsKICAgICAgICBpZiAodGFyZ2V0V2luZG93TmFtZSA9PT0gJycpIHsKICAg
ICAgICAgICAgcmV0dXJuIHRvcDsKICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFdpbmRvd05hbWUg
PT09ICd0b3AnIHx8IHRhcmdldFdpbmRvd05hbWUgPT09ICdwYXJlbnQnKSB7CiAgICAgICAgICAg
IHJldHVybiB3aW5kb3dbdGFyZ2V0V2luZG93TmFtZV07CiAgICAgICAgfSAKICAgICAgICByZXR1
cm4gcGFyZW50LmZyYW1lc1t0YXJnZXRXaW5kb3dOYW1lXTsKICAgIH07CgogICAgLyoqCiAgICAg
KiBAY2xhc3NkZXNjIEV2ZW50IG9iamVjdCB0byBiZSBwYXNzZWQgdG8gcmVnaXN0ZXJlZCBldmVu
dCBoYW5kbGVycwogICAgICogQGNsYXNzCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YQogICAg
ICogQHBhcmFtIHtTdHJpbmd9IG9yaWdpbiAtIHVybCBvZiB3aW5kb3cgc2VuZGluZyB0aGUgbWVz
c2FnZQogICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSAtIHdpbmRvdyBvYmplY3Qgc2VuZGlu
ZyB0aGUgbWVzc2FnZQogICAgICovCiAgICBQb3J0aG9sZS5NZXNzYWdlRXZlbnQgPSBmdW5jdGlv
biBNZXNzYWdlRXZlbnQoZGF0YSwgb3JpZ2luLCBzb3VyY2UpIHsKICAgICAgICB0aGlzLmRhdGEg
PSBkYXRhOwogICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luOwogICAgICAgIHRoaXMuc291cmNl
ID0gc291cmNlOwogICAgfTsKCiAgICAvKioKICAgICAqIEBjbGFzc2Rlc2MgRGlzcGF0Y2hlciBv
YmplY3QgdG8gcmVsYXkgbWVzc2FnZXMuCiAgICAgKiBAcHVibGljCiAgICAgKiBAY29uc3RydWN0
b3IKICAgICAqLwogICAgUG9ydGhvbGUuV2luZG93UHJveHlEaXNwYXRjaGVyID0gewogICAgICAg
IC8qKgogICAgICAgICAqIEZvcndhcmQgYSBtZXNzYWdlIGV2ZW50IHRvIHRoZSB0YXJnZXQgd2lu
ZG93CiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KICAgICAgICBmb3J3YXJkTWVzc2Fn
ZUV2ZW50OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlLAogICAgICAgICAg
ICAgICAgZGVjb2RlID0gd2luZG93LmRlY29kZVVSSUNvbXBvbmVudCwKICAgICAgICAgICAgICAg
IHRhcmdldFdpbmRvdywKICAgICAgICAgICAgICAgIHdpbmRvd1Byb3h5OwoKICAgICAgICAgICAg
aWYgKGRvY3VtZW50LmxvY2F0aW9uLmhhc2gubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAg
Ly8gRWF0IHRoZSBoYXNoIGNoYXJhY3RlcgogICAgICAgICAgICAgICAgbWVzc2FnZSA9IFBvcnRo
b2xlLldpbmRvd1Byb3h5LnVuc2VyaWFsaXplKGRlY29kZShkb2N1bWVudC5sb2NhdGlvbi5oYXNo
LnN1YnN0cigxKSkpOwoKICAgICAgICAgICAgICAgIHRhcmdldFdpbmRvdyA9IFBvcnRob2xlLldp
bmRvd1Byb3h5LmdldFRhcmdldFdpbmRvdyhtZXNzYWdlLnRhcmdldFdpbmRvd05hbWUpOwoKICAg
ICAgICAgICAgICAgIHdpbmRvd1Byb3h5ID0KICAgICAgICAgICAgICAgICAgICBQb3J0aG9sZS5X
aW5kb3dQcm94eURpc3BhdGNoZXIuZmluZFdpbmRvd1Byb3h5T2JqZWN0SW5XaW5kb3coCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRhcmdldFdpbmRvdywKICAgICAgICAgICAgICAgICAgICAgICAg
bWVzc2FnZS5zb3VyY2VXaW5kb3dOYW1lCiAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAg
ICAgICAgICBpZiAod2luZG93UHJveHkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93
UHJveHkub3JpZ2luID09PSBtZXNzYWdlLnRhcmdldE9yaWdpbiB8fCBtZXNzYWdlLnRhcmdldE9y
aWdpbiA9PT0gJyonKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1Byb3h5LmRpc3Bh
dGNoRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBvcnRob2xlLk1lc3NhZ2VF
dmVudChtZXNzYWdlLmRhdGEsIG1lc3NhZ2Uuc291cmNlT3JpZ2luLCB3aW5kb3dQcm94eSkpOwog
ICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFBvcnRo
b2xlLmVycm9yKCdUYXJnZXQgb3JpZ2luICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB3aW5kb3dQcm94eS5vcmlnaW4gKwogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAnIGRvZXMgbm90IG1hdGNoIGRlc2lyZWQgdGFyZ2V0IG9mICcgKwogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRhcmdldE9yaWdpbik7
CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgICAgICAgICBQb3J0aG9sZS5lcnJvcignQ291bGQgbm90IGZpbmQgd2luZG93IHByb3h5IG9i
amVjdCBvbiB0aGUgdGFyZ2V0IHdpbmRvdycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICB9CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogTG9vayBmb3IgYSB3aW5kb3cg
cHJveHkgb2JqZWN0IGluIHRoZSB0YXJnZXQgd2luZG93CiAgICAgICAgICogQHByaXZhdGUKICAg
ICAgICAgKi8KICAgICAgICBmaW5kV2luZG93UHJveHlPYmplY3RJbldpbmRvdzogZnVuY3Rpb24o
dywgc291cmNlV2luZG93TmFtZSkgewogICAgICAgICAgICB2YXIgaTsKCiAgICAgICAgICAgIC8v
IElFIGRvZXMgbm90IGVudW1lcmF0ZSBnbG9iYWwgb2JqZWN0cyBvbiB0aGUgd2luZG93IG9iamVj
dAogICAgICAgICAgICBpZiAody5SdW50aW1lT2JqZWN0KSB7CiAgICAgICAgICAgICAgICB3ID0g
dy5SdW50aW1lT2JqZWN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHcpIHsKICAg
ICAgICAgICAgICAgIGZvciAoaSBpbiB3KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHcuaGFz
T3duUHJvcGVydHkoaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHdlJ3JlIGZpbmRpbmcgdGhlIHByb3h5
IG9iamVjdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBpcyBkZWNsYXJlZCB0
byBiZSB0YXJnZXR0aW5nIHRoZSB3aW5kb3cgdGhhdCBpcyBjYWxsaW5nIHVzCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpZiAod1tpXSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHR5cGVvZiB3W2ldID09PSAnb2JqZWN0JyAmJgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHdbaV0gaW5zdGFuY2VvZiB3LlBvcnRob2xlLldpbmRvd1Byb3h5ICYm
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd1tpXS5nZXRUYXJnZXRXaW5kb3dOYW1l
KCkgPT09IHNvdXJjZVdpbmRvd05hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gd1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
ICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBT
d2FsbG93IGV4Y2VwdGlvbiBpbiBjYXNlIHdlIGFjY2VzcyBhbiBvYmplY3Qgd2Ugc2hvdWxkbid0
CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg
fSwKCiAgICAgICAgLyoqCiAgICAgICAgICogU3RhcnQgYSBwcm94eSB0byByZWxheSBtZXNzYWdl
cy4KICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICovCiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9u
KCkgewogICAgICAgICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAg
ICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgUG9ydGhvbGUuV2luZG93UHJveHlEaXNwYXRjaGVyLmZv
cndhcmRNZXNzYWdlRXZlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBmYWxzZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keS5hdHRhY2hFdmVu
dCkgewogICAgICAgICAgICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbnJlc2l6ZScsIFBvcnRo
b2xlLldpbmRvd1Byb3h5RGlzcGF0Y2hlci5mb3J3YXJkTWVzc2FnZUV2ZW50KTsKICAgICAgICAg
ICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFNob3VsZCBuZXZlciBoYXBwZW4KICAgICAg
ICAgICAgICAgIFBvcnRob2xlLmVycm9yKCdDYW5ub3QgYXR0YWNoIHJlc2l6ZSBldmVudCcpOwog
ICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICAvLyBTdXBwb3J0IHRlc3RpbmcgaW4g
bm9kZS5qczoKICAgIGlmICh0eXBlb2Ygd2luZG93LmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7
CiAgICAgICAgd2luZG93LmV4cG9ydHMuUG9ydGhvbGUgPSBQb3J0aG9sZTsKICAgIH0gZWxzZSB7
CiAgICAgICAgd2luZG93LlBvcnRob2xlID0gUG9ydGhvbGU7CiAgICB9Cn0pKHRoaXMpOwo=
</content></attachment><attachment>
<filename>jquery-1.9.1.min.js</filename>
<filesize>92629</filesize>
<author>XWiki.Admin</author>
<date>1372254740000</date>
<version>1.1</version>
<comment></comment><content>LyohIGpRdWVyeSB2MS45LjEgfCAoYykgMjAwNSwgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiwgSW5j
LiB8IGpxdWVyeS5vcmcvbGljZW5zZQovL0Agc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1h
cAoqLyhmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10eXBlb2YgdCxvPWUuZG9jdW1lbnQsYT1lLmxv
Y2F0aW9uLHM9ZS5qUXVlcnksdT1lLiQsbD17fSxjPVtdLHA9IjEuOS4xIixmPWMuY29uY2F0LGQ9
Yy5wdXNoLGg9Yy5zbGljZSxnPWMuaW5kZXhPZixtPWwudG9TdHJpbmcseT1sLmhhc093blByb3Bl
cnR5LHY9cC50cmltLGI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGIuZm4uaW5pdChlLHQscil9
LHg9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2Usdz0vXFMrL2cs
VD0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csTj0vXig/Oig8W1x3XFddKz4p
W14+XSp8IyhbXHctXSopKSQvLEM9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyxrPS9eW1xd
LDp7fVxzXSokLyxFPS8oPzpefDp8LCkoPzpccypcWykrL2csUz0vXFwoPzpbIlxcXC9iZm5ydF18
dVtcZGEtZkEtRl17NH0pL2csQT0vIlteIlxcXHJcbl0qInx0cnVlfGZhbHNlfG51bGx8LT8oPzpc
ZCtcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvZyxqPS9eLW1zLS8sRD0vLShbXGRhLXpdKS9naSxM
PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0sSD1mdW5jdGlvbihlKXsoby5h
ZGRFdmVudExpc3RlbmVyfHwibG9hZCI9PT1lLnR5cGV8fCJjb21wbGV0ZSI9PT1vLnJlYWR5U3Rh
dGUpJiYocSgpLGIucmVhZHkoKSl9LHE9ZnVuY3Rpb24oKXtvLmFkZEV2ZW50TGlzdGVuZXI/KG8u
cmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSCwhMSksZS5yZW1vdmVFdmVu
dExpc3RlbmVyKCJsb2FkIixILCExKSk6KG8uZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5n
ZSIsSCksZS5kZXRhY2hFdmVudCgib25sb2FkIixIKSl9O2IuZm49Yi5wcm90b3R5cGU9e2pxdWVy
eTpwLGNvbnN0cnVjdG9yOmIsaW5pdDpmdW5jdGlvbihlLG4scil7dmFyIGksYTtpZighZSlyZXR1
cm4gdGhpcztpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKGk9IjwiPT09ZS5jaGFyQXQoMCkmJiI+
Ij09PWUuY2hhckF0KGUubGVuZ3RoLTEpJiZlLmxlbmd0aD49Mz9bbnVsbCxlLG51bGxdOk4uZXhl
YyhlKSwhaXx8IWlbMV0mJm4pcmV0dXJuIW58fG4uanF1ZXJ5PyhufHxyKS5maW5kKGUpOnRoaXMu
Y29uc3RydWN0b3IobikuZmluZChlKTtpZihpWzFdKXtpZihuPW4gaW5zdGFuY2VvZiBiP25bMF06
bixiLm1lcmdlKHRoaXMsYi5wYXJzZUhUTUwoaVsxXSxuJiZuLm5vZGVUeXBlP24ub3duZXJEb2N1
bWVudHx8bjpvLCEwKSksQy50ZXN0KGlbMV0pJiZiLmlzUGxhaW5PYmplY3QobikpZm9yKGkgaW4g
biliLmlzRnVuY3Rpb24odGhpc1tpXSk/dGhpc1tpXShuW2ldKTp0aGlzLmF0dHIoaSxuW2ldKTty
ZXR1cm4gdGhpc31pZihhPW8uZ2V0RWxlbWVudEJ5SWQoaVsyXSksYSYmYS5wYXJlbnROb2RlKXtp
ZihhLmlkIT09aVsyXSlyZXR1cm4gci5maW5kKGUpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1hfXJl
dHVybiB0aGlzLmNvbnRleHQ9byx0aGlzLnNlbGVjdG9yPWUsdGhpc31yZXR1cm4gZS5ub2RlVHlw
ZT8odGhpcy5jb250ZXh0PXRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOmIuaXNGdW5jdGlv
bihlKT9yLnJlYWR5KGUpOihlLnNlbGVjdG9yIT09dCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rv
cix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSxiLm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6
IiIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpm
dW5jdGlvbigpe3JldHVybiBoLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVs
bD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNo
U3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9Yi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0
dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5j
dGlvbihlLHQpe3JldHVybiBiLmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1
cm4gYi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVy
biB0aGlzLnB1c2hTdGFjayhoLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9u
KCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9
LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0
aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3Jl
dHVybiB0aGlzLnB1c2hTdGFjayhiLm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2Fs
bCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMu
Y29uc3RydWN0b3IobnVsbCl9LHB1c2g6ZCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0s
Yi5mbi5pbml0LnByb3RvdHlwZT1iLmZuLGIuZXh0ZW5kPWIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7
dmFyIGUsbixyLGksbyxhLHM9YXJndW1lbnRzWzBdfHx7fSx1PTEsbD1hcmd1bWVudHMubGVuZ3Ro
LGM9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihjPXMscz1hcmd1bWVudHNbMV18fHt9LHU9
MiksIm9iamVjdCI9PXR5cGVvZiBzfHxiLmlzRnVuY3Rpb24ocyl8fChzPXt9KSxsPT09dSYmKHM9
dGhpcywtLXUpO2w+dTt1KyspaWYobnVsbCE9KG89YXJndW1lbnRzW3VdKSlmb3IoaSBpbiBvKWU9
c1tpXSxyPW9baV0scyE9PXImJihjJiZyJiYoYi5pc1BsYWluT2JqZWN0KHIpfHwobj1iLmlzQXJy
YXkocikpKT8obj8obj0hMSxhPWUmJmIuaXNBcnJheShlKT9lOltdKTphPWUmJmIuaXNQbGFpbk9i
amVjdChlKT9lOnt9LHNbaV09Yi5leHRlbmQoYyxhLHIpKTpyIT09dCYmKHNbaV09cikpO3JldHVy
biBzfSxiLmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbih0KXtyZXR1cm4gZS4kPT09YiYmKGUu
JD11KSx0JiZlLmpRdWVyeT09PWImJihlLmpRdWVyeT1zKSxifSxpc1JlYWR5OiExLHJlYWR5V2Fp
dDoxLGhvbGRSZWFkeTpmdW5jdGlvbihlKXtlP2IucmVhZHlXYWl0Kys6Yi5yZWFkeSghMCl9LHJl
YWR5OmZ1bmN0aW9uKGUpe2lmKGU9PT0hMD8hLS1iLnJlYWR5V2FpdDohYi5pc1JlYWR5KXtpZigh
by5ib2R5KXJldHVybiBzZXRUaW1lb3V0KGIucmVhZHkpO2IuaXNSZWFkeT0hMCxlIT09ITAmJi0t
Yi5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbYl0pLGIuZm4udHJpZ2dlciYmYihvKS50
cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSl9fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3Jl
dHVybiJmdW5jdGlvbiI9PT1iLnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rp
b24oZSl7cmV0dXJuImFycmF5Ij09PWIudHlwZShlKX0saXNXaW5kb3c6ZnVuY3Rpb24oZSl7cmV0
dXJuIG51bGwhPWUmJmU9PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlz
TmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4g
bnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFtt
LmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtp
ZighZXx8Im9iamVjdCIhPT1iLnR5cGUoZSl8fGUubm9kZVR5cGV8fGIuaXNXaW5kb3coZSkpcmV0
dXJuITE7dHJ5e2lmKGUuY29uc3RydWN0b3ImJiF5LmNhbGwoZSwiY29uc3RydWN0b3IiKSYmIXku
Y2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNh
dGNoKG4pe3JldHVybiExfXZhciByO2ZvcihyIGluIGUpO3JldHVybiByPT09dHx8eS5jYWxsKGUs
cil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZSlyZXR1cm4hMTty
ZXR1cm4hMH0sZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoZSl9LHBhcnNlSFRNTDpmdW5j
dGlvbihlLHQsbil7aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDsiYm9vbGVh
biI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHQ9dHx8bzt2YXIgcj1DLmV4ZWMoZSksaT0hbiYmW107
cmV0dXJuIHI/W3QuY3JlYXRlRWxlbWVudChyWzFdKV06KHI9Yi5idWlsZEZyYWdtZW50KFtlXSx0
LGkpLGkmJmIoaSkucmVtb3ZlKCksYi5tZXJnZShbXSxyLmNoaWxkTm9kZXMpKX0scGFyc2VKU09O
OmZ1bmN0aW9uKG4pe3JldHVybiBlLkpTT04mJmUuSlNPTi5wYXJzZT9lLkpTT04ucGFyc2Uobik6
bnVsbD09PW4/bjoic3RyaW5nIj09dHlwZW9mIG4mJihuPWIudHJpbShuKSxuJiZrLnRlc3Qobi5y
ZXBsYWNlKFMsIkAiKS5yZXBsYWNlKEEsIl0iKS5yZXBsYWNlKEUsIiIpKSk/RnVuY3Rpb24oInJl
dHVybiAiK24pKCk6KGIuZXJyb3IoIkludmFsaWQgSlNPTjogIituKSx0KX0scGFyc2VYTUw6ZnVu
Y3Rpb24obil7dmFyIHIsaTtpZighbnx8InN0cmluZyIhPXR5cGVvZiBuKXJldHVybiBudWxsO3Ry
eXtlLkRPTVBhcnNlcj8oaT1uZXcgRE9NUGFyc2VyLHI9aS5wYXJzZUZyb21TdHJpbmcobiwidGV4
dC94bWwiKSk6KHI9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxyLmFzeW5j
PSJmYWxzZSIsci5sb2FkWE1MKG4pKX1jYXRjaChvKXtyPXR9cmV0dXJuIHImJnIuZG9jdW1lbnRF
bGVtZW50JiYhci5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fGIu
ZXJyb3IoIkludmFsaWQgWE1MOiAiK24pLHJ9LG5vb3A6ZnVuY3Rpb24oKXt9LGdsb2JhbEV2YWw6
ZnVuY3Rpb24odCl7dCYmYi50cmltKHQpJiYoZS5leGVjU2NyaXB0fHxmdW5jdGlvbih0KXtlLmV2
YWwuY2FsbChlLHQpfSkodCl9LGNhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNl
KGosIm1zLSIpLnJlcGxhY2UoRCxMKX0sbm9kZU5hbWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5u
b2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpfSxlYWNo
OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPTAsbz1lLmxlbmd0aCxhPU0oZSk7aWYobil7aWYoYSl7
Zm9yKDtvPmk7aSsrKWlmKHI9dC5hcHBseShlW2ldLG4pLHI9PT0hMSlicmVha31lbHNlIGZvcihp
IGluIGUpaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgaWYoYSl7Zm9yKDtv
Pmk7aSsrKWlmKHI9dC5jYWxsKGVbaV0saSxlW2ldKSxyPT09ITEpYnJlYWt9ZWxzZSBmb3IoaSBp
biBlKWlmKHI9dC5jYWxsKGVbaV0saSxlW2ldKSxyPT09ITEpYnJlYWs7cmV0dXJuIGV9LHRyaW06
diYmIXYuY2FsbCgiXHVmZWZmXHUwMGEwIik/ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6
di5jYWxsKGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjooZSsiIikucmVwbGFjZShU
LCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUm
JihNKE9iamVjdChlKSk/Yi5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6ZC5jYWxs
KG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKHQpe2lmKGcpcmV0dXJu
IGcuY2FsbCh0LGUsbik7Zm9yKHI9dC5sZW5ndGgsbj1uPzA+bj9NYXRoLm1heCgwLHIrbik6bjow
O3I+bjtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbn1yZXR1cm4tMX0sbWVyZ2U6ZnVu
Y3Rpb24oZSxuKXt2YXIgcj1uLmxlbmd0aCxpPWUubGVuZ3RoLG89MDtpZigibnVtYmVyIj09dHlw
ZW9mIHIpZm9yKDtyPm87bysrKWVbaSsrXT1uW29dO2Vsc2Ugd2hpbGUobltvXSE9PXQpZVtpKytd
PW5bbysrXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixp
PVtdLG89MCxhPWUubGVuZ3RoO2ZvcihuPSEhbjthPm87bysrKXI9ISF0KGVbb10sbyksbiE9PXIm
JmkucHVzaChlW29dKTtyZXR1cm4gaX0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPTAsbz1l
Lmxlbmd0aCxhPU0oZSkscz1bXTtpZihhKWZvcig7bz5pO2krKylyPXQoZVtpXSxpLG4pLG51bGwh
PXImJihzW3MubGVuZ3RoXT1yKTtlbHNlIGZvcihpIGluIGUpcj10KGVbaV0saSxuKSxudWxsIT1y
JiYoc1tzLmxlbmd0aF09cik7cmV0dXJuIGYuYXBwbHkoW10scyl9LGd1aWQ6MSxwcm94eTpmdW5j
dGlvbihlLG4pe3ZhciByLGksbztyZXR1cm4ic3RyaW5nIj09dHlwZW9mIG4mJihvPWVbbl0sbj1l
LGU9byksYi5pc0Z1bmN0aW9uKGUpPyhyPWguY2FsbChhcmd1bWVudHMsMiksaT1mdW5jdGlvbigp
e3JldHVybiBlLmFwcGx5KG58fHRoaXMsci5jb25jYXQoaC5jYWxsKGFyZ3VtZW50cykpKX0saS5n
dWlkPWUuZ3VpZD1lLmd1aWR8fGIuZ3VpZCsrLGkpOnR9LGFjY2VzczpmdW5jdGlvbihlLG4scixp
LG8sYSxzKXt2YXIgdT0wLGw9ZS5sZW5ndGgsYz1udWxsPT1yO2lmKCJvYmplY3QiPT09Yi50eXBl
KHIpKXtvPSEwO2Zvcih1IGluIHIpYi5hY2Nlc3MoZSxuLHUsclt1XSwhMCxhLHMpfWVsc2UgaWYo
aSE9PXQmJihvPSEwLGIuaXNGdW5jdGlvbihpKXx8KHM9ITApLGMmJihzPyhuLmNhbGwoZSxpKSxu
PW51bGwpOihjPW4sbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGMuY2FsbChiKGUpLG4pfSkpLG4p
KWZvcig7bD51O3UrKyluKGVbdV0scixzP2k6aS5jYWxsKGVbdV0sdSxuKGVbdV0scikpKTtyZXR1
cm4gbz9lOmM/bi5jYWxsKGUpOmw/bihlWzBdLHIpOmF9LG5vdzpmdW5jdGlvbigpe3JldHVybihu
ZXcgRGF0ZSkuZ2V0VGltZSgpfX0pLGIucmVhZHkucHJvbWlzZT1mdW5jdGlvbih0KXtpZighbilp
ZihuPWIuRGVmZXJyZWQoKSwiY29tcGxldGUiPT09by5yZWFkeVN0YXRlKXNldFRpbWVvdXQoYi5y
ZWFkeSk7ZWxzZSBpZihvLmFkZEV2ZW50TGlzdGVuZXIpby5hZGRFdmVudExpc3RlbmVyKCJET01D
b250ZW50TG9hZGVkIixILCExKSxlLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLEgsITEpO2Vsc2V7
by5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixIKSxlLmF0dGFjaEV2ZW50KCJvbmxv
YWQiLEgpO3ZhciByPSExO3RyeXtyPW51bGw9PWUuZnJhbWVFbGVtZW50JiZvLmRvY3VtZW50RWxl
bWVudH1jYXRjaChpKXt9ciYmci5kb1Njcm9sbCYmZnVuY3Rpb24gYSgpe2lmKCFiLmlzUmVhZHkp
e3RyeXtyLmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goZSl7cmV0dXJuIHNldFRpbWVvdXQoYSw1MCl9
cSgpLGIucmVhZHkoKX19KCl9cmV0dXJuIG4ucHJvbWlzZSh0KX0sYi5lYWNoKCJCb29sZWFuIE51
bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIi5zcGxp
dCgiICIpLGZ1bmN0aW9uKGUsdCl7bFsiW29iamVjdCAiK3QrIl0iXT10LnRvTG93ZXJDYXNlKCl9
KTtmdW5jdGlvbiBNKGUpe3ZhciB0PWUubGVuZ3RoLG49Yi50eXBlKGUpO3JldHVybiBiLmlzV2lu
ZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOiJhcnJheSI9PT1ufHwiZnVuY3Rpb24iIT09
biYmKDA9PT10fHwibnVtYmVyIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGUpfXI9YihvKTt2YXIg
Xz17fTtmdW5jdGlvbiBGKGUpe3ZhciB0PV9bZV09e307cmV0dXJuIGIuZWFjaChlLm1hdGNoKHcp
fHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fWIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9
InN0cmluZyI9PXR5cGVvZiBlP19bZV18fEYoZSk6Yi5leHRlbmQoe30sZSk7dmFyIG4scixpLG8s
YSxzLHU9W10sbD0hZS5vbmNlJiZbXSxjPWZ1bmN0aW9uKHQpe2ZvcihyPWUubWVtb3J5JiZ0LGk9
ITAsYT1zfHwwLHM9MCxvPXUubGVuZ3RoLG49ITA7dSYmbz5hO2ErKylpZih1W2FdLmFwcGx5KHRb
MF0sdFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7cj0hMTticmVha31uPSExLHUmJihsP2wubGVu
Z3RoJiZjKGwuc2hpZnQoKSk6cj91PVtdOnAuZGlzYWJsZSgpKX0scD17YWRkOmZ1bmN0aW9uKCl7
aWYodSl7dmFyIHQ9dS5sZW5ndGg7KGZ1bmN0aW9uIGkodCl7Yi5lYWNoKHQsZnVuY3Rpb24odCxu
KXt2YXIgcj1iLnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJnAuaGFzKG4pfHx1LnB1
c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmaShuKX0pfSkoYXJndW1lbnRzKSxuP289
dS5sZW5ndGg6ciYmKHM9dCxjKHIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0
dXJuIHUmJmIuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgcjt3aGlsZSgocj1iLmlu
QXJyYXkodCx1LHIpKT4tMSl1LnNwbGljZShyLDEpLG4mJihvPj1yJiZvLS0sYT49ciYmYS0tKX0p
LHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT9iLmluQXJyYXkoZSx1KT4tMTohKCF1fHwh
dS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB1PVtdLHRoaXN9LGRpc2FibGU6ZnVu
Y3Rpb24oKXtyZXR1cm4gdT1sPXI9dCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiF1
fSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGw9dCxyfHxwLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6
ZnVuY3Rpb24oKXtyZXR1cm4hbH0sZmlyZVdpdGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHxb
XSx0PVtlLHQuc2xpY2U/dC5zbGljZSgpOnRdLCF1fHxpJiYhbHx8KG4/bC5wdXNoKHQpOmModCkp
LHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gcC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyks
dGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWl9fTtyZXR1cm4gcH0sYi5leHRlbmQoe0Rl
ZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciB0PVtbInJlc29sdmUiLCJkb25lIixiLkNhbGxiYWNrcygi
b25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGIuQ2FsbGJhY2tzKCJv
bmNlIG1lbW9yeSIpLCJyZWplY3RlZCJdLFsibm90aWZ5IiwicHJvZ3Jlc3MiLGIuQ2FsbGJhY2tz
KCJtZW1vcnkiKV1dLG49InBlbmRpbmciLHI9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGFs
d2F5czpmdW5jdGlvbigpe3JldHVybiBpLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyks
dGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4gYi5EZWZlcnJlZChm
dW5jdGlvbihuKXtiLmVhY2godCxmdW5jdGlvbih0LG8pe3ZhciBhPW9bMF0scz1iLmlzRnVuY3Rp
b24oZVt0XSkmJmVbdF07aVtvWzFdXShmdW5jdGlvbigpe3ZhciBlPXMmJnMuYXBwbHkodGhpcyxh
cmd1bWVudHMpO2UmJmIuaXNGdW5jdGlvbihlLnByb21pc2UpP2UucHJvbWlzZSgpLmRvbmUobi5y
ZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6blthKyJXaXRoIl0odGhp
cz09PXI/bi5wcm9taXNlKCk6dGhpcyxzP1tlXTphcmd1bWVudHMpfSl9KSxlPW51bGx9KS5wcm9t
aXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/Yi5leHRlbmQoZSxyKTpy
fX0saT17fTtyZXR1cm4gci5waXBlPXIudGhlbixiLmVhY2godCxmdW5jdGlvbihlLG8pe3ZhciBh
PW9bMl0scz1vWzNdO3Jbb1sxXV09YS5hZGQscyYmYS5hZGQoZnVuY3Rpb24oKXtuPXN9LHRbMV5l
XVsyXS5kaXNhYmxlLHRbMl1bMl0ubG9jayksaVtvWzBdXT1mdW5jdGlvbigpe3JldHVybiBpW29b
MF0rIldpdGgiXSh0aGlzPT09aT9yOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxpW29bMF0rIldpdGgi
XT1hLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rp
b24oZSl7dmFyIHQ9MCxuPWguY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT0xIT09cnx8ZSYm
Yi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLG89MT09PWk/ZTpiLkRlZmVycmVkKCksYT1mdW5j
dGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5s
ZW5ndGg+MT9oLmNhbGwoYXJndW1lbnRzKTpyLG49PT1zP28ubm90aWZ5V2l0aCh0LG4pOi0taXx8
by5yZXNvbHZlV2l0aCh0LG4pfX0scyx1LGw7aWYocj4xKWZvcihzPUFycmF5KHIpLHU9QXJyYXko
ciksbD1BcnJheShyKTtyPnQ7dCsrKW5bdF0mJmIuaXNGdW5jdGlvbihuW3RdLnByb21pc2UpP25b
dF0ucHJvbWlzZSgpLmRvbmUoYSh0LGwsbikpLmZhaWwoby5yZWplY3QpLnByb2dyZXNzKGEodCx1
LHMpKTotLWk7cmV0dXJuIGl8fG8ucmVzb2x2ZVdpdGgobCxuKSxvLnByb21pc2UoKX19KSxiLnN1
cHBvcnQ9ZnVuY3Rpb24oKXt2YXIgdCxuLHIsYSxzLHUsbCxjLHAsZixkPW8uY3JlYXRlRWxlbWVu
dCgiZGl2Iik7aWYoZC5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxkLmlubmVySFRNTD0i
ICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2No
ZWNrYm94Jy8+IixuPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxyPWQuZ2V0RWxlbWVudHNC
eVRhZ05hbWUoImEiKVswXSwhbnx8IXJ8fCFuLmxlbmd0aClyZXR1cm57fTtzPW8uY3JlYXRlRWxl
bWVudCgic2VsZWN0IiksbD1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikp
LGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSxyLnN0eWxlLmNzc1RleHQ9InRv
cDoxcHg7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41Iix0PXtnZXRTZXRBdHRyaWJ1dGU6InQiIT09ZC5j
bGFzc05hbWUsbGVhZGluZ1doaXRlc3BhY2U6Mz09PWQuZmlyc3RDaGlsZC5ub2RlVHlwZSx0Ym9k
eTohZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZToh
IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsc3R5bGU6L3RvcC8udGVzdChy
LmdldEF0dHJpYnV0ZSgic3R5bGUiKSksaHJlZk5vcm1hbGl6ZWQ6Ii9hIj09PXIuZ2V0QXR0cmli
dXRlKCJocmVmIiksb3BhY2l0eTovXjAuNS8udGVzdChyLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0
OiEhci5zdHlsZS5jc3NGbG9hdCxjaGVja09uOiEhYS52YWx1ZSxvcHRTZWxlY3RlZDpsLnNlbGVj
dGVkLGVuY3R5cGU6ISFvLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGh0bWw1Q2xvbmU6
Ijw6bmF2PjwvOm5hdj4iIT09by5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91
dGVySFRNTCxib3hNb2RlbDoiQ1NTMUNvbXBhdCI9PT1vLmNvbXBhdE1vZGUsZGVsZXRlRXhwYW5k
bzohMCxub0Nsb25lRXZlbnQ6ITAsaW5saW5lQmxvY2tOZWVkc0xheW91dDohMSxzaHJpbmtXcmFw
QmxvY2tzOiExLHJlbGlhYmxlTWFyZ2luUmlnaHQ6ITAsYm94U2l6aW5nUmVsaWFibGU6ITAscGl4
ZWxQb3NpdGlvbjohMX0sYS5jaGVja2VkPSEwLHQubm9DbG9uZUNoZWNrZWQ9YS5jbG9uZU5vZGUo
ITApLmNoZWNrZWQscy5kaXNhYmxlZD0hMCx0Lm9wdERpc2FibGVkPSFsLmRpc2FibGVkO3RyeXtk
ZWxldGUgZC50ZXN0fWNhdGNoKGgpe3QuZGVsZXRlRXhwYW5kbz0hMX1hPW8uY3JlYXRlRWxlbWVu
dCgiaW5wdXQiKSxhLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSx0LmlucHV0PSIiPT09YS5nZXRB
dHRyaWJ1dGUoInZhbHVlIiksYS52YWx1ZT0idCIsYS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRp
byIpLHQucmFkaW9WYWx1ZT0idCI9PT1hLnZhbHVlLGEuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwi
dCIpLGEuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLHU9by5jcmVhdGVEb2N1bWVudEZyYWdtZW50
KCksdS5hcHBlbmRDaGlsZChhKSx0LmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLHQuY2hlY2tDbG9u
ZT11LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxkLmF0dGFj
aEV2ZW50JiYoZC5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24oKXt0Lm5vQ2xvbmVFdmVu
dD0hMX0pLGQuY2xvbmVOb2RlKCEwKS5jbGljaygpKTtmb3IoZiBpbntzdWJtaXQ6ITAsY2hhbmdl
OiEwLGZvY3VzaW46ITB9KWQuc2V0QXR0cmlidXRlKGM9Im9uIitmLCJ0IiksdFtmKyJCdWJibGVz
Il09YyBpbiBlfHxkLmF0dHJpYnV0ZXNbY10uZXhwYW5kbz09PSExO3JldHVybiBkLnN0eWxlLmJh
Y2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsZC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91
bmRDbGlwPSIiLHQuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1kLnN0eWxlLmJhY2tn
cm91bmRDbGlwLGIoZnVuY3Rpb24oKXt2YXIgbixyLGEscz0icGFkZGluZzowO21hcmdpbjowO2Jv
cmRlcjowO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXpp
bmc6Y29udGVudC1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIsdT1vLmdldEVs
ZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07dSYmKG49by5jcmVhdGVFbGVtZW50KCJkaXYiKSxu
LnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246YWJzb2x1
dGU7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4Iix1LmFwcGVuZENoaWxkKG4pLmFw
cGVuZENoaWxkKGQpLGQuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48
L3RyPjwvdGFibGU+IixhPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIiksYVswXS5zdHlsZS5j
c3NUZXh0PSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpub25lIixwPTA9PT1h
WzBdLm9mZnNldEhlaWdodCxhWzBdLnN0eWxlLmRpc3BsYXk9IiIsYVsxXS5zdHlsZS5kaXNwbGF5
PSJub25lIix0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cz1wJiYwPT09YVswXS5vZmZzZXRIZWlnaHQs
ZC5pbm5lckhUTUw9IiIsZC5zdHlsZS5jc3NUZXh0PSJib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1v
ei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFk
ZGluZzoxcHg7Ym9yZGVyOjFweDtkaXNwbGF5OmJsb2NrO3dpZHRoOjRweDttYXJnaW4tdG9wOjEl
O3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxJTsiLHQuYm94U2l6aW5nPTQ9PT1kLm9mZnNldFdpZHRo
LHQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQ9MSE9PXUub2Zmc2V0VG9wLGUuZ2V0
Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHls
ZShkLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21w
dXRlZFN0eWxlKGQsbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9ZC5hcHBlbmRDaGlsZChv
LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9ZC5zdHlsZS5jc3NUZXh0PXMs
ci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixkLnN0eWxlLndpZHRoPSIxcHgi
LHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIs
bnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiBkLnN0eWxlLnpvb20hPT1pJiYoZC5pbm5l
ckhUTUw9IiIsZC5zdHlsZS5jc3NUZXh0PXMrIndpZHRoOjFweDtwYWRkaW5nOjFweDtkaXNwbGF5
OmlubGluZTt6b29tOjEiLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dD0zPT09ZC5vZmZzZXRXaWR0
aCxkLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixkLmlubmVySFRNTD0iPGRpdj48L2Rpdj4iLGQuZmly
c3RDaGlsZC5zdHlsZS53aWR0aD0iNXB4Iix0LnNocmlua1dyYXBCbG9ja3M9MyE9PWQub2Zmc2V0
V2lkdGgsdC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiYodS5zdHlsZS56b29tPTEpKSx1LnJlbW92
ZUNoaWxkKG4pLG49ZD1hPXI9bnVsbCl9KSxuPXM9dT1sPXI9YT1udWxsLHR9KCk7dmFyIE89Lyg/
Olx7W1xzXFNdKlx9fFxbW1xzXFNdKlxdKSQvLEI9LyhbQS1aXSkvZztmdW5jdGlvbiBQKGUsbixy
LGkpe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIG8sYSxzPWIuZXhwYW5kbyx1PSJzdHJpbmciPT10
eXBlb2YgbixsPWUubm9kZVR5cGUscD1sP2IuY2FjaGU6ZSxmPWw/ZVtzXTplW3NdJiZzO2lmKGYm
JnBbZl0mJihpfHxwW2ZdLmRhdGEpfHwhdXx8ciE9PXQpcmV0dXJuIGZ8fChsP2Vbc109Zj1jLnBv
cCgpfHxiLmd1aWQrKzpmPXMpLHBbZl18fChwW2ZdPXt9LGx8fChwW2ZdLnRvSlNPTj1iLm5vb3Ap
KSwoIm9iamVjdCI9PXR5cGVvZiBufHwiZnVuY3Rpb24iPT10eXBlb2YgbikmJihpP3BbZl09Yi5l
eHRlbmQocFtmXSxuKTpwW2ZdLmRhdGE9Yi5leHRlbmQocFtmXS5kYXRhLG4pKSxvPXBbZl0saXx8
KG8uZGF0YXx8KG8uZGF0YT17fSksbz1vLmRhdGEpLHIhPT10JiYob1tiLmNhbWVsQ2FzZShuKV09
ciksdT8oYT1vW25dLG51bGw9PWEmJihhPW9bYi5jYW1lbENhc2UobildKSk6YT1vLGF9fWZ1bmN0
aW9uIFIoZSx0LG4pe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIHIsaSxvLGE9ZS5ub2RlVHlwZSxz
PWE/Yi5jYWNoZTplLHU9YT9lW2IuZXhwYW5kb106Yi5leHBhbmRvO2lmKHNbdV0pe2lmKHQmJihv
PW4/c1t1XTpzW3VdLmRhdGEpKXtiLmlzQXJyYXkodCk/dD10LmNvbmNhdChiLm1hcCh0LGIuY2Ft
ZWxDYXNlKSk6dCBpbiBvP3Q9W3RdOih0PWIuY2FtZWxDYXNlKHQpLHQ9dCBpbiBvP1t0XTp0LnNw
bGl0KCIgIikpO2ZvcihyPTAsaT10Lmxlbmd0aDtpPnI7cisrKWRlbGV0ZSBvW3Rbcl1dO2lmKCEo
bj8kOmIuaXNFbXB0eU9iamVjdCkobykpcmV0dXJufShufHwoZGVsZXRlIHNbdV0uZGF0YSwkKHNb
dV0pKSkmJihhP2IuY2xlYW5EYXRhKFtlXSwhMCk6Yi5zdXBwb3J0LmRlbGV0ZUV4cGFuZG98fHMh
PXMud2luZG93P2RlbGV0ZSBzW3VdOnNbdV09bnVsbCl9fX1iLmV4dGVuZCh7Y2FjaGU6e30sZXhw
YW5kbzoialF1ZXJ5IisocCtNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxub0RhdGE6
e2VtYmVkOiEwLG9iamVjdDoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQw
MDAwIixhcHBsZXQ6ITB9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT9i
LmNhY2hlW2VbYi5leHBhbmRvXV06ZVtiLmV4cGFuZG9dLCEhZSYmISQoZSl9LGRhdGE6ZnVuY3Rp
b24oZSx0LG4pe3JldHVybiBQKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3JldHVy
biBSKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUChlLHQsbiwhMCl9LF9yZW1v
dmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSx0LCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlv
bihlKXtpZihlLm5vZGVUeXBlJiYxIT09ZS5ub2RlVHlwZSYmOSE9PWUubm9kZVR5cGUpcmV0dXJu
ITE7dmFyIHQ9ZS5ub2RlTmFtZSYmYi5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTty
ZXR1cm4hdHx8dCE9PSEwJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3NpZCIpPT09dH19KSxiLmZuLmV4
dGVuZCh7ZGF0YTpmdW5jdGlvbihlLG4pe3ZhciByLGksbz10aGlzWzBdLGE9MCxzPW51bGw7aWYo
ZT09PXQpe2lmKHRoaXMubGVuZ3RoJiYocz1iLmRhdGEobyksMT09PW8ubm9kZVR5cGUmJiFiLl9k
YXRhKG8sInBhcnNlZEF0dHJzIikpKXtmb3Iocj1vLmF0dHJpYnV0ZXM7ci5sZW5ndGg+YTthKysp
aT1yW2FdLm5hbWUsaS5pbmRleE9mKCJkYXRhLSIpfHwoaT1iLmNhbWVsQ2FzZShpLnNsaWNlKDUp
KSxXKG8saSxzW2ldKSk7Yi5fZGF0YShvLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBzfXJldHVy
biJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXtiLmRhdGEodGhpcyxlKX0p
OmIuYWNjZXNzKHRoaXMsZnVuY3Rpb24obil7cmV0dXJuIG49PT10P28/VyhvLGUsYi5kYXRhKG8s
ZSkpOm51bGw6KHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZGF0YSh0aGlzLGUsbil9KSx0KX0sbnVs
bCxuLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXty
ZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5yZW1vdmVEYXRhKHRoaXMsZSl9KX19KTtmdW5j
dGlvbiBXKGUsbixyKXtpZihyPT09dCYmMT09PWUubm9kZVR5cGUpe3ZhciBpPSJkYXRhLSIrbi5y
ZXBsYWNlKEIsIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYocj1lLmdldEF0dHJpYnV0ZShpKSwic3Ry
aW5nIj09dHlwZW9mIHIpe3RyeXtyPSJ0cnVlIj09PXI/ITA6ImZhbHNlIj09PXI/ITE6Im51bGwi
PT09cj9udWxsOityKyIiPT09cj8rcjpPLnRlc3Qocik/Yi5wYXJzZUpTT04ocik6cn1jYXRjaChv
KXt9Yi5kYXRhKGUsbixyKX1lbHNlIHI9dH1yZXR1cm4gcn1mdW5jdGlvbiAkKGUpe3ZhciB0O2Zv
cih0IGluIGUpaWYoKCJkYXRhIiE9PXR8fCFiLmlzRW1wdHlPYmplY3QoZVt0XSkpJiYidG9KU09O
IiE9PXQpcmV0dXJuITE7cmV0dXJuITB9Yi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsbixyKXt2
YXIgaTtyZXR1cm4gZT8obj0obnx8ImZ4IikrInF1ZXVlIixpPWIuX2RhdGEoZSxuKSxyJiYoIWl8
fGIuaXNBcnJheShyKT9pPWIuX2RhdGEoZSxuLGIubWFrZUFycmF5KHIpKTppLnB1c2gocikpLGl8
fFtdKTp0fSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPWIucXVldWUoZSx0
KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89Yi5fcXVldWVIb29rcyhlLHQpLGE9ZnVuY3Rpb24o
KXtiLmRlcXVldWUoZSx0KX07ImlucHJvZ3Jlc3MiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksby5j
dXI9aSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3As
aS5jYWxsKGUsYSxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlv
bihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBiLl9kYXRhKGUsbil8fGIuX2RhdGEo
ZSxuLHtlbXB0eTpiLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtiLl9y
ZW1vdmVEYXRhKGUsdCsicXVldWUiKSxiLl9yZW1vdmVEYXRhKGUsbil9KX0pfX0pLGIuZm4uZXh0
ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4pe3ZhciByPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBl
JiYobj1lLGU9ImZ4IixyLS0pLHI+YXJndW1lbnRzLmxlbmd0aD9iLnF1ZXVlKHRoaXNbMF0sZSk6
bj09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1iLnF1ZXVlKHRoaXMsZSxuKTti
Ll9xdWV1ZUhvb2tzKHRoaXMsZSksImZ4Ij09PWUmJiJpbnByb2dyZXNzIiE9PXRbMF0mJmIuZGVx
dWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5j
dGlvbigpe2IuZGVxdWV1ZSh0aGlzLGUpfSl9LGRlbGF5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9
Yi5meD9iLmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8ImZ4Iix0aGlzLnF1ZXVlKHQsZnVuY3Rpb24o
dCxuKXt2YXIgcj1zZXRUaW1lb3V0KHQsZSk7bi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0
KHIpfX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIs
W10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsbil7dmFyIHIsaT0xLG89Yi5EZWZlcnJlZCgpLGE9dGhp
cyxzPXRoaXMubGVuZ3RoLHU9ZnVuY3Rpb24oKXstLWl8fG8ucmVzb2x2ZVdpdGgoYSxbYV0pfTsi
c3RyaW5nIiE9dHlwZW9mIGUmJihuPWUsZT10KSxlPWV8fCJmeCI7d2hpbGUocy0tKXI9Yi5fZGF0
YShhW3NdLGUrInF1ZXVlSG9va3MiKSxyJiZyLmVtcHR5JiYoaSsrLHIuZW1wdHkuYWRkKHUpKTty
ZXR1cm4gdSgpLG8ucHJvbWlzZShuKX19KTt2YXIgSSx6LFg9L1tcdFxyXG5dL2csVT0vXHIvZyxW
PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC9pLFk9L14oPzphfGFy
ZWEpJC9pLEo9L14oPzpjaGVja2VkfHNlbGVjdGVkfGF1dG9mb2N1c3xhdXRvcGxheXxhc3luY3xj
b250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5
fHJlcXVpcmVkfHNjb3BlZCkkL2ksRz0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLFE9Yi5zdXBw
b3J0LmdldFNldEF0dHJpYnV0ZSxLPWIuc3VwcG9ydC5pbnB1dDtiLmZuLmV4dGVuZCh7YXR0cjpm
dW5jdGlvbihlLHQpe3JldHVybiBiLmFjY2Vzcyh0aGlzLGIuYXR0cixlLHQsYXJndW1lbnRzLmxl
bmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9u
KCl7Yi5yZW1vdmVBdHRyKHRoaXMsZSl9KX0scHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiBiLmFj
Y2Vzcyh0aGlzLGIucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5j
dGlvbihlKXtyZXR1cm4gZT1iLnByb3BGaXhbZV18fGUsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5
e3RoaXNbZV09dCxkZWxldGUgdGhpc1tlXX1jYXRjaChuKXt9fSl9LGFkZENsYXNzOmZ1bmN0aW9u
KGUpe3ZhciB0LG4scixpLG8sYT0wLHM9dGhpcy5sZW5ndGgsdT0ic3RyaW5nIj09dHlwZW9mIGUm
JmU7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlz
KS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShl
fHwiIikubWF0Y2godyl8fFtdO3M+YTthKyspaWYobj10aGlzW2FdLHI9MT09PW4ubm9kZVR5cGUm
JihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShYLCIgIik6IiAiKSl7
bz0wO3doaWxlKGk9dFtvKytdKTA+ci5pbmRleE9mKCIgIitpKyIgIikmJihyKz1pKyIgIik7bi5j
bGFzc05hbWU9Yi50cmltKHIpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2
YXIgdCxuLHIsaSxvLGE9MCxzPXRoaXMubGVuZ3RoLHU9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJz
dHJpbmciPT10eXBlb2YgZSYmZTtpZihiLmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChm
dW5jdGlvbih0KXtiKHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05h
bWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107cz5hO2ErKylpZihuPXRoaXNb
YV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5y
ZXBsYWNlKFgsIiAiKToiIikpe289MDt3aGlsZShpPXRbbysrXSl3aGlsZShyLmluZGV4T2YoIiAi
K2krIiAiKT49MClyPXIucmVwbGFjZSgiICIraSsiICIsIiAiKTtuLmNsYXNzTmFtZT1lP2IudHJp
bShyKToiIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBl
b2YgZSxyPSJib29sZWFuIj09dHlwZW9mIHQ7cmV0dXJuIGIuaXNGdW5jdGlvbihlKT90aGlzLmVh
Y2goZnVuY3Rpb24obil7Yih0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xh
c3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1uKXt2YXIg
byxhPTAscz1iKHRoaXMpLHU9dCxsPWUubWF0Y2godyl8fFtdO3doaWxlKG89bFthKytdKXU9cj91
OiFzLmhhc0NsYXNzKG8pLHNbdT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKG8pfWVsc2Uobj09
PWl8fCJib29sZWFuIj09PW4pJiYodGhpcy5jbGFzc05hbWUmJmIuX2RhdGEodGhpcywiX19jbGFz
c05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxl
PT09ITE/IiI6Yi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpm
dW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisr
KWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVw
bGFjZShYLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9u
KGUpe3ZhciBuLHIsaSxvPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9Yi5p
c0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgbyxhPWIodGhpcyk7MT09PXRo
aXMubm9kZVR5cGUmJihvPWk/ZS5jYWxsKHRoaXMsbixhLnZhbCgpKTplLG51bGw9PW8/bz0iIjoi
bnVtYmVyIj09dHlwZW9mIG8/bys9IiI6Yi5pc0FycmF5KG8pJiYobz1iLm1hcChvLGZ1bmN0aW9u
KGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSkscj1iLnZhbEhvb2tzW3RoaXMudHlwZV18fGIu
dmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiYic2V0ImluIHImJnIuc2V0
KHRoaXMsbywidmFsdWUiKSE9PXR8fCh0aGlzLnZhbHVlPW8pKX0pO2lmKG8pcmV0dXJuIHI9Yi52
YWxIb29rc1tvLnR5cGVdfHxiLnZhbEhvb2tzW28ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sciYm
ImdldCJpbiByJiYobj1yLmdldChvLCJ2YWx1ZSIpKSE9PXQ/bjoobj1vLnZhbHVlLCJzdHJpbmci
PT10eXBlb2Ygbj9uLnJlcGxhY2UoVSwiIik6bnVsbD09bj8iIjpuKX19fSksYi5leHRlbmQoe3Zh
bEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7
cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rp
b24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPSJzZWxlY3Qtb25l
Ij09PWUudHlwZXx8MD5pLGE9bz9udWxsOltdLHM9bz9pKzE6ci5sZW5ndGgsdT0wPmk/czpvP2k6
MDtmb3IoO3M+dTt1KyspaWYobj1yW3VdLCEoIW4uc2VsZWN0ZWQmJnUhPT1pfHwoYi5zdXBwb3J0
Lm9wdERpc2FibGVkP24uZGlzYWJsZWQ6bnVsbCE9PW4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIp
KXx8bi5wYXJlbnROb2RlLmRpc2FibGVkJiZiLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3Jv
dXAiKSkpe2lmKHQ9YihuKS52YWwoKSxvKXJldHVybiB0O2EucHVzaCh0KX1yZXR1cm4gYX0sc2V0
OmZ1bmN0aW9uKGUsdCl7dmFyIG49Yi5tYWtlQXJyYXkodCk7cmV0dXJuIGIoZSkuZmluZCgib3B0
aW9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9Yi5pbkFycmF5KGIodGhpcykudmFs
KCksbik+PTB9KSxuLmxlbmd0aHx8KGUuc2VsZWN0ZWRJbmRleD0tMSksbn19fSxhdHRyOmZ1bmN0
aW9uKGUsbixyKXt2YXIgbyxhLHMsdT1lLm5vZGVUeXBlO2lmKGUmJjMhPT11JiY4IT09dSYmMiE9
PXUpcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZT09PWk/Yi5wcm9wKGUsbixyKTooYT0xIT09
dXx8IWIuaXNYTUxEb2MoZSksYSYmKG49bi50b0xvd2VyQ2FzZSgpLG89Yi5hdHRySG9va3Nbbl18
fChKLnRlc3Qobik/ejpJKSkscj09PXQ/byYmYSYmImdldCJpbiBvJiZudWxsIT09KHM9by5nZXQo
ZSxuKSk/czoodHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aSYmKHM9ZS5nZXRBdHRyaWJ1dGUobikp
LG51bGw9PXM/dDpzKTpudWxsIT09cj9vJiZhJiYic2V0ImluIG8mJihzPW8uc2V0KGUscixuKSkh
PT10P3M6KGUuc2V0QXR0cmlidXRlKG4scisiIikscik6KGIucmVtb3ZlQXR0cihlLG4pLHQpKX0s
cmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT0wLG89dCYmdC5tYXRjaCh3KTtpZihv
JiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPW9baSsrXSlyPWIucHJvcEZpeFtuXXx8bixKLnRlc3Qo
bik/IVEmJkcudGVzdChuKT9lW2IuY2FtZWxDYXNlKCJkZWZhdWx0LSIrbildPWVbcl09ITE6ZVty
XT0hMTpiLmF0dHIoZSxuLCIiKSxlLnJlbW92ZUF0dHJpYnV0ZShRP246cil9LGF0dHJIb29rczp7
dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWIuc3VwcG9ydC5yYWRpb1ZhbHVlJiYicmFkaW8i
PT09dCYmYi5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0
dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7dGFiaW5kZXg6
InRhYkluZGV4IixyZWFkb25seToicmVhZE9ubHkiLCJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJj
bGFzc05hbWUiLG1heGxlbmd0aDoibWF4TGVuZ3RoIixjZWxsc3BhY2luZzoiY2VsbFNwYWNpbmci
LGNlbGxwYWRkaW5nOiJjZWxsUGFkZGluZyIscm93c3Bhbjoicm93U3BhbiIsY29sc3BhbjoiY29s
U3BhbiIsdXNlbWFwOiJ1c2VNYXAiLGZyYW1lYm9yZGVyOiJmcmFtZUJvcmRlciIsY29udGVudGVk
aXRhYmxlOiJjb250ZW50RWRpdGFibGUifSxwcm9wOmZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGEs
cz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIGE9MSE9PXN8fCFi
LmlzWE1MRG9jKGUpLGEmJihuPWIucHJvcEZpeFtuXXx8bixvPWIucHJvcEhvb2tzW25dKSxyIT09
dD9vJiYic2V0ImluIG8mJihpPW8uc2V0KGUscixuKSkhPT10P2k6ZVtuXT1yOm8mJiJnZXQiaW4g
byYmbnVsbCE9PShpPW8uZ2V0KGUsbikpP2k6ZVtuXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0
OmZ1bmN0aW9uKGUpe3ZhciBuPWUuZ2V0QXR0cmlidXRlTm9kZSgidGFiaW5kZXgiKTtyZXR1cm4g
biYmbi5zcGVjaWZpZWQ/cGFyc2VJbnQobi52YWx1ZSwxMCk6Vi50ZXN0KGUubm9kZU5hbWUpfHxZ
LnRlc3QoZS5ub2RlTmFtZSkmJmUuaHJlZj8wOnR9fX19KSx6PXtnZXQ6ZnVuY3Rpb24oZSxuKXt2
YXIgcj1iLnByb3AoZSxuKSxpPSJib29sZWFuIj09dHlwZW9mIHImJmUuZ2V0QXR0cmlidXRlKG4p
LG89ImJvb2xlYW4iPT10eXBlb2Ygcj9LJiZRP251bGwhPWk6Ry50ZXN0KG4pP2VbYi5jYW1lbENh
c2UoImRlZmF1bHQtIituKV06ISFpOmUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gbyYmby52
YWx1ZSE9PSExP24udG9Mb3dlckNhc2UoKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0
PT09ITE/Yi5yZW1vdmVBdHRyKGUsbik6SyYmUXx8IUcudGVzdChuKT9lLnNldEF0dHJpYnV0ZSgh
USYmYi5wcm9wRml4W25dfHxuLG4pOmVbYi5jYW1lbENhc2UoImRlZmF1bHQtIituKV09ZVtuXT0h
MCxufX0sSyYmUXx8KGIuYXR0ckhvb2tzLnZhbHVlPXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1l
LmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIGIubm9kZU5hbWUoZSwiaW5wdXQiKT9lLmRlZmF1
bHRWYWx1ZTpyJiZyLnNwZWNpZmllZD9yLnZhbHVlOnR9LHNldDpmdW5jdGlvbihlLG4scil7cmV0
dXJuIGIubm9kZU5hbWUoZSwiaW5wdXQiKT8oZS5kZWZhdWx0VmFsdWU9bix0KTpJJiZJLnNldChl
LG4scil9fSksUXx8KEk9Yi52YWxIb29rcy5idXR0b249e2dldDpmdW5jdGlvbihlLG4pe3ZhciBy
PWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gciYmKCJpZCI9PT1ufHwibmFtZSI9PT1ufHwi
Y29vcmRzIj09PW4/IiIhPT1yLnZhbHVlOnIuc3BlY2lmaWVkKT9yLnZhbHVlOnR9LHNldDpmdW5j
dGlvbihlLG4scil7dmFyIGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHIpO3JldHVybiBpfHxlLnNldEF0
dHJpYnV0ZU5vZGUoaT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKHIpKSxpLnZhbHVl
PW4rPSIiLCJ2YWx1ZSI9PT1yfHxuPT09ZS5nZXRBdHRyaWJ1dGUocik/bjp0fX0sYi5hdHRySG9v
a3MuY29udGVudGVkaXRhYmxlPXtnZXQ6SS5nZXQsc2V0OmZ1bmN0aW9uKGUsdCxuKXtJLnNldChl
LCIiPT09dD8hMTp0LG4pfX0sYi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihlLG4p
e2IuYXR0ckhvb2tzW25dPWIuZXh0ZW5kKGIuYXR0ckhvb2tzW25dLHtzZXQ6ZnVuY3Rpb24oZSxy
KXtyZXR1cm4iIj09PXI/KGUuc2V0QXR0cmlidXRlKG4sImF1dG8iKSxyKTp0fX0pfSkpLGIuc3Vw
cG9ydC5ocmVmTm9ybWFsaXplZHx8KGIuZWFjaChbImhyZWYiLCJzcmMiLCJ3aWR0aCIsImhlaWdo
dCJdLGZ1bmN0aW9uKGUsbil7Yi5hdHRySG9va3Nbbl09Yi5leHRlbmQoYi5hdHRySG9va3Nbbl0s
e2dldDpmdW5jdGlvbihlKXt2YXIgcj1lLmdldEF0dHJpYnV0ZShuLDIpO3JldHVybiBudWxsPT1y
P3Q6cn19KX0pLGIuZWFjaChbImhyZWYiLCJzcmMiXSxmdW5jdGlvbihlLHQpe2IucHJvcEhvb2tz
W3RdPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsNCl9fX0pKSxiLnN1
cHBvcnQuc3R5bGV8fChiLmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBl
LnN0eWxlLmNzc1RleHR8fHR9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybiBlLnN0eWxlLmNzc1Rl
eHQ9dCsiIn19KSxiLnN1cHBvcnQub3B0U2VsZWN0ZWR8fChiLnByb3BIb29rcy5zZWxlY3RlZD1i
LmV4dGVuZChiLnByb3BIb29rcy5zZWxlY3RlZCx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFy
ZW50Tm9kZTtyZXR1cm4gdCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50
Tm9kZS5zZWxlY3RlZEluZGV4KSxudWxsfX0pKSxiLnN1cHBvcnQuZW5jdHlwZXx8KGIucHJvcEZp
eC5lbmN0eXBlPSJlbmNvZGluZyIpLGIuc3VwcG9ydC5jaGVja09ufHxiLmVhY2goWyJyYWRpbyIs
ImNoZWNrYm94Il0sZnVuY3Rpb24oKXtiLnZhbEhvb2tzW3RoaXNdPXtnZXQ6ZnVuY3Rpb24oZSl7
cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9fX0pLGIu
ZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe2IudmFsSG9va3NbdGhpc109Yi5l
eHRlbmQoYi52YWxIb29rc1t0aGlzXSx7c2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIGIuaXNBcnJh
eShuKT9lLmNoZWNrZWQ9Yi5pbkFycmF5KGIoZSkudmFsKCksbik+PTA6dH19KX0pO3ZhciBaPS9e
KD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxldD0vXmtleS8sdHQ9L14oPzptb3VzZXxjb250
ZXh0bWVudSl8Y2xpY2svLG50PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxydD0v
XihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIGl0KCl7cmV0dXJuITB9ZnVuY3Rpb24gb3Qo
KXtyZXR1cm4hMX1iLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsbixyLG8sYSl7dmFy
IHMsdSxsLGMscCxmLGQsaCxnLG0seSx2PWIuX2RhdGEoZSk7aWYodil7ci5oYW5kbGVyJiYoYz1y
LHI9Yy5oYW5kbGVyLGE9Yy5zZWxlY3Rvciksci5ndWlkfHwoci5ndWlkPWIuZ3VpZCsrKSwodT12
LmV2ZW50cyl8fCh1PXYuZXZlbnRzPXt9KSwoZj12LmhhbmRsZSl8fChmPXYuaGFuZGxlPWZ1bmN0
aW9uKGUpe3JldHVybiB0eXBlb2YgYj09PWl8fGUmJmIuZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBl
P3Q6Yi5ldmVudC5kaXNwYXRjaC5hcHBseShmLmVsZW0sYXJndW1lbnRzKX0sZi5lbGVtPWUpLG49
KG58fCIiKS5tYXRjaCh3KXx8WyIiXSxsPW4ubGVuZ3RoO3doaWxlKGwtLSlzPXJ0LmV4ZWMoblts
XSl8fFtdLGc9eT1zWzFdLG09KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxwPWIuZXZlbnQu
c3BlY2lhbFtnXXx8e30sZz0oYT9wLmRlbGVnYXRlVHlwZTpwLmJpbmRUeXBlKXx8ZyxwPWIuZXZl
bnQuc3BlY2lhbFtnXXx8e30sZD1iLmV4dGVuZCh7dHlwZTpnLG9yaWdUeXBlOnksZGF0YTpvLGhh
bmRsZXI6cixndWlkOnIuZ3VpZCxzZWxlY3RvcjphLG5lZWRzQ29udGV4dDphJiZiLmV4cHIubWF0
Y2gubmVlZHNDb250ZXh0LnRlc3QoYSksbmFtZXNwYWNlOm0uam9pbigiLiIpfSxjKSwoaD11W2dd
KXx8KGg9dVtnXT1bXSxoLmRlbGVnYXRlQ291bnQ9MCxwLnNldHVwJiZwLnNldHVwLmNhbGwoZSxv
LG0sZikhPT0hMXx8KGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoZyxmLCEx
KTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrZyxmKSkpLHAuYWRkJiYocC5hZGQu
Y2FsbChlLGQpLGQuaGFuZGxlci5ndWlkfHwoZC5oYW5kbGVyLmd1aWQ9ci5ndWlkKSksYT9oLnNw
bGljZShoLmRlbGVnYXRlQ291bnQrKywwLGQpOmgucHVzaChkKSxiLmV2ZW50Lmdsb2JhbFtnXT0h
MDtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMscCxm
LGQsaCxnLG09Yi5oYXNEYXRhKGUpJiZiLl9kYXRhKGUpO2lmKG0mJihjPW0uZXZlbnRzKSl7dD0o
dHx8IiIpLm1hdGNoKHcpfHxbIiJdLGw9dC5sZW5ndGg7d2hpbGUobC0tKWlmKHM9cnQuZXhlYyh0
W2xdKXx8W10sZD1nPXNbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQpe3A9Yi5l
dmVudC5zcGVjaWFsW2RdfHx7fSxkPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxkLGY9
Y1tkXXx8W10scz1zWzJdJiZSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIp
KyIoXFwufCQpIiksdT1vPWYubGVuZ3RoO3doaWxlKG8tLSlhPWZbb10sIWkmJmchPT1hLm9yaWdU
eXBlfHxuJiZuLmd1aWQhPT1hLmd1aWR8fHMmJiFzLnRlc3QoYS5uYW1lc3BhY2UpfHxyJiZyIT09
YS5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYS5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGEuc2Vs
ZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYSkpO3Um
JiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGgsbS5oYW5kbGUpIT09
ITF8fGIucmVtb3ZlRXZlbnQoZSxkLG0uaGFuZGxlKSxkZWxldGUgY1tkXSl9ZWxzZSBmb3IoZCBp
biBjKWIuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7Yi5pc0VtcHR5T2JqZWN0KGMpJiYo
ZGVsZXRlIG0uaGFuZGxlLGIuX3JlbW92ZURhdGEoZSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5j
dGlvbihuLHIsaSxhKXt2YXIgcyx1LGwsYyxwLGYsZCxoPVtpfHxvXSxnPXkuY2FsbChuLCJ0eXBl
Iik/bi50eXBlOm4sbT15LmNhbGwobiwibmFtZXNwYWNlIik/bi5uYW1lc3BhY2Uuc3BsaXQoIi4i
KTpbXTtpZihsPWY9aT1pfHxvLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIW50LnRl
c3QoZytiLmV2ZW50LnRyaWdnZXJlZCkmJihnLmluZGV4T2YoIi4iKT49MCYmKG09Zy5zcGxpdCgi
LiIpLGc9bS5zaGlmdCgpLG0uc29ydCgpKSx1PTA+Zy5pbmRleE9mKCI6IikmJiJvbiIrZyxuPW5b
Yi5leHBhbmRvXT9uOm5ldyBiLkV2ZW50KGcsIm9iamVjdCI9PXR5cGVvZiBuJiZuKSxuLmlzVHJp
Z2dlcj0hMCxuLm5hbWVzcGFjZT1tLmpvaW4oIi4iKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFj
ZT9SZWdFeHAoIihefFxcLikiK20uam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVs
bCxuLnJlc3VsdD10LG4udGFyZ2V0fHwobi50YXJnZXQ9aSkscj1udWxsPT1yP1tuXTpiLm1ha2VB
cnJheShyLFtuXSkscD1iLmV2ZW50LnNwZWNpYWxbZ118fHt9LGF8fCFwLnRyaWdnZXJ8fHAudHJp
Z2dlci5hcHBseShpLHIpIT09ITEpKXtpZighYSYmIXAubm9CdWJibGUmJiFiLmlzV2luZG93KGkp
KXtmb3IoYz1wLmRlbGVnYXRlVHlwZXx8ZyxudC50ZXN0KGMrZyl8fChsPWwucGFyZW50Tm9kZSk7
bDtsPWwucGFyZW50Tm9kZSloLnB1c2gobCksZj1sO2Y9PT0oaS5vd25lckRvY3VtZW50fHxvKSYm
aC5wdXNoKGYuZGVmYXVsdFZpZXd8fGYucGFyZW50V2luZG93fHxlKX1kPTA7d2hpbGUoKGw9aFtk
KytdKSYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKSluLnR5cGU9ZD4xP2M6cC5iaW5kVHlwZXx8
ZyxzPShiLl9kYXRhKGwsImV2ZW50cyIpfHx7fSlbbi50eXBlXSYmYi5fZGF0YShsLCJoYW5kbGUi
KSxzJiZzLmFwcGx5KGwscikscz11JiZsW3VdLHMmJmIuYWNjZXB0RGF0YShsKSYmcy5hcHBseSYm
cy5hcHBseShsLHIpPT09ITEmJm4ucHJldmVudERlZmF1bHQoKTtpZihuLnR5cGU9ZywhKGF8fG4u
aXNEZWZhdWx0UHJldmVudGVkKCl8fHAuX2RlZmF1bHQmJnAuX2RlZmF1bHQuYXBwbHkoaS5vd25l
ckRvY3VtZW50LHIpIT09ITF8fCJjbGljayI9PT1nJiZiLm5vZGVOYW1lKGksImEiKXx8IWIuYWNj
ZXB0RGF0YShpKXx8IXV8fCFpW2ddfHxiLmlzV2luZG93KGkpKSl7Zj1pW3VdLGYmJihpW3VdPW51
bGwpLGIuZXZlbnQudHJpZ2dlcmVkPWc7dHJ5e2lbZ10oKX1jYXRjaCh2KXt9Yi5ldmVudC50cmln
Z2VyZWQ9dCxmJiYoaVt1XT1mKX1yZXR1cm4gbi5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihl
KXtlPWIuZXZlbnQuZml4KGUpO3ZhciBuLHIsaSxvLGEscz1bXSx1PWguY2FsbChhcmd1bWVudHMp
LGw9KGIuX2RhdGEodGhpcywiZXZlbnRzIil8fHt9KVtlLnR5cGVdfHxbXSxjPWIuZXZlbnQuc3Bl
Y2lhbFtlLnR5cGVdfHx7fTtpZih1WzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURp
c3BhdGNofHxjLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPWIuZXZlbnQuaGFuZGxl
cnMuY2FsbCh0aGlzLGUsbCksbj0wO3doaWxlKChvPXNbbisrXSkmJiFlLmlzUHJvcGFnYXRpb25T
dG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1vLmVsZW0sYT0wO3doaWxlKChpPW8uaGFuZGxlcnNb
YSsrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9y
ZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChpLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9aSxlLmRh
dGE9aS5kYXRhLHI9KChiLmV2ZW50LnNwZWNpYWxbaS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGku
aGFuZGxlcikuYXBwbHkoby5lbGVtLHUpLHIhPT10JiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJl
dmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGMucG9zdERpc3BhdGNo
JiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlv
bihlLG4pe3ZhciByLGksbyxhLHM9W10sdT1uLmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1
JiZsLm5vZGVUeXBlJiYoIWUuYnV0dG9ufHwiY2xpY2siIT09ZS50eXBlKSlmb3IoO2whPXRoaXM7
bD1sLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWwubm9kZVR5cGUmJihsLmRpc2FibGVkIT09ITB8
fCJjbGljayIhPT1lLnR5cGUpKXtmb3Iobz1bXSxhPTA7dT5hO2ErKylpPW5bYV0scj1pLnNlbGVj
dG9yKyIgIixvW3JdPT09dCYmKG9bcl09aS5uZWVkc0NvbnRleHQ/YihyLHRoaXMpLmluZGV4KGwp
Pj0wOmIuZmluZChyLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksb1tyXSYmby5wdXNoKGkpO28ubGVu
Z3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIG4ubGVuZ3RoPnUmJnMucHVz
aCh7ZWxlbTp0aGlzLGhhbmRsZXJzOm4uc2xpY2UodSl9KSxzfSxmaXg6ZnVuY3Rpb24oZSl7aWYo
ZVtiLmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scixpPWUudHlwZSxhPWUscz10aGlzLmZpeEhv
b2tzW2ldO3N8fCh0aGlzLmZpeEhvb2tzW2ldPXM9dHQudGVzdChpKT90aGlzLm1vdXNlSG9va3M6
ZXQudGVzdChpKT90aGlzLmtleUhvb2tzOnt9KSxyPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQo
cy5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyBiLkV2ZW50KGEpLHQ9ci5sZW5ndGg7d2hpbGUodC0t
KW49clt0XSxlW25dPWFbbl07cmV0dXJuIGUudGFyZ2V0fHwoZS50YXJnZXQ9YS5zcmNFbGVtZW50
fHxvKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2Rl
KSxlLm1ldGFLZXk9ISFlLm1ldGFLZXkscy5maWx0ZXI/cy5maWx0ZXIoZSxhKTplfSxwcm9wczoi
YWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFz
ZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdo
aWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29k
ZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVs
bD09ZS53aGljaCYmKGUud2hpY2g9bnVsbCE9dC5jaGFyQ29kZT90LmNoYXJDb2RlOnQua2V5Q29k
ZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkg
ZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0
b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxhLHM9bi5i
dXR0b24sdT1uLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1lLnBhZ2VYJiZudWxsIT1uLmNsaWVu
dFgmJihpPWUudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fG8sYT1pLmRvY3VtZW50RWxlbWVudCxyPWku
Ym9keSxlLnBhZ2VYPW4uY2xpZW50WCsoYSYmYS5zY3JvbGxMZWZ0fHxyJiZyLnNjcm9sbExlZnR8
fDApLShhJiZhLmNsaWVudExlZnR8fHImJnIuY2xpZW50TGVmdHx8MCksZS5wYWdlWT1uLmNsaWVu
dFkrKGEmJmEuc2Nyb2xsVG9wfHxyJiZyLnNjcm9sbFRvcHx8MCktKGEmJmEuY2xpZW50VG9wfHxy
JiZyLmNsaWVudFRvcHx8MCkpLCFlLnJlbGF0ZWRUYXJnZXQmJnUmJihlLnJlbGF0ZWRUYXJnZXQ9
dT09PWUudGFyZ2V0P24udG9FbGVtZW50OnUpLGUud2hpY2h8fHM9PT10fHwoZS53aGljaD0xJnM/
MToyJnM/Mzo0JnM/MjowKSxlfX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOnt0
cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcywiaW5wdXQiKSYmImNoZWNr
Ym94Ij09PXRoaXMudHlwZSYmdGhpcy5jbGljaz8odGhpcy5jbGljaygpLCExKTp0fX0sZm9jdXM6
e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09by5hY3RpdmVFbGVtZW50JiZ0aGlzLmZvY3Vz
KXRyeXtyZXR1cm4gdGhpcy5mb2N1cygpLCExfWNhdGNoKGUpe319LGRlbGVnYXRlVHlwZToiZm9j
dXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PW8uYWN0aXZlRWxl
bWVudCYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dH0sZGVsZWdhdGVUeXBlOiJmb2N1c291
dCJ9LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UucmVzdWx0IT09dCYm
KGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rp
b24oZSx0LG4scil7dmFyIGk9Yi5leHRlbmQobmV3IGIuRXZlbnQsbix7dHlwZTplLGlzU2ltdWxh
dGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP2IuZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6Yi5l
dmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50
RGVmYXVsdCgpfX0sYi5yZW1vdmVFdmVudD1vLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24o
ZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwh
MSl9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0ib24iK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBl
W3JdPT09aSYmKGVbcl09bnVsbCksZS5kZXRhY2hFdmVudChyLG4pKX0sYi5FdmVudD1mdW5jdGlv
bihlLG4pe3JldHVybiB0aGlzIGluc3RhbmNlb2YgYi5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9y
aWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUu
ZGVmYXVsdFByZXZlbnRlZHx8ZS5yZXR1cm5WYWx1ZT09PSExfHxlLmdldFByZXZlbnREZWZhdWx0
JiZlLmdldFByZXZlbnREZWZhdWx0KCk/aXQ6b3QpOnRoaXMudHlwZT1lLG4mJmIuZXh0ZW5kKHRo
aXMsbiksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fGIubm93KCksdGhpc1tiLmV4cGFu
ZG9dPSEwLHQpOm5ldyBiLkV2ZW50KGUsbil9LGIuRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQ
cmV2ZW50ZWQ6b3QsaXNQcm9wYWdhdGlvblN0b3BwZWQ6b3QsaXNJbW1lZGlhdGVQcm9wYWdhdGlv
blN0b3BwZWQ6b3QscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFs
RXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9aXQsZSYmKGUucHJldmVudERlZmF1bHQ/ZS5w
cmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rp
b24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1p
dCxlJiYoZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksZS5jYW5jZWxCdWJi
bGU9ITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRp
YXRlUHJvcGFnYXRpb25TdG9wcGVkPWl0LHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxiLmVhY2go
e21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihl
LHQpe2IuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6
ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LG89ZS5oYW5kbGVPYmo7
CnJldHVybighaXx8aSE9PXImJiFiLmNvbnRhaW5zKHIsaSkpJiYoZS50eXBlPW8ub3JpZ1R5cGUs
bj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSxiLnN1cHBv
cnQuc3VibWl0QnViYmxlc3x8KGIuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9u
KCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOihiLmV2ZW50LmFkZCh0aGlzLCJj
bGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0
LHI9Yi5ub2RlTmFtZShuLCJpbnB1dCIpfHxiLm5vZGVOYW1lKG4sImJ1dHRvbiIpP24uZm9ybTp0
O3ImJiFiLl9kYXRhKHIsInN1Ym1pdEJ1YmJsZXMiKSYmKGIuZXZlbnQuYWRkKHIsInN1Ym1pdC5f
c3VibWl0IixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksYi5fZGF0YShyLCJzdWJt
aXRCdWJibGVzIiwhMCkpfSksdCl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLl9zdWJtaXRf
YnViYmxlJiYoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhZS5pc1Ry
aWdnZXImJmIuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0s
dGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gYi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6KGIu
ZXZlbnQucmVtb3ZlKHRoaXMsIi5fc3VibWl0IiksdCl9fSksYi5zdXBwb3J0LmNoYW5nZUJ1YmJs
ZXN8fChiLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBaLnRl
c3QodGhpcy5ub2RlTmFtZSk/KCgiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhp
cy50eXBlKSYmKGIuZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0
aW9uKGUpeyJjaGVja2VkIj09PWUub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9q
dXN0X2NoYW5nZWQ9ITApfSksYi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rp
b24oZSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhZS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5n
ZWQ9ITEpLGIuZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxlLCEwKX0pKSwhMSk6KGIuZXZl
bnQuYWRkKHRoaXMsImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciB0PWUu
dGFyZ2V0O1oudGVzdCh0Lm5vZGVOYW1lKSYmIWIuX2RhdGEodCwiY2hhbmdlQnViYmxlcyIpJiYo
Yi5ldmVudC5hZGQodCwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpeyF0aGlzLnBhcmVudE5v
ZGV8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHxiLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2Ui
LHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLGIuX2RhdGEodCwiY2hhbmdlQnViYmxlcyIsITApKX0p
LHQpfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQ7cmV0dXJuIHRoaXMhPT1ufHxl
LmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8InJhZGlvIiE9PW4udHlwZSYmImNoZWNrYm94IiE9
PW4udHlwZT9lLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0fSx0ZWFy
ZG93bjpmdW5jdGlvbigpe3JldHVybiBiLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFa
LnRlc3QodGhpcy5ub2RlTmFtZSl9fSksYi5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHxiLmVhY2go
e2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxy
PWZ1bmN0aW9uKGUpe2IuZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxiLmV2ZW50LmZpeChlKSwh
MCl9O2IuZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2
ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92
ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSksYi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsbixy
LGksbyl7dmFyIGEscztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgbiYm
KHI9cnx8bixuPXQpO2ZvcihhIGluIGUpdGhpcy5vbihhLG4scixlW2FdLG8pO3JldHVybiB0aGlz
fWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBl
b2Ygbj8oaT1yLHI9dCk6KGk9cixyPW4sbj10KSksaT09PSExKWk9b3Q7ZWxzZSBpZighaSlyZXR1
cm4gdGhpcztyZXR1cm4gMT09PW8mJihzPWksaT1mdW5jdGlvbihlKXtyZXR1cm4gYigpLm9mZihl
KSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5ndWlkPXMuZ3VpZHx8KHMuZ3VpZD1iLmd1aWQr
KykpLHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQuYWRkKHRoaXMsZSxpLHIsbil9KX0sb25l
OmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlv
bihlLG4scil7dmFyIGksbztpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1
cm4gaT1lLmhhbmRsZU9iaixiKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZT9pLm9y
aWdUeXBlKyIuIitpLm5hbWVzcGFjZTppLm9yaWdUeXBlLGkuc2VsZWN0b3IsaS5oYW5kbGVyKSx0
aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKG8gaW4gZSl0aGlzLm9mZihvLG4sZVtvXSk7
cmV0dXJuIHRoaXN9cmV0dXJuKG49PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIG4pJiYocj1uLG49
dCkscj09PSExJiYocj1vdCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC5yZW1vdmUodGhp
cyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQs
bil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVn
YXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRl
OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwi
KioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4g
dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2Vy
SGFuZGxlcjpmdW5jdGlvbihlLG4pe3ZhciByPXRoaXNbMF07cmV0dXJuIHI/Yi5ldmVudC50cmln
Z2VyKGUsbixyLCEwKTp0fX0pLGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzLHUsbCxjLHAs
ZixkLGgsZyxtLHksdix4PSJzaXp6bGUiKy1uZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD17fSxOPTAs
Qz0wLGs9aXQoKSxFPWl0KCksUz1pdCgpLEE9dHlwZW9mIHQsaj0xPDwzMSxEPVtdLEw9RC5wb3As
SD1ELnB1c2gscT1ELnNsaWNlLE09RC5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhp
cy5sZW5ndGg7Zm9yKDtuPnQ7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxf
PSJbXFx4MjBcXHRcXHJcXG5cXGZdIixGPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0p
KyIsTz1GLnJlcGxhY2UoInciLCJ3IyIpLEI9IihbKl4kfCF+XT89KSIsUD0iXFxbIitfKyIqKCIr
RisiKSIrXysiKig/OiIrQitfKyIqKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcM3wo
IitPKyIpfCl8KSIrXysiKlxcXSIsUj0iOigiK0YrIikoPzpcXCgoKFsnXCJdKSgoPzpcXFxcLnxb
XlxcXFxdKSo/KVxcM3woKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1AucmVwbGFjZSgzLDgpKyIp
Kil8LiopXFwpfCkiLFc9UmVnRXhwKCJeIitfKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKiki
K18rIiskIiwiZyIpLCQ9UmVnRXhwKCJeIitfKyIqLCIrXysiKiIpLEk9UmVnRXhwKCJeIitfKyIq
KFtcXHgyMFxcdFxcclxcblxcZj4rfl0pIitfKyIqIiksej1SZWdFeHAoUiksWD1SZWdFeHAoIl4i
K08rIiQiKSxVPXtJRDpSZWdFeHAoIl4jKCIrRisiKSIpLENMQVNTOlJlZ0V4cCgiXlxcLigiK0Yr
IikiKSxOQU1FOlJlZ0V4cCgiXlxcW25hbWU9WydcIl0/KCIrRisiKVsnXCJdP1xcXSIpLFRBRzpS
ZWdFeHAoIl4oIitGLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpSZWdFeHAoIl4iK1ApLFBT
RVVETzpSZWdFeHAoIl4iK1IpLENISUxEOlJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxu
dGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitfKyIqKGV2ZW58b2RkfCgoWystXXwpKFxc
ZCopbnwpIitfKyIqKD86KFsrLV18KSIrXysiKihcXGQrKXwpKSIrXysiKlxcKXwpIiwiaSIpLG5l
ZWRzQ29udGV4dDpSZWdFeHAoIl4iK18rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxm
aXJzdHxsYXN0KSg/OlxcKCIrXysiKigoPzotXFxkKT9cXGQqKSIrXysiKlxcKXwpKD89W14tXXwk
KSIsImkiKX0sVj0vW1x4MjBcdFxyXG5cZl0qWyt+XS8sWT0vXltee10rXHtccypcW25hdGl2ZSBj
b2RlLyxKPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sRz0vXig/OmlucHV0fHNl
bGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFE9L15oXGQkL2ksSz0vJ3xcXC9nLFo9L1w9W1x4MjBc
dFxyXG5cZl0qKFteJyJcXV0qKVtceDIwXHRcclxuXGZdKlxdL2csZXQ9L1xcKFtcZGEtZkEtRl17
MSw2fVtceDIwXHRcclxuXGZdP3wuKS9nLHR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49IjB4Iit0LTY1
NTM2O3JldHVybiBuIT09bj90OjA+bj9TdHJpbmcuZnJvbUNoYXJDb2RlKG4rNjU1MzYpOlN0cmlu
Zy5mcm9tQ2hhckNvZGUoNTUyOTZ8bj4+MTAsNTYzMjB8MTAyMyZuKX07dHJ5e3EuY2FsbCh3LmRv
Y3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApWzBdLm5vZGVUeXBlfWNhdGNoKG50KXtxPWZ1bmN0
aW9uKGUpe3ZhciB0LG49W107d2hpbGUodD10aGlzW2UrK10pbi5wdXNoKHQpO3JldHVybiBufX1m
dW5jdGlvbiBydChlKXtyZXR1cm4gWS50ZXN0KGUrIiIpfWZ1bmN0aW9uIGl0KCl7dmFyIGUsdD1b
XTtyZXR1cm4gZT1mdW5jdGlvbihuLHIpe3JldHVybiB0LnB1c2gobis9IiAiKT5pLmNhY2hlTGVu
Z3RoJiZkZWxldGUgZVt0LnNoaWZ0KCldLGVbbl09cn19ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIGVb
eF09ITAsZX1mdW5jdGlvbiBhdChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXty
ZXR1cm4gZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3Q9bnVsbH19ZnVuY3Rpb24gc3Qo
ZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGYsZyxtLHY7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0
OncpIT09cCYmYyh0KSx0PXR8fHAsbj1ufHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVy
biBuO2lmKDEhPT0ocz10Lm5vZGVUeXBlKSYmOSE9PXMpcmV0dXJuW107aWYoIWQmJiFyKXtpZihp
PUouZXhlYyhlKSlpZihhPWlbMV0pe2lmKDk9PT1zKXtpZihvPXQuZ2V0RWxlbWVudEJ5SWQoYSks
IW98fCFvLnBhcmVudE5vZGUpcmV0dXJuIG47aWYoby5pZD09PWEpcmV0dXJuIG4ucHVzaChvKSxu
fWVsc2UgaWYodC5vd25lckRvY3VtZW50JiYobz10Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5
SWQoYSkpJiZ5KHQsbykmJm8uaWQ9PT1hKXJldHVybiBuLnB1c2gobyksbn1lbHNle2lmKGlbMl0p
cmV0dXJuIEguYXBwbHkobixxLmNhbGwodC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSwwKSksbjtp
ZigoYT1pWzNdKSYmVC5nZXRCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJl
dHVybiBILmFwcGx5KG4scS5jYWxsKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKSwwKSksbn1p
ZihULnFzYSYmIWgudGVzdChlKSl7aWYoZj0hMCxnPXgsbT10LHY9OT09PXMmJmUsMT09PXMmJiJv
YmplY3QiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtsPWZ0KGUpLChmPXQuZ2V0QXR0cmli
dXRlKCJpZCIpKT9nPWYucmVwbGFjZShLLCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixnKSxn
PSJbaWQ9JyIrZysiJ10gIix1PWwubGVuZ3RoO3doaWxlKHUtLSlsW3VdPWcrZHQobFt1XSk7bT1W
LnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx2PWwuam9pbigiLCIpfWlmKHYpdHJ5e3JldHVybiBI
LmFwcGx5KG4scS5jYWxsKG0ucXVlcnlTZWxlY3RvckFsbCh2KSwwKSksbn1jYXRjaChiKXt9Zmlu
YWxseXtmfHx0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiB3dChlLnJlcGxhY2UoVywi
JDEiKSx0LG4scil9YT1zdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3Vt
ZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0s
Yz1zdC5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgbj1lP2Uub3duZXJEb2N1bWVudHx8ZTp3
O3JldHVybiBuIT09cCYmOT09PW4ubm9kZVR5cGUmJm4uZG9jdW1lbnRFbGVtZW50PyhwPW4sZj1u
LmRvY3VtZW50RWxlbWVudCxkPWEobiksVC50YWdOYW1lTm9Db21tZW50cz1hdChmdW5jdGlvbihl
KXtyZXR1cm4gZS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50
c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLFQuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtlLmlu
bmVySFRNTD0iPHNlbGVjdD48L3NlbGVjdD4iO3ZhciB0PXR5cGVvZiBlLmxhc3RDaGlsZC5nZXRB
dHRyaWJ1dGUoIm11bHRpcGxlIik7cmV0dXJuImJvb2xlYW4iIT09dCYmInN0cmluZyIhPT10fSks
VC5nZXRCeUNsYXNzTmFtZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYg
Y2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PiIsZS5nZXRF
bGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGg/
KGUubGFzdENoaWxkLmNsYXNzTmFtZT0iZSIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgi
ZSIpLmxlbmd0aCk6ITF9KSxULmdldEJ5TmFtZT1hdChmdW5jdGlvbihlKXtlLmlkPXgrMCxlLmlu
bmVySFRNTD0iPGEgbmFtZT0nIit4KyInPjwvYT48ZGl2IG5hbWU9JyIreCsiJz48L2Rpdj4iLGYu
aW5zZXJ0QmVmb3JlKGUsZi5maXJzdENoaWxkKTt2YXIgdD1uLmdldEVsZW1lbnRzQnlOYW1lJiZu
LmdldEVsZW1lbnRzQnlOYW1lKHgpLmxlbmd0aD09PTIrbi5nZXRFbGVtZW50c0J5TmFtZSh4KzAp
Lmxlbmd0aDtyZXR1cm4gVC5nZXRJZE5vdE5hbWU9IW4uZ2V0RWxlbWVudEJ5SWQoeCksZi5yZW1v
dmVDaGlsZChlKSx0fSksaS5hdHRySGFuZGxlPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVy
SFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxk
LmdldEF0dHJpYnV0ZSE9PUEmJiIjIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYi
KX0pP3t9OntocmVmOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9
LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJ0eXBlIil9fSxULmdldElk
Tm90TmFtZT8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5
SWQhPT1BJiYhZCl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbiYmbi5wYXJlbnRO
b2RlP1tuXTpbXX19LGkuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShldCx0
dCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSk6
KGkuZmluZC5JRD1mdW5jdGlvbihlLG4pe2lmKHR5cGVvZiBuLmdldEVsZW1lbnRCeUlkIT09QSYm
IWQpe3ZhciByPW4uZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIHI/ci5pZD09PWV8fHR5cGVvZiBy
LmdldEF0dHJpYnV0ZU5vZGUhPT1BJiZyLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9PT1l
P1tyXTp0OltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGV0LHR0
KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSE9PUEm
JmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSksaS5maW5k
LlRBRz1ULnRhZ05hbWVOb0NvbW1lbnRzP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdl
dEVsZW1lbnRzQnlUYWdOYW1lIT09QT9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOnR9OmZ1bmN0
aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIq
Ij09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9
cmV0dXJuIG99LGkuZmluZC5OQU1FPVQuZ2V0QnlOYW1lJiZmdW5jdGlvbihlLG4pe3JldHVybiB0
eXBlb2Ygbi5nZXRFbGVtZW50c0J5TmFtZSE9PUE/bi5nZXRFbGVtZW50c0J5TmFtZShuYW1lKTp0
fSxpLmZpbmQuQ0xBU1M9VC5nZXRCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHlw
ZW9mIG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT09PUF8fGQ/dDpuLmdldEVsZW1lbnRzQnlDbGFz
c05hbWUoZSl9LGc9W10saD1bIjpmb2N1cyJdLChULnFzYT1ydChuLnF1ZXJ5U2VsZWN0b3JBbGwp
KSYmKGF0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9
Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5s
ZW5ndGh8fGgucHVzaCgiXFxbIitfKyIqKD86Y2hlY2tlZHxkaXNhYmxlZHxpc21hcHxtdWx0aXBs
ZXxyZWFkb25seXxzZWxlY3RlZHx2YWx1ZSkiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2Vk
IikubGVuZ3RofHxoLnB1c2goIjpjaGVja2VkIil9KSxhdChmdW5jdGlvbihlKXtlLmlubmVySFRN
TD0iPGlucHV0IHR5cGU9J2hpZGRlbicgaT0nJy8+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpXj0n
J10iKS5sZW5ndGgmJmgucHVzaCgiWypeJF09IitfKyIqKD86XCJcInwnJykiKSxlLnF1ZXJ5U2Vs
ZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxoLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVk
IiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksaC5wdXNoKCIsLio6Iil9KSksKFQubWF0Y2hl
c1NlbGVjdG9yPXJ0KG09Zi5tYXRjaGVzU2VsZWN0b3J8fGYubW96TWF0Y2hlc1NlbGVjdG9yfHxm
LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1Nl
bGVjdG9yKSkmJmF0KGZ1bmN0aW9uKGUpe1QuZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRp
diIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixSKX0pLGg9UmVnRXhwKGguam9p
bigifCIpKSxnPVJlZ0V4cChnLmpvaW4oInwiKSkseT1ydChmLmNvbnRhaW5zKXx8Zi5jb21wYXJl
RG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9j
dW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09
ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQ
b3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQp
e2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LHY9
Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiBlPT09
dD8odT0hMCwwKToocj10LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVu
dFBvc2l0aW9uJiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpKT8xJnJ8fGUucGFyZW50Tm9k
ZSYmMTE9PT1lLnBhcmVudE5vZGUubm9kZVR5cGU/ZT09PW58fHkodyxlKT8tMTp0PT09bnx8eSh3
LHQpPzE6MDo0JnI/LTE6MTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uPy0xOjF9OmZ1bmN0aW9u
KGUsdCl7dmFyIHIsaT0wLG89ZS5wYXJlbnROb2RlLGE9dC5wYXJlbnROb2RlLHM9W2VdLGw9W3Rd
O2lmKGU9PT10KXJldHVybiB1PSEwLDA7aWYoIW98fCFhKXJldHVybiBlPT09bj8tMTp0PT09bj8x
Om8/LTE6YT8xOjA7aWYobz09PWEpcmV0dXJuIHV0KGUsdCk7cj1lO3doaWxlKHI9ci5wYXJlbnRO
b2RlKXMudW5zaGlmdChyKTtyPXQ7d2hpbGUocj1yLnBhcmVudE5vZGUpbC51bnNoaWZ0KHIpO3do
aWxlKHNbaV09PT1sW2ldKWkrKztyZXR1cm4gaT91dChzW2ldLGxbaV0pOnNbaV09PT13Py0xOmxb
aV09PT13PzE6MH0sdT0hMSxbMCwwXS5zb3J0KHYpLFQuZGV0ZWN0RHVwbGljYXRlcz11LHApOnB9
LHN0Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gc3QoZSxudWxsLG51bGwsdCl9LHN0Lm1h
dGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYm
YyhlKSx0PXQucmVwbGFjZShaLCI9JyQxJ10iKSwhKCFULm1hdGNoZXNTZWxlY3Rvcnx8ZHx8ZyYm
Zy50ZXN0KHQpfHxoLnRlc3QodCkpKXRyeXt2YXIgbj1tLmNhbGwoZSx0KTtpZihufHxULmRpc2Nv
bm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJu
IG59Y2F0Y2gocil7fXJldHVybiBzdCh0LHAsbnVsbCxbZV0pLmxlbmd0aD4wfSxzdC5jb250YWlu
cz1mdW5jdGlvbihlLHQpe3JldHVybihlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx5KGUs
dCl9LHN0LmF0dHI9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxl
KSE9PXAmJmMoZSksZHx8KHQ9dC50b0xvd2VyQ2FzZSgpKSwobj1pLmF0dHJIYW5kbGVbdF0pP24o
ZSk6ZHx8VC5hdHRyaWJ1dGVzP2UuZ2V0QXR0cmlidXRlKHQpOigobj1lLmdldEF0dHJpYnV0ZU5v
ZGUodCkpfHxlLmdldEF0dHJpYnV0ZSh0KSkmJmVbdF09PT0hMD90Om4mJm4uc3BlY2lmaWVkP24u
dmFsdWU6bnVsbH0sc3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJv
ciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LHN0LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24o
ZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2lmKHU9IVQuZGV0ZWN0RHVwbGljYXRlcyxlLnNvcnQodiks
dSl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUu
c3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9O2Z1bmN0aW9uIHV0KGUsdCl7dmFyIG49dCYmZSxyPW4m
Jih+dC5zb3VyY2VJbmRleHx8aiktKH5lLnNvdXJjZUluZGV4fHxqKTtpZihyKXJldHVybiByO2lm
KG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9
ZnVuY3Rpb24gbHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dl
ckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09biYmdC50eXBlPT09ZX19ZnVuY3Rpb24gY3QoZSl7cmV0
dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlu
cHV0Ij09PW58fCJidXR0b24iPT09bikmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHB0KGUpe3JldHVy
biBvdChmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxvdChmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShb
XSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltp
XT1uW2ldKSl9KX0pfW89c3QuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPSIiLHI9MCxpPWUu
bm9kZVR5cGU7aWYoaSl7aWYoMT09PWl8fDk9PT1pfHwxMT09PWkpe2lmKCJzdHJpbmciPT10eXBl
b2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7
ZTtlPWUubmV4dFNpYmxpbmcpbis9byhlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5u
b2RlVmFsdWV9ZWxzZSBmb3IoO3Q9ZVtyXTtyKyspbis9byh0KTtyZXR1cm4gbn0saT1zdC5zZWxl
Y3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpvdCxtYXRjaDpVLGZpbmQ6e30scmVs
YXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5v
ZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZp
b3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsx
XS5yZXBsYWNlKGV0LHR0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShldCx0dCksIn49
Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlv
bihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAs
Myk/KGVbM118fHN0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJl
dmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVsz
XSkpOmVbM10mJnN0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFl
WzVdJiZlWzJdO3JldHVybiBVLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVs0XT9lWzJdPWVbNF06
biYmei50ZXN0KG4pJiYodD1mdChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCkt
bi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xp
Y2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9u
KCl7cmV0dXJuITB9OihlPWUucmVwbGFjZShldCx0dCkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0
KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFT
UzpmdW5jdGlvbihlKXt2YXIgdD1rW2UrIiAiXTtyZXR1cm4gdHx8KHQ9UmVnRXhwKCIoXnwiK18r
IikiK2UrIigiK18rInwkKSIpKSYmayhlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoZS5jbGFz
c05hbWV8fHR5cGVvZiBlLmdldEF0dHJpYnV0ZSE9PUEmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIp
fHwiIil9KX0sQVRUUjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPXN0
LmF0dHIocixlKTtyZXR1cm4gbnVsbD09aT8iIT0iPT09dDp0PyhpKz0iIiwiPSI9PT10P2k9PT1u
OiIhPSI9PT10P2khPT1uOiJePSI9PT10P24mJjA9PT1pLmluZGV4T2Yobik6Iio9Ij09PXQ/biYm
aS5pbmRleE9mKG4pPi0xOiIkPSI9PT10P24mJmkuc2xpY2UoLW4ubGVuZ3RoKT09PW46In49Ij09
PXQ/KCIgIitpKyIgIikuaW5kZXhPZihuKT4tMToifD0iPT09dD9pPT09bnx8aS5zbGljZSgwLG4u
bGVuZ3RoKzEpPT09bisiLSI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIg
bz0ibnRoIiE9PWUuc2xpY2UoMCwzKSxhPSJsYXN0IiE9PWUuc2xpY2UoLTQpLHM9Im9mLXR5cGUi
PT09dDtyZXR1cm4gMT09PXImJjA9PT1pP2Z1bmN0aW9uKGUpe3JldHVybiEhZS5wYXJlbnROb2Rl
fTpmdW5jdGlvbih0LG4sdSl7dmFyIGwsYyxwLGYsZCxoLGc9byE9PWE/Im5leHRTaWJsaW5nIjoi
cHJldmlvdXNTaWJsaW5nIixtPXQucGFyZW50Tm9kZSx5PXMmJnQubm9kZU5hbWUudG9Mb3dlckNh
c2UoKSx2PSF1JiYhcztpZihtKXtpZihvKXt3aGlsZShnKXtwPXQ7d2hpbGUocD1wW2ddKWlmKHM/
cC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09eToxPT09cC5ub2RlVHlwZSlyZXR1cm4hMTtoPWc9
Im9ubHkiPT09ZSYmIWgmJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYoaD1bYT9tLmZpcnN0Q2hp
bGQ6bS5sYXN0Q2hpbGRdLGEmJnYpe2M9bVt4XXx8KG1beF09e30pLGw9Y1tlXXx8W10sZD1sWzBd
PT09TiYmbFsxXSxmPWxbMF09PT1OJiZsWzJdLHA9ZCYmbS5jaGlsZE5vZGVzW2RdO3doaWxlKHA9
KytkJiZwJiZwW2ddfHwoZj1kPTApfHxoLnBvcCgpKWlmKDE9PT1wLm5vZGVUeXBlJiYrK2YmJnA9
PT10KXtjW2VdPVtOLGQsZl07YnJlYWt9fWVsc2UgaWYodiYmKGw9KHRbeF18fCh0W3hdPXt9KSlb
ZV0pJiZsWzBdPT09TilmPWxbMV07ZWxzZSB3aGlsZShwPSsrZCYmcCYmcFtnXXx8KGY9ZD0wKXx8
aC5wb3AoKSlpZigocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBl
KSYmKytmJiYodiYmKChwW3hdfHwocFt4XT17fSkpW2VdPVtOLGZdKSxwPT09dCkpYnJlYWs7cmV0
dXJuIGYtPWksZj09PXJ8fDA9PT1mJXImJmYvcj49MH19fSxQU0VVRE86ZnVuY3Rpb24oZSx0KXt2
YXIgbixyPWkucHNldWRvc1tlXXx8aS5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHN0LmVy
cm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIHJbeF0/cih0KTpyLmxlbmd0aD4x
PyhuPVtlLGUsIiIsdF0saS5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2Uo
KSk/b3QoZnVuY3Rpb24oZSxuKXt2YXIgaSxvPXIoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSlp
PU0uY2FsbChlLG9bYV0pLGVbaV09IShuW2ldPW9bYV0pfSk6ZnVuY3Rpb24oZSl7cmV0dXJuIHIo
ZSwwLG4pfSk6cn19LHBzZXVkb3M6e25vdDpvdChmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9
cyhlLnJlcGxhY2UoVywiJDEiKSk7cmV0dXJuIHJbeF0/b3QoZnVuY3Rpb24oZSx0LG4saSl7dmFy
IG8sYT1yKGUsbnVsbCxpLFtdKSxzPWUubGVuZ3RoO3doaWxlKHMtLSkobz1hW3NdKSYmKGVbc109
ISh0W3NdPW8pKX0pOmZ1bmN0aW9uKGUsaSxvKXtyZXR1cm4gdFswXT1lLHIodCxudWxsLG8sbiks
IW4ucG9wKCl9fSksaGFzOm90KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4g
c3QoZSx0KS5sZW5ndGg+MH19KSxjb250YWluczpvdChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rp
b24odCl7cmV0dXJuKHQudGV4dENvbnRlbnR8fHQuaW5uZXJUZXh0fHxvKHQpKS5pbmRleE9mKGUp
Pi0xfX0pLGxhbmc6b3QoZnVuY3Rpb24oZSl7cmV0dXJuIFgudGVzdChlfHwiIil8fHN0LmVycm9y
KCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKGV0LHR0KS50b0xvd2VyQ2FzZSgp
LGZ1bmN0aW9uKHQpe3ZhciBuO2RvIGlmKG49ZD90LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8
dC5nZXRBdHRyaWJ1dGUoImxhbmciKTp0LmxhbmcpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49
PT1lfHwwPT09bi5pbmRleE9mKGUrIi0iKTt3aGlsZSgodD10LnBhcmVudE5vZGUpJiYxPT09dC5u
b2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWUubG9jYXRpb24m
JmUubG9jYXRpb24uaGFzaDtyZXR1cm4gbiYmbi5zbGljZSgxKT09PXQuaWR9LHJvb3Q6ZnVuY3Rp
b24oZSl7cmV0dXJuIGU9PT1mfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXAuYWN0aXZl
RWxlbWVudCYmKCFwLmhhc0ZvY3VzfHxwLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8
fmUudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9
LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVu
Y3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10
JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0
aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUu
c2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1l
Lm5leHRTaWJsaW5nKWlmKGUubm9kZU5hbWU+IkAifHwzPT09ZS5ub2RlVHlwZXx8ND09PWUubm9k
ZVR5cGUpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4haS5wc2V1
ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1l
KX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEcudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1
bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09
dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIg
dDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5
cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09
ZS50eXBlKX0sZmlyc3Q6cHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnB0KGZ1bmN0aW9u
KGUsdCl7cmV0dXJuW3QtMV19KSxlcTpwdChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6
bl19KSxldmVuOnB0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChu
KTtyZXR1cm4gZX0pLG9kZDpwdChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9Mill
LnB1c2gobik7cmV0dXJuIGV9KSxsdDpwdChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpu
O2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpwdChmdW5jdGlvbihlLHQsbil7
dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX07Zm9yKG4g
aW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5w
c2V1ZG9zW25dPWx0KG4pO2ZvcihuIGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW25d
PWN0KG4pO2Z1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scixvLGEscyx1LGwsYz1FW2UrIiAiXTtpZihj
KXJldHVybiB0PzA6Yy5zbGljZSgwKTtzPWUsdT1bXSxsPWkucHJlRmlsdGVyO3doaWxlKHMpeygh
bnx8KHI9JC5leGVjKHMpKSkmJihyJiYocz1zLnNsaWNlKHJbMF0ubGVuZ3RoKXx8cyksdS5wdXNo
KG89W10pKSxuPSExLChyPUkuZXhlYyhzKSkmJihuPXIuc2hpZnQoKSxvLnB1c2goe3ZhbHVlOm4s
dHlwZTpyWzBdLnJlcGxhY2UoVywiICIpfSkscz1zLnNsaWNlKG4ubGVuZ3RoKSk7Zm9yKGEgaW4g
aS5maWx0ZXIpIShyPVVbYV0uZXhlYyhzKSl8fGxbYV0mJiEocj1sW2FdKHIpKXx8KG49ci5zaGlm
dCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmEsbWF0Y2hlczpyfSkscz1zLnNsaWNlKG4ubGVuZ3Ro
KSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/cy5sZW5ndGg6cz9zdC5lcnJvcihlKTpFKGUsdSkuc2xp
Y2UoMCl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9MCxuPWUubGVuZ3RoLHI9IiI7Zm9yKDtuPnQ7dCsr
KXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gaHQoZSx0LG4pe3ZhciBpPXQuZGlyLG89
biYmInBhcmVudE5vZGUiPT09aSxhPUMrKztyZXR1cm4gdC5maXJzdD9mdW5jdGlvbih0LG4scil7
d2hpbGUodD10W2ldKWlmKDE9PT10Lm5vZGVUeXBlfHxvKXJldHVybiBlKHQsbixyKX06ZnVuY3Rp
b24odCxuLHMpe3ZhciB1LGwsYyxwPU4rIiAiK2E7aWYocyl7d2hpbGUodD10W2ldKWlmKCgxPT09
dC5ub2RlVHlwZXx8bykmJmUodCxuLHMpKXJldHVybiEwfWVsc2Ugd2hpbGUodD10W2ldKWlmKDE9
PT10Lm5vZGVUeXBlfHxvKWlmKGM9dFt4XXx8KHRbeF09e30pLChsPWNbaV0pJiZsWzBdPT09cCl7
aWYoKHU9bFsxXSk9PT0hMHx8dT09PXIpcmV0dXJuIHU9PT0hMH1lbHNlIGlmKGw9Y1tpXT1bcF0s
bFsxXT1lKHQsbixzKXx8cixsWzFdPT09ITApcmV0dXJuITB9fWZ1bmN0aW9uIGd0KGUpe3JldHVy
biBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXt2YXIgaT1lLmxlbmd0aDt3aGlsZShpLS0paWYo
IWVbaV0odCxuLHIpKXJldHVybiExO3JldHVybiEwfTplWzBdfWZ1bmN0aW9uIG10KGUsdCxuLHIs
aSl7dmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7Zm9yKDt1PnM7cysrKShvPWVb
c10pJiYoIW58fG4obyxyLGkpKSYmKGEucHVzaChvKSxsJiZ0LnB1c2gocykpO3JldHVybiBhfWZ1
bmN0aW9uIHl0KGUsdCxuLHIsaSxvKXtyZXR1cm4gciYmIXJbeF0mJihyPXl0KHIpKSxpJiYhaVt4
XSYmKGk9eXQoaSxvKSksb3QoZnVuY3Rpb24obyxhLHMsdSl7dmFyIGwsYyxwLGY9W10sZD1bXSxo
PWEubGVuZ3RoLGc9b3x8eHQodHx8IioiLHMubm9kZVR5cGU/W3NdOnMsW10pLG09IWV8fCFvJiZ0
P2c6bXQoZyxmLGUscyx1KSx5PW4/aXx8KG8/ZTpofHxyKT9bXTphOm07aWYobiYmbihtLHkscyx1
KSxyKXtsPW10KHksZCkscihsLFtdLHMsdSksYz1sLmxlbmd0aDt3aGlsZShjLS0pKHA9bFtjXSkm
Jih5W2RbY11dPSEobVtkW2NdXT1wKSl9aWYobyl7aWYoaXx8ZSl7aWYoaSl7bD1bXSxjPXkubGVu
Z3RoO3doaWxlKGMtLSkocD15W2NdKSYmbC5wdXNoKG1bY109cCk7aShudWxsLHk9W10sbCx1KX1j
PXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmKGw9aT9NLmNhbGwobyxwKTpmW2NdKT4tMSYm
KG9bbF09IShhW2xdPXApKX19ZWxzZSB5PW10KHk9PT1hP3kuc3BsaWNlKGgseS5sZW5ndGgpOnkp
LGk/aShudWxsLGEseSx1KTpILmFwcGx5KGEseSl9KX1mdW5jdGlvbiB2dChlKXt2YXIgdCxuLHIs
bz1lLmxlbmd0aCxhPWkucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fGkucmVsYXRpdmVbIiAiXSx1
PWE/MTowLGM9aHQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxwPWh0KGZ1bmN0aW9u
KGUpe3JldHVybiBNLmNhbGwodCxlKT4tMX0scywhMCksZj1bZnVuY3Rpb24oZSxuLHIpe3JldHVy
biFhJiYocnx8biE9PWwpfHwoKHQ9bikubm9kZVR5cGU/YyhlLG4scik6cChlLG4scikpfV07Zm9y
KDtvPnU7dSsrKWlmKG49aS5yZWxhdGl2ZVtlW3VdLnR5cGVdKWY9W2h0KGd0KGYpLG4pXTtlbHNl
e2lmKG49aS5maWx0ZXJbZVt1XS50eXBlXS5hcHBseShudWxsLGVbdV0ubWF0Y2hlcyksblt4XSl7
Zm9yKHI9Kyt1O28+cjtyKyspaWYoaS5yZWxhdGl2ZVtlW3JdLnR5cGVdKWJyZWFrO3JldHVybiB5
dCh1PjEmJmd0KGYpLHU+MSYmZHQoZS5zbGljZSgwLHUtMSkpLnJlcGxhY2UoVywiJDEiKSxuLHI+
dSYmdnQoZS5zbGljZSh1LHIpKSxvPnImJnZ0KGU9ZS5zbGljZShyKSksbz5yJiZkdChlKSl9Zi5w
dXNoKG4pfXJldHVybiBndChmKX1mdW5jdGlvbiBidChlLHQpe3ZhciBuPTAsbz10Lmxlbmd0aD4w
LGE9ZS5sZW5ndGg+MCxzPWZ1bmN0aW9uKHMsdSxjLGYsZCl7dmFyIGgsZyxtLHk9W10sdj0wLGI9
IjAiLHg9cyYmW10sdz1udWxsIT1kLFQ9bCxDPXN8fGEmJmkuZmluZC5UQUcoIioiLGQmJnUucGFy
ZW50Tm9kZXx8dSksaz1OKz1udWxsPT1UPzE6TWF0aC5yYW5kb20oKXx8LjE7Zm9yKHcmJihsPXUh
PT1wJiZ1LHI9bik7bnVsbCE9KGg9Q1tiXSk7YisrKXtpZihhJiZoKXtnPTA7d2hpbGUobT1lW2cr
K10paWYobShoLHUsYykpe2YucHVzaChoKTticmVha313JiYoTj1rLHI9KytuKX1vJiYoKGg9IW0m
JmgpJiZ2LS0scyYmeC5wdXNoKGgpKX1pZih2Kz1iLG8mJmIhPT12KXtnPTA7d2hpbGUobT10W2cr
K10pbSh4LHksdSxjKTtpZihzKXtpZih2PjApd2hpbGUoYi0tKXhbYl18fHlbYl18fCh5W2JdPUwu
Y2FsbChmKSk7eT1tdCh5KX1ILmFwcGx5KGYseSksdyYmIXMmJnkubGVuZ3RoPjAmJnYrdC5sZW5n
dGg+MSYmc3QudW5pcXVlU29ydChmKX1yZXR1cm4gdyYmKE49ayxsPVQpLHh9O3JldHVybiBvP290
KHMpOnN9cz1zdC5jb21waWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPVtdLG89U1tlKyIg
Il07aWYoIW8pe3R8fCh0PWZ0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlvPXZ0KHRbbl0pLG9b
eF0/ci5wdXNoKG8pOmkucHVzaChvKTtvPVMoZSxidChpLHIpKX1yZXR1cm4gb307ZnVuY3Rpb24g
eHQoZSx0LG4pe3ZhciByPTAsaT10Lmxlbmd0aDtmb3IoO2k+cjtyKyspc3QoZSx0W3JdLG4pO3Jl
dHVybiBufWZ1bmN0aW9uIHd0KGUsdCxuLHIpe3ZhciBvLGEsdSxsLGMscD1mdChlKTtpZighciYm
MT09PXAubGVuZ3RoKXtpZihhPXBbMF09cFswXS5zbGljZSgwKSxhLmxlbmd0aD4yJiYiSUQiPT09
KHU9YVswXSkudHlwZSYmOT09PXQubm9kZVR5cGUmJiFkJiZpLnJlbGF0aXZlW2FbMV0udHlwZV0p
e2lmKHQ9aS5maW5kLklEKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LHR0KSx0KVswXSwhdClyZXR1
cm4gbjtlPWUuc2xpY2UoYS5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9bz1VLm5lZWRzQ29udGV4dC50
ZXN0KGUpPzA6YS5sZW5ndGg7d2hpbGUoby0tKXtpZih1PWFbb10saS5yZWxhdGl2ZVtsPXUudHlw
ZV0pYnJlYWs7aWYoKGM9aS5maW5kW2xdKSYmKHI9Yyh1Lm1hdGNoZXNbMF0ucmVwbGFjZShldCx0
dCksVi50ZXN0KGFbMF0udHlwZSkmJnQucGFyZW50Tm9kZXx8dCkpKXtpZihhLnNwbGljZShvLDEp
LGU9ci5sZW5ndGgmJmR0KGEpLCFlKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHIsMCkpLG47YnJl
YWt9fX1yZXR1cm4gcyhlLHApKHIsdCxkLG4sVi50ZXN0KGUpKSxufWkucHNldWRvcy5udGg9aS5w
c2V1ZG9zLmVxO2Z1bmN0aW9uIFR0KCl7fWkuZmlsdGVycz1UdC5wcm90b3R5cGU9aS5wc2V1ZG9z
LGkuc2V0RmlsdGVycz1uZXcgVHQsYygpLHN0LmF0dHI9Yi5hdHRyLGIuZmluZD1zdCxiLmV4cHI9
c3Quc2VsZWN0b3JzLGIuZXhwclsiOiJdPWIuZXhwci5wc2V1ZG9zLGIudW5pcXVlPXN0LnVuaXF1
ZVNvcnQsYi50ZXh0PXN0LmdldFRleHQsYi5pc1hNTERvYz1zdC5pc1hNTCxiLmNvbnRhaW5zPXN0
LmNvbnRhaW5zfShlKTt2YXIgYXQ9L1VudGlsJC8sc3Q9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRp
bHxBbGwpKS8sdXQ9L14uW146I1xbXC4sXSokLyxsdD1iLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0
LGN0PXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2IuZm4uZXh0ZW5k
KHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXMubGVuZ3RoO2lmKCJzdHJpbmciIT10
eXBlb2YgZSlyZXR1cm4gcj10aGlzLHRoaXMucHVzaFN0YWNrKGIoZSkuZmlsdGVyKGZ1bmN0aW9u
KCl7Zm9yKHQ9MDtpPnQ7dCsrKWlmKGIuY29udGFpbnMoclt0XSx0aGlzKSlyZXR1cm4hMH0pKTtm
b3Iobj1bXSx0PTA7aT50O3QrKyliLmZpbmQoZSx0aGlzW3RdLG4pO3JldHVybiBuPXRoaXMucHVz
aFN0YWNrKGk+MT9iLnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPSh0aGlzLnNlbGVjdG9yP3RoaXMu
c2VsZWN0b3IrIiAiOiIiKStlLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPWIoZSx0aGlzKSxy
PW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7cj50O3QrKylp
ZihiLmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVy
biB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpKX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVy
biB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFl
JiYoInN0cmluZyI9PXR5cGVvZiBlP2x0LnRlc3QoZSk/YihlLHRoaXMuY29udGV4dCkuaW5kZXgo
dGhpc1swXSk+PTA6Yi5maWx0ZXIoZSx0aGlzKS5sZW5ndGg+MDp0aGlzLmZpbHRlcihlKS5sZW5n
dGg+MCl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtd
LGE9bHQudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP2IoZSx0fHx0aGlzLmNvbnRleHQpOjA7
Zm9yKDtpPnI7cisrKXtuPXRoaXNbcl07d2hpbGUobiYmbi5vd25lckRvY3VtZW50JiZuIT09dCYm
MTEhPT1uLm5vZGVUeXBlKXtpZihhP2EuaW5kZXgobik+LTE6Yi5maW5kLm1hdGNoZXNTZWxlY3Rv
cihuLGUpKXtvLnB1c2gobik7YnJlYWt9bj1uLnBhcmVudE5vZGV9fXJldHVybiB0aGlzLnB1c2hT
dGFjayhvLmxlbmd0aD4xP2IudW5pcXVlKG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4g
ZT8ic3RyaW5nIj09dHlwZW9mIGU/Yi5pbkFycmF5KHRoaXNbMF0sYihlKSk6Yi5pbkFycmF5KGUu
anF1ZXJ5P2VbMF06ZSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJz
dCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPSJzdHJpbmci
PT10eXBlb2YgZT9iKGUsdCk6Yi5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj1iLm1l
cmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIudW5pcXVlKHIpKX0sYWRk
QmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6
dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksYi5mbi5hbmRTZWxmPWIuZm4uYWRkQmFjaztm
dW5jdGlvbiBwdChlLHQpe2RvIGU9ZVt0XTt3aGlsZShlJiYxIT09ZS5ub2RlVHlwZSk7cmV0dXJu
IGV9Yi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0
JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBiLmRp
cihlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIu
ZGlyKGUsInBhcmVudE5vZGUiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLCJuZXh0
U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLCJwcmV2aW91c1NpYmxpbmci
KX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJl
dkFsbDpmdW5jdGlvbihlKXtyZXR1cm4gYi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRV
bnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJl
dlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixu
KX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZygoZS5wYXJlbnROb2RlfHx7
fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGIuc2libGluZyhl
LmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gYi5ub2RlTmFtZShlLCJp
ZnJhbWUiKT9lLmNvbnRlbnREb2N1bWVudHx8ZS5jb250ZW50V2luZG93LmRvY3VtZW50OmIubWVy
Z2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7Yi5mbltlXT1mdW5jdGlvbihuLHIp
e3ZhciBpPWIubWFwKHRoaXMsdCxuKTtyZXR1cm4gYXQudGVzdChlKXx8KHI9biksciYmInN0cmlu
ZyI9PXR5cGVvZiByJiYoaT1iLmZpbHRlcihyLGkpKSxpPXRoaXMubGVuZ3RoPjEmJiFjdFtlXT9i
LnVuaXF1ZShpKTppLHRoaXMubGVuZ3RoPjEmJnN0LnRlc3QoZSkmJihpPWkucmV2ZXJzZSgpKSx0
aGlzLnB1c2hTdGFjayhpKX19KSxiLmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1
cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoP2IuZmluZC5tYXRjaGVzU2VsZWN0
b3IodFswXSxlKT9bdFswXV06W106Yi5maW5kLm1hdGNoZXMoZSx0KX0sZGlyOmZ1bmN0aW9uKGUs
bixyKXt2YXIgaT1bXSxvPWVbbl07d2hpbGUobyYmOSE9PW8ubm9kZVR5cGUmJihyPT09dHx8MSE9
PW8ubm9kZVR5cGV8fCFiKG8pLmlzKHIpKSkxPT09by5ub2RlVHlwZSYmaS5wdXNoKG8pLG89b1tu
XTtyZXR1cm4gaX0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4
dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVu
Y3Rpb24gZnQoZSx0LG4pe2lmKHQ9dHx8MCxiLmlzRnVuY3Rpb24odCkpcmV0dXJuIGIuZ3JlcChl
LGZ1bmN0aW9uKGUscil7dmFyIGk9ISF0LmNhbGwoZSxyLGUpO3JldHVybiBpPT09bn0pO2lmKHQu
bm9kZVR5cGUpcmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD09PW59KTtp
Zigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciByPWIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiAx
PT09ZS5ub2RlVHlwZX0pO2lmKHV0LnRlc3QodCkpcmV0dXJuIGIuZmlsdGVyKHQsciwhbik7dD1i
LmZpbHRlcih0LHIpfXJldHVybiBiLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gYi5pbkFycmF5
KGUsdCk+PTA9PT1ufSl9ZnVuY3Rpb24gZHQoZSl7dmFyIHQ9aHQuc3BsaXQoInwiKSxuPWUuY3Jl
YXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKG4uY3JlYXRlRWxlbWVudCl3aGlsZSh0Lmxlbmd0aClu
LmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7cmV0dXJuIG59dmFyIGh0PSJhYmJyfGFydGljbGV8YXNp
ZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1
cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNl
Y3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIixndD0vIGpRdWVyeVxkKz0iKD86bnVsbHxcZCspIi9n
LG10PVJlZ0V4cCgiPCg/OiIraHQrIilbXFxzLz5dIiwiaSIpLHl0PS9eXHMrLyx2dD0vPCg/IWFy
ZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+
XSopXC8+L2dpLGJ0PS88KFtcdzpdKykvLHh0PS88dGJvZHkvaSx3dD0vPHwmIz9cdys7LyxUdD0v
PCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLE50PS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLEN0PS9j
aGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGt0PS9eJHxcLyg/OmphdmF8ZWNtYSlz
Y3JpcHQvaSxFdD0vXnRydWVcLyguKikvLFN0PS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/Olxd
XF18LS0pPlxzKiQvZyxBdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+
IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVh
OlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRo
ZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Ri
b2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIs
IjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48
L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6Yi5zdXBwb3J0Lmh0bWxTZXJpYWxpemU/WzAsIiIs
IiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sanQ9ZHQobyksRHQ9anQuYXBwZW5kQ2hpbGQoby5j
cmVhdGVFbGVtZW50KCJkaXYiKSk7QXQub3B0Z3JvdXA9QXQub3B0aW9uLEF0LnRib2R5PUF0LnRm
b290PUF0LmNvbGdyb3VwPUF0LmNhcHRpb249QXQudGhlYWQsQXQudGg9QXQudGQsYi5mbi5leHRl
bmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0
dXJuIGU9PT10P2IudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlz
WzBdLm93bmVyRG9jdW1lbnR8fG8pLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50
cy5sZW5ndGgpfSx3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4g
dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtp
Zih0aGlzWzBdKXt2YXIgdD1iKGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSgh
MCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5j
dGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiYxPT09ZS5maXJzdENoaWxkLm5v
ZGVUeXBlKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlz
fSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuaXNGdW5jdGlvbihlKT90aGlzLmVhY2go
ZnVuY3Rpb24odCl7Yih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNo
KGZ1bmN0aW9uKCl7dmFyIHQ9Yih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBB
bGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1iLmlzRnVuY3Rpb24o
ZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXtiKHRoaXMpLndyYXBBbGwodD9lLmNhbGwo
dGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNo
KGZ1bmN0aW9uKCl7Yi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGIodGhpcykucmVwbGFjZVdpdGgo
dGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5k
b21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09
PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmdGhpcy5hcHBlbmRDaGlsZChlKX0p
fSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCEwLGZ1
bmN0aW9uKGUpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhp
cy5ub2RlVHlwZSkmJnRoaXMuaW5zZXJ0QmVmb3JlKGUsdGhpcy5maXJzdENoaWxkKX0pfSxiZWZv
cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVuY3Rpb24o
ZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9
KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVu
Y3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUs
dGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wO2Zvcig7
bnVsbCE9KG49dGhpc1tyXSk7cisrKSghZXx8Yi5maWx0ZXIoZSxbbl0pLmxlbmd0aD4wKSYmKHR8
fDEhPT1uLm5vZGVUeXBlfHxiLmNsZWFuRGF0YShPdChuKSksbi5wYXJlbnROb2RlJiYodCYmYi5j
b250YWlucyhuLm93bmVyRG9jdW1lbnQsbikmJk10KE90KG4sInNjcmlwdCIpKSxuLnBhcmVudE5v
ZGUucmVtb3ZlQ2hpbGQobikpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0
PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspezE9PT1lLm5vZGVUeXBlJiZiLmNsZWFuRGF0
YShPdChlLCExKSk7d2hpbGUoZS5maXJzdENoaWxkKWUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxk
KTtlLm9wdGlvbnMmJmIubm9kZU5hbWUoZSwic2VsZWN0IikmJihlLm9wdGlvbnMubGVuZ3RoPTAp
fXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0
PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGIuY2xvbmUodGhpcyxlLHQp
fSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFy
IG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIDE9PT1uLm5v
ZGVUeXBlP24uaW5uZXJIVE1MLnJlcGxhY2UoZ3QsIiIpOnQ7aWYoISgic3RyaW5nIiE9dHlwZW9m
IGV8fFR0LnRlc3QoZSl8fCFiLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZSYmbXQudGVzdChlKXx8IWIu
c3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChlKXx8QXRbKGJ0LmV4ZWMoZSl8fFsi
IiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKSl7ZT1lLnJlcGxhY2UodnQsIjwkMT48LyQyPiIpO3Ry
eXtmb3IoO2k+cjtyKyspbj10aGlzW3JdfHx7fSwxPT09bi5ub2RlVHlwZSYmKGIuY2xlYW5EYXRh
KE90KG4sITEpKSxuLmlubmVySFRNTD1lKTtuPTB9Y2F0Y2gobyl7fX1uJiZ0aGlzLmVtcHR5KCku
YXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9u
KGUpe3ZhciB0PWIuaXNGdW5jdGlvbihlKTtyZXR1cm4gdHx8InN0cmluZyI9PXR5cGVvZiBlfHwo
ZT1iKGUpLm5vdCh0aGlzKS5kZXRhY2goKSksdGhpcy5kb21NYW5pcChbZV0sITAsZnVuY3Rpb24o
ZSl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTtuJiYoYih0aGlzKS5y
ZW1vdmUoKSxuLmluc2VydEJlZm9yZShlLHQpKX0pfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJu
IHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLG4scil7ZT1mLmFwcGx5KFtd
LGUpO3ZhciBpLG8sYSxzLHUsbCxjPTAscD10aGlzLmxlbmd0aCxkPXRoaXMsaD1wLTEsZz1lWzBd
LG09Yi5pc0Z1bmN0aW9uKGcpO2lmKG18fCEoMT49cHx8InN0cmluZyIhPXR5cGVvZiBnfHxiLnN1
cHBvcnQuY2hlY2tDbG9uZSkmJkN0LnRlc3QoZykpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihp
KXt2YXIgbz1kLmVxKGkpO20mJihlWzBdPWcuY2FsbCh0aGlzLGksbj9vLmh0bWwoKTp0KSksby5k
b21NYW5pcChlLG4scil9KTtpZihwJiYobD1iLmJ1aWxkRnJhZ21lbnQoZSx0aGlzWzBdLm93bmVy
RG9jdW1lbnQsITEsdGhpcyksaT1sLmZpcnN0Q2hpbGQsMT09PWwuY2hpbGROb2Rlcy5sZW5ndGgm
JihsPWkpLGkpKXtmb3Iobj1uJiZiLm5vZGVOYW1lKGksInRyIikscz1iLm1hcChPdChsLCJzY3Jp
cHQiKSxIdCksYT1zLmxlbmd0aDtwPmM7YysrKW89bCxjIT09aCYmKG89Yi5jbG9uZShvLCEwLCEw
KSxhJiZiLm1lcmdlKHMsT3Qobywic2NyaXB0IikpKSxyLmNhbGwobiYmYi5ub2RlTmFtZSh0aGlz
W2NdLCJ0YWJsZSIpP0x0KHRoaXNbY10sInRib2R5Iik6dGhpc1tjXSxvLGMpO2lmKGEpZm9yKHU9
c1tzLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LGIubWFwKHMscXQpLGM9MDthPmM7YysrKW89c1tj
XSxrdC50ZXN0KG8udHlwZXx8IiIpJiYhYi5fZGF0YShvLCJnbG9iYWxFdmFsIikmJmIuY29udGFp
bnModSxvKSYmKG8uc3JjP2IuYWpheCh7dXJsOm8uc3JjLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNj
cmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSk6Yi5nbG9iYWxFdmFsKChvLnRl
eHR8fG8udGV4dENvbnRlbnR8fG8uaW5uZXJIVE1MfHwiIikucmVwbGFjZShTdCwiIikpKTtsPWk9
bnVsbH1yZXR1cm4gdGhpc319KTtmdW5jdGlvbiBMdChlLHQpe3JldHVybiBlLmdldEVsZW1lbnRz
QnlUYWdOYW1lKHQpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVt
ZW50KHQpKX1mdW5jdGlvbiBIdChlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZU5vZGUoInR5cGUiKTty
ZXR1cm4gZS50eXBlPSh0JiZ0LnNwZWNpZmllZCkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIHF0KGUp
e3ZhciB0PUV0LmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJp
YnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gTXQoZSx0KXt2YXIgbixyPTA7Zm9yKDtudWxsIT0obj1l
W3JdKTtyKyspYi5fZGF0YShuLCJnbG9iYWxFdmFsIiwhdHx8Yi5fZGF0YSh0W3JdLCJnbG9iYWxF
dmFsIikpfWZ1bmN0aW9uIF90KGUsdCl7aWYoMT09PXQubm9kZVR5cGUmJmIuaGFzRGF0YShlKSl7
dmFyIG4scixpLG89Yi5fZGF0YShlKSxhPWIuX2RhdGEodCxvKSxzPW8uZXZlbnRzO2lmKHMpe2Rl
bGV0ZSBhLmhhbmRsZSxhLmV2ZW50cz17fTtmb3IobiBpbiBzKWZvcihyPTAsaT1zW25dLmxlbmd0
aDtpPnI7cisrKWIuZXZlbnQuYWRkKHQsbixzW25dW3JdKX1hLmRhdGEmJihhLmRhdGE9Yi5leHRl
bmQoe30sYS5kYXRhKSl9fWZ1bmN0aW9uIEZ0KGUsdCl7dmFyIG4scixpO2lmKDE9PT10Lm5vZGVU
eXBlKXtpZihuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwhYi5zdXBwb3J0Lm5vQ2xvbmVFdmVu
dCYmdFtiLmV4cGFuZG9dKXtpPWIuX2RhdGEodCk7Zm9yKHIgaW4gaS5ldmVudHMpYi5yZW1vdmVF
dmVudCh0LHIsaS5oYW5kbGUpO3QucmVtb3ZlQXR0cmlidXRlKGIuZXhwYW5kbyl9InNjcmlwdCI9
PT1uJiZ0LnRleHQhPT1lLnRleHQ/KEh0KHQpLnRleHQ9ZS50ZXh0LHF0KHQpKToib2JqZWN0Ij09
PW4/KHQucGFyZW50Tm9kZSYmKHQub3V0ZXJIVE1MPWUub3V0ZXJIVE1MKSxiLnN1cHBvcnQuaHRt
bDVDbG9uZSYmZS5pbm5lckhUTUwmJiFiLnRyaW0odC5pbm5lckhUTUwpJiYodC5pbm5lckhUTUw9
ZS5pbm5lckhUTUwpKToiaW5wdXQiPT09biYmTnQudGVzdChlLnR5cGUpPyh0LmRlZmF1bHRDaGVj
a2VkPXQuY2hlY2tlZD1lLmNoZWNrZWQsdC52YWx1ZSE9PWUudmFsdWUmJih0LnZhbHVlPWUudmFs
dWUpKToib3B0aW9uIj09PW4/dC5kZWZhdWx0U2VsZWN0ZWQ9dC5zZWxlY3RlZD1lLmRlZmF1bHRT
ZWxlY3RlZDooImlucHV0Ij09PW58fCJ0ZXh0YXJlYSI9PT1uKSYmKHQuZGVmYXVsdFZhbHVlPWUu
ZGVmYXVsdFZhbHVlKX19Yi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBl
bmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6
InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXtiLmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9
MCxpPVtdLG89YihlKSxhPW8ubGVuZ3RoLTE7Zm9yKDthPj1yO3IrKyluPXI9PT1hP3RoaXM6dGhp
cy5jbG9uZSghMCksYihvW3JdKVt0XShuKSxkLmFwcGx5KGksbi5nZXQoKSk7cmV0dXJuIHRoaXMu
cHVzaFN0YWNrKGkpfX0pO2Z1bmN0aW9uIE90KGUsbil7dmFyIHIsbyxhPTAscz10eXBlb2YgZS5n
ZXRFbGVtZW50c0J5VGFnTmFtZSE9PWk/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShufHwiKiIpOnR5
cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGwhPT1pP2UucXVlcnlTZWxlY3RvckFsbChufHwiKiIpOnQ7
aWYoIXMpZm9yKHM9W10scj1lLmNoaWxkTm9kZXN8fGU7bnVsbCE9KG89clthXSk7YSsrKSFufHxi
Lm5vZGVOYW1lKG8sbik/cy5wdXNoKG8pOmIubWVyZ2UocyxPdChvLG4pKTtyZXR1cm4gbj09PXR8
fG4mJmIubm9kZU5hbWUoZSxuKT9iLm1lcmdlKFtlXSxzKTpzfWZ1bmN0aW9uIEJ0KGUpe050LnRl
c3QoZS50eXBlKSYmKGUuZGVmYXVsdENoZWNrZWQ9ZS5jaGVja2VkKX1iLmV4dGVuZCh7Y2xvbmU6
ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdT1iLmNvbnRhaW5zKGUub3duZXJEb2N1bWVu
dCxlKTtpZihiLnN1cHBvcnQuaHRtbDVDbG9uZXx8Yi5pc1hNTERvYyhlKXx8IW10LnRlc3QoIjwi
K2Uubm9kZU5hbWUrIj4iKT9vPWUuY2xvbmVOb2RlKCEwKTooRHQuaW5uZXJIVE1MPWUub3V0ZXJI
VE1MLER0LnJlbW92ZUNoaWxkKG89RHQuZmlyc3RDaGlsZCkpLCEoYi5zdXBwb3J0Lm5vQ2xvbmVF
dmVudCYmYi5zdXBwb3J0Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5v
ZGVUeXBlfHxiLmlzWE1MRG9jKGUpKSlmb3Iocj1PdChvKSxzPU90KGUpLGE9MDtudWxsIT0oaT1z
W2FdKTsrK2EpclthXSYmRnQoaSxyW2FdKTtpZih0KWlmKG4pZm9yKHM9c3x8T3QoZSkscj1yfHxP
dChvKSxhPTA7bnVsbCE9KGk9c1thXSk7YSsrKV90KGksclthXSk7ZWxzZSBfdChlLG8pO3JldHVy
biByPU90KG8sInNjcmlwdCIpLHIubGVuZ3RoPjAmJk10KHIsIXUmJk90KGUsInNjcmlwdCIpKSxy
PXM9aT1udWxsLG99LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMs
dSxsLGMscD1lLmxlbmd0aCxmPWR0KHQpLGQ9W10saD0wO2Zvcig7cD5oO2grKylpZihvPWVbaF0s
b3x8MD09PW8paWYoIm9iamVjdCI9PT1iLnR5cGUobykpYi5tZXJnZShkLG8ubm9kZVR5cGU/W29d
Om8pO2Vsc2UgaWYod3QudGVzdChvKSl7cz1zfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVu
dCgiZGl2IikpLHU9KGJ0LmV4ZWMobyl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYz1BdFt1
XXx8QXQuX2RlZmF1bHQscy5pbm5lckhUTUw9Y1sxXStvLnJlcGxhY2UodnQsIjwkMT48LyQyPiIp
K2NbMl0saT1jWzBdO3doaWxlKGktLSlzPXMubGFzdENoaWxkO2lmKCFiLnN1cHBvcnQubGVhZGlu
Z1doaXRlc3BhY2UmJnl0LnRlc3QobykmJmQucHVzaCh0LmNyZWF0ZVRleHROb2RlKHl0LmV4ZWMo
bylbMF0pKSwhYi5zdXBwb3J0LnRib2R5KXtvPSJ0YWJsZSIhPT11fHx4dC50ZXN0KG8pPyI8dGFi
bGU+IiE9PWNbMV18fHh0LnRlc3Qobyk/MDpzOnMuZmlyc3RDaGlsZCxpPW8mJm8uY2hpbGROb2Rl
cy5sZW5ndGg7d2hpbGUoaS0tKWIubm9kZU5hbWUobD1vLmNoaWxkTm9kZXNbaV0sInRib2R5Iikm
JiFsLmNoaWxkTm9kZXMubGVuZ3RoJiZvLnJlbW92ZUNoaWxkKGwpCn1iLm1lcmdlKGQscy5jaGls
ZE5vZGVzKSxzLnRleHRDb250ZW50PSIiO3doaWxlKHMuZmlyc3RDaGlsZClzLnJlbW92ZUNoaWxk
KHMuZmlyc3RDaGlsZCk7cz1mLmxhc3RDaGlsZH1lbHNlIGQucHVzaCh0LmNyZWF0ZVRleHROb2Rl
KG8pKTtzJiZmLnJlbW92ZUNoaWxkKHMpLGIuc3VwcG9ydC5hcHBlbmRDaGVja2VkfHxiLmdyZXAo
T3QoZCwiaW5wdXQiKSxCdCksaD0wO3doaWxlKG89ZFtoKytdKWlmKCghcnx8LTE9PT1iLmluQXJy
YXkobyxyKSkmJihhPWIuY29udGFpbnMoby5vd25lckRvY3VtZW50LG8pLHM9T3QoZi5hcHBlbmRD
aGlsZChvKSwic2NyaXB0IiksYSYmTXQocyksbikpe2k9MDt3aGlsZShvPXNbaSsrXSlrdC50ZXN0
KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIHM9bnVsbCxmfSxjbGVhbkRhdGE6ZnVuY3Rp
b24oZSx0KXt2YXIgbixyLG8sYSxzPTAsdT1iLmV4cGFuZG8sbD1iLmNhY2hlLHA9Yi5zdXBwb3J0
LmRlbGV0ZUV4cGFuZG8sZj1iLmV2ZW50LnNwZWNpYWw7Zm9yKDtudWxsIT0obj1lW3NdKTtzKysp
aWYoKHR8fGIuYWNjZXB0RGF0YShuKSkmJihvPW5bdV0sYT1vJiZsW29dKSl7aWYoYS5ldmVudHMp
Zm9yKHIgaW4gYS5ldmVudHMpZltyXT9iLmV2ZW50LnJlbW92ZShuLHIpOmIucmVtb3ZlRXZlbnQo
bixyLGEuaGFuZGxlKTtsW29dJiYoZGVsZXRlIGxbb10scD9kZWxldGUgblt1XTp0eXBlb2Ygbi5y
ZW1vdmVBdHRyaWJ1dGUhPT1pP24ucmVtb3ZlQXR0cmlidXRlKHUpOm5bdV09bnVsbCxjLnB1c2go
bykpfX19KTt2YXIgUHQsUnQsV3QsJHQ9L2FscGhhXChbXildKlwpL2ksSXQ9L29wYWNpdHlccyo9
XHMqKFteKV0qKS8senQ9L14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvLFh0PS9eKG5vbmV8dGFi
bGUoPyEtY1tlYV0pLispLyxVdD0vXm1hcmdpbi8sVnQ9UmVnRXhwKCJeKCIreCsiKSguKikkIiwi
aSIpLFl0PVJlZ0V4cCgiXigiK3grIikoPyFweClbYS16JV0rJCIsImkiKSxKdD1SZWdFeHAoIl4o
WystXSk9KCIreCsiKSIsImkiKSxHdD17Qk9EWToiYmxvY2sifSxRdD17cG9zaXRpb246ImFic29s
dXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sS3Q9e2xldHRlclNwYWNp
bmc6MCxmb250V2VpZ2h0OjQwMH0sWnQ9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxl
bj1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIHRuKGUsdCl7aWYodCBpbiBlKXJl
dHVybiB0O3ZhciBuPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxyPXQsaT1l
bi5sZW5ndGg7d2hpbGUoaS0tKWlmKHQ9ZW5baV0rbix0IGluIGUpcmV0dXJuIHQ7cmV0dXJuIHJ9
ZnVuY3Rpb24gbm4oZSx0KXtyZXR1cm4gZT10fHxlLCJub25lIj09PWIuY3NzKGUsImRpc3BsYXki
KXx8IWIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIHJuKGUsdCl7dmFyIG4s
cixpLG89W10sYT0wLHM9ZS5sZW5ndGg7Zm9yKDtzPmE7YSsrKXI9ZVthXSxyLnN0eWxlJiYob1th
XT1iLl9kYXRhKHIsIm9sZGRpc3BsYXkiKSxuPXIuc3R5bGUuZGlzcGxheSx0PyhvW2FdfHwibm9u
ZSIhPT1ufHwoci5zdHlsZS5kaXNwbGF5PSIiKSwiIj09PXIuc3R5bGUuZGlzcGxheSYmbm4ocikm
JihvW2FdPWIuX2RhdGEociwib2xkZGlzcGxheSIsdW4oci5ub2RlTmFtZSkpKSk6b1thXXx8KGk9
bm4ociksKG4mJiJub25lIiE9PW58fCFpKSYmYi5fZGF0YShyLCJvbGRkaXNwbGF5IixpP246Yi5j
c3MociwiZGlzcGxheSIpKSkpO2ZvcihhPTA7cz5hO2ErKylyPWVbYV0sci5zdHlsZSYmKHQmJiJu
b25lIiE9PXIuc3R5bGUuZGlzcGxheSYmIiIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRp
c3BsYXk9dD9vW2FdfHwiIjoibm9uZSIpKTtyZXR1cm4gZX1iLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0
aW9uKGUsbil7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYT17
fSxzPTA7aWYoYi5pc0FycmF5KG4pKXtmb3Iobz1SdChlKSxpPW4ubGVuZ3RoO2k+cztzKyspYVtu
W3NdXT1iLmNzcyhlLG5bc10sITEsbyk7cmV0dXJuIGF9cmV0dXJuIHIhPT10P2Iuc3R5bGUoZSxu
LHIpOmIuY3NzKGUsbil9LGUsbixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7
cmV0dXJuIHJuKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHJuKHRoaXMpfSx0b2dn
bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ImJvb2xlYW4iPT10eXBlb2YgZTtyZXR1cm4gdGhpcy5lYWNo
KGZ1bmN0aW9uKCl7KHQ/ZTpubih0aGlzKSk/Yih0aGlzKS5zaG93KCk6Yih0aGlzKS5oaWRlKCl9
KX19KSxiLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQp
e3ZhciBuPVd0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7
Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEw
LG9wYWNpdHk6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1By
b3BzOnsiZmxvYXQiOmIuc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0s
c3R5bGU6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVU
eXBlJiZlLnN0eWxlKXt2YXIgbyxhLHMsdT1iLmNhbWVsQ2FzZShuKSxsPWUuc3R5bGU7aWYobj1i
LmNzc1Byb3BzW3VdfHwoYi5jc3NQcm9wc1t1XT10bihsLHUpKSxzPWIuY3NzSG9va3Nbbl18fGIu
Y3NzSG9va3NbdV0scj09PXQpcmV0dXJuIHMmJiJnZXQiaW4gcyYmKG89cy5nZXQoZSwhMSxpKSkh
PT10P286bFtuXTtpZihhPXR5cGVvZiByLCJzdHJpbmciPT09YSYmKG89SnQuZXhlYyhyKSkmJihy
PShvWzFdKzEpKm9bMl0rcGFyc2VGbG9hdChiLmNzcyhlLG4pKSxhPSJudW1iZXIiKSwhKG51bGw9
PXJ8fCJudW1iZXIiPT09YSYmaXNOYU4ocil8fCgibnVtYmVyIiE9PWF8fGIuY3NzTnVtYmVyW3Vd
fHwocis9InB4IiksYi5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1yfHwwIT09bi5pbmRl
eE9mKCJiYWNrZ3JvdW5kIil8fChsW25dPSJpbmhlcml0IikscyYmInNldCJpbiBzJiYocj1zLnNl
dChlLHIsaSkpPT09dCkpKXRyeXtsW25dPXJ9Y2F0Y2goYyl7fX19LGNzczpmdW5jdGlvbihlLG4s
cixpKXt2YXIgbyxhLHMsdT1iLmNhbWVsQ2FzZShuKTtyZXR1cm4gbj1iLmNzc1Byb3BzW3VdfHwo
Yi5jc3NQcm9wc1t1XT10bihlLnN0eWxlLHUpKSxzPWIuY3NzSG9va3Nbbl18fGIuY3NzSG9va3Nb
dV0scyYmImdldCJpbiBzJiYoYT1zLmdldChlLCEwLHIpKSxhPT09dCYmKGE9V3QoZSxuLGkpKSwi
bm9ybWFsIj09PWEmJm4gaW4gS3QmJihhPUt0W25dKSwiIj09PXJ8fHI/KG89cGFyc2VGbG9hdChh
KSxyPT09ITB8fGIuaXNOdW1lcmljKG8pP298fDA6YSk6YX0sc3dhcDpmdW5jdGlvbihlLHQsbixy
KXt2YXIgaSxvLGE9e307Zm9yKG8gaW4gdClhW29dPWUuc3R5bGVbb10sZS5zdHlsZVtvXT10W29d
O2k9bi5hcHBseShlLHJ8fFtdKTtmb3IobyBpbiB0KWUuc3R5bGVbb109YVtvXTtyZXR1cm4gaX19
KSxlLmdldENvbXB1dGVkU3R5bGU/KFJ0PWZ1bmN0aW9uKHQpe3JldHVybiBlLmdldENvbXB1dGVk
U3R5bGUodCxudWxsKX0sV3Q9ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG8sYSxzPXJ8fFJ0KGUpLHU9
cz9zLmdldFByb3BlcnR5VmFsdWUobil8fHNbbl06dCxsPWUuc3R5bGU7cmV0dXJuIHMmJigiIiE9
PXV8fGIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwodT1iLnN0eWxlKGUsbikpLFl0LnRl
c3QodSkmJlV0LnRlc3QobikmJihpPWwud2lkdGgsbz1sLm1pbldpZHRoLGE9bC5tYXhXaWR0aCxs
Lm1pbldpZHRoPWwubWF4V2lkdGg9bC53aWR0aD11LHU9cy53aWR0aCxsLndpZHRoPWksbC5taW5X
aWR0aD1vLGwubWF4V2lkdGg9YSkpLHV9KTpvLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUm
JihSdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9LFd0PWZ1bmN0aW9uKGUsbixy
KXt2YXIgaSxvLGEscz1yfHxSdChlKSx1PXM/c1tuXTp0LGw9ZS5zdHlsZTtyZXR1cm4gbnVsbD09
dSYmbCYmbFtuXSYmKHU9bFtuXSksWXQudGVzdCh1KSYmIXp0LnRlc3QobikmJihpPWwubGVmdCxv
PWUucnVudGltZVN0eWxlLGE9byYmby5sZWZ0LGEmJihvLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVm
dCksbC5sZWZ0PSJmb250U2l6ZSI9PT1uPyIxZW0iOnUsdT1sLnBpeGVsTGVmdCsicHgiLGwubGVm
dD1pLGEmJihvLmxlZnQ9YSkpLCIiPT09dT8iYXV0byI6dX0pO2Z1bmN0aW9uIG9uKGUsdCxuKXt2
YXIgcj1WdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwi
cHgiKTp0fWZ1bmN0aW9uIGFuKGUsdCxuLHIsaSl7dmFyIG89bj09PShyPyJib3JkZXIiOiJjb250
ZW50Iik/NDoid2lkdGgiPT09dD8xOjAsYT0wO2Zvcig7ND5vO28rPTIpIm1hcmdpbiI9PT1uJiYo
YSs9Yi5jc3MoZSxuK1p0W29dLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYoYS09Yi5jc3MoZSwi
cGFkZGluZyIrWnRbb10sITAsaSkpLCJtYXJnaW4iIT09biYmKGEtPWIuY3NzKGUsImJvcmRlciIr
WnRbb10rIldpZHRoIiwhMCxpKSkpOihhKz1iLmNzcyhlLCJwYWRkaW5nIitadFtvXSwhMCxpKSwi
cGFkZGluZyIhPT1uJiYoYSs9Yi5jc3MoZSwiYm9yZGVyIitadFtvXSsiV2lkdGgiLCEwLGkpKSk7
cmV0dXJuIGF9ZnVuY3Rpb24gc24oZSx0LG4pe3ZhciByPSEwLGk9IndpZHRoIj09PXQ/ZS5vZmZz
ZXRXaWR0aDplLm9mZnNldEhlaWdodCxvPVJ0KGUpLGE9Yi5zdXBwb3J0LmJveFNpemluZyYmImJv
cmRlci1ib3giPT09Yi5jc3MoZSwiYm94U2l6aW5nIiwhMSxvKTtpZigwPj1pfHxudWxsPT1pKXtp
ZihpPVd0KGUsdCxvKSwoMD5pfHxudWxsPT1pKSYmKGk9ZS5zdHlsZVt0XSksWXQudGVzdChpKSly
ZXR1cm4gaTtyPWEmJihiLnN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGV8fGk9PT1lLnN0eWxlW3Rd
KSxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrYW4oZSx0LG58fChhPyJib3JkZXIiOiJjb250
ZW50IikscixvKSsicHgifWZ1bmN0aW9uIHVuKGUpe3ZhciB0PW8sbj1HdFtlXTtyZXR1cm4gbnx8
KG49bG4oZSx0KSwibm9uZSIhPT1uJiZufHwoUHQ9KFB0fHxiKCI8aWZyYW1lIGZyYW1lYm9yZGVy
PScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikuY3NzKCJjc3NUZXh0IiwiZGlzcGxheTpibG9j
ayAhaW1wb3J0YW50IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PShQdFswXS5jb250
ZW50V2luZG93fHxQdFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LHQud3JpdGUoIjwhZG9j
dHlwZSBodG1sPjxodG1sPjxib2R5PiIpLHQuY2xvc2UoKSxuPWxuKGUsdCksUHQuZGV0YWNoKCkp
LEd0W2VdPW4pLG59ZnVuY3Rpb24gbG4oZSx0KXt2YXIgbj1iKHQuY3JlYXRlRWxlbWVudChlKSku
YXBwZW5kVG8odC5ib2R5KSxyPWIuY3NzKG5bMF0sImRpc3BsYXkiKTtyZXR1cm4gbi5yZW1vdmUo
KSxyfWIuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSxuKXtiLmNzc0hvb2tzW25d
PXtnZXQ6ZnVuY3Rpb24oZSxyLGkpe3JldHVybiByPzA9PT1lLm9mZnNldFdpZHRoJiZYdC50ZXN0
KGIuY3NzKGUsImRpc3BsYXkiKSk/Yi5zd2FwKGUsUXQsZnVuY3Rpb24oKXtyZXR1cm4gc24oZSxu
LGkpfSk6c24oZSxuLGkpOnR9LHNldDpmdW5jdGlvbihlLHQscil7dmFyIGk9ciYmUnQoZSk7cmV0
dXJuIG9uKGUsdCxyP2FuKGUsbixyLGIuc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09
PWIuY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLGIuc3VwcG9ydC5vcGFjaXR5fHwo
Yi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gSXQudGVzdCgodCYm
ZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUuZmlsdGVyOmUuc3R5bGUuZmlsdGVyKXx8IiIp
Py4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6dD8iMSI6IiJ9LHNldDpmdW5jdGlvbihlLHQp
e3ZhciBuPWUuc3R5bGUscj1lLmN1cnJlbnRTdHlsZSxpPWIuaXNOdW1lcmljKHQpPyJhbHBoYShv
cGFjaXR5PSIrMTAwKnQrIikiOiIiLG89ciYmci5maWx0ZXJ8fG4uZmlsdGVyfHwiIjtuLnpvb209
MSwodD49MXx8IiI9PT10KSYmIiI9PT1iLnRyaW0oby5yZXBsYWNlKCR0LCIiKSkmJm4ucmVtb3Zl
QXR0cmlidXRlJiYobi5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09dHx8ciYmIXIuZmls
dGVyKXx8KG4uZmlsdGVyPSR0LnRlc3Qobyk/by5yZXBsYWNlKCR0LGkpOm8rIiAiK2kpfX0pLGIo
ZnVuY3Rpb24oKXtiLnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KGIuY3NzSG9va3MubWFy
Z2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLG4pe3JldHVybiBuP2Iuc3dhcChlLHtkaXNwbGF5OiJp
bmxpbmUtYmxvY2sifSxXdCxbZSwibWFyZ2luUmlnaHQiXSk6dH19KSwhYi5zdXBwb3J0LnBpeGVs
UG9zaXRpb24mJmIuZm4ucG9zaXRpb24mJmIuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihl
LG4pe2IuY3NzSG9va3Nbbl09e2dldDpmdW5jdGlvbihlLHIpe3JldHVybiByPyhyPVd0KGUsbiks
WXQudGVzdChyKT9iKGUpLnBvc2l0aW9uKClbbl0rInB4IjpyKTp0fX19KX0pLGIuZXhwciYmYi5l
eHByLmZpbHRlcnMmJihiLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIDA+
PWUub2Zmc2V0V2lkdGgmJjA+PWUub2Zmc2V0SGVpZ2h0fHwhYi5zdXBwb3J0LnJlbGlhYmxlSGlk
ZGVuT2Zmc2V0cyYmIm5vbmUiPT09KGUuc3R5bGUmJmUuc3R5bGUuZGlzcGxheXx8Yi5jc3MoZSwi
ZGlzcGxheSIpKX0sYi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hYi5l
eHByLmZpbHRlcnMuaGlkZGVuKGUpfSksYi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3Jk
ZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXtiLmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlv
bihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtm
b3IoOzQ+cjtyKyspaVtlK1p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LFV0
LnRlc3QoZSl8fChiLmNzc0hvb2tzW2UrdF0uc2V0PW9uKX0pO3ZhciBjbj0vJTIwL2cscG49L1xb
XF0kLyxmbj0vXHI/XG4vZyxkbj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkk
L2ksaG49L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2IuZm4uZXh0ZW5kKHtz
ZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gYi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkp
fSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3Zh
ciBlPWIucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP2IubWFrZUFycmF5KGUpOnRoaXN9
KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWIo
dGhpcykuaXMoIjpkaXNhYmxlZCIpJiZobi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhZG4udGVzdChl
KSYmKHRoaXMuY2hlY2tlZHx8IU50LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49
Yih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOmIuaXNBcnJheShuKT9iLm1hcChuLGZ1
bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoZm4sIlxyXG4iKX19
KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKGZuLCJcclxuIil9fSkuZ2V0KCl9fSksYi5w
YXJhbT1mdW5jdGlvbihlLG4pe3ZhciByLGk9W10sbz1mdW5jdGlvbihlLHQpe3Q9Yi5pc0Z1bmN0
aW9uKHQpP3QoKTpudWxsPT10PyIiOnQsaVtpLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUp
KyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKG49PT10JiYobj1iLmFqYXhTZXR0aW5ncyYm
Yi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLGIuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFiLmlz
UGxhaW5PYmplY3QoZSkpYi5lYWNoKGUsZnVuY3Rpb24oKXtvKHRoaXMubmFtZSx0aGlzLnZhbHVl
KX0pO2Vsc2UgZm9yKHIgaW4gZSlnbihyLGVbcl0sbixvKTtyZXR1cm4gaS5qb2luKCImIikucmVw
bGFjZShjbiwiKyIpfTtmdW5jdGlvbiBnbihlLHQsbixyKXt2YXIgaTtpZihiLmlzQXJyYXkodCkp
Yi5lYWNoKHQsZnVuY3Rpb24odCxpKXtufHxwbi50ZXN0KGUpP3IoZSxpKTpnbihlKyJbIisoIm9i
amVjdCI9PXR5cGVvZiBpP3Q6IiIpKyJdIixpLG4scil9KTtlbHNlIGlmKG58fCJvYmplY3QiIT09
Yi50eXBlKHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpZ24oZSsiWyIraSsiXSIsdFtpXSxuLHIp
fWIuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1
bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3Zl
ciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5
ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlv
bihlLHQpe2IuZm5bdF09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3Ro
aXMub24odCxudWxsLGUsbik6dGhpcy50cmlnZ2VyKHQpfX0pLGIuZm4uaG92ZXI9ZnVuY3Rpb24o
ZSx0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodHx8ZSl9O3ZhciBtbix5
bix2bj1iLm5vdygpLGJuPS9cPy8seG49LyMuKiQvLHduPS8oWz8mXSlfPVteJl0qLyxUbj0vXigu
Kj8pOlsgXHRdKihbXlxyXG5dKilccj8kL2dtLE5uPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdl
fC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLENuPS9eKD86R0VUfEhFQUQpJC8sa249
L15cL1wvLyxFbj0vXihbXHcuKy1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspfCl8KS8s
U249Yi5mbi5sb2FkLEFuPXt9LGpuPXt9LERuPSIqLyIuY29uY2F0KCIqIik7dHJ5e3luPWEuaHJl
Zn1jYXRjaChMbil7eW49by5jcmVhdGVFbGVtZW50KCJhIikseW4uaHJlZj0iIix5bj15bi5ocmVm
fW1uPUVuLmV4ZWMoeW4udG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIEhuKGUpe3JldHVybiBm
dW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIHIsaT0wLG89
dC50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbXTtpZihiLmlzRnVuY3Rpb24obikpd2hpbGUocj1v
W2krK10pIisiPT09clswXT8ocj1yLnNsaWNlKDEpfHwiKiIsKGVbcl09ZVtyXXx8W10pLnVuc2hp
ZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBxbihlLG4scixpKXt2YXIg
bz17fSxhPWU9PT1qbjtmdW5jdGlvbiBzKHUpe3ZhciBsO3JldHVybiBvW3VdPSEwLGIuZWFjaChl
W3VdfHxbXSxmdW5jdGlvbihlLHUpe3ZhciBjPXUobixyLGkpO3JldHVybiJzdHJpbmciIT10eXBl
b2YgY3x8YXx8b1tjXT9hPyEobD1jKTp0OihuLmRhdGFUeXBlcy51bnNoaWZ0KGMpLHMoYyksITEp
fSksbH1yZXR1cm4gcyhuLmRhdGFUeXBlc1swXSl8fCFvWyIqIl0mJnMoIioiKX1mdW5jdGlvbiBN
bihlLG4pe3ZhciByLGksbz1iLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGkgaW4g
biluW2ldIT09dCYmKChvW2ldP2U6cnx8KHI9e30pKVtpXT1uW2ldKTtyZXR1cm4gciYmYi5leHRl
bmQoITAsZSxyKSxlfWIuZm4ubG9hZD1mdW5jdGlvbihlLG4scil7aWYoInN0cmluZyIhPXR5cGVv
ZiBlJiZTbilyZXR1cm4gU24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpLG8sYSxzPXRoaXMs
dT1lLmluZGV4T2YoIiAiKTtyZXR1cm4gdT49MCYmKGk9ZS5zbGljZSh1LGUubGVuZ3RoKSxlPWUu
c2xpY2UoMCx1KSksYi5pc0Z1bmN0aW9uKG4pPyhyPW4sbj10KTpuJiYib2JqZWN0Ij09dHlwZW9m
IG4mJihhPSJQT1NUIikscy5sZW5ndGg+MCYmYi5hamF4KHt1cmw6ZSx0eXBlOmEsZGF0YVR5cGU6
Imh0bWwiLGRhdGE6bn0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMscy5odG1sKGk/Yigi
PGRpdj4iKS5hcHBlbmQoYi5wYXJzZUhUTUwoZSkpLmZpbmQoaSk6ZSl9KS5jb21wbGV0ZShyJiZm
dW5jdGlvbihlLHQpe3MuZWFjaChyLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pLHRoaXN9LGIu
ZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwi
YWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7Yi5mblt0XT1mdW5jdGlvbihl
KXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLGIuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihl
LG4pe2Jbbl09ZnVuY3Rpb24oZSxyLGksbyl7cmV0dXJuIGIuaXNGdW5jdGlvbihyKSYmKG89b3x8
aSxpPXIscj10KSxiLmFqYXgoe3VybDplLHR5cGU6bixkYXRhVHlwZTpvLGRhdGE6cixzdWNjZXNz
Oml9KX19KSxiLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNl
dHRpbmdzOnt1cmw6eW4sdHlwZToiR0VUIixpc0xvY2FsOk5uLnRlc3QobW5bMV0pLGdsb2JhbDoh
MCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ct
Zm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6RG4sdGV4dDoidGV4
dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwi
LGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6
L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3Bv
bnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjplLlN0cmlu
ZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpiLnBhcnNlSlNPTiwidGV4dCB4bWwiOmIucGFy
c2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlv
bihlLHQpe3JldHVybiB0P01uKE1uKGUsYi5hamF4U2V0dGluZ3MpLHQpOk1uKGIuYWpheFNldHRp
bmdzLGUpfSxhamF4UHJlZmlsdGVyOkhuKEFuKSxhamF4VHJhbnNwb3J0OkhuKGpuKSxhamF4OmZ1
bmN0aW9uKGUsbil7Im9iamVjdCI9PXR5cGVvZiBlJiYobj1lLGU9dCksbj1ufHx7fTt2YXIgcixp
LG8sYSxzLHUsbCxjLHA9Yi5hamF4U2V0dXAoe30sbiksZj1wLmNvbnRleHR8fHAsZD1wLmNvbnRl
eHQmJihmLm5vZGVUeXBlfHxmLmpxdWVyeSk/YihmKTpiLmV2ZW50LGg9Yi5EZWZlcnJlZCgpLGc9
Yi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksbT1wLnN0YXR1c0NvZGV8fHt9LHk9e30sdj17fSx4
PTAsVD0iY2FuY2VsZWQiLE49e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlv
bihlKXt2YXIgdDtpZigyPT09eCl7aWYoIWMpe2M9e307d2hpbGUodD1Ubi5leGVjKGEpKWNbdFsx
XS50b0xvd2VyQ2FzZSgpXT10WzJdfXQ9Y1tlLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT10
P251bGw6dH0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT14P2E6
bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPWUudG9Mb3dlckNhc2Uo
KTtyZXR1cm4geHx8KGU9dltuXT12W25dfHxlLHlbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlw
ZTpmdW5jdGlvbihlKXtyZXR1cm4geHx8KHAubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpm
dW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKDI+eClmb3IodCBpbiBlKW1bdF09W21bdF0sZVt0XV07
ZWxzZSBOLmFsd2F5cyhlW04uc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGUp
e3ZhciB0PWV8fFQ7cmV0dXJuIGwmJmwuYWJvcnQodCksaygwLHQpLHRoaXN9fTtpZihoLnByb21p
c2UoTikuY29tcGxldGU9Zy5hZGQsTi5zdWNjZXNzPU4uZG9uZSxOLmVycm9yPU4uZmFpbCxwLnVy
bD0oKGV8fHAudXJsfHx5bikrIiIpLnJlcGxhY2UoeG4sIiIpLnJlcGxhY2Uoa24sbW5bMV0rIi8v
IikscC50eXBlPW4ubWV0aG9kfHxuLnR5cGV8fHAubWV0aG9kfHxwLnR5cGUscC5kYXRhVHlwZXM9
Yi50cmltKHAuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8WyIiXSxudWxs
PT1wLmNyb3NzRG9tYWluJiYocj1Fbi5leGVjKHAudXJsLnRvTG93ZXJDYXNlKCkpLHAuY3Jvc3NE
b21haW49ISghcnx8clsxXT09PW1uWzFdJiZyWzJdPT09bW5bMl0mJihyWzNdfHwoImh0dHA6Ij09
PXJbMV0/ODA6NDQzKSk9PShtblszXXx8KCJodHRwOiI9PT1tblsxXT84MDo0NDMpKSkpLHAuZGF0
YSYmcC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBwLmRhdGEmJihwLmRhdGE9Yi5wYXJh
bShwLmRhdGEscC50cmFkaXRpb25hbCkpLHFuKEFuLHAsbixOKSwyPT09eClyZXR1cm4gTjt1PXAu
Z2xvYmFsLHUmJjA9PT1iLmFjdGl2ZSsrJiZiLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLHAu
dHlwZT1wLnR5cGUudG9VcHBlckNhc2UoKSxwLmhhc0NvbnRlbnQ9IUNuLnRlc3QocC50eXBlKSxv
PXAudXJsLHAuaGFzQ29udGVudHx8KHAuZGF0YSYmKG89cC51cmwrPShibi50ZXN0KG8pPyImIjoi
PyIpK3AuZGF0YSxkZWxldGUgcC5kYXRhKSxwLmNhY2hlPT09ITEmJihwLnVybD13bi50ZXN0KG8p
P28ucmVwbGFjZSh3biwiJDFfPSIrdm4rKyk6bysoYm4udGVzdChvKT8iJiI6Ij8iKSsiXz0iK3Zu
KyspKSxwLmlmTW9kaWZpZWQmJihiLmxhc3RNb2RpZmllZFtvXSYmTi5zZXRSZXF1ZXN0SGVhZGVy
KCJJZi1Nb2RpZmllZC1TaW5jZSIsYi5sYXN0TW9kaWZpZWRbb10pLGIuZXRhZ1tvXSYmTi5zZXRS
ZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixiLmV0YWdbb10pKSwocC5kYXRhJiZwLmhhc0Nv
bnRlbnQmJnAuY29udGVudFR5cGUhPT0hMXx8bi5jb250ZW50VHlwZSkmJk4uc2V0UmVxdWVzdEhl
YWRlcigiQ29udGVudC1UeXBlIixwLmNvbnRlbnRUeXBlKSxOLnNldFJlcXVlc3RIZWFkZXIoIkFj
Y2VwdCIscC5kYXRhVHlwZXNbMF0mJnAuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0/cC5hY2NlcHRz
W3AuZGF0YVR5cGVzWzBdXSsoIioiIT09cC5kYXRhVHlwZXNbMF0/IiwgIitEbisiOyBxPTAuMDEi
OiIiKTpwLmFjY2VwdHNbIioiXSk7Zm9yKGkgaW4gcC5oZWFkZXJzKU4uc2V0UmVxdWVzdEhlYWRl
cihpLHAuaGVhZGVyc1tpXSk7aWYocC5iZWZvcmVTZW5kJiYocC5iZWZvcmVTZW5kLmNhbGwoZixO
LHApPT09ITF8fDI9PT14KSlyZXR1cm4gTi5hYm9ydCgpO1Q9ImFib3J0Ijtmb3IoaSBpbntzdWNj
ZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSlOW2ldKHBbaV0pO2lmKGw9cW4oam4scCxuLE4pKXtO
LnJlYWR5U3RhdGU9MSx1JiZkLnRyaWdnZXIoImFqYXhTZW5kIixbTixwXSkscC5hc3luYyYmcC50
aW1lb3V0PjAmJihzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtOLmFib3J0KCJ0aW1lb3V0Iil9LHAu
dGltZW91dCkpO3RyeXt4PTEsbC5zZW5kKHksayl9Y2F0Y2goQyl7aWYoISgyPngpKXRocm93IEM7
aygtMSxDKX19ZWxzZSBrKC0xLCJObyBUcmFuc3BvcnQiKTtmdW5jdGlvbiBrKGUsbixyLGkpe3Zh
ciBjLHksdix3LFQsQz1uOzIhPT14JiYoeD0yLHMmJmNsZWFyVGltZW91dChzKSxsPXQsYT1pfHwi
IixOLnJlYWR5U3RhdGU9ZT4wPzQ6MCxyJiYodz1fbihwLE4scikpLGU+PTIwMCYmMzAwPmV8fDMw
ND09PWU/KHAuaWZNb2RpZmllZCYmKFQ9Ti5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmll
ZCIpLFQmJihiLmxhc3RNb2RpZmllZFtvXT1UKSxUPU4uZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWci
KSxUJiYoYi5ldGFnW29dPVQpKSwyMDQ9PT1lPyhjPSEwLEM9Im5vY29udGVudCIpOjMwND09PWU/
KGM9ITAsQz0ibm90bW9kaWZpZWQiKTooYz1GbihwLHcpLEM9Yy5zdGF0ZSx5PWMuZGF0YSx2PWMu
ZXJyb3IsYz0hdikpOih2PUMsKGV8fCFDKSYmKEM9ImVycm9yIiwwPmUmJihlPTApKSksTi5zdGF0
dXM9ZSxOLnN0YXR1c1RleHQ9KG58fEMpKyIiLGM/aC5yZXNvbHZlV2l0aChmLFt5LEMsTl0pOmgu
cmVqZWN0V2l0aChmLFtOLEMsdl0pLE4uc3RhdHVzQ29kZShtKSxtPXQsdSYmZC50cmlnZ2VyKGM/
ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbTixwLGM/eTp2XSksZy5maXJlV2l0aChmLFtOLENd
KSx1JiYoZC50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtOLHBdKSwtLWIuYWN0aXZlfHxiLmV2ZW50
LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gTn0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsbil7
cmV0dXJuIGIuZ2V0KGUsdCxuLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0
dXJuIGIuZ2V0KGUsdCxuLCJqc29uIil9fSk7ZnVuY3Rpb24gX24oZSxuLHIpe3ZhciBpLG8sYSxz
LHU9ZS5jb250ZW50cyxsPWUuZGF0YVR5cGVzLGM9ZS5yZXNwb25zZUZpZWxkcztmb3IocyBpbiBj
KXMgaW4gciYmKG5bY1tzXV09cltzXSk7d2hpbGUoIioiPT09bFswXSlsLnNoaWZ0KCksbz09PXQm
JihvPWUubWltZVR5cGV8fG4uZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihv
KWZvcihzIGluIHUpaWYodVtzXSYmdVtzXS50ZXN0KG8pKXtsLnVuc2hpZnQocyk7YnJlYWt9aWYo
bFswXWluIHIpYT1sWzBdO2Vsc2V7Zm9yKHMgaW4gcil7aWYoIWxbMF18fGUuY29udmVydGVyc1tz
KyIgIitsWzBdXSl7YT1zO2JyZWFrfWl8fChpPXMpfWE9YXx8aX1yZXR1cm4gYT8oYSE9PWxbMF0m
JmwudW5zaGlmdChhKSxyW2FdKTp0fWZ1bmN0aW9uIEZuKGUsdCl7dmFyIG4scixpLG8sYT17fSxz
PTAsdT1lLmRhdGFUeXBlcy5zbGljZSgpLGw9dVswXTtpZihlLmRhdGFGaWx0ZXImJih0PWUuZGF0
YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1WzFdKWZvcihpIGluIGUuY29udmVydGVycylhW2kudG9M
b3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW2ldO2Zvcig7cj11Wysrc107KWlmKCIqIiE9PXIpe2lm
KCIqIiE9PWwmJmwhPT1yKXtpZihpPWFbbCsiICIrcl18fGFbIiogIityXSwhaSlmb3IobiBpbiBh
KWlmKG89bi5zcGxpdCgiICIpLG9bMV09PT1yJiYoaT1hW2wrIiAiK29bMF1dfHxhWyIqICIrb1sw
XV0pKXtpPT09ITA/aT1hW25dOmFbbl0hPT0hMCYmKHI9b1swXSx1LnNwbGljZShzLS0sMCxyKSk7
YnJlYWt9aWYoaSE9PSEwKWlmKGkmJmVbInRocm93cyJdKXQ9aSh0KTtlbHNlIHRyeXt0PWkodCl9
Y2F0Y2goYyl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6aT9jOiJObyBjb252ZXJz
aW9uIGZyb20gIitsKyIgdG8gIityfX19bD1yfXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0
fX1iLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0
aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNt
YXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0
ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiBiLmdsb2JhbEV2YWwoZSksZX19
fSksYi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2UuY2FjaGU9PT10JiYoZS5j
YWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIixlLmdsb2JhbD0hMSl9KSxiLmFq
YXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIG4s
cj1vLmhlYWR8fGIoImhlYWQiKVswXXx8by5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVu
Y3Rpb24odCxpKXtuPW8uY3JlYXRlRWxlbWVudCgic2NyaXB0Iiksbi5hc3luYz0hMCxlLnNjcmlw
dENoYXJzZXQmJihuLmNoYXJzZXQ9ZS5zY3JpcHRDaGFyc2V0KSxuLnNyYz1lLnVybCxuLm9ubG9h
ZD1uLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlLHQpeyh0fHwhbi5yZWFkeVN0YXRlfHwv
bG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpJiYobi5vbmxvYWQ9bi5vbnJlYWR5
c3RhdGVjaGFuZ2U9bnVsbCxuLnBhcmVudE5vZGUmJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChu
KSxuPW51bGwsdHx8aSgyMDAsInN1Y2Nlc3MiKSl9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENo
aWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCh0LCEwKX19fX0pO3ZhciBPbj1bXSxC
bj0vKD0pXD8oPz0mfCQpfFw/XD8vO2IuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25w
Q2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1Pbi5wb3AoKXx8Yi5leHBhbmRvKyJfIit2bisrO3Jl
dHVybiB0aGlzW2VdPSEwLGV9fSksYi5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlv
bihuLHIsaSl7dmFyIG8sYSxzLHU9bi5qc29ucCE9PSExJiYoQm4udGVzdChuLnVybCk/InVybCI6
InN0cmluZyI9PXR5cGVvZiBuLmRhdGEmJiEobi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFw
cGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZCbi50ZXN0KG4uZGF0YSkmJiJkYXRh
Iik7cmV0dXJuIHV8fCJqc29ucCI9PT1uLmRhdGFUeXBlc1swXT8obz1uLmpzb25wQ2FsbGJhY2s9
Yi5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENh
bGxiYWNrLHU/blt1XT1uW3VdLnJlcGxhY2UoQm4sIiQxIitvKTpuLmpzb25wIT09ITEmJihuLnVy
bCs9KGJuLnRlc3Qobi51cmwpPyImIjoiPyIpK24uanNvbnArIj0iK28pLG4uY29udmVydGVyc1si
c2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHxiLmVycm9yKG8rIiB3YXMgbm90IGNh
bGxlZCIpLHNbMF19LG4uZGF0YVR5cGVzWzBdPSJqc29uIixhPWVbb10sZVtvXT1mdW5jdGlvbigp
e3M9YXJndW1lbnRzfSxpLmFsd2F5cyhmdW5jdGlvbigpe2Vbb109YSxuW29dJiYobi5qc29ucENh
bGxiYWNrPXIuanNvbnBDYWxsYmFjayxPbi5wdXNoKG8pKSxzJiZiLmlzRnVuY3Rpb24oYSkmJmEo
c1swXSkscz1hPXR9KSwic2NyaXB0Iik6dH0pO3ZhciBQbixSbixXbj0wLCRuPWUuQWN0aXZlWE9i
amVjdCYmZnVuY3Rpb24oKXt2YXIgZTtmb3IoZSBpbiBQbilQbltlXSh0LCEwKX07ZnVuY3Rpb24g
SW4oKXt0cnl7cmV0dXJuIG5ldyBlLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe319ZnVuY3Rpb24g
em4oKXt0cnl7cmV0dXJuIG5ldyBlLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9
Y2F0Y2godCl7fX1iLmFqYXhTZXR0aW5ncy54aHI9ZS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7
cmV0dXJuIXRoaXMuaXNMb2NhbCYmSW4oKXx8em4oKX06SW4sUm49Yi5hamF4U2V0dGluZ3MueGhy
KCksYi5zdXBwb3J0LmNvcnM9ISFSbiYmIndpdGhDcmVkZW50aWFscyJpbiBSbixSbj1iLnN1cHBv
cnQuYWpheD0hIVJuLFJuJiZiLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NE
b21haW58fGIuc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3Zh
ciBhLHMsdT1uLnhocigpO2lmKG4udXNlcm5hbWU/dS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5j
LG4udXNlcm5hbWUsbi5wYXNzd29yZCk6dS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKSxuLnho
ckZpZWxkcylmb3IocyBpbiBuLnhockZpZWxkcyl1W3NdPW4ueGhyRmllbGRzW3NdO24ubWltZVR5
cGUmJnUub3ZlcnJpZGVNaW1lVHlwZSYmdS5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLG4u
Y3Jvc3NEb21haW58fGlbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGlbIlgtUmVxdWVzdGVkLVdpdGgi
XT0iWE1MSHR0cFJlcXVlc3QiKTt0cnl7Zm9yKHMgaW4gaSl1LnNldFJlcXVlc3RIZWFkZXIocyxp
W3NdKX1jYXRjaChsKXt9dS5zZW5kKG4uaGFzQ29udGVudCYmbi5kYXRhfHxudWxsKSxyPWZ1bmN0
aW9uKGUsaSl7dmFyIHMsbCxjLHA7dHJ5e2lmKHImJihpfHw0PT09dS5yZWFkeVN0YXRlKSlpZihy
PXQsYSYmKHUub25yZWFkeXN0YXRlY2hhbmdlPWIubm9vcCwkbiYmZGVsZXRlIFBuW2FdKSxpKTQh
PT11LnJlYWR5U3RhdGUmJnUuYWJvcnQoKTtlbHNle3A9e30scz11LnN0YXR1cyxsPXUuZ2V0QWxs
UmVzcG9uc2VIZWFkZXJzKCksInN0cmluZyI9PXR5cGVvZiB1LnJlc3BvbnNlVGV4dCYmKHAudGV4
dD11LnJlc3BvbnNlVGV4dCk7dHJ5e2M9dS5zdGF0dXNUZXh0fWNhdGNoKGYpe2M9IiJ9c3x8IW4u
aXNMb2NhbHx8bi5jcm9zc0RvbWFpbj8xMjIzPT09cyYmKHM9MjA0KTpzPXAudGV4dD8yMDA6NDA0
fX1jYXRjaChkKXtpfHxvKC0xLGQpfXAmJm8ocyxjLHAsbCl9LG4uYXN5bmM/ND09PXUucmVhZHlT
dGF0ZT9zZXRUaW1lb3V0KHIpOihhPSsrV24sJG4mJihQbnx8KFBuPXt9LGIoZSkudW5sb2FkKCRu
KSksUG5bYV09ciksdS5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigp
e3ImJnIodCwhMCl9fX19KTt2YXIgWG4sVW4sVm49L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFlu
PVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3grIikoW2EteiVdKikkIiwiaSIpLEpuPS9xdWV1ZUhv
b2tzJC8sR249W25yXSxRbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLmNyZWF0
ZVR3ZWVuKGUsdCksbz1Zbi5leGVjKHQpLGE9aS5jdXIoKSxzPSthfHwwLHU9MSxsPTIwO2lmKG8p
e2lmKG49K29bMl0scj1vWzNdfHwoYi5jc3NOdW1iZXJbZV0/IiI6InB4IiksInB4IiE9PXImJnMp
e3M9Yi5jc3MoaS5lbGVtLGUsITApfHxufHwxO2RvIHU9dXx8Ii41IixzLz11LGIuc3R5bGUoaS5l
bGVtLGUscytyKTt3aGlsZSh1IT09KHU9aS5jdXIoKS9hKSYmMSE9PXUmJi0tbCl9aS51bml0PXIs
aS5zdGFydD1zLGkuZW5kPW9bMV0/cysob1sxXSsxKSpuOm59cmV0dXJuIGl9XX07ZnVuY3Rpb24g
S24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1huPXR9KSxYbj1iLm5vdygpfWZ1bmN0
aW9uIFpuKGUsdCl7Yi5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj0oUW5bdF18fFtdKS5jb25j
YXQoUW5bIioiXSksaT0wLG89ci5sZW5ndGg7Zm9yKDtvPmk7aSsrKWlmKHJbaV0uY2FsbChlLHQs
bikpcmV0dXJufSl9ZnVuY3Rpb24gZXIoZSx0LG4pe3ZhciByLGksbz0wLGE9R24ubGVuZ3RoLHM9
Yi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9u
KCl7aWYoaSlyZXR1cm4hMTt2YXIgdD1Ybnx8S24oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUr
bC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixhPTAsdT1sLnR3ZWVucy5sZW5n
dGg7Zm9yKDt1PmE7YSsrKWwudHdlZW5zW2FdLnJ1bihvKTtyZXR1cm4gcy5ub3RpZnlXaXRoKGUs
W2wsbyxuXSksMT5vJiZ1P246KHMucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1zLnByb21pc2Uo
e2VsZW06ZSxwcm9wczpiLmV4dGVuZCh7fSx0KSxvcHRzOmIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFz
aW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRp
bWU6WG58fEtuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVu
Y3Rpb24odCxuKXt2YXIgcj1iLlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2lu
Z1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5j
dGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2Zv
cihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P3MucmVzb2x2ZVdpdGgo
ZSxbbCx0XSk6cy5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2Zvcih0cihj
LGwub3B0cy5zcGVjaWFsRWFzaW5nKTthPm87bysrKWlmKHI9R25bb10uY2FsbChsLGUsYyxsLm9w
dHMpKXJldHVybiByO3JldHVybiBabihsLGMpLGIuaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZs
Lm9wdHMuc3RhcnQuY2FsbChlLGwpLGIuZngudGltZXIoYi5leHRlbmQodSx7ZWxlbTplLGFuaW06
bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUo
bC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5v
cHRzLmFsd2F5cyl9ZnVuY3Rpb24gdHIoZSx0KXt2YXIgbixyLGksbyxhO2ZvcihpIGluIGUpaWYo
cj1iLmNhbWVsQ2FzZShpKSxvPXRbcl0sbj1lW2ldLGIuaXNBcnJheShuKSYmKG89blsxXSxuPWVb
aV09blswXSksaSE9PXImJihlW3JdPW4sZGVsZXRlIGVbaV0pLGE9Yi5jc3NIb29rc1tyXSxhJiYi
ZXhwYW5kImluIGEpe249YS5leHBhbmQobiksZGVsZXRlIGVbcl07Zm9yKGkgaW4gbilpIGluIGV8
fChlW2ldPW5baV0sdFtpXT1vKX1lbHNlIHRbcl09b31iLkFuaW1hdGlvbj1iLmV4dGVuZChlcix7
dHdlZW5lcjpmdW5jdGlvbihlLHQpe2IuaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5z
cGxpdCgiICIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sUW5bbl09
UW5bbl18fFtdLFFuW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/R24u
dW5zaGlmdChlKTpHbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIG5yKGUsdCxuKXt2YXIgcixpLG8sYSxz
LHUsbCxjLHAsZj10aGlzLGQ9ZS5zdHlsZSxoPXt9LGc9W10sbT1lLm5vZGVUeXBlJiZubihlKTtu
LnF1ZXVlfHwoYz1iLl9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09Yy51bnF1ZXVlZCYmKGMudW5x
dWV1ZWQ9MCxwPWMuZW1wdHkuZmlyZSxjLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtjLnVucXVldWVk
fHxwKCl9KSxjLnVucXVldWVkKyssZi5hbHdheXMoZnVuY3Rpb24oKXtmLmFsd2F5cyhmdW5jdGlv
bigpe2MudW5xdWV1ZWQtLSxiLnF1ZXVlKGUsImZ4IikubGVuZ3RofHxjLmVtcHR5LmZpcmUoKX0p
fSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJm
bG93PVtkLm92ZXJmbG93LGQub3ZlcmZsb3dYLGQub3ZlcmZsb3dZXSwiaW5saW5lIj09PWIuY3Nz
KGUsImRpc3BsYXkiKSYmIm5vbmUiPT09Yi5jc3MoZSwiZmxvYXQiKSYmKGIuc3VwcG9ydC5pbmxp
bmVCbG9ja05lZWRzTGF5b3V0JiYiaW5saW5lIiE9PXVuKGUubm9kZU5hbWUpP2Quem9vbT0xOmQu
ZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihkLm92ZXJmbG93PSJoaWRkZW4i
LGIuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzfHxmLmFsd2F5cyhmdW5jdGlvbigpe2Qub3ZlcmZs
b3c9bi5vdmVyZmxvd1swXSxkLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGQub3ZlcmZsb3dZPW4u
b3ZlcmZsb3dbMl19KSk7Zm9yKGkgaW4gdClpZihhPXRbaV0sVm4uZXhlYyhhKSl7aWYoZGVsZXRl
IHRbaV0sdT11fHwidG9nZ2xlIj09PWEsYT09PShtPyJoaWRlIjoic2hvdyIpKWNvbnRpbnVlO2cu
cHVzaChpKX1pZihvPWcubGVuZ3RoKXtzPWIuX2RhdGEoZSwiZnhzaG93Iil8fGIuX2RhdGEoZSwi
ZnhzaG93Iix7fSksImhpZGRlbiJpbiBzJiYobT1zLmhpZGRlbiksdSYmKHMuaGlkZGVuPSFtKSxt
P2IoZSkuc2hvdygpOmYuZG9uZShmdW5jdGlvbigpe2IoZSkuaGlkZSgpfSksZi5kb25lKGZ1bmN0
aW9uKCl7dmFyIHQ7Yi5fcmVtb3ZlRGF0YShlLCJmeHNob3ciKTtmb3IodCBpbiBoKWIuc3R5bGUo
ZSx0LGhbdF0pfSk7Zm9yKGk9MDtvPmk7aSsrKXI9Z1tpXSxsPWYuY3JlYXRlVHdlZW4ocixtP3Nb
cl06MCksaFtyXT1zW3JdfHxiLnN0eWxlKGUsciksciBpbiBzfHwoc1tyXT1sLnN0YXJ0LG0mJihs
LmVuZD1sLnN0YXJ0LGwuc3RhcnQ9IndpZHRoIj09PXJ8fCJoZWlnaHQiPT09cj8xOjApKX19ZnVu
Y3Rpb24gcnIoZSx0LG4scixpKXtyZXR1cm4gbmV3IHJyLnByb3RvdHlwZS5pbml0KGUsdCxuLHIs
aSl9Yi5Ud2Vlbj1ycixyci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnJyLGluaXQ6ZnVuY3Rpb24o
ZSx0LG4scixpLG8pe3RoaXMuZWxlbT1lLHRoaXMucHJvcD1uLHRoaXMuZWFzaW5nPWl8fCJzd2lu
ZyIsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5k
PXIsdGhpcy51bml0PW98fChiLmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7
dmFyIGU9cnIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMp
OnJyLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxu
PXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz10PXRoaXMub3B0aW9ucy5k
dXJhdGlvbj9iLmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSww
LDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTplLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0
KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwo
dGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOnJyLnByb3BIb29r
cy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LHJyLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1y
ci5wcm90b3R5cGUscnIucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0
O3JldHVybiBudWxsPT1lLmVsZW1bZS5wcm9wXXx8ZS5lbGVtLnN0eWxlJiZudWxsIT1lLmVsZW0u
c3R5bGVbZS5wcm9wXT8odD1iLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSx0JiYiYXV0byIhPT10P3Q6
MCk6ZS5lbGVtW2UucHJvcF19LHNldDpmdW5jdGlvbihlKXtiLmZ4LnN0ZXBbZS5wcm9wXT9iLmZ4
LnN0ZXBbZS5wcm9wXShlKTplLmVsZW0uc3R5bGUmJihudWxsIT1lLmVsZW0uc3R5bGVbYi5jc3NQ
cm9wc1tlLnByb3BdXXx8Yi5jc3NIb29rc1tlLnByb3BdKT9iLnN0eWxlKGUuZWxlbSxlLnByb3As
ZS5ub3crZS51bml0KTplLmVsZW1bZS5wcm9wXT1lLm5vd319fSxyci5wcm9wSG9va3Muc2Nyb2xs
VG9wPXJyLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVU
eXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LGIuZWFjaChb
InRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj1iLmZuW3RdO2IuZm5b
dF09ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP24u
YXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShpcih0LCEwKSxlLHIsaSl9fSksYi5m
bi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIobm4p
LmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIp
fSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPWIuaXNFbXB0eU9iamVjdChlKSxvPWIu
c3BlZWQodCxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgdD1lcih0aGlzLGIuZXh0ZW5kKHt9LGUpLG8p
O2EuZmluaXNoPWZ1bmN0aW9uKCl7dC5zdG9wKCEwKX0sKGl8fGIuX2RhdGEodGhpcywiZmluaXNo
IikpJiZ0LnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHxvLnF1ZXVlPT09ITE/dGhpcy5l
YWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihlLG4scil7dmFyIGk9
ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChyKX07cmV0dXJuInN0cmlu
ZyIhPXR5cGVvZiBlJiYocj1uLG49ZSxlPXQpLG4mJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngi
LFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxuPW51bGwhPWUmJmUrInF1ZXVlSG9v
a3MiLG89Yi50aW1lcnMsYT1iLl9kYXRhKHRoaXMpO2lmKG4pYVtuXSYmYVtuXS5zdG9wJiZpKGFb
bl0pO2Vsc2UgZm9yKG4gaW4gYSlhW25dJiZhW25dLnN0b3AmJkpuLnRlc3QobikmJmkoYVtuXSk7
Zm9yKG49by5sZW5ndGg7bi0tOylvW25dLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW25dLnF1ZXVl
IT09ZXx8KG9bbl0uYW5pbS5zdG9wKHIpLHQ9ITEsby5zcGxpY2UobiwxKSk7KHR8fCFyKSYmYi5k
ZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09ITEmJihlPWV8
fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49Yi5fZGF0YSh0aGlzKSxyPW5bZSsi
cXVldWUiXSxpPW5bZSsicXVldWVIb29rcyJdLG89Yi50aW1lcnMsYT1yP3IubGVuZ3RoOjA7Zm9y
KG4uZmluaXNoPSEwLGIucXVldWUodGhpcyxlLFtdKSxpJiZpLmN1ciYmaS5jdXIuZmluaXNoJiZp
LmN1ci5maW5pc2guY2FsbCh0aGlzKSx0PW8ubGVuZ3RoO3QtLTspb1t0XS5lbGVtPT09dGhpcyYm
b1t0XS5xdWV1ZT09PWUmJihvW3RdLmFuaW0uc3RvcCghMCksby5zcGxpY2UodCwxKSk7Zm9yKHQ9
MDthPnQ7dCsrKXJbdF0mJnJbdF0uZmluaXNoJiZyW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0
ZSBuLmZpbmlzaH0pfX0pO2Z1bmN0aW9uIGlyKGUsdCl7dmFyIG4scj17aGVpZ2h0OmV9LGk9MDtm
b3IodD10PzE6MDs0Pmk7aSs9Mi10KW49WnRbaV0sclsibWFyZ2luIituXT1yWyJwYWRkaW5nIitu
XT1lO3JldHVybiB0JiYoci5vcGFjaXR5PXIud2lkdGg9ZSkscn1iLmVhY2goe3NsaWRlRG93bjpp
cigic2hvdyIpLHNsaWRlVXA6aXIoImhpZGUiKSxzbGlkZVRvZ2dsZTppcigidG9nZ2xlIiksZmFk
ZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6
e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHQpe2IuZm5bZV09ZnVuY3Rpb24oZSxuLHIp
e3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSksYi5zcGVlZD1mdW5jdGlvbihlLHQsbil7
dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP2IuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwh
biYmdHx8Yi5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiFiLmlz
RnVuY3Rpb24odCkmJnR9O3JldHVybiByLmR1cmF0aW9uPWIuZngub2ZmPzA6Im51bWJlciI9PXR5
cGVvZiByLmR1cmF0aW9uP3IuZHVyYXRpb246ci5kdXJhdGlvbiBpbiBiLmZ4LnNwZWVkcz9iLmZ4
LnNwZWVkc1tyLmR1cmF0aW9uXTpiLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ci5xdWV1ZXx8
ci5xdWV1ZT09PSEwKSYmKHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRl
PWZ1bmN0aW9uKCl7Yi5pc0Z1bmN0aW9uKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVl
JiZiLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sYi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihl
KXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJ
KS8yfX0sYi50aW1lcnM9W10sYi5meD1yci5wcm90b3R5cGUuaW5pdCxiLmZ4LnRpY2s9ZnVuY3Rp
b24oKXt2YXIgZSxuPWIudGltZXJzLHI9MDtmb3IoWG49Yi5ub3coKTtuLmxlbmd0aD5yO3IrKyll
PW5bcl0sZSgpfHxuW3JdIT09ZXx8bi5zcGxpY2Uoci0tLDEpO24ubGVuZ3RofHxiLmZ4LnN0b3Ao
KSxYbj10fSxiLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmYi50aW1lcnMucHVzaChlKSYmYi5m
eC5zdGFydCgpfSxiLmZ4LmludGVydmFsPTEzLGIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtVbnx8KFVu
PXNldEludGVydmFsKGIuZngudGljayxiLmZ4LmludGVydmFsKSl9LGIuZnguc3RvcD1mdW5jdGlv
bigpe2NsZWFySW50ZXJ2YWwoVW4pLFVuPW51bGx9LGIuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0
OjIwMCxfZGVmYXVsdDo0MDB9LGIuZnguc3RlcD17fSxiLmV4cHImJmIuZXhwci5maWx0ZXJzJiYo
Yi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZ3JlcChiLnRpbWVy
cyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLGIuZm4ub2Zmc2V0PWZ1
bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT10P3RoaXM6dGhpcy5lYWNo
KGZ1bmN0aW9uKHQpe2Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgbixyLG89e3Rv
cDowLGxlZnQ6MH0sYT10aGlzWzBdLHM9YSYmYS5vd25lckRvY3VtZW50O2lmKHMpcmV0dXJuIG49
cy5kb2N1bWVudEVsZW1lbnQsYi5jb250YWlucyhuLGEpPyh0eXBlb2YgYS5nZXRCb3VuZGluZ0Ns
aWVudFJlY3QhPT1pJiYobz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxyPW9yKHMpLHt0b3A6
by50b3ArKHIucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wKS0obi5jbGllbnRUb3B8fDApLGxlZnQ6
by5sZWZ0KyhyLnBhZ2VYT2Zmc2V0fHxuLnNjcm9sbExlZnQpLShuLmNsaWVudExlZnR8fDApfSk6
b30sYi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHI9Yi5jc3MoZSwicG9z
aXRpb24iKTsic3RhdGljIj09PXImJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpO3ZhciBp
PWIoZSksbz1pLm9mZnNldCgpLGE9Yi5jc3MoZSwidG9wIikscz1iLmNzcyhlLCJsZWZ0IiksdT0o
ImFic29sdXRlIj09PXJ8fCJmaXhlZCI9PT1yKSYmYi5pbkFycmF5KCJhdXRvIixbYSxzXSk+LTEs
bD17fSxjPXt9LHAsZjt1PyhjPWkucG9zaXRpb24oKSxwPWMudG9wLGY9Yy5sZWZ0KToocD1wYXJz
ZUZsb2F0KGEpfHwwLGY9cGFyc2VGbG9hdChzKXx8MCksYi5pc0Z1bmN0aW9uKHQpJiYodD10LmNh
bGwoZSxuLG8pKSxudWxsIT10LnRvcCYmKGwudG9wPXQudG9wLW8udG9wK3ApLG51bGwhPXQubGVm
dCYmKGwubGVmdD10LmxlZnQtby5sZWZ0K2YpLCJ1c2luZyJpbiB0P3QudXNpbmcuY2FsbChlLGwp
OmkuY3NzKGwpfX0sYi5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7
dmFyIGUsdCxuPXt0b3A6MCxsZWZ0OjB9LHI9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09Yi5jc3Mo
ciwicG9zaXRpb24iKT90PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGU9dGhpcy5vZmZzZXRQ
YXJlbnQoKSx0PXRoaXMub2Zmc2V0KCksYi5ub2RlTmFtZShlWzBdLCJodG1sIil8fChuPWUub2Zm
c2V0KCkpLG4udG9wKz1iLmNzcyhlWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLG4ubGVmdCs9Yi5j
c3MoZVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6dC50b3Atbi50b3AtYi5jc3Mociwi
bWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtbi5sZWZ0LWIuY3NzKHIsIm1hcmdpbkxlZnQiLCEw
KX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2
YXIgZT10aGlzLm9mZnNldFBhcmVudHx8by5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmIWIubm9k
ZU5hbWUoZSwiaHRtbCIpJiYic3RhdGljIj09PWIuY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNl
dFBhcmVudDtyZXR1cm4gZXx8by5kb2N1bWVudEVsZW1lbnR9KX19KSxiLmVhY2goe3Njcm9sbExl
ZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oZSxuKXt2
YXIgcj0vWS8udGVzdChuKTtiLmZuW2VdPWZ1bmN0aW9uKGkpe3JldHVybiBiLmFjY2Vzcyh0aGlz
LGZ1bmN0aW9uKGUsaSxvKXt2YXIgYT1vcihlKTtyZXR1cm4gbz09PXQ/YT9uIGluIGE/YVtuXTph
LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtpXTplW2ldOihhP2Euc2Nyb2xsVG8ocj9iKGEpLnNj
cm9sbExlZnQoKTpvLHI/bzpiKGEpLnNjcm9sbFRvcCgpKTplW2ldPW8sdCl9LGUsaSxhcmd1bWVu
dHMubGVuZ3RoLG51bGwpfX0pO2Z1bmN0aW9uIG9yKGUpe3JldHVybiBiLmlzV2luZG93KGUpP2U6
OT09PWUubm9kZVR5cGU/ZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3c6ITF9Yi5lYWNoKHtI
ZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oZSxuKXtiLmVhY2goe3BhZGRp
bmc6ImlubmVyIitlLGNvbnRlbnQ6biwiIjoib3V0ZXIiK2V9LGZ1bmN0aW9uKHIsaSl7Yi5mbltp
XT1mdW5jdGlvbihpLG8pe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGgmJihyfHwiYm9vbGVhbiIhPXR5
cGVvZiBpKSxzPXJ8fChpPT09ITB8fG89PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIGIu
YWNjZXNzKHRoaXMsZnVuY3Rpb24obixyLGkpe3ZhciBvO3JldHVybiBiLmlzV2luZG93KG4pP24u
ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2VdOjk9PT1uLm5vZGVUeXBlPyhvPW4u
ZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KG4uYm9keVsic2Nyb2xsIitlXSxvWyJzY3JvbGwiK2Vd
LG4uYm9keVsib2Zmc2V0IitlXSxvWyJvZmZzZXQiK2VdLG9bImNsaWVudCIrZV0pKTppPT09dD9i
LmNzcyhuLHIscyk6Yi5zdHlsZShuLHIsaSxzKX0sbixhP2k6dCxhLG51bGwpfX0pfSksZS5qUXVl
cnk9ZS4kPWIsImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lLmFt
ZC5qUXVlcnkmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBifSl9KSh3aW5k
b3cpOw==
</content></attachment><attachment>
<filename>rangy-core-1.2.js</filename>
<filesize>125591</filesize>
<author>XWiki.Admin</author>
<date>1372254748000</date>
<version>1.1</version>
<comment></comment><content>LyoqDQogKiBAbGljZW5zZSBSYW5neSwgYSBjcm9zcy1icm93c2VyIEphdmFTY3JpcHQgcmFuZ2Ug
YW5kIHNlbGVjdGlvbiBsaWJyYXJ5DQogKiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcmFuZ3kv
DQogKg0KICogQ29weXJpZ2h0IDIwMTIsIFRpbSBEb3duDQogKiBMaWNlbnNlZCB1bmRlciB0aGUg
TUlUIGxpY2Vuc2UuDQogKiBWZXJzaW9uOiAxLjIuMw0KICogQnVpbGQgZGF0ZTogMjYgRmVicnVh
cnkgMjAxMg0KICovDQp3aW5kb3dbJ3Jhbmd5J10gPSAoZnVuY3Rpb24oKSB7DQoNCg0KICAgIHZh
ciBPQkpFQ1QgPSAib2JqZWN0IiwgRlVOQ1RJT04gPSAiZnVuY3Rpb24iLCBVTkRFRklORUQgPSAi
dW5kZWZpbmVkIjsNCg0KICAgIHZhciBkb21SYW5nZVByb3BlcnRpZXMgPSBbInN0YXJ0Q29udGFp
bmVyIiwgInN0YXJ0T2Zmc2V0IiwgImVuZENvbnRhaW5lciIsICJlbmRPZmZzZXQiLCAiY29sbGFw
c2VkIiwNCiAgICAgICAgImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyIiwgIlNUQVJUX1RPX1NUQVJU
IiwgIlNUQVJUX1RPX0VORCIsICJFTkRfVE9fU1RBUlQiLCAiRU5EX1RPX0VORCJdOw0KDQogICAg
dmFyIGRvbVJhbmdlTWV0aG9kcyA9IFsic2V0U3RhcnQiLCAic2V0U3RhcnRCZWZvcmUiLCAic2V0
U3RhcnRBZnRlciIsICJzZXRFbmQiLCAic2V0RW5kQmVmb3JlIiwNCiAgICAgICAgInNldEVuZEFm
dGVyIiwgImNvbGxhcHNlIiwgInNlbGVjdE5vZGUiLCAic2VsZWN0Tm9kZUNvbnRlbnRzIiwgImNv
bXBhcmVCb3VuZGFyeVBvaW50cyIsICJkZWxldGVDb250ZW50cyIsDQogICAgICAgICJleHRyYWN0
Q29udGVudHMiLCAiY2xvbmVDb250ZW50cyIsICJpbnNlcnROb2RlIiwgInN1cnJvdW5kQ29udGVu
dHMiLCAiY2xvbmVSYW5nZSIsICJ0b1N0cmluZyIsICJkZXRhY2giXTsNCg0KICAgIHZhciB0ZXh0
UmFuZ2VQcm9wZXJ0aWVzID0gWyJib3VuZGluZ0hlaWdodCIsICJib3VuZGluZ0xlZnQiLCAiYm91
bmRpbmdUb3AiLCAiYm91bmRpbmdXaWR0aCIsICJodG1sVGV4dCIsICJ0ZXh0Il07DQoNCiAgICAv
LyBTdWJzZXQgb2YgVGV4dFJhbmdlJ3MgZnVsbCBzZXQgb2YgbWV0aG9kcyB0aGF0IHdlJ3JlIGlu
dGVyZXN0ZWQgaW4NCiAgICB2YXIgdGV4dFJhbmdlTWV0aG9kcyA9IFsiY29sbGFwc2UiLCAiY29t
cGFyZUVuZFBvaW50cyIsICJkdXBsaWNhdGUiLCAiZ2V0Qm9va21hcmsiLCAibW92ZVRvQm9va21h
cmsiLA0KICAgICAgICAibW92ZVRvRWxlbWVudFRleHQiLCAicGFyZW50RWxlbWVudCIsICJwYXN0
ZUhUTUwiLCAic2VsZWN0IiwgInNldEVuZFBvaW50IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCJd
Ow0KDQogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tKi8NCg0KICAgIC8vIFRyaW8gb2YgZnVuY3Rpb25zIHRha2VuIGZyb20gUGV0ZXIg
TWljaGF1eCdzIGFydGljbGU6DQogICAgLy8gaHR0cDovL3BldGVyLm1pY2hhdXguY2EvYXJ0aWNs
ZXMvZmVhdHVyZS1kZXRlY3Rpb24tc3RhdGUtb2YtdGhlLWFydC1icm93c2VyLXNjcmlwdGluZw0K
ICAgIGZ1bmN0aW9uIGlzSG9zdE1ldGhvZChvLCBwKSB7DQogICAgICAgIHZhciB0ID0gdHlwZW9m
IG9bcF07DQogICAgICAgIHJldHVybiB0ID09IEZVTkNUSU9OIHx8ICghISh0ID09IE9CSkVDVCAm
JiBvW3BdKSkgfHwgdCA9PSAidW5rbm93biI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNIb3N0
T2JqZWN0KG8sIHApIHsNCiAgICAgICAgcmV0dXJuICEhKHR5cGVvZiBvW3BdID09IE9CSkVDVCAm
JiBvW3BdKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc0hvc3RQcm9wZXJ0eShvLCBwKSB7DQog
ICAgICAgIHJldHVybiB0eXBlb2Ygb1twXSAhPSBVTkRFRklORUQ7DQogICAgfQ0KDQogICAgLy8g
Q3JlYXRlcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIHNhdmUgdmVyYm9zZSByZXBlYXRlZCBj
YWxscyB0byB0ZXN0cyBmdW5jdGlvbnMNCiAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZVByb3Bl
cnR5VGVzdCh0ZXN0RnVuYykgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24obywgcHJvcHMpIHsN
CiAgICAgICAgICAgIHZhciBpID0gcHJvcHMubGVuZ3RoOw0KICAgICAgICAgICAgd2hpbGUgKGkt
LSkgew0KICAgICAgICAgICAgICAgIGlmICghdGVzdEZ1bmMobywgcHJvcHNbaV0pKSB7DQogICAg
ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICB9DQoNCiAg
ICAvLyBOZXh0IHRyaW8gb2YgZnVuY3Rpb25zIGFyZSBhIGNvbnZlbmllbmNlIHRvIHNhdmUgdmVy
Ym9zZSByZXBlYXRlZCBjYWxscyB0byBwcmV2aW91cyB0d28gZnVuY3Rpb25zDQogICAgdmFyIGFy
ZUhvc3RNZXRob2RzID0gY3JlYXRlTXVsdGlwbGVQcm9wZXJ0eVRlc3QoaXNIb3N0TWV0aG9kKTsN
CiAgICB2YXIgYXJlSG9zdE9iamVjdHMgPSBjcmVhdGVNdWx0aXBsZVByb3BlcnR5VGVzdChpc0hv
c3RPYmplY3QpOw0KICAgIHZhciBhcmVIb3N0UHJvcGVydGllcyA9IGNyZWF0ZU11bHRpcGxlUHJv
cGVydHlUZXN0KGlzSG9zdFByb3BlcnR5KTsNCg0KICAgIGZ1bmN0aW9uIGlzVGV4dFJhbmdlKHJh
bmdlKSB7DQogICAgICAgIHJldHVybiByYW5nZSAmJiBhcmVIb3N0TWV0aG9kcyhyYW5nZSwgdGV4
dFJhbmdlTWV0aG9kcykgJiYgYXJlSG9zdFByb3BlcnRpZXMocmFuZ2UsIHRleHRSYW5nZVByb3Bl
cnRpZXMpOw0KICAgIH0NCg0KICAgIHZhciBhcGkgPSB7DQogICAgICAgIHZlcnNpb246ICIxLjIu
MyIsDQogICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSwNCiAgICAgICAgc3VwcG9ydGVkOiB0cnVl
LA0KDQogICAgICAgIHV0aWw6IHsNCiAgICAgICAgICAgIGlzSG9zdE1ldGhvZDogaXNIb3N0TWV0
aG9kLA0KICAgICAgICAgICAgaXNIb3N0T2JqZWN0OiBpc0hvc3RPYmplY3QsDQogICAgICAgICAg
ICBpc0hvc3RQcm9wZXJ0eTogaXNIb3N0UHJvcGVydHksDQogICAgICAgICAgICBhcmVIb3N0TWV0
aG9kczogYXJlSG9zdE1ldGhvZHMsDQogICAgICAgICAgICBhcmVIb3N0T2JqZWN0czogYXJlSG9z
dE9iamVjdHMsDQogICAgICAgICAgICBhcmVIb3N0UHJvcGVydGllczogYXJlSG9zdFByb3BlcnRp
ZXMsDQogICAgICAgICAgICBpc1RleHRSYW5nZTogaXNUZXh0UmFuZ2UNCiAgICAgICAgfSwNCg0K
ICAgICAgICBmZWF0dXJlczoge30sDQoNCiAgICAgICAgbW9kdWxlczoge30sDQogICAgICAgIGNv
bmZpZzogew0KICAgICAgICAgICAgYWxlcnRPbldhcm46IGZhbHNlLA0KICAgICAgICAgICAgcHJl
ZmVyVGV4dFJhbmdlOiBmYWxzZQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGZh
aWwocmVhc29uKSB7DQogICAgICAgIHdpbmRvdy5hbGVydCgiUmFuZ3kgbm90IHN1cHBvcnRlZCBp
biB5b3VyIGJyb3dzZXIuIFJlYXNvbjogIiArIHJlYXNvbik7DQogICAgICAgIGFwaS5pbml0aWFs
aXplZCA9IHRydWU7DQogICAgICAgIGFwaS5zdXBwb3J0ZWQgPSBmYWxzZTsNCiAgICB9DQoNCiAg
ICBhcGkuZmFpbCA9IGZhaWw7DQoNCiAgICBmdW5jdGlvbiB3YXJuKG1zZykgew0KICAgICAgICB2
YXIgd2FybmluZ01lc3NhZ2UgPSAiUmFuZ3kgd2FybmluZzogIiArIG1zZzsNCiAgICAgICAgaWYg
KGFwaS5jb25maWcuYWxlcnRPbldhcm4pIHsNCiAgICAgICAgICAgIHdpbmRvdy5hbGVydCh3YXJu
aW5nTWVzc2FnZSk7DQogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5jb25zb2xlICE9
IFVOREVGSU5FRCAmJiB0eXBlb2Ygd2luZG93LmNvbnNvbGUubG9nICE9IFVOREVGSU5FRCkgew0K
ICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHdhcm5pbmdNZXNzYWdlKTsNCiAgICAgICAg
fQ0KICAgIH0NCg0KICAgIGFwaS53YXJuID0gd2FybjsNCg0KICAgIGlmICh7fS5oYXNPd25Qcm9w
ZXJ0eSkgew0KICAgICAgICBhcGkudXRpbC5leHRlbmQgPSBmdW5jdGlvbihvLCBwcm9wcykgew0K
ICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwcm9wcykgew0KICAgICAgICAgICAgICAgIGlmIChw
cm9wcy5oYXNPd25Qcm9wZXJ0eShpKSkgew0KICAgICAgICAgICAgICAgICAgICBvW2ldID0gcHJv
cHNbaV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAg
IH0gZWxzZSB7DQogICAgICAgIGZhaWwoImhhc093blByb3BlcnR5IG5vdCBzdXBwb3J0ZWQiKTsN
CiAgICB9DQoNCiAgICB2YXIgaW5pdExpc3RlbmVycyA9IFtdOw0KICAgIHZhciBtb2R1bGVJbml0
aWFsaXplcnMgPSBbXTsNCg0KICAgIC8vIEluaXRpYWxpemF0aW9uDQogICAgZnVuY3Rpb24gaW5p
dCgpIHsNCiAgICAgICAgaWYgKGFwaS5pbml0aWFsaXplZCkgew0KICAgICAgICAgICAgcmV0dXJu
Ow0KICAgICAgICB9DQogICAgICAgIHZhciB0ZXN0UmFuZ2U7DQogICAgICAgIHZhciBpbXBsZW1l
bnRzRG9tUmFuZ2UgPSBmYWxzZSwgaW1wbGVtZW50c1RleHRSYW5nZSA9IGZhbHNlOw0KDQogICAg
ICAgIC8vIEZpcnN0LCBwZXJmb3JtIGJhc2ljIGZlYXR1cmUgdGVzdHMNCg0KICAgICAgICBpZiAo
aXNIb3N0TWV0aG9kKGRvY3VtZW50LCAiY3JlYXRlUmFuZ2UiKSkgew0KICAgICAgICAgICAgaW1w
bGVtZW50c0RvbVJhbmdlID0gdHJ1ZTsNCiAgICAgICAgICAgIC8vdGVzdFJhbmdlID0gZG9jdW1l
bnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIC8vaWYgKGFyZUhvc3RNZXRob2RzKHRlc3RS
YW5nZSwgZG9tUmFuZ2VNZXRob2RzKSAmJiBhcmVIb3N0UHJvcGVydGllcyh0ZXN0UmFuZ2UsIGRv
bVJhbmdlUHJvcGVydGllcykpIHsNCiAgICAgICAgICAgIC8vICAgIGltcGxlbWVudHNEb21SYW5n
ZSA9IHRydWU7DQogICAgICAgICAgICAvL30NCiAgICAgICAgICAgIC8vdGVzdFJhbmdlLmRldGFj
aCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGJvZHkgPSBpc0hvc3RPYmplY3QoZG9jdW1l
bnQsICJib2R5IikgPyBkb2N1bWVudC5ib2R5IDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05h
bWUoImJvZHkiKVswXTsNCg0KICAgICAgICBpZiAoYm9keSAmJiBpc0hvc3RNZXRob2QoYm9keSwg
ImNyZWF0ZVRleHRSYW5nZSIpKSB7DQogICAgICAgICAgICB0ZXN0UmFuZ2UgPSBib2R5LmNyZWF0
ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAgaWYgKGlzVGV4dFJhbmdlKHRlc3RSYW5nZSkpIHsN
CiAgICAgICAgICAgICAgICBpbXBsZW1lbnRzVGV4dFJhbmdlID0gdHJ1ZTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghaW1wbGVtZW50c0RvbVJhbmdlICYmICFpbXBs
ZW1lbnRzVGV4dFJhbmdlKSB7DQogICAgICAgICAgICBmYWlsKCJOZWl0aGVyIFJhbmdlIG5vciBU
ZXh0UmFuZ2UgYXJlIGltcGxlbWVudGVkIik7DQogICAgICAgIH0NCg0KICAgICAgICBhcGkuaW5p
dGlhbGl6ZWQgPSB0cnVlOw0KICAgICAgICBhcGkuZmVhdHVyZXMgPSB7DQogICAgICAgICAgICBp
bXBsZW1lbnRzRG9tUmFuZ2U6IGltcGxlbWVudHNEb21SYW5nZSwNCiAgICAgICAgICAgIGltcGxl
bWVudHNUZXh0UmFuZ2U6IGltcGxlbWVudHNUZXh0UmFuZ2UNCiAgICAgICAgfTsNCg0KICAgICAg
ICAvLyBJbml0aWFsaXplIG1vZHVsZXMgYW5kIGNhbGwgaW5pdCBsaXN0ZW5lcnMNCiAgICAgICAg
dmFyIGFsbExpc3RlbmVycyA9IG1vZHVsZUluaXRpYWxpemVycy5jb25jYXQoaW5pdExpc3RlbmVy
cyk7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhbGxMaXN0ZW5lcnMubGVuZ3RoOyBp
IDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgYWxsTGlz
dGVuZXJzW2ldKGFwaSk7DQogICAgICAgICAgICB9IGNhdGNoIChleCkgew0KICAgICAgICAgICAg
ICAgIGlmIChpc0hvc3RPYmplY3Qod2luZG93LCAiY29uc29sZSIpICYmIGlzSG9zdE1ldGhvZCh3
aW5kb3cuY29uc29sZSwgImxvZyIpKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25z
b2xlLmxvZygiSW5pdCBsaXN0ZW5lciB0aHJldyBhbiBleGNlcHRpb24uIENvbnRpbnVpbmcuIiwg
ZXgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAg
fQ0KDQogICAgLy8gQWxsb3cgZXh0ZXJuYWwgc2NyaXB0cyB0byBpbml0aWFsaXplIHRoaXMgbGli
cmFyeSBpbiBjYXNlIGl0J3MgbG9hZGVkIGFmdGVyIHRoZSBkb2N1bWVudCBoYXMgbG9hZGVkDQog
ICAgYXBpLmluaXQgPSBpbml0Ow0KDQogICAgLy8gRXhlY3V0ZSBsaXN0ZW5lciBpbW1lZGlhdGVs
eSBpZiBhbHJlYWR5IGluaXRpYWxpemVkDQogICAgYXBpLmFkZEluaXRMaXN0ZW5lciA9IGZ1bmN0
aW9uKGxpc3RlbmVyKSB7DQogICAgICAgIGlmIChhcGkuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAg
ICAgIGxpc3RlbmVyKGFwaSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbml0TGlz
dGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHZhciBjcmVh
dGVNaXNzaW5nTmF0aXZlQXBpTGlzdGVuZXJzID0gW107DQoNCiAgICBhcGkuYWRkQ3JlYXRlTWlz
c2luZ05hdGl2ZUFwaUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHsNCiAgICAgICAgY3Jl
YXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsNCiAgICB9Ow0KDQog
ICAgZnVuY3Rpb24gY3JlYXRlTWlzc2luZ05hdGl2ZUFwaSh3aW4pIHsNCiAgICAgICAgd2luID0g
d2luIHx8IHdpbmRvdzsNCiAgICAgICAgaW5pdCgpOw0KDQogICAgICAgIC8vIE5vdGlmeSBsaXN0
ZW5lcnMNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNyZWF0ZU1pc3NpbmdOYXRpdmVB
cGlMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIGNyZWF0ZU1p
c3NpbmdOYXRpdmVBcGlMaXN0ZW5lcnNbaV0od2luKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAg
IGFwaS5jcmVhdGVNaXNzaW5nTmF0aXZlQXBpID0gY3JlYXRlTWlzc2luZ05hdGl2ZUFwaTsNCg0K
ICAgIC8qKg0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIE1vZHVs
ZShuYW1lKSB7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICAgIHRoaXMuaW5pdGlh
bGl6ZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zdXBwb3J0ZWQgPSBmYWxzZTsNCiAgICB9DQoN
CiAgICBNb2R1bGUucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbihyZWFzb24pIHsNCiAgICAgICAg
dGhpcy5pbml0aWFsaXplZCA9IHRydWU7DQogICAgICAgIHRoaXMuc3VwcG9ydGVkID0gZmFsc2U7
DQoNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgJyIgKyB0aGlzLm5hbWUgKyAiJyBm
YWlsZWQgdG8gbG9hZDogIiArIHJlYXNvbik7DQogICAgfTsNCg0KICAgIE1vZHVsZS5wcm90b3R5
cGUud2FybiA9IGZ1bmN0aW9uKG1zZykgew0KICAgICAgICBhcGkud2FybigiTW9kdWxlICIgKyB0
aGlzLm5hbWUgKyAiOiAiICsgbXNnKTsNCiAgICB9Ow0KDQogICAgTW9kdWxlLnByb3RvdHlwZS5j
cmVhdGVFcnJvciA9IGZ1bmN0aW9uKG1zZykgew0KICAgICAgICByZXR1cm4gbmV3IEVycm9yKCJF
cnJvciBpbiBSYW5neSAiICsgdGhpcy5uYW1lICsgIiBtb2R1bGU6ICIgKyBtc2cpOw0KICAgIH07
DQoNCiAgICBhcGkuY3JlYXRlTW9kdWxlID0gZnVuY3Rpb24obmFtZSwgaW5pdEZ1bmMpIHsNCiAg
ICAgICAgdmFyIG1vZHVsZSA9IG5ldyBNb2R1bGUobmFtZSk7DQogICAgICAgIGFwaS5tb2R1bGVz
W25hbWVdID0gbW9kdWxlOw0KDQogICAgICAgIG1vZHVsZUluaXRpYWxpemVycy5wdXNoKGZ1bmN0
aW9uKGFwaSkgew0KICAgICAgICAgICAgaW5pdEZ1bmMoYXBpLCBtb2R1bGUpOw0KICAgICAgICAg
ICAgbW9kdWxlLmluaXRpYWxpemVkID0gdHJ1ZTsNCiAgICAgICAgICAgIG1vZHVsZS5zdXBwb3J0
ZWQgPSB0cnVlOw0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgYXBpLnJlcXVpcmVNb2R1bGVz
ID0gZnVuY3Rpb24obW9kdWxlcykgew0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW9k
dWxlcy5sZW5ndGgsIG1vZHVsZSwgbW9kdWxlTmFtZTsgaSA8IGxlbjsgKytpKSB7DQogICAgICAg
ICAgICBtb2R1bGVOYW1lID0gbW9kdWxlc1tpXTsNCiAgICAgICAgICAgIG1vZHVsZSA9IGFwaS5t
b2R1bGVzW21vZHVsZU5hbWVdOw0KICAgICAgICAgICAgaWYgKCFtb2R1bGUgfHwgIShtb2R1bGUg
aW5zdGFuY2VvZiBNb2R1bGUpKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJN
b2R1bGUgJyIgKyBtb2R1bGVOYW1lICsgIicgbm90IGZvdW5kIik7DQogICAgICAgICAgICB9DQog
ICAgICAgICAgICBpZiAoIW1vZHVsZS5zdXBwb3J0ZWQpIHsNCiAgICAgICAgICAgICAgICB0aHJv
dyBuZXcgRXJyb3IoIk1vZHVsZSAnIiArIG1vZHVsZU5hbWUgKyAiJyBub3Qgc3VwcG9ydGVkIik7
DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgIC8vIFdh
aXQgZm9yIGRvY3VtZW50IHRvIGxvYWQgYmVmb3JlIHJ1bm5pbmcgdGVzdHMNCg0KICAgIHZhciBk
b2NSZWFkeSA9IGZhbHNlOw0KDQogICAgdmFyIGxvYWRIYW5kbGVyID0gZnVuY3Rpb24oZSkgew0K
DQogICAgICAgIGlmICghZG9jUmVhZHkpIHsNCiAgICAgICAgICAgIGRvY1JlYWR5ID0gdHJ1ZTsN
CiAgICAgICAgICAgIGlmICghYXBpLmluaXRpYWxpemVkKSB7DQogICAgICAgICAgICAgICAgaW5p
dCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIFRlc3Qgd2hl
dGhlciB3ZSBoYXZlIHdpbmRvdyBhbmQgZG9jdW1lbnQgb2JqZWN0cyB0aGF0IHdlIHdpbGwgbmVl
ZA0KICAgIGlmICh0eXBlb2Ygd2luZG93ID09IFVOREVGSU5FRCkgew0KICAgICAgICBmYWlsKCJO
byB3aW5kb3cgZm91bmQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpZiAodHlwZW9m
IGRvY3VtZW50ID09IFVOREVGSU5FRCkgew0KICAgICAgICBmYWlsKCJObyBkb2N1bWVudCBmb3Vu
ZCIpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgaWYgKGlzSG9zdE1ldGhvZChkb2N1
bWVudCwgImFkZEV2ZW50TGlzdGVuZXIiKSkgew0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExp
c3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgbG9hZEhhbmRsZXIsIGZhbHNlKTsNCiAgICB9DQoN
CiAgICAvLyBBZGQgYSBmYWxsYmFjayBpbiBjYXNlIHRoZSBET01Db250ZW50TG9hZGVkIGV2ZW50
IGlzbid0IHN1cHBvcnRlZA0KICAgIGlmIChpc0hvc3RNZXRob2Qod2luZG93LCAiYWRkRXZlbnRM
aXN0ZW5lciIpKSB7DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgbG9h
ZEhhbmRsZXIsIGZhbHNlKTsNCiAgICB9IGVsc2UgaWYgKGlzSG9zdE1ldGhvZCh3aW5kb3csICJh
dHRhY2hFdmVudCIpKSB7DQogICAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIiwgbG9h
ZEhhbmRsZXIpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGZhaWwoIldpbmRvdyBkb2VzIG5vdCBo
YXZlIHJlcXVpcmVkIGFkZEV2ZW50TGlzdGVuZXIgb3IgYXR0YWNoRXZlbnQgbWV0aG9kIik7DQog
ICAgfQ0KDQogICAgcmV0dXJuIGFwaTsNCn0pKCk7DQpyYW5neS5jcmVhdGVNb2R1bGUoIkRvbVV0
aWwiLCBmdW5jdGlvbihhcGksIG1vZHVsZSkgew0KDQogICAgdmFyIFVOREVGID0gInVuZGVmaW5l
ZCI7DQogICAgdmFyIHV0aWwgPSBhcGkudXRpbDsNCg0KICAgIC8vIFBlcmZvcm0gZmVhdHVyZSB0
ZXN0cw0KICAgIGlmICghdXRpbC5hcmVIb3N0TWV0aG9kcyhkb2N1bWVudCwgWyJjcmVhdGVEb2N1
bWVudEZyYWdtZW50IiwgImNyZWF0ZUVsZW1lbnQiLCAiY3JlYXRlVGV4dE5vZGUiXSkpIHsNCiAg
ICAgICAgbW9kdWxlLmZhaWwoImRvY3VtZW50IG1pc3NpbmcgYSBOb2RlIGNyZWF0aW9uIG1ldGhv
ZCIpOw0KICAgIH0NCg0KICAgIGlmICghdXRpbC5pc0hvc3RNZXRob2QoZG9jdW1lbnQsICJnZXRF
bGVtZW50c0J5VGFnTmFtZSIpKSB7DQogICAgICAgIG1vZHVsZS5mYWlsKCJkb2N1bWVudCBtaXNz
aW5nIGdldEVsZW1lbnRzQnlUYWdOYW1lIG1ldGhvZCIpOw0KICAgIH0NCg0KICAgIHZhciBlbCA9
IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgIGlmICghdXRpbC5hcmVIb3N0TWV0
aG9kcyhlbCwgWyJpbnNlcnRCZWZvcmUiLCAiYXBwZW5kQ2hpbGQiLCAiY2xvbmVOb2RlIl0gfHwN
CiAgICAgICAgICAgICF1dGlsLmFyZUhvc3RPYmplY3RzKGVsLCBbInByZXZpb3VzU2libGluZyIs
ICJuZXh0U2libGluZyIsICJjaGlsZE5vZGVzIiwgInBhcmVudE5vZGUiXSkpKSB7DQogICAgICAg
IG1vZHVsZS5mYWlsKCJJbmNvbXBsZXRlIEVsZW1lbnQgaW1wbGVtZW50YXRpb24iKTsNCiAgICB9
DQoNCiAgICAvLyBpbm5lckhUTUwgaXMgcmVxdWlyZWQgZm9yIFJhbmdlJ3MgY3JlYXRlQ29udGV4
dHVhbEZyYWdtZW50IG1ldGhvZA0KICAgIGlmICghdXRpbC5pc0hvc3RQcm9wZXJ0eShlbCwgImlu
bmVySFRNTCIpKSB7DQogICAgICAgIG1vZHVsZS5mYWlsKCJFbGVtZW50IGlzIG1pc3NpbmcgaW5u
ZXJIVE1MIHByb3BlcnR5Iik7DQogICAgfQ0KDQogICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQu
Y3JlYXRlVGV4dE5vZGUoInRlc3QiKTsNCiAgICBpZiAoIXV0aWwuYXJlSG9zdE1ldGhvZHModGV4
dE5vZGUsIFsic3BsaXRUZXh0IiwgImRlbGV0ZURhdGEiLCAiaW5zZXJ0RGF0YSIsICJhcHBlbmRE
YXRhIiwgImNsb25lTm9kZSJdIHx8DQogICAgICAgICAgICAhdXRpbC5hcmVIb3N0T2JqZWN0cyhl
bCwgWyJwcmV2aW91c1NpYmxpbmciLCAibmV4dFNpYmxpbmciLCAiY2hpbGROb2RlcyIsICJwYXJl
bnROb2RlIl0pIHx8DQogICAgICAgICAgICAhdXRpbC5hcmVIb3N0UHJvcGVydGllcyh0ZXh0Tm9k
ZSwgWyJkYXRhIl0pKSkgew0KICAgICAgICBtb2R1bGUuZmFpbCgiSW5jb21wbGV0ZSBUZXh0IE5v
ZGUgaW1wbGVtZW50YXRpb24iKTsNCiAgICB9DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgLy8gUmVtb3ZlZCB1
c2Ugb2YgaW5kZXhPZiBiZWNhdXNlIG9mIGEgYml6YXJyZSBidWcgaW4gT3BlcmEgdGhhdCBpcyB0
aHJvd24gaW4gb25lIG9mIHRoZSBBY2lkMyB0ZXN0cy4gSSBoYXZlbid0IGJlZW4NCiAgICAvLyBh
YmxlIHRvIHJlcGxpY2F0ZSBpdCBvdXRzaWRlIG9mIHRoZSB0ZXN0LiBUaGUgYnVnIGlzIHRoYXQg
aW5kZXhPZiByZXR1cm5zIC0xIHdoZW4gY2FsbGVkIG9uIGFuIEFycmF5IHRoYXQNCiAgICAvLyBj
b250YWlucyBqdXN0IHRoZSBkb2N1bWVudCBhcyBhIHNpbmdsZSBlbGVtZW50IGFuZCB0aGUgdmFs
dWUgc2VhcmNoZWQgZm9yIGlzIHRoZSBkb2N1bWVudC4NCiAgICB2YXIgYXJyYXlDb250YWlucyA9
IC8qQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPw0KICAgICAgICBmdW5jdGlvbihhcnIsIHZhbCkg
ew0KICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHZhbCkgPiAtMTsNCiAgICAgICAgfToq
Lw0KDQogICAgICAgIGZ1bmN0aW9uKGFyciwgdmFsKSB7DQogICAgICAgICAgICB2YXIgaSA9IGFy
ci5sZW5ndGg7DQogICAgICAgICAgICB3aGlsZSAoaS0tKSB7DQogICAgICAgICAgICAgICAgaWYg
KGFycltpXSA9PT0gdmFsKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsN
CiAgICAgICAgfTsNCg0KICAgIC8vIE9wZXJhIDExIHB1dHMgSFRNTCBlbGVtZW50cyBpbiB0aGUg
bnVsbCBuYW1lc3BhY2UsIGl0IHNlZW1zLCBhbmQgSUUgNyBoYXMgdW5kZWZpbmVkIG5hbWVzcGFj
ZVVSSQ0KICAgIGZ1bmN0aW9uIGlzSHRtbE5hbWVzcGFjZShub2RlKSB7DQogICAgICAgIHZhciBu
czsNCiAgICAgICAgcmV0dXJuIHR5cGVvZiBub2RlLm5hbWVzcGFjZVVSSSA9PSBVTkRFRiB8fCAo
KG5zID0gbm9kZS5uYW1lc3BhY2VVUkkpID09PSBudWxsIHx8IG5zID09ICJodHRwOi8vd3d3Lncz
Lm9yZy8xOTk5L3hodG1sIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcGFyZW50RWxlbWVudChu
b2RlKSB7DQogICAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7DQogICAgICAgIHJl
dHVybiAocGFyZW50Lm5vZGVUeXBlID09IDEpID8gcGFyZW50IDogbnVsbDsNCiAgICB9DQoNCiAg
ICBmdW5jdGlvbiBnZXROb2RlSW5kZXgobm9kZSkgew0KICAgICAgICB2YXIgaSA9IDA7DQogICAg
ICAgIHdoaWxlKCAobm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nKSApIHsNCiAgICAgICAgICAg
IGkrKzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaTsNCiAgICB9DQoNCiAgICBmdW5jdGlv
biBnZXROb2RlTGVuZ3RoKG5vZGUpIHsNCiAgICAgICAgdmFyIGNoaWxkTm9kZXM7DQogICAgICAg
IHJldHVybiBpc0NoYXJhY3RlckRhdGFOb2RlKG5vZGUpID8gbm9kZS5sZW5ndGggOiAoKGNoaWxk
Tm9kZXMgPSBub2RlLmNoaWxkTm9kZXMpID8gY2hpbGROb2Rlcy5sZW5ndGggOiAwKTsNCiAgICB9
DQoNCiAgICBmdW5jdGlvbiBnZXRDb21tb25BbmNlc3Rvcihub2RlMSwgbm9kZTIpIHsNCiAgICAg
ICAgdmFyIGFuY2VzdG9ycyA9IFtdLCBuOw0KICAgICAgICBmb3IgKG4gPSBub2RlMTsgbjsgbiA9
IG4ucGFyZW50Tm9kZSkgew0KICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2gobik7DQogICAgICAg
IH0NCg0KICAgICAgICBmb3IgKG4gPSBub2RlMjsgbjsgbiA9IG4ucGFyZW50Tm9kZSkgew0KICAg
ICAgICAgICAgaWYgKGFycmF5Q29udGFpbnMoYW5jZXN0b3JzLCBuKSkgew0KICAgICAgICAgICAg
ICAgIHJldHVybiBuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJu
IG51bGw7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNBbmNlc3Rvck9mKGFuY2VzdG9yLCBkZXNj
ZW5kYW50LCBzZWxmSXNBbmNlc3Rvcikgew0KICAgICAgICB2YXIgbiA9IHNlbGZJc0FuY2VzdG9y
ID8gZGVzY2VuZGFudCA6IGRlc2NlbmRhbnQucGFyZW50Tm9kZTsNCiAgICAgICAgd2hpbGUgKG4p
IHsNCiAgICAgICAgICAgIGlmIChuID09PSBhbmNlc3Rvcikgew0KICAgICAgICAgICAgICAgIHJl
dHVybiB0cnVlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBuID0gbi5w
YXJlbnROb2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxz
ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDbG9zZXN0QW5jZXN0b3JJbihub2RlLCBhbmNl
c3Rvciwgc2VsZklzQW5jZXN0b3IpIHsNCiAgICAgICAgdmFyIHAsIG4gPSBzZWxmSXNBbmNlc3Rv
ciA/IG5vZGUgOiBub2RlLnBhcmVudE5vZGU7DQogICAgICAgIHdoaWxlIChuKSB7DQogICAgICAg
ICAgICBwID0gbi5wYXJlbnROb2RlOw0KICAgICAgICAgICAgaWYgKHAgPT09IGFuY2VzdG9yKSB7
DQogICAgICAgICAgICAgICAgcmV0dXJuIG47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBu
ID0gcDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBmdW5j
dGlvbiBpc0NoYXJhY3RlckRhdGFOb2RlKG5vZGUpIHsNCiAgICAgICAgdmFyIHQgPSBub2RlLm5v
ZGVUeXBlOw0KICAgICAgICByZXR1cm4gdCA9PSAzIHx8IHQgPT0gNCB8fCB0ID09IDggOyAvLyBU
ZXh0LCBDRGF0YVNlY3Rpb24gb3IgQ29tbWVudA0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGluc2Vy
dEFmdGVyKG5vZGUsIHByZWNlZGluZ05vZGUpIHsNCiAgICAgICAgdmFyIG5leHROb2RlID0gcHJl
Y2VkaW5nTm9kZS5uZXh0U2libGluZywgcGFyZW50ID0gcHJlY2VkaW5nTm9kZS5wYXJlbnROb2Rl
Ow0KICAgICAgICBpZiAobmV4dE5vZGUpIHsNCiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZv
cmUobm9kZSwgbmV4dE5vZGUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcGFyZW50
LmFwcGVuZENoaWxkKG5vZGUpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBub2RlOw0KICAg
IH0NCg0KICAgIC8vIE5vdGUgdGhhdCB3ZSBjYW5ub3QgdXNlIHNwbGl0VGV4dCgpIGJlY2F1c2Ug
aXQgaXMgYnVncmlkZGVuIGluIElFIDkuDQogICAgZnVuY3Rpb24gc3BsaXREYXRhTm9kZShub2Rl
LCBpbmRleCkgew0KICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKTsN
CiAgICAgICAgbmV3Tm9kZS5kZWxldGVEYXRhKDAsIGluZGV4KTsNCiAgICAgICAgbm9kZS5kZWxl
dGVEYXRhKGluZGV4LCBub2RlLmxlbmd0aCAtIGluZGV4KTsNCiAgICAgICAgaW5zZXJ0QWZ0ZXIo
bmV3Tm9kZSwgbm9kZSk7DQogICAgICAgIHJldHVybiBuZXdOb2RlOw0KICAgIH0NCg0KICAgIGZ1
bmN0aW9uIGdldERvY3VtZW50KG5vZGUpIHsNCiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0g
OSkgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICAgIH0gZWxzZSBpZiAodHlwZW9m
IG5vZGUub3duZXJEb2N1bWVudCAhPSBVTkRFRikgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGUu
b3duZXJEb2N1bWVudDsNCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm9kZS5kb2N1bWVudCAh
PSBVTkRFRikgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGUuZG9jdW1lbnQ7DQogICAgICAgIH0g
ZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSB7DQogICAgICAgICAgICByZXR1cm4gZ2V0RG9jdW1l
bnQobm9kZS5wYXJlbnROb2RlKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93
IG5ldyBFcnJvcigiZ2V0RG9jdW1lbnQ6IG5vIGRvY3VtZW50IGZvdW5kIGZvciBub2RlIik7DQog
ICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRXaW5kb3cobm9kZSkgew0KICAgICAg
ICB2YXIgZG9jID0gZ2V0RG9jdW1lbnQobm9kZSk7DQogICAgICAgIGlmICh0eXBlb2YgZG9jLmRl
ZmF1bHRWaWV3ICE9IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3
Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2MucGFyZW50V2luZG93ICE9IFVOREVGKSB7
DQogICAgICAgICAgICByZXR1cm4gZG9jLnBhcmVudFdpbmRvdzsNCiAgICAgICAgfSBlbHNlIHsN
CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IGdldCBhIHdpbmRvdyBvYmplY3Qg
Zm9yIG5vZGUiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElmcmFtZURv
Y3VtZW50KGlmcmFtZUVsKSB7DQogICAgICAgIGlmICh0eXBlb2YgaWZyYW1lRWwuY29udGVudERv
Y3VtZW50ICE9IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudERv
Y3VtZW50Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50V2luZG93
ICE9IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudFdpbmRvdy5k
b2N1bWVudDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigi
Z2V0SWZyYW1lV2luZG93OiBObyBEb2N1bWVudCBvYmplY3QgZm91bmQgZm9yIGlmcmFtZSBlbGVt
ZW50Iik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRJZnJhbWVXaW5kb3co
aWZyYW1lRWwpIHsNCiAgICAgICAgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50V2luZG93ICE9
IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudFdpbmRvdzsNCiAg
ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaWZyYW1lRWwuY29udGVudERvY3VtZW50ICE9IFVOREVG
KSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudERvY3VtZW50LmRlZmF1bHRW
aWV3Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJnZXRJ
ZnJhbWVXaW5kb3c6IE5vIFdpbmRvdyBvYmplY3QgZm91bmQgZm9yIGlmcmFtZSBlbGVtZW50Iik7
DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRCb2R5KGRvYykgew0KICAgICAg
ICByZXR1cm4gdXRpbC5pc0hvc3RPYmplY3QoZG9jLCAiYm9keSIpID8gZG9jLmJvZHkgOiBkb2Mu
Z2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBn
ZXRSb290Q29udGFpbmVyKG5vZGUpIHsNCiAgICAgICAgdmFyIHBhcmVudDsNCiAgICAgICAgd2hp
bGUgKCAocGFyZW50ID0gbm9kZS5wYXJlbnROb2RlKSApIHsNCiAgICAgICAgICAgIG5vZGUgPSBw
YXJlbnQ7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgfQ0KDQogICAgZnVu
Y3Rpb24gY29tcGFyZVBvaW50cyhub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNldEIpIHsNCiAg
ICAgICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLVRyYXZlcnNhbC1S
YW5nZS9yYW5nZXMuaHRtbCNMZXZlbC0yLVJhbmdlLUNvbXBhcmluZw0KICAgICAgICB2YXIgbm9k
ZUMsIHJvb3QsIGNoaWxkQSwgY2hpbGRCLCBuOw0KICAgICAgICBpZiAobm9kZUEgPT0gbm9kZUIp
IHsNCg0KICAgICAgICAgICAgLy8gQ2FzZSAxOiBub2RlcyBhcmUgdGhlIHNhbWUNCiAgICAgICAg
ICAgIHJldHVybiBvZmZzZXRBID09PSBvZmZzZXRCID8gMCA6IChvZmZzZXRBIDwgb2Zmc2V0Qikg
PyAtMSA6IDE7DQogICAgICAgIH0gZWxzZSBpZiAoIChub2RlQyA9IGdldENsb3Nlc3RBbmNlc3Rv
ckluKG5vZGVCLCBub2RlQSwgdHJ1ZSkpICkgew0KDQogICAgICAgICAgICAvLyBDYXNlIDI6IG5v
ZGUgQyAoY29udGFpbmVyIEIgb3IgYW4gYW5jZXN0b3IpIGlzIGEgY2hpbGQgbm9kZSBvZiBBDQog
ICAgICAgICAgICByZXR1cm4gb2Zmc2V0QSA8PSBnZXROb2RlSW5kZXgobm9kZUMpID8gLTEgOiAx
Ow0KICAgICAgICB9IGVsc2UgaWYgKCAobm9kZUMgPSBnZXRDbG9zZXN0QW5jZXN0b3JJbihub2Rl
QSwgbm9kZUIsIHRydWUpKSApIHsNCg0KICAgICAgICAgICAgLy8gQ2FzZSAzOiBub2RlIEMgKGNv
bnRhaW5lciBBIG9yIGFuIGFuY2VzdG9yKSBpcyBhIGNoaWxkIG5vZGUgb2YgQg0KICAgICAgICAg
ICAgcmV0dXJuIGdldE5vZGVJbmRleChub2RlQykgPCBvZmZzZXRCICA/IC0xIDogMTsNCiAgICAg
ICAgfSBlbHNlIHsNCg0KICAgICAgICAgICAgLy8gQ2FzZSA0OiBjb250YWluZXJzIGFyZSBzaWJs
aW5ncyBvciBkZXNjZW5kYW50cyBvZiBzaWJsaW5ncw0KICAgICAgICAgICAgcm9vdCA9IGdldENv
bW1vbkFuY2VzdG9yKG5vZGVBLCBub2RlQik7DQogICAgICAgICAgICBjaGlsZEEgPSAobm9kZUEg
PT09IHJvb3QpID8gcm9vdCA6IGdldENsb3Nlc3RBbmNlc3RvckluKG5vZGVBLCByb290LCB0cnVl
KTsNCiAgICAgICAgICAgIGNoaWxkQiA9IChub2RlQiA9PT0gcm9vdCkgPyByb290IDogZ2V0Q2xv
c2VzdEFuY2VzdG9ySW4obm9kZUIsIHJvb3QsIHRydWUpOw0KDQogICAgICAgICAgICBpZiAoY2hp
bGRBID09PSBjaGlsZEIpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZG4ndCBiZSBw
b3NzaWJsZQ0KDQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjb21wYXJlUG9pbnRz
IGdvdCB0byBjYXNlIDQgYW5kIGNoaWxkQSBhbmQgY2hpbGRCIGFyZSB0aGUgc2FtZSEiKTsNCiAg
ICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbiA9IHJvb3QuZmlyc3RDaGlsZDsN
CiAgICAgICAgICAgICAgICB3aGlsZSAobikgew0KICAgICAgICAgICAgICAgICAgICBpZiAobiA9
PT0gY2hpbGRBKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAg
ICAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gY2hpbGRCKSB7DQogICAgICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICBuID0gbi5uZXh0U2libGluZzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAg
ICAgdGhyb3cgbmV3IEVycm9yKCJTaG91bGQgbm90IGJlIGhlcmUhIik7DQogICAgICAgICAgICB9
DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmcmFnbWVudEZyb21Ob2RlQ2hpbGRy
ZW4obm9kZSkgew0KICAgICAgICB2YXIgZnJhZ21lbnQgPSBnZXREb2N1bWVudChub2RlKS5jcmVh
dGVEb2N1bWVudEZyYWdtZW50KCksIGNoaWxkOw0KICAgICAgICB3aGlsZSAoIChjaGlsZCA9IG5v
ZGUuZmlyc3RDaGlsZCkgKSB7DQogICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGls
ZCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZyYWdtZW50Ow0KICAgIH0NCg0KICAgIGZ1
bmN0aW9uIGluc3BlY3ROb2RlKG5vZGUpIHsNCiAgICAgICAgaWYgKCFub2RlKSB7DQogICAgICAg
ICAgICByZXR1cm4gIltObyBub2RlXSI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzQ2hhcmFj
dGVyRGF0YU5vZGUobm9kZSkpIHsNCiAgICAgICAgICAgIHJldHVybiAnIicgKyBub2RlLmRhdGEg
KyAnIic7DQogICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7DQogICAgICAg
ICAgICB2YXIgaWRBdHRyID0gbm9kZS5pZCA/ICcgaWQ9IicgKyBub2RlLmlkICsgJyInIDogIiI7
DQogICAgICAgICAgICByZXR1cm4gIjwiICsgbm9kZS5ub2RlTmFtZSArIGlkQXR0ciArICI+WyIg
KyBub2RlLmNoaWxkTm9kZXMubGVuZ3RoICsgIl0iOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAg
ICAgICAgcmV0dXJuIG5vZGUubm9kZU5hbWU7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioN
CiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBOb2RlSXRlcmF0b3Io
cm9vdCkgew0KICAgICAgICB0aGlzLnJvb3QgPSByb290Ow0KICAgICAgICB0aGlzLl9uZXh0ID0g
cm9vdDsNCiAgICB9DQoNCiAgICBOb2RlSXRlcmF0b3IucHJvdG90eXBlID0gew0KICAgICAgICBf
Y3VycmVudDogbnVsbCwNCg0KICAgICAgICBoYXNOZXh0OiBmdW5jdGlvbigpIHsNCiAgICAgICAg
ICAgIHJldHVybiAhIXRoaXMuX25leHQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgbmV4dDogZnVu
Y3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgbiA9IHRoaXMuX2N1cnJlbnQgPSB0aGlzLl9uZXh0
Ow0KICAgICAgICAgICAgdmFyIGNoaWxkLCBuZXh0Ow0KICAgICAgICAgICAgaWYgKHRoaXMuX2N1
cnJlbnQpIHsNCiAgICAgICAgICAgICAgICBjaGlsZCA9IG4uZmlyc3RDaGlsZDsNCiAgICAgICAg
ICAgICAgICBpZiAoY2hpbGQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmV4dCA9IGNo
aWxkOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG5leHQg
PSBudWxsOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKG4gIT09IHRoaXMucm9vdCkgJiYg
IShuZXh0ID0gbi5uZXh0U2libGluZykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBu
LnBhcmVudE5vZGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAg
dGhpcy5fbmV4dCA9IG5leHQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgZGV0
YWNoOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSB0aGlzLl9uZXh0
ID0gdGhpcy5yb290ID0gbnVsbDsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBj
cmVhdGVJdGVyYXRvcihyb290KSB7DQogICAgICAgIHJldHVybiBuZXcgTm9kZUl0ZXJhdG9yKHJv
b3QpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAg
IGZ1bmN0aW9uIERvbVBvc2l0aW9uKG5vZGUsIG9mZnNldCkgew0KICAgICAgICB0aGlzLm5vZGUg
PSBub2RlOw0KICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDsNCiAgICB9DQoNCiAgICBEb21Q
b3NpdGlvbi5wcm90b3R5cGUgPSB7DQogICAgICAgIGVxdWFsczogZnVuY3Rpb24ocG9zKSB7DQog
ICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlID09PSBwb3Mubm9kZSAmIHRoaXMub2Zmc2V0ID09
IHBvcy5vZmZzZXQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7
DQogICAgICAgICAgICByZXR1cm4gIltEb21Qb3NpdGlvbigiICsgaW5zcGVjdE5vZGUodGhpcy5u
b2RlKSArICI6IiArIHRoaXMub2Zmc2V0ICsgIildIjsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAg
ICAvKioNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBET01FeGNl
cHRpb24oY29kZU5hbWUpIHsNCiAgICAgICAgdGhpcy5jb2RlID0gdGhpc1tjb2RlTmFtZV07DQog
ICAgICAgIHRoaXMuY29kZU5hbWUgPSBjb2RlTmFtZTsNCiAgICAgICAgdGhpcy5tZXNzYWdlID0g
IkRPTUV4Y2VwdGlvbjogIiArIHRoaXMuY29kZU5hbWU7DQogICAgfQ0KDQogICAgRE9NRXhjZXB0
aW9uLnByb3RvdHlwZSA9IHsNCiAgICAgICAgSU5ERVhfU0laRV9FUlI6IDEsDQogICAgICAgIEhJ
RVJBUkNIWV9SRVFVRVNUX0VSUjogMywNCiAgICAgICAgV1JPTkdfRE9DVU1FTlRfRVJSOiA0LA0K
ICAgICAgICBOT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlI6IDcsDQogICAgICAgIE5PVF9GT1VO
RF9FUlI6IDgsDQogICAgICAgIE5PVF9TVVBQT1JURURfRVJSOiA5LA0KICAgICAgICBJTlZBTElE
X1NUQVRFX0VSUjogMTENCiAgICB9Ow0KDQogICAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZS50b1N0
cmluZyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlOw0KICAgIH07
DQoNCiAgICBhcGkuZG9tID0gew0KICAgICAgICBhcnJheUNvbnRhaW5zOiBhcnJheUNvbnRhaW5z
LA0KICAgICAgICBpc0h0bWxOYW1lc3BhY2U6IGlzSHRtbE5hbWVzcGFjZSwNCiAgICAgICAgcGFy
ZW50RWxlbWVudDogcGFyZW50RWxlbWVudCwNCiAgICAgICAgZ2V0Tm9kZUluZGV4OiBnZXROb2Rl
SW5kZXgsDQogICAgICAgIGdldE5vZGVMZW5ndGg6IGdldE5vZGVMZW5ndGgsDQogICAgICAgIGdl
dENvbW1vbkFuY2VzdG9yOiBnZXRDb21tb25BbmNlc3RvciwNCiAgICAgICAgaXNBbmNlc3Rvck9m
OiBpc0FuY2VzdG9yT2YsDQogICAgICAgIGdldENsb3Nlc3RBbmNlc3RvckluOiBnZXRDbG9zZXN0
QW5jZXN0b3JJbiwNCiAgICAgICAgaXNDaGFyYWN0ZXJEYXRhTm9kZTogaXNDaGFyYWN0ZXJEYXRh
Tm9kZSwNCiAgICAgICAgaW5zZXJ0QWZ0ZXI6IGluc2VydEFmdGVyLA0KICAgICAgICBzcGxpdERh
dGFOb2RlOiBzcGxpdERhdGFOb2RlLA0KICAgICAgICBnZXREb2N1bWVudDogZ2V0RG9jdW1lbnQs
DQogICAgICAgIGdldFdpbmRvdzogZ2V0V2luZG93LA0KICAgICAgICBnZXRJZnJhbWVXaW5kb3c6
IGdldElmcmFtZVdpbmRvdywNCiAgICAgICAgZ2V0SWZyYW1lRG9jdW1lbnQ6IGdldElmcmFtZURv
Y3VtZW50LA0KICAgICAgICBnZXRCb2R5OiBnZXRCb2R5LA0KICAgICAgICBnZXRSb290Q29udGFp
bmVyOiBnZXRSb290Q29udGFpbmVyLA0KICAgICAgICBjb21wYXJlUG9pbnRzOiBjb21wYXJlUG9p
bnRzLA0KICAgICAgICBpbnNwZWN0Tm9kZTogaW5zcGVjdE5vZGUsDQogICAgICAgIGZyYWdtZW50
RnJvbU5vZGVDaGlsZHJlbjogZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuLA0KICAgICAgICBjcmVh
dGVJdGVyYXRvcjogY3JlYXRlSXRlcmF0b3IsDQogICAgICAgIERvbVBvc2l0aW9uOiBEb21Qb3Np
dGlvbg0KICAgIH07DQoNCiAgICBhcGkuRE9NRXhjZXB0aW9uID0gRE9NRXhjZXB0aW9uOw0KfSk7
cmFuZ3kuY3JlYXRlTW9kdWxlKCJEb21SYW5nZSIsIGZ1bmN0aW9uKGFwaSwgbW9kdWxlKSB7CiAg
ICBhcGkucmVxdWlyZU1vZHVsZXMoIFsiRG9tVXRpbCJdICk7CgoKICAgIHZhciBkb20gPSBhcGku
ZG9tOwogICAgdmFyIERvbVBvc2l0aW9uID0gZG9tLkRvbVBvc2l0aW9uOwogICAgdmFyIERPTUV4
Y2VwdGlvbiA9IGFwaS5ET01FeGNlcHRpb247CiAgICAKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLy8gVXRpbGl0eSBm
dW5jdGlvbnMKCiAgICBmdW5jdGlvbiBpc05vblRleHRQYXJ0aWFsbHlTZWxlY3RlZChub2RlLCBy
YW5nZSkgewogICAgICAgIHJldHVybiAobm9kZS5ub2RlVHlwZSAhPSAzKSAmJgogICAgICAgICAg
ICAgICAoZG9tLmlzQW5jZXN0b3JPZihub2RlLCByYW5nZS5zdGFydENvbnRhaW5lciwgdHJ1ZSkg
fHwgZG9tLmlzQW5jZXN0b3JPZihub2RlLCByYW5nZS5lbmRDb250YWluZXIsIHRydWUpKTsKICAg
IH0KCiAgICBmdW5jdGlvbiBnZXRSYW5nZURvY3VtZW50KHJhbmdlKSB7CiAgICAgICAgcmV0dXJu
IGRvbS5nZXREb2N1bWVudChyYW5nZS5zdGFydENvbnRhaW5lcik7CiAgICB9CgogICAgZnVuY3Rp
b24gZGlzcGF0Y2hFdmVudChyYW5nZSwgdHlwZSwgYXJncykgewogICAgICAgIHZhciBsaXN0ZW5l
cnMgPSByYW5nZS5fbGlzdGVuZXJzW3R5cGVdOwogICAgICAgIGlmIChsaXN0ZW5lcnMpIHsKICAg
ICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW47
ICsraSkgewogICAgICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmNhbGwocmFuZ2UsIHt0YXJnZXQ6
IHJhbmdlLCBhcmdzOiBhcmdzfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAg
ZnVuY3Rpb24gZ2V0Qm91bmRhcnlCZWZvcmVOb2RlKG5vZGUpIHsKICAgICAgICByZXR1cm4gbmV3
IERvbVBvc2l0aW9uKG5vZGUucGFyZW50Tm9kZSwgZG9tLmdldE5vZGVJbmRleChub2RlKSk7CiAg
ICB9CgogICAgZnVuY3Rpb24gZ2V0Qm91bmRhcnlBZnRlck5vZGUobm9kZSkgewogICAgICAgIHJl
dHVybiBuZXcgRG9tUG9zaXRpb24obm9kZS5wYXJlbnROb2RlLCBkb20uZ2V0Tm9kZUluZGV4KG5v
ZGUpICsgMSk7CiAgICB9CgogICAgZnVuY3Rpb24gaW5zZXJ0Tm9kZUF0UG9zaXRpb24obm9kZSwg
biwgbykgewogICAgICAgIHZhciBmaXJzdE5vZGVJbnNlcnRlZCA9IG5vZGUubm9kZVR5cGUgPT0g
MTEgPyBub2RlLmZpcnN0Q2hpbGQgOiBub2RlOwogICAgICAgIGlmIChkb20uaXNDaGFyYWN0ZXJE
YXRhTm9kZShuKSkgewogICAgICAgICAgICBpZiAobyA9PSBuLmxlbmd0aCkgewogICAgICAgICAg
ICAgICAgZG9tLmluc2VydEFmdGVyKG5vZGUsIG4pOwogICAgICAgICAgICB9IGVsc2UgewogICAg
ICAgICAgICAgICAgbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBvID09IDAgPyBuIDog
ZG9tLnNwbGl0RGF0YU5vZGUobiwgbykpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlm
IChvID49IG4uY2hpbGROb2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgbi5hcHBlbmRDaGlsZChu
b2RlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuLmluc2VydEJlZm9yZShub2RlLCBu
LmNoaWxkTm9kZXNbb10pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmlyc3ROb2RlSW5zZXJ0
ZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvbmVTdWJ0cmVlKGl0ZXJhdG9yKSB7CiAgICAgICAg
dmFyIHBhcnRpYWxseVNlbGVjdGVkOwogICAgICAgIGZvciAodmFyIG5vZGUsIGZyYWcgPSBnZXRS
YW5nZURvY3VtZW50KGl0ZXJhdG9yLnJhbmdlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIHN1
Ykl0ZXJhdG9yOyBub2RlID0gaXRlcmF0b3IubmV4dCgpOyApIHsKICAgICAgICAgICAgcGFydGlh
bGx5U2VsZWN0ZWQgPSBpdGVyYXRvci5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpOwoKICAg
ICAgICAgICAgbm9kZSA9IG5vZGUuY2xvbmVOb2RlKCFwYXJ0aWFsbHlTZWxlY3RlZCk7CiAgICAg
ICAgICAgIGlmIChwYXJ0aWFsbHlTZWxlY3RlZCkgewogICAgICAgICAgICAgICAgc3ViSXRlcmF0
b3IgPSBpdGVyYXRvci5nZXRTdWJ0cmVlSXRlcmF0b3IoKTsKICAgICAgICAgICAgICAgIG5vZGUu
YXBwZW5kQ2hpbGQoY2xvbmVTdWJ0cmVlKHN1Ykl0ZXJhdG9yKSk7CiAgICAgICAgICAgICAgICBz
dWJJdGVyYXRvci5kZXRhY2godHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChu
b2RlLm5vZGVUeXBlID09IDEwKSB7IC8vIERvY3VtZW50VHlwZQogICAgICAgICAgICAgICAgdGhy
b3cgbmV3IERPTUV4Y2VwdGlvbigiSElFUkFSQ0hZX1JFUVVFU1RfRVJSIik7CiAgICAgICAgICAg
IH0KICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICB9CiAgICAgICAg
cmV0dXJuIGZyYWc7CiAgICB9CgogICAgZnVuY3Rpb24gaXRlcmF0ZVN1YnRyZWUocmFuZ2VJdGVy
YXRvciwgZnVuYywgaXRlcmF0b3JTdGF0ZSkgewogICAgICAgIHZhciBpdCwgbjsKICAgICAgICBp
dGVyYXRvclN0YXRlID0gaXRlcmF0b3JTdGF0ZSB8fCB7IHN0b3A6IGZhbHNlIH07CiAgICAgICAg
Zm9yICh2YXIgbm9kZSwgc3ViUmFuZ2VJdGVyYXRvcjsgbm9kZSA9IHJhbmdlSXRlcmF0b3IubmV4
dCgpOyApIHsKICAgICAgICAgICAgLy9sb2cuZGVidWcoIml0ZXJhdGVTdWJ0cmVlLCBwYXJ0aWFs
bHkgc2VsZWN0ZWQ6ICIgKyByYW5nZUl0ZXJhdG9yLmlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVl
KCksIG5vZGVUb1N0cmluZyhub2RlKSk7CiAgICAgICAgICAgIGlmIChyYW5nZUl0ZXJhdG9yLmlz
UGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlKCkpIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBub2Rl
IGlzIHBhcnRpYWxseSBzZWxlY3RlZCBieSB0aGUgUmFuZ2UsIHNvIHdlIGNhbiB1c2UgYSBuZXcg
UmFuZ2VJdGVyYXRvciBvbiB0aGUgcG9ydGlvbiBvZiB0aGUKICAgICAgICAgICAgICAgIC8vIG5v
ZGUgc2VsZWN0ZWQgYnkgdGhlIFJhbmdlLgogICAgICAgICAgICAgICAgaWYgKGZ1bmMobm9kZSkg
PT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3JTdGF0ZS5zdG9wID0gdHJ1
ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2Ugewog
ICAgICAgICAgICAgICAgICAgIHN1YlJhbmdlSXRlcmF0b3IgPSByYW5nZUl0ZXJhdG9yLmdldFN1
YnRyZWVJdGVyYXRvcigpOwogICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVTdWJ0cmVlKHN1YlJh
bmdlSXRlcmF0b3IsIGZ1bmMsIGl0ZXJhdG9yU3RhdGUpOwogICAgICAgICAgICAgICAgICAgIHN1
YlJhbmdlSXRlcmF0b3IuZGV0YWNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgIGlmIChpdGVy
YXRvclN0YXRlLnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAg
ICAgICAgICAgICAgIC8vIFRoZSB3aG9sZSBub2RlIGlzIHNlbGVjdGVkLCBzbyB3ZSBjYW4gdXNl
IGVmZmljaWVudCBET00gaXRlcmF0aW9uIHRvIGl0ZXJhdGUgb3ZlciB0aGUgbm9kZSBhbmQgaXRz
CiAgICAgICAgICAgICAgICAvLyBkZXNjZW5kYW50CiAgICAgICAgICAgICAgICBpdCA9IGRvbS5j
cmVhdGVJdGVyYXRvcihub2RlKTsKICAgICAgICAgICAgICAgIHdoaWxlICggKG4gPSBpdC5uZXh0
KCkpICkgewogICAgICAgICAgICAgICAgICAgIGlmIChmdW5jKG4pID09PSBmYWxzZSkgewogICAg
ICAgICAgICAgICAgICAgICAgICBpdGVyYXRvclN0YXRlLnN0b3AgPSB0cnVlOwogICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGV0ZVN1
YnRyZWUoaXRlcmF0b3IpIHsKICAgICAgICB2YXIgc3ViSXRlcmF0b3I7CiAgICAgICAgd2hpbGUg
KGl0ZXJhdG9yLm5leHQoKSkgewogICAgICAgICAgICBpZiAoaXRlcmF0b3IuaXNQYXJ0aWFsbHlT
ZWxlY3RlZFN1YnRyZWUoKSkgewogICAgICAgICAgICAgICAgc3ViSXRlcmF0b3IgPSBpdGVyYXRv
ci5nZXRTdWJ0cmVlSXRlcmF0b3IoKTsKICAgICAgICAgICAgICAgIGRlbGV0ZVN1YnRyZWUoc3Vi
SXRlcmF0b3IpOwogICAgICAgICAgICAgICAgc3ViSXRlcmF0b3IuZGV0YWNoKHRydWUpOwogICAg
ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXRlcmF0b3IucmVtb3ZlKCk7CiAgICAg
ICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZXh0cmFjdFN1YnRyZWUoaXRl
cmF0b3IpIHsKCiAgICAgICAgZm9yICh2YXIgbm9kZSwgZnJhZyA9IGdldFJhbmdlRG9jdW1lbnQo
aXRlcmF0b3IucmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgc3ViSXRlcmF0b3I7IG5v
ZGUgPSBpdGVyYXRvci5uZXh0KCk7ICkgewoKCiAgICAgICAgICAgIGlmIChpdGVyYXRvci5pc1Bh
cnRpYWxseVNlbGVjdGVkU3VidHJlZSgpKSB7CiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5j
bG9uZU5vZGUoZmFsc2UpOwogICAgICAgICAgICAgICAgc3ViSXRlcmF0b3IgPSBpdGVyYXRvci5n
ZXRTdWJ0cmVlSXRlcmF0b3IoKTsKICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZXh0
cmFjdFN1YnRyZWUoc3ViSXRlcmF0b3IpKTsKICAgICAgICAgICAgICAgIHN1Ykl0ZXJhdG9yLmRl
dGFjaCh0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGl0ZXJhdG9y
LnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09
IDEwKSB7IC8vIERvY3VtZW50VHlwZQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2Vw
dGlvbigiSElFUkFSQ0hZX1JFUVVFU1RfRVJSIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg
ZnJhZy5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZyYWc7CiAg
ICB9CgogICAgZnVuY3Rpb24gZ2V0Tm9kZXNJblJhbmdlKHJhbmdlLCBub2RlVHlwZXMsIGZpbHRl
cikgewogICAgICAgIC8vbG9nLmluZm8oImdldE5vZGVzSW5SYW5nZSwgIiArIG5vZGVUeXBlcy5q
b2luKCIsIikpOwogICAgICAgIHZhciBmaWx0ZXJOb2RlVHlwZXMgPSAhIShub2RlVHlwZXMgJiYg
bm9kZVR5cGVzLmxlbmd0aCksIHJlZ2V4OwogICAgICAgIHZhciBmaWx0ZXJFeGlzdHMgPSAhIWZp
bHRlcjsKICAgICAgICBpZiAoZmlsdGVyTm9kZVR5cGVzKSB7CiAgICAgICAgICAgIHJlZ2V4ID0g
bmV3IFJlZ0V4cCgiXigiICsgbm9kZVR5cGVzLmpvaW4oInwiKSArICIpJCIpOwogICAgICAgIH0K
CiAgICAgICAgdmFyIG5vZGVzID0gW107CiAgICAgICAgaXRlcmF0ZVN1YnRyZWUobmV3IFJhbmdl
SXRlcmF0b3IocmFuZ2UsIGZhbHNlKSwgZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICBpZiAo
KCFmaWx0ZXJOb2RlVHlwZXMgfHwgcmVnZXgudGVzdChub2RlLm5vZGVUeXBlKSkgJiYgKCFmaWx0
ZXJFeGlzdHMgfHwgZmlsdGVyKG5vZGUpKSkgewogICAgICAgICAgICAgICAgbm9kZXMucHVzaChu
b2RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBub2RlczsKICAg
IH0KCiAgICBmdW5jdGlvbiBpbnNwZWN0KHJhbmdlKSB7CiAgICAgICAgdmFyIG5hbWUgPSAodHlw
ZW9mIHJhbmdlLmdldE5hbWUgPT0gInVuZGVmaW5lZCIpID8gIlJhbmdlIiA6IHJhbmdlLmdldE5h
bWUoKTsKICAgICAgICByZXR1cm4gIlsiICsgbmFtZSArICIoIiArIGRvbS5pbnNwZWN0Tm9kZShy
YW5nZS5zdGFydENvbnRhaW5lcikgKyAiOiIgKyByYW5nZS5zdGFydE9mZnNldCArICIsICIgKwog
ICAgICAgICAgICAgICAgZG9tLmluc3BlY3ROb2RlKHJhbmdlLmVuZENvbnRhaW5lcikgKyAiOiIg
KyByYW5nZS5lbmRPZmZzZXQgKyAiKV0iOwogICAgfQoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLy8gUmFuZ2VJdGVy
YXRvciBjb2RlIHBhcnRpYWxseSBib3Jyb3dzIGZyb20gSUVSYW5nZSBieSBUaW0gUnlhbiAoaHR0
cDovL2dpdGh1Yi5jb20vdGltY2FtZXJvbnJ5YW4vSUVSYW5nZSkKCiAgICAvKioKICAgICAqIEBj
b25zdHJ1Y3RvcgogICAgICovCiAgICBmdW5jdGlvbiBSYW5nZUl0ZXJhdG9yKHJhbmdlLCBjbG9u
ZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzKSB7CiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdl
OwogICAgICAgIHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlcyA9IGNsb25lUGFy
dGlhbGx5U2VsZWN0ZWRUZXh0Tm9kZXM7CgoKCiAgICAgICAgaWYgKCFyYW5nZS5jb2xsYXBzZWQp
IHsKICAgICAgICAgICAgdGhpcy5zYyA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyOwogICAgICAgICAg
ICB0aGlzLnNvID0gcmFuZ2Uuc3RhcnRPZmZzZXQ7CiAgICAgICAgICAgIHRoaXMuZWMgPSByYW5n
ZS5lbmRDb250YWluZXI7CiAgICAgICAgICAgIHRoaXMuZW8gPSByYW5nZS5lbmRPZmZzZXQ7CiAg
ICAgICAgICAgIHZhciByb290ID0gcmFuZ2UuY29tbW9uQW5jZXN0b3JDb250YWluZXI7CgogICAg
ICAgICAgICBpZiAodGhpcy5zYyA9PT0gdGhpcy5lYyAmJiBkb20uaXNDaGFyYWN0ZXJEYXRhTm9k
ZSh0aGlzLnNjKSkgewogICAgICAgICAgICAgICAgdGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFO
b2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0ID0gdGhpcy5fbGFzdCA9IHRo
aXMuX25leHQgPSB0aGlzLnNjOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg
dGhpcy5fZmlyc3QgPSB0aGlzLl9uZXh0ID0gKHRoaXMuc2MgPT09IHJvb3QgJiYgIWRvbS5pc0No
YXJhY3RlckRhdGFOb2RlKHRoaXMuc2MpKSA/CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYy5j
aGlsZE5vZGVzW3RoaXMuc29dIDogZG9tLmdldENsb3Nlc3RBbmNlc3RvckluKHRoaXMuc2MsIHJv
b3QsIHRydWUpOwogICAgICAgICAgICAgICAgdGhpcy5fbGFzdCA9ICh0aGlzLmVjID09PSByb290
ICYmICFkb20uaXNDaGFyYWN0ZXJEYXRhTm9kZSh0aGlzLmVjKSkgPwogICAgICAgICAgICAgICAg
ICAgIHRoaXMuZWMuY2hpbGROb2Rlc1t0aGlzLmVvIC0gMV0gOiBkb20uZ2V0Q2xvc2VzdEFuY2Vz
dG9ySW4odGhpcy5lYywgcm9vdCwgdHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAg
fQoKICAgIFJhbmdlSXRlcmF0b3IucHJvdG90eXBlID0gewogICAgICAgIF9jdXJyZW50OiBudWxs
LAogICAgICAgIF9uZXh0OiBudWxsLAogICAgICAgIF9maXJzdDogbnVsbCwKICAgICAgICBfbGFz
dDogbnVsbCwKICAgICAgICBpc1NpbmdsZUNoYXJhY3RlckRhdGFOb2RlOiBmYWxzZSwKCiAgICAg
ICAgcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gbnVsbDsK
ICAgICAgICAgICAgdGhpcy5fbmV4dCA9IHRoaXMuX2ZpcnN0OwogICAgICAgIH0sCgogICAgICAg
IGhhc05leHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gISF0aGlzLl9uZXh0Owog
ICAgICAgIH0sCgogICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAvLyBNb3Zl
IHRvIG5leHQgbm9kZQogICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2N1cnJlbnQgPSB0
aGlzLl9uZXh0OwogICAgICAgICAgICBpZiAoY3VycmVudCkgewogICAgICAgICAgICAgICAgdGhp
cy5fbmV4dCA9IChjdXJyZW50ICE9PSB0aGlzLl9sYXN0KSA/IGN1cnJlbnQubmV4dFNpYmxpbmcg
OiBudWxsOwoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBwYXJ0aWFsbHkgc2VsZWN0ZWQg
dGV4dCBub2RlcwogICAgICAgICAgICAgICAgaWYgKGRvbS5pc0NoYXJhY3RlckRhdGFOb2RlKGN1
cnJlbnQpICYmIHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlcykgewogICAgICAg
ICAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmVjKSB7CgogICAgICAgICAgICAgICAg
ICAgICAgICAoY3VycmVudCA9IGN1cnJlbnQuY2xvbmVOb2RlKHRydWUpKS5kZWxldGVEYXRhKHRo
aXMuZW8sIGN1cnJlbnQubGVuZ3RoIC0gdGhpcy5lbyk7CiAgICAgICAgICAgICAgICAgICAgfQog
ICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50ID09PSB0aGlzLnNjKSB7CgogICAg
ICAgICAgICAgICAgICAgICAgICAoY3VycmVudCA9IGN1cnJlbnQuY2xvbmVOb2RlKHRydWUpKS5k
ZWxldGVEYXRhKDAsIHRoaXMuc28pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7CiAgICAgICAg
fSwKCiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGN1cnJlbnQg
PSB0aGlzLl9jdXJyZW50LCBzdGFydCwgZW5kOwoKICAgICAgICAgICAgaWYgKGRvbS5pc0NoYXJh
Y3RlckRhdGFOb2RlKGN1cnJlbnQpICYmIChjdXJyZW50ID09PSB0aGlzLnNjIHx8IGN1cnJlbnQg
PT09IHRoaXMuZWMpKSB7CiAgICAgICAgICAgICAgICBzdGFydCA9IChjdXJyZW50ID09PSB0aGlz
LnNjKSA/IHRoaXMuc28gOiAwOwogICAgICAgICAgICAgICAgZW5kID0gKGN1cnJlbnQgPT09IHRo
aXMuZWMpID8gdGhpcy5lbyA6IGN1cnJlbnQubGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKHN0
YXJ0ICE9IGVuZCkgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuZGVsZXRlRGF0YShzdGFy
dCwgZW5kIC0gc3RhcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2Ugewog
ICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAg
ICAgIGN1cnJlbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50KTsKICAgICAgICAgICAg
ICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwK
CiAgICAgICAgLy8gQ2hlY2tzIGlmIHRoZSBjdXJyZW50IG5vZGUgaXMgcGFydGlhbGx5IHNlbGVj
dGVkCiAgICAgICAgaXNQYXJ0aWFsbHlTZWxlY3RlZFN1YnRyZWU6IGZ1bmN0aW9uKCkgewogICAg
ICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2N1cnJlbnQ7CiAgICAgICAgICAgIHJldHVybiBp
c05vblRleHRQYXJ0aWFsbHlTZWxlY3RlZChjdXJyZW50LCB0aGlzLnJhbmdlKTsKICAgICAgICB9
LAoKICAgICAgICBnZXRTdWJ0cmVlSXRlcmF0b3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2
YXIgc3ViUmFuZ2U7CiAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlQ2hhcmFjdGVyRGF0YU5v
ZGUpIHsKICAgICAgICAgICAgICAgIHN1YlJhbmdlID0gdGhpcy5yYW5nZS5jbG9uZVJhbmdlKCk7
CiAgICAgICAgICAgICAgICBzdWJSYW5nZS5jb2xsYXBzZSgpOwogICAgICAgICAgICB9IGVsc2Ug
ewogICAgICAgICAgICAgICAgc3ViUmFuZ2UgPSBuZXcgUmFuZ2UoZ2V0UmFuZ2VEb2N1bWVudCh0
aGlzLnJhbmdlKSk7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2N1cnJlbnQ7
CiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDb250YWluZXIgPSBjdXJyZW50LCBzdGFydE9mZnNl
dCA9IDAsIGVuZENvbnRhaW5lciA9IGN1cnJlbnQsIGVuZE9mZnNldCA9IGRvbS5nZXROb2RlTGVu
Z3RoKGN1cnJlbnQpOwoKICAgICAgICAgICAgICAgIGlmIChkb20uaXNBbmNlc3Rvck9mKGN1cnJl
bnQsIHRoaXMuc2MsIHRydWUpKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRDb250YWluZXIg
PSB0aGlzLnNjOwogICAgICAgICAgICAgICAgICAgIHN0YXJ0T2Zmc2V0ID0gdGhpcy5zbzsKICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChkb20uaXNBbmNlc3Rvck9mKGN1cnJl
bnQsIHRoaXMuZWMsIHRydWUpKSB7CiAgICAgICAgICAgICAgICAgICAgZW5kQ29udGFpbmVyID0g
dGhpcy5lYzsKICAgICAgICAgICAgICAgICAgICBlbmRPZmZzZXQgPSB0aGlzLmVvOwogICAgICAg
ICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kYXJpZXMoc3ViUmFuZ2UsIHN0
YXJ0Q29udGFpbmVyLCBzdGFydE9mZnNldCwgZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpOwogICAg
ICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2VJdGVyYXRvcihzdWJSYW5nZSwg
dGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzKTsKICAgICAgICB9LAoKICAgICAg
ICBkZXRhY2g6IGZ1bmN0aW9uKGRldGFjaFJhbmdlKSB7CiAgICAgICAgICAgIGlmIChkZXRhY2hS
YW5nZSkgewogICAgICAgICAgICAgICAgdGhpcy5yYW5nZS5kZXRhY2goKTsKICAgICAgICAgICAg
fQogICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5fY3VycmVudCA9IHRoaXMuX25leHQgPSB0
aGlzLl9maXJzdCA9IHRoaXMuX2xhc3QgPSB0aGlzLnNjID0gdGhpcy5zbyA9IHRoaXMuZWMgPSB0
aGlzLmVvID0gbnVsbDsKICAgICAgICB9CiAgICB9OwoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLy8gRXhjZXB0aW9u
cwoKICAgIC8qKgogICAgICogQGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGZ1bmN0aW9uIFJhbmdl
RXhjZXB0aW9uKGNvZGVOYW1lKSB7CiAgICAgICAgdGhpcy5jb2RlID0gdGhpc1tjb2RlTmFtZV07
CiAgICAgICAgdGhpcy5jb2RlTmFtZSA9IGNvZGVOYW1lOwogICAgICAgIHRoaXMubWVzc2FnZSA9
ICJSYW5nZUV4Y2VwdGlvbjogIiArIHRoaXMuY29kZU5hbWU7CiAgICB9CgogICAgUmFuZ2VFeGNl
cHRpb24ucHJvdG90eXBlID0gewogICAgICAgIEJBRF9CT1VOREFSWVBPSU5UU19FUlI6IDEsCiAg
ICAgICAgSU5WQUxJRF9OT0RFX1RZUEVfRVJSOiAyCiAgICB9OwoKICAgIFJhbmdlRXhjZXB0aW9u
LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm1l
c3NhZ2U7CiAgICB9OwoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLyoqCiAgICAgKiBDdXJyZW50bHkgaXRlcmF0ZXMg
dGhyb3VnaCBhbGwgbm9kZXMgaW4gdGhlIHJhbmdlIG9uIGNyZWF0aW9uIHVudGlsIEkgdGhpbmsg
b2YgYSBkZWNlbnQgd2F5IHRvIGRvIGl0CiAgICAgKiBUT0RPOiBMb29rIGludG8gbWFraW5nIHRo
aXMgYSBwcm9wZXIgaXRlcmF0b3IsIG5vdCByZXF1aXJpbmcgcHJlbG9hZGluZyBldmVyeXRoaW5n
IGZpcnN0CiAgICAgKiBAY29uc3RydWN0b3IKICAgICAqLwogICAgZnVuY3Rpb24gUmFuZ2VOb2Rl
SXRlcmF0b3IocmFuZ2UsIG5vZGVUeXBlcywgZmlsdGVyKSB7CiAgICAgICAgdGhpcy5ub2RlcyA9
IGdldE5vZGVzSW5SYW5nZShyYW5nZSwgbm9kZVR5cGVzLCBmaWx0ZXIpOwogICAgICAgIHRoaXMu
X25leHQgPSB0aGlzLm5vZGVzWzBdOwogICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gMDsKICAgIH0K
CiAgICBSYW5nZU5vZGVJdGVyYXRvci5wcm90b3R5cGUgPSB7CiAgICAgICAgX2N1cnJlbnQ6IG51
bGwsCgogICAgICAgIGhhc05leHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gISF0
aGlzLl9uZXh0OwogICAgICAgIH0sCgogICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgICAg
ICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fbmV4dDsKICAgICAgICAgICAgdGhpcy5fbmV4dCA9
IHRoaXMubm9kZXNbICsrdGhpcy5fcG9zaXRpb24gXTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMu
X2N1cnJlbnQ7CiAgICAgICAgfSwKCiAgICAgICAgZGV0YWNoOiBmdW5jdGlvbigpIHsKICAgICAg
ICAgICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX25leHQgPSB0aGlzLm5vZGVzID0gbnVsbDsKICAg
ICAgICB9CiAgICB9OwoKICAgIHZhciBiZWZvcmVBZnRlck5vZGVUeXBlcyA9IFsxLCAzLCA0LCA1
LCA3LCA4LCAxMF07CiAgICB2YXIgcm9vdENvbnRhaW5lck5vZGVUeXBlcyA9IFsyLCA5LCAxMV07
CiAgICB2YXIgcmVhZG9ubHlOb2RlVHlwZXMgPSBbNSwgNiwgMTAsIDEyXTsKICAgIHZhciBpbnNl
cnRhYmxlTm9kZVR5cGVzID0gWzEsIDMsIDQsIDUsIDcsIDgsIDEwLCAxMV07CiAgICB2YXIgc3Vy
cm91bmROb2RlVHlwZXMgPSBbMSwgMywgNCwgNSwgNywgOF07CgogICAgZnVuY3Rpb24gY3JlYXRl
QW5jZXN0b3JGaW5kZXIobm9kZVR5cGVzKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUs
IHNlbGZJc0FuY2VzdG9yKSB7CiAgICAgICAgICAgIHZhciB0LCBuID0gc2VsZklzQW5jZXN0b3Ig
PyBub2RlIDogbm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICB3aGlsZSAobikgewogICAgICAg
ICAgICAgICAgdCA9IG4ubm9kZVR5cGU7CiAgICAgICAgICAgICAgICBpZiAoZG9tLmFycmF5Q29u
dGFpbnMobm9kZVR5cGVzLCB0KSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuOwogICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbiA9IG4ucGFyZW50Tm9kZTsKICAgICAgICAg
ICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9OwogICAgfQoKICAgIHZhciBn
ZXRSb290Q29udGFpbmVyID0gZG9tLmdldFJvb3RDb250YWluZXI7CiAgICB2YXIgZ2V0RG9jdW1l
bnRPckZyYWdtZW50Q29udGFpbmVyID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIoIFs5LCAxMV0gKTsK
ICAgIHZhciBnZXRSZWFkb25seUFuY2VzdG9yID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIocmVhZG9u
bHlOb2RlVHlwZXMpOwogICAgdmFyIGdldERvY1R5cGVOb3RhdGlvbkVudGl0eUFuY2VzdG9yID0g
Y3JlYXRlQW5jZXN0b3JGaW5kZXIoIFs2LCAxMCwgMTJdICk7CgogICAgZnVuY3Rpb24gYXNzZXJ0
Tm9Eb2NUeXBlTm90YXRpb25FbnRpdHlBbmNlc3Rvcihub2RlLCBhbGxvd1NlbGYpIHsKICAgICAg
ICBpZiAoZ2V0RG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgYWxsb3dTZWxmKSkg
ewogICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIklOVkFMSURfTk9ERV9UWVBF
X0VSUiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnROb3REZXRhY2hlZChy
YW5nZSkgewogICAgICAgIGlmICghcmFuZ2Uuc3RhcnRDb250YWluZXIpIHsKICAgICAgICAgICAg
dGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFURV9FUlIiKTsKICAgICAgICB9CiAg
ICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBpbnZhbGlkVHlwZXMp
IHsKICAgICAgICBpZiAoIWRvbS5hcnJheUNvbnRhaW5zKGludmFsaWRUeXBlcywgbm9kZS5ub2Rl
VHlwZSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXhjZXB0aW9uKCJJTlZBTElEX05P
REVfVFlQRV9FUlIiKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0VmFsaWRP
ZmZzZXQobm9kZSwgb2Zmc2V0KSB7CiAgICAgICAgaWYgKG9mZnNldCA8IDAgfHwgb2Zmc2V0ID4g
KGRvbS5pc0NoYXJhY3RlckRhdGFOb2RlKG5vZGUpID8gbm9kZS5sZW5ndGggOiBub2RlLmNoaWxk
Tm9kZXMubGVuZ3RoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTkRF
WF9TSVpFX0VSUiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRTYW1lRG9j
dW1lbnRPckZyYWdtZW50KG5vZGUxLCBub2RlMikgewogICAgICAgIGlmIChnZXREb2N1bWVudE9y
RnJhZ21lbnRDb250YWluZXIobm9kZTEsIHRydWUpICE9PSBnZXREb2N1bWVudE9yRnJhZ21lbnRD
b250YWluZXIobm9kZTIsIHRydWUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRp
b24oIldST05HX0RPQ1VNRU5UX0VSUiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBh
c3NlcnROb2RlTm90UmVhZE9ubHkobm9kZSkgewogICAgICAgIGlmIChnZXRSZWFkb25seUFuY2Vz
dG9yKG5vZGUsIHRydWUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oIk5P
X01PRElGSUNBVElPTl9BTExPV0VEX0VSUiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlv
biBhc3NlcnROb2RlKG5vZGUsIGNvZGVOYW1lKSB7CiAgICAgICAgaWYgKCFub2RlKSB7CiAgICAg
ICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oY29kZU5hbWUpOwogICAgICAgIH0KICAgIH0K
CiAgICBmdW5jdGlvbiBpc09ycGhhbihub2RlKSB7CiAgICAgICAgcmV0dXJuICFkb20uYXJyYXlD
b250YWlucyhyb290Q29udGFpbmVyTm9kZVR5cGVzLCBub2RlLm5vZGVUeXBlKSAmJiAhZ2V0RG9j
dW1lbnRPckZyYWdtZW50Q29udGFpbmVyKG5vZGUsIHRydWUpOwogICAgfQoKICAgIGZ1bmN0aW9u
IGlzVmFsaWRPZmZzZXQobm9kZSwgb2Zmc2V0KSB7CiAgICAgICAgcmV0dXJuIG9mZnNldCA8PSAo
ZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGUobm9kZSkgPyBub2RlLmxlbmd0aCA6IG5vZGUuY2hpbGRO
b2Rlcy5sZW5ndGgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUmFuZ2VWYWxpZChyYW5nZSkgewog
ICAgICAgIHJldHVybiAoISFyYW5nZS5zdGFydENvbnRhaW5lciAmJiAhIXJhbmdlLmVuZENvbnRh
aW5lcgogICAgICAgICAgICAgICAgJiYgIWlzT3JwaGFuKHJhbmdlLnN0YXJ0Q29udGFpbmVyKQog
ICAgICAgICAgICAgICAgJiYgIWlzT3JwaGFuKHJhbmdlLmVuZENvbnRhaW5lcikKICAgICAgICAg
ICAgICAgICYmIGlzVmFsaWRPZmZzZXQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0
T2Zmc2V0KQogICAgICAgICAgICAgICAgJiYgaXNWYWxpZE9mZnNldChyYW5nZS5lbmRDb250YWlu
ZXIsIHJhbmdlLmVuZE9mZnNldCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2VydFJhbmdlVmFs
aWQocmFuZ2UpIHsKICAgICAgICBhc3NlcnROb3REZXRhY2hlZChyYW5nZSk7CiAgICAgICAgaWYg
KCFpc1JhbmdlVmFsaWQocmFuZ2UpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiUmFu
Z2UgZXJyb3I6IFJhbmdlIGlzIG5vIGxvbmdlciB2YWxpZCBhZnRlciBET00gbXV0YXRpb24gKCIg
KyByYW5nZS5pbnNwZWN0KCkgKyAiKSIpOwogICAgICAgIH0KICAgIH0KCiAgICAvKi0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKICAgIC8v
IFRlc3QgdGhlIGJyb3dzZXIncyBpbm5lckhUTUwgc3VwcG9ydCB0byBkZWNpZGUgaG93IHRvIGlt
cGxlbWVudCBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQKICAgIHZhciBzdHlsZUVsID0gZG9jdW1l
bnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgIHZhciBodG1sUGFyc2luZ0NvbmZvcm1zID0g
ZmFsc2U7CiAgICB0cnkgewogICAgICAgIHN0eWxlRWwuaW5uZXJIVE1MID0gIjxiPng8L2I+IjsK
ICAgICAgICBodG1sUGFyc2luZ0NvbmZvcm1zID0gKHN0eWxlRWwuZmlyc3RDaGlsZC5ub2RlVHlw
ZSA9PSAzKTsgLy8gT3BlcmEgaW5jb3JyZWN0bHkgY3JlYXRlcyBhbiBlbGVtZW50IG5vZGUKICAg
IH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBJRSA2IGFuZCA3IHRocm93CiAgICB9CgogICAgYXBp
LmZlYXR1cmVzLmh0bWxQYXJzaW5nQ29uZm9ybXMgPSBodG1sUGFyc2luZ0NvbmZvcm1zOwoKICAg
IHZhciBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQgPSBodG1sUGFyc2luZ0NvbmZvcm1zID8KCiAg
ICAgICAgLy8gSW1wbGVtZW50YXRpb24gYXMgcGVyIEhUTUwgcGFyc2luZyBzcGVjLCB0cnVzdGlu
ZyBpbiB0aGUgYnJvd3NlcidzIGltcGxlbWVudGF0aW9uIG9mIGlubmVySFRNTC4gU2VlCiAgICAg
ICAgLy8gZGlzY3Vzc2lvbiBhbmQgYmFzZSBjb2RlIGZvciB0aGlzIGltcGxlbWVudGF0aW9uIGF0
IGlzc3VlIDY3LgogICAgICAgIC8vIFNwZWM6IGh0dHA6Ly9odG1sNS5vcmcvc3BlY3MvZG9tLXBh
cnNpbmcuaHRtbCNleHRlbnNpb25zLXRvLXRoZS1yYW5nZS1pbnRlcmZhY2UKICAgICAgICAvLyBU
aGFua3MgdG8gQWxla3MgV2lsbGlhbXMuCiAgICAgICAgZnVuY3Rpb24oZnJhZ21lbnRTdHIpIHsK
ICAgICAgICAgICAgLy8gIkxldCBub2RlIHRoZSBjb250ZXh0IG9iamVjdCdzIHN0YXJ0J3Mgbm9k
ZS4iCiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydENvbnRhaW5lcjsKICAgICAgICAg
ICAgdmFyIGRvYyA9IGRvbS5nZXREb2N1bWVudChub2RlKTsKCiAgICAgICAgICAgIC8vICJJZiB0
aGUgY29udGV4dCBvYmplY3QncyBzdGFydCdzIG5vZGUgaXMgbnVsbCwgcmFpc2UgYW4gSU5WQUxJ
RF9TVEFURV9FUlIKICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCBhYm9ydCB0aGVzZSBzdGVw
cy4iCiAgICAgICAgICAgIGlmICghbm9kZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IERP
TUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFURV9FUlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAg
ICAgLy8gIkxldCBlbGVtZW50IGJlIGFzIGZvbGxvd3MsIGRlcGVuZGluZyBvbiBub2RlJ3MgaW50
ZXJmYWNlOiIKICAgICAgICAgICAgLy8gRG9jdW1lbnQsIERvY3VtZW50IEZyYWdtZW50OiBudWxs
CiAgICAgICAgICAgIHZhciBlbCA9IG51bGw7CgogICAgICAgICAgICAvLyAiRWxlbWVudDogbm9k
ZSIKICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAg
ZWwgPSBub2RlOwoKICAgICAgICAgICAgLy8gIlRleHQsIENvbW1lbnQ6IG5vZGUncyBwYXJlbnRF
bGVtZW50IgogICAgICAgICAgICB9IGVsc2UgaWYgKGRvbS5pc0NoYXJhY3RlckRhdGFOb2RlKG5v
ZGUpKSB7CiAgICAgICAgICAgICAgICBlbCA9IGRvbS5wYXJlbnRFbGVtZW50KG5vZGUpOwogICAg
ICAgICAgICB9CgogICAgICAgICAgICAvLyAiSWYgZWl0aGVyIGVsZW1lbnQgaXMgbnVsbCBvciBl
bGVtZW50J3Mgb3duZXJEb2N1bWVudCBpcyBhbiBIVE1MIGRvY3VtZW50CiAgICAgICAgICAgIC8v
IGFuZCBlbGVtZW50J3MgbG9jYWwgbmFtZSBpcyAiaHRtbCIgYW5kIGVsZW1lbnQncyBuYW1lc3Bh
Y2UgaXMgdGhlIEhUTUwKICAgICAgICAgICAgLy8gbmFtZXNwYWNlIgogICAgICAgICAgICBpZiAo
ZWwgPT09IG51bGwgfHwgKAogICAgICAgICAgICAgICAgZWwubm9kZU5hbWUgPT0gIkhUTUwiCiAg
ICAgICAgICAgICAgICAmJiBkb20uaXNIdG1sTmFtZXNwYWNlKGRvbS5nZXREb2N1bWVudChlbCku
ZG9jdW1lbnRFbGVtZW50KQogICAgICAgICAgICAgICAgJiYgZG9tLmlzSHRtbE5hbWVzcGFjZShl
bCkKICAgICAgICAgICAgKSkgewoKICAgICAgICAgICAgLy8gImxldCBlbGVtZW50IGJlIGEgbmV3
IEVsZW1lbnQgd2l0aCAiYm9keSIgYXMgaXRzIGxvY2FsIG5hbWUgYW5kIHRoZSBIVE1MCiAgICAg
ICAgICAgIC8vIG5hbWVzcGFjZSBhcyBpdHMgbmFtZXNwYWNlLiIiCiAgICAgICAgICAgICAgICBl
bCA9IGRvYy5jcmVhdGVFbGVtZW50KCJib2R5Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg
ICAgICAgICAgICBlbCA9IGVsLmNsb25lTm9kZShmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAg
ICAgICAgIC8vICJJZiB0aGUgbm9kZSdzIGRvY3VtZW50IGlzIGFuIEhUTUwgZG9jdW1lbnQ6IElu
dm9rZSB0aGUgSFRNTCBmcmFnbWVudCBwYXJzaW5nIGFsZ29yaXRobS4iCiAgICAgICAgICAgIC8v
ICJJZiB0aGUgbm9kZSdzIGRvY3VtZW50IGlzIGFuIFhNTCBkb2N1bWVudDogSW52b2tlIHRoZSBY
TUwgZnJhZ21lbnQgcGFyc2luZyBhbGdvcml0aG0uIgogICAgICAgICAgICAvLyAiSW4gZWl0aGVy
IGNhc2UsIHRoZSBhbGdvcml0aG0gbXVzdCBiZSBpbnZva2VkIHdpdGggZnJhZ21lbnQgYXMgdGhl
IGlucHV0CiAgICAgICAgICAgIC8vIGFuZCBlbGVtZW50IGFzIHRoZSBjb250ZXh0IGVsZW1lbnQu
IgogICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBmcmFnbWVudFN0cjsKCiAgICAgICAgICAgIC8v
ICJJZiB0aGlzIHJhaXNlcyBhbiBleGNlcHRpb24sIHRoZW4gYWJvcnQgdGhlc2Ugc3RlcHMuIE90
aGVyd2lzZSwgbGV0IG5ldwogICAgICAgICAgICAvLyBjaGlsZHJlbiBiZSB0aGUgbm9kZXMgcmV0
dXJuZWQuIgoKICAgICAgICAgICAgLy8gIkxldCBmcmFnbWVudCBiZSBhIG5ldyBEb2N1bWVudEZy
YWdtZW50LiIKICAgICAgICAgICAgLy8gIkFwcGVuZCBhbGwgbmV3IGNoaWxkcmVuIHRvIGZyYWdt
ZW50LiIKICAgICAgICAgICAgLy8gIlJldHVybiBmcmFnbWVudC4iCiAgICAgICAgICAgIHJldHVy
biBkb20uZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuKGVsKTsKICAgICAgICB9IDoKCiAgICAgICAg
Ly8gSW4gdGhpcyBjYXNlLCBpbm5lckhUTUwgY2Fubm90IGJlIHRydXN0ZWQsIHNvIGZhbGwgYmFj
ayB0byBhIHNpbXBsZXIsIG5vbi1jb25mb3JtYW50IGltcGxlbWVudGF0aW9uIHRoYXQKICAgICAg
ICAvLyBwcmV2aW91cyB2ZXJzaW9ucyBvZiBSYW5neSB1c2VkICh3aXRoIHRoZSBleGNlcHRpb24g
b2YgdXNpbmcgYSBib2R5IGVsZW1lbnQgcmF0aGVyIHRoYW4gYSBkaXYpCiAgICAgICAgZnVuY3Rp
b24oZnJhZ21lbnRTdHIpIHsKICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CiAg
ICAgICAgICAgIHZhciBkb2MgPSBnZXRSYW5nZURvY3VtZW50KHRoaXMpOwogICAgICAgICAgICB2
YXIgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgiYm9keSIpOwogICAgICAgICAgICBlbC5pbm5lckhU
TUwgPSBmcmFnbWVudFN0cjsKCiAgICAgICAgICAgIHJldHVybiBkb20uZnJhZ21lbnRGcm9tTm9k
ZUNoaWxkcmVuKGVsKTsKICAgICAgICB9OwoKICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgdmFyIHJhbmdlUHJvcGVydGll
cyA9IFsic3RhcnRDb250YWluZXIiLCAic3RhcnRPZmZzZXQiLCAiZW5kQ29udGFpbmVyIiwgImVu
ZE9mZnNldCIsICJjb2xsYXBzZWQiLAogICAgICAgICJjb21tb25BbmNlc3RvckNvbnRhaW5lciJd
OwoKICAgIHZhciBzMnMgPSAwLCBzMmUgPSAxLCBlMmUgPSAyLCBlMnMgPSAzOwogICAgdmFyIG5f
YiA9IDAsIG5fYSA9IDEsIG5fYl9hID0gMiwgbl9pID0gMzsKCiAgICBmdW5jdGlvbiBSYW5nZVBy
b3RvdHlwZSgpIHt9CgogICAgUmFuZ2VQcm90b3R5cGUucHJvdG90eXBlID0gewogICAgICAgIGF0
dGFjaExpc3RlbmVyOiBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogICAgICAgICAgICB0aGlz
Ll9saXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSwKCiAgICAgICAgY29t
cGFyZUJvdW5kYXJ5UG9pbnRzOiBmdW5jdGlvbihob3csIHJhbmdlKSB7CiAgICAgICAgICAgIGFz
c2VydFJhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgICAgIGFzc2VydFNhbWVEb2N1bWVudE9yRnJh
Z21lbnQodGhpcy5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRDb250YWluZXIpOwoKICAgICAg
ICAgICAgdmFyIG5vZGVBLCBvZmZzZXRBLCBub2RlQiwgb2Zmc2V0QjsKICAgICAgICAgICAgdmFy
IHByZWZpeEEgPSAoaG93ID09IGUycyB8fCBob3cgPT0gczJzKSA/ICJzdGFydCIgOiAiZW5kIjsK
ICAgICAgICAgICAgdmFyIHByZWZpeEIgPSAoaG93ID09IHMyZSB8fCBob3cgPT0gczJzKSA/ICJz
dGFydCIgOiAiZW5kIjsKICAgICAgICAgICAgbm9kZUEgPSB0aGlzW3ByZWZpeEEgKyAiQ29udGFp
bmVyIl07CiAgICAgICAgICAgIG9mZnNldEEgPSB0aGlzW3ByZWZpeEEgKyAiT2Zmc2V0Il07CiAg
ICAgICAgICAgIG5vZGVCID0gcmFuZ2VbcHJlZml4QiArICJDb250YWluZXIiXTsKICAgICAgICAg
ICAgb2Zmc2V0QiA9IHJhbmdlW3ByZWZpeEIgKyAiT2Zmc2V0Il07CiAgICAgICAgICAgIHJldHVy
biBkb20uY29tcGFyZVBvaW50cyhub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNldEIpOwogICAg
ICAgIH0sCgogICAgICAgIGluc2VydE5vZGU6IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAg
YXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlwZShu
b2RlLCBpbnNlcnRhYmxlTm9kZVR5cGVzKTsKICAgICAgICAgICAgYXNzZXJ0Tm9kZU5vdFJlYWRP
bmx5KHRoaXMuc3RhcnRDb250YWluZXIpOwoKICAgICAgICAgICAgaWYgKGRvbS5pc0FuY2VzdG9y
T2Yobm9kZSwgdGhpcy5zdGFydENvbnRhaW5lciwgdHJ1ZSkpIHsKICAgICAgICAgICAgICAgIHRo
cm93IG5ldyBET01FeGNlcHRpb24oIkhJRVJBUkNIWV9SRVFVRVNUX0VSUiIpOwogICAgICAgICAg
ICB9CgogICAgICAgICAgICAvLyBObyBjaGVjayBmb3Igd2hldGhlciB0aGUgY29udGFpbmVyIG9m
IHRoZSBzdGFydCBvZiB0aGUgUmFuZ2UgaXMgb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWxsb3cK
ICAgICAgICAgICAgLy8gY2hpbGRyZW4gb2YgdGhlIHR5cGUgb2Ygbm9kZTogdGhlIGJyb3dzZXIn
cyBET00gaW1wbGVtZW50YXRpb24gc2hvdWxkIGRvIHRoaXMgZm9yIHVzIHdoZW4gd2UgYXR0ZW1w
dAogICAgICAgICAgICAvLyB0byBhZGQgdGhlIG5vZGUKCiAgICAgICAgICAgIHZhciBmaXJzdE5v
ZGVJbnNlcnRlZCA9IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIHRoaXMuc3RhcnRDb250YWlu
ZXIsIHRoaXMuc3RhcnRPZmZzZXQpOwogICAgICAgICAgICB0aGlzLnNldFN0YXJ0QmVmb3JlKGZp
cnN0Tm9kZUluc2VydGVkKTsKICAgICAgICB9LAoKICAgICAgICBjbG9uZUNvbnRlbnRzOiBmdW5j
dGlvbigpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCiAgICAgICAgICAg
IHZhciBjbG9uZSwgZnJhZzsKICAgICAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkKSB7CiAgICAg
ICAgICAgICAgICByZXR1cm4gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKS5jcmVhdGVEb2N1bWVudEZy
YWdtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5z
dGFydENvbnRhaW5lciA9PT0gdGhpcy5lbmRDb250YWluZXIgJiYgZG9tLmlzQ2hhcmFjdGVyRGF0
YU5vZGUodGhpcy5zdGFydENvbnRhaW5lcikpIHsKICAgICAgICAgICAgICAgICAgICBjbG9uZSA9
IHRoaXMuc3RhcnRDb250YWluZXIuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICAgICAgICAg
IGNsb25lLmRhdGEgPSBjbG9uZS5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsIHRoaXMuZW5k
T2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICBmcmFnID0gZ2V0UmFuZ2VEb2N1bWVudCh0aGlz
KS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgZnJhZy5hcHBl
bmRDaGlsZChjbG9uZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYWc7CiAgICAgICAg
ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBS
YW5nZUl0ZXJhdG9yKHRoaXMsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIGNsb25lID0gY2xv
bmVTdWJ0cmVlKGl0ZXJhdG9yKTsKICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5kZXRhY2go
KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZTsKICAgICAg
ICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNhblN1cnJvdW5kQ29udGVudHM6IGZ1bmN0aW9u
KCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3Nl
cnROb2RlTm90UmVhZE9ubHkodGhpcy5zdGFydENvbnRhaW5lcik7CiAgICAgICAgICAgIGFzc2Vy
dE5vZGVOb3RSZWFkT25seSh0aGlzLmVuZENvbnRhaW5lcik7CgogICAgICAgICAgICAvLyBDaGVj
ayBpZiB0aGUgY29udGVudHMgY2FuIGJlIHN1cnJvdW5kZWQuIFNwZWNpZmljYWxseSwgdGhpcyBt
ZWFucyB3aGV0aGVyIHRoZSByYW5nZSBwYXJ0aWFsbHkgc2VsZWN0cwogICAgICAgICAgICAvLyBu
byBub24tdGV4dCBub2Rlcy4KICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFJhbmdlSXRl
cmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgIHZhciBib3VuZGFyaWVzSW52YWxpZCA9IChp
dGVyYXRvci5fZmlyc3QgJiYgKGlzTm9uVGV4dFBhcnRpYWxseVNlbGVjdGVkKGl0ZXJhdG9yLl9m
aXJzdCwgdGhpcykpIHx8CiAgICAgICAgICAgICAgICAgICAgKGl0ZXJhdG9yLl9sYXN0ICYmIGlz
Tm9uVGV4dFBhcnRpYWxseVNlbGVjdGVkKGl0ZXJhdG9yLl9sYXN0LCB0aGlzKSkpOwogICAgICAg
ICAgICBpdGVyYXRvci5kZXRhY2goKTsKICAgICAgICAgICAgcmV0dXJuICFib3VuZGFyaWVzSW52
YWxpZDsKICAgICAgICB9LAoKICAgICAgICBzdXJyb3VuZENvbnRlbnRzOiBmdW5jdGlvbihub2Rl
KSB7CiAgICAgICAgICAgIGFzc2VydFZhbGlkTm9kZVR5cGUobm9kZSwgc3Vycm91bmROb2RlVHlw
ZXMpOwoKICAgICAgICAgICAgaWYgKCF0aGlzLmNhblN1cnJvdW5kQ29udGVudHMoKSkgewogICAg
ICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXhjZXB0aW9uKCJCQURfQk9VTkRBUllQT0lOVFNf
RVJSIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGNvbnRlbnRz
CiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5leHRyYWN0Q29udGVudHMoKTsKCiAgICAg
ICAgICAgIC8vIENsZWFyIHRoZSBjaGlsZHJlbiBvZiB0aGUgbm9kZQogICAgICAgICAgICBpZiAo
bm9kZS5oYXNDaGlsZE5vZGVzKCkpIHsKICAgICAgICAgICAgICAgIHdoaWxlIChub2RlLmxhc3RD
aGlsZCkgewogICAgICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hp
bGQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJbnNl
cnQgdGhlIG5ldyBub2RlIGFuZCBhZGQgdGhlIGV4dHJhY3RlZCBjb250ZW50cwogICAgICAgICAg
ICBpbnNlcnROb2RlQXRQb3NpdGlvbihub2RlLCB0aGlzLnN0YXJ0Q29udGFpbmVyLCB0aGlzLnN0
YXJ0T2Zmc2V0KTsKICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChjb250ZW50KTsKCiAgICAg
ICAgICAgIHRoaXMuc2VsZWN0Tm9kZShub2RlKTsKICAgICAgICB9LAoKICAgICAgICBjbG9uZVJh
bmdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAg
ICAgICAgICAgdmFyIHJhbmdlID0gbmV3IFJhbmdlKGdldFJhbmdlRG9jdW1lbnQodGhpcykpOwog
ICAgICAgICAgICB2YXIgaSA9IHJhbmdlUHJvcGVydGllcy5sZW5ndGgsIHByb3A7CiAgICAgICAg
ICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgIHByb3AgPSByYW5nZVByb3BlcnRpZXNb
aV07CiAgICAgICAgICAgICAgICByYW5nZVtwcm9wXSA9IHRoaXNbcHJvcF07CiAgICAgICAgICAg
IH0KICAgICAgICAgICAgcmV0dXJuIHJhbmdlOwogICAgICAgIH0sCgogICAgICAgIHRvU3RyaW5n
OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAg
ICAgICAgdmFyIHNjID0gdGhpcy5zdGFydENvbnRhaW5lcjsKICAgICAgICAgICAgaWYgKHNjID09
PSB0aGlzLmVuZENvbnRhaW5lciAmJiBkb20uaXNDaGFyYWN0ZXJEYXRhTm9kZShzYykpIHsKICAg
ICAgICAgICAgICAgIHJldHVybiAoc2Mubm9kZVR5cGUgPT0gMyB8fCBzYy5ub2RlVHlwZSA9PSA0
KSA/IHNjLmRhdGEuc2xpY2UodGhpcy5zdGFydE9mZnNldCwgdGhpcy5lbmRPZmZzZXQpIDogIiI7
CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgdGV4dEJpdHMgPSBbXSwg
aXRlcmF0b3IgPSBuZXcgUmFuZ2VJdGVyYXRvcih0aGlzLCB0cnVlKTsKCiAgICAgICAgICAgICAg
ICBpdGVyYXRlU3VidHJlZShpdGVyYXRvciwgZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAg
ICAgICAgIC8vIEFjY2VwdCBvbmx5IHRleHQgb3IgQ0RBVEEgbm9kZXMsIG5vdCBjb21tZW50cwoK
ICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzIHx8IG5vZGUubm9kZVR5
cGUgPT0gNCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Qml0cy5wdXNoKG5vZGUuZGF0
YSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAg
ICAgICBpdGVyYXRvci5kZXRhY2goKTsKICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0Qml0cy5q
b2luKCIiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8vIFRoZSBtZXRob2Rz
IGJlbG93IGFyZSBhbGwgbm9uLXN0YW5kYXJkLiBUaGUgZm9sbG93aW5nIGJhdGNoIHdlcmUgaW50
cm9kdWNlZCBieSBNb3ppbGxhIGJ1dCBoYXZlIHNpbmNlCiAgICAgICAgLy8gYmVlbiByZW1vdmVk
IGZyb20gTW96aWxsYS4KCiAgICAgICAgY29tcGFyZU5vZGU6IGZ1bmN0aW9uKG5vZGUpIHsKICAg
ICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCiAgICAgICAgICAgIHZhciBwYXJlbnQg
PSBub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSBkb20uZ2V0Tm9k
ZUluZGV4KG5vZGUpOwoKICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHsKICAgICAgICAgICAgICAg
IHRocm93IG5ldyBET01FeGNlcHRpb24oIk5PVF9GT1VORF9FUlIiKTsKICAgICAgICAgICAgfQoK
ICAgICAgICAgICAgdmFyIHN0YXJ0Q29tcGFyaXNvbiA9IHRoaXMuY29tcGFyZVBvaW50KHBhcmVu
dCwgbm9kZUluZGV4KSwKICAgICAgICAgICAgICAgIGVuZENvbXBhcmlzb24gPSB0aGlzLmNvbXBh
cmVQb2ludChwYXJlbnQsIG5vZGVJbmRleCArIDEpOwoKICAgICAgICAgICAgaWYgKHN0YXJ0Q29t
cGFyaXNvbiA8IDApIHsgLy8gTm9kZSBzdGFydHMgYmVmb3JlCiAgICAgICAgICAgICAgICByZXR1
cm4gKGVuZENvbXBhcmlzb24gPiAwKSA/IG5fYl9hIDogbl9iOwogICAgICAgICAgICB9IGVsc2Ug
ewogICAgICAgICAgICAgICAgcmV0dXJuIChlbmRDb21wYXJpc29uID4gMCkgPyBuX2EgOiBuX2k7
CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBjb21wYXJlUG9pbnQ6IGZ1bmN0aW9u
KG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAg
ICAgICAgICBhc3NlcnROb2RlKG5vZGUsICJISUVSQVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAg
ICAgICAgYXNzZXJ0U2FtZURvY3VtZW50T3JGcmFnbWVudChub2RlLCB0aGlzLnN0YXJ0Q29udGFp
bmVyKTsKCiAgICAgICAgICAgIGlmIChkb20uY29tcGFyZVBvaW50cyhub2RlLCBvZmZzZXQsIHRo
aXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3RhcnRPZmZzZXQpIDwgMCkgewogICAgICAgICAgICAg
ICAgcmV0dXJuIC0xOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRvbS5jb21wYXJlUG9pbnRzKG5v
ZGUsIG9mZnNldCwgdGhpcy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zmc2V0KSA+IDApIHsKICAg
ICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAw
OwogICAgICAgIH0sCgogICAgICAgIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudDogY3JlYXRlQ29u
dGV4dHVhbEZyYWdtZW50LAoKICAgICAgICB0b0h0bWw6IGZ1bmN0aW9uKCkgewogICAgICAgICAg
ICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZ2V0
UmFuZ2VEb2N1bWVudCh0aGlzKS5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgY29u
dGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY2xvbmVDb250ZW50cygpKTsKICAgICAgICAgICAgcmV0
dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7CiAgICAgICAgfSwKCiAgICAgICAgLy8gdG91Y2hpbmdJ
c0ludGVyc2VjdGluZyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhpcyBtZXRob2QgY29uc2lkZXJzIGEg
bm9kZSB0aGF0IGJvcmRlcnMgYSByYW5nZSBpbnRlcnNlY3RzCiAgICAgICAgLy8gd2l0aCBpdCAo
YXMgaW4gV2ViS2l0KSBvciBub3QgKGFzIGluIEdlY2tvIHByZS0xLjksIGFuZCB0aGUgZGVmYXVs
dCkKICAgICAgICBpbnRlcnNlY3RzTm9kZTogZnVuY3Rpb24obm9kZSwgdG91Y2hpbmdJc0ludGVy
c2VjdGluZykgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAg
ICBhc3NlcnROb2RlKG5vZGUsICJOT1RfRk9VTkRfRVJSIik7CiAgICAgICAgICAgIGlmIChkb20u
Z2V0RG9jdW1lbnQobm9kZSkgIT09IGdldFJhbmdlRG9jdW1lbnQodGhpcykpIHsKICAgICAgICAg
ICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHBhcmVu
dCA9IG5vZGUucGFyZW50Tm9kZSwgb2Zmc2V0ID0gZG9tLmdldE5vZGVJbmRleChub2RlKTsKICAg
ICAgICAgICAgYXNzZXJ0Tm9kZShwYXJlbnQsICJOT1RfRk9VTkRfRVJSIik7CgogICAgICAgICAg
ICB2YXIgc3RhcnRDb21wYXJpc29uID0gZG9tLmNvbXBhcmVQb2ludHMocGFyZW50LCBvZmZzZXQs
IHRoaXMuZW5kQ29udGFpbmVyLCB0aGlzLmVuZE9mZnNldCksCiAgICAgICAgICAgICAgICBlbmRD
b21wYXJpc29uID0gZG9tLmNvbXBhcmVQb2ludHMocGFyZW50LCBvZmZzZXQgKyAxLCB0aGlzLnN0
YXJ0Q29udGFpbmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KTsKCiAgICAgICAgICAgIHJldHVybiB0b3Vj
aGluZ0lzSW50ZXJzZWN0aW5nID8gc3RhcnRDb21wYXJpc29uIDw9IDAgJiYgZW5kQ29tcGFyaXNv
biA+PSAwIDogc3RhcnRDb21wYXJpc29uIDwgMCAmJiBlbmRDb21wYXJpc29uID4gMDsKICAgICAg
ICB9LAoKCiAgICAgICAgaXNQb2ludEluUmFuZ2U6IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgewog
ICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3NlcnROb2Rl
KG5vZGUsICJISUVSQVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAgICAgICAgYXNzZXJ0U2FtZURv
Y3VtZW50T3JGcmFnbWVudChub2RlLCB0aGlzLnN0YXJ0Q29udGFpbmVyKTsKCiAgICAgICAgICAg
IHJldHVybiAoZG9tLmNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCB0aGlzLnN0YXJ0Q29udGFp
bmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KSA+PSAwKSAmJgogICAgICAgICAgICAgICAgICAgKGRvbS5j
b21wYXJlUG9pbnRzKG5vZGUsIG9mZnNldCwgdGhpcy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zm
c2V0KSA8PSAwKTsKICAgICAgICB9LAoKICAgICAgICAvLyBUaGUgbWV0aG9kcyBiZWxvdyBhcmUg
bm9uLXN0YW5kYXJkIGFuZCBpbnZlbnRlZCBieSBtZS4KCiAgICAgICAgLy8gU2hhcmluZyBhIGJv
dW5kYXJ5IHN0YXJ0LXRvLWVuZCBvciBlbmQtdG8tc3RhcnQgZG9lcyBub3QgY291bnQgYXMgaW50
ZXJzZWN0aW9uLgogICAgICAgIGludGVyc2VjdHNSYW5nZTogZnVuY3Rpb24ocmFuZ2UsIHRvdWNo
aW5nSXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsK
CiAgICAgICAgICAgIGlmIChnZXRSYW5nZURvY3VtZW50KHJhbmdlKSAhPSBnZXRSYW5nZURvY3Vt
ZW50KHRoaXMpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJXUk9O
R19ET0NVTUVOVF9FUlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHN0YXJ0Q29t
cGFyaXNvbiA9IGRvbS5jb21wYXJlUG9pbnRzKHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3Rh
cnRPZmZzZXQsIHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KSwKICAgICAgICAg
ICAgICAgIGVuZENvbXBhcmlzb24gPSBkb20uY29tcGFyZVBvaW50cyh0aGlzLmVuZENvbnRhaW5l
ciwgdGhpcy5lbmRPZmZzZXQsIHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNl
dCk7CgogICAgICAgICAgICByZXR1cm4gdG91Y2hpbmdJc0ludGVyc2VjdGluZyA/IHN0YXJ0Q29t
cGFyaXNvbiA8PSAwICYmIGVuZENvbXBhcmlzb24gPj0gMCA6IHN0YXJ0Q29tcGFyaXNvbiA8IDAg
JiYgZW5kQ29tcGFyaXNvbiA+IDA7CiAgICAgICAgfSwKCiAgICAgICAgaW50ZXJzZWN0aW9uOiBm
dW5jdGlvbihyYW5nZSkgewogICAgICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3RzUmFuZ2UocmFu
Z2UpKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDb21wYXJpc29uID0gZG9tLmNvbXBhcmVQ
b2ludHModGhpcy5zdGFydENvbnRhaW5lciwgdGhpcy5zdGFydE9mZnNldCwgcmFuZ2Uuc3RhcnRD
b250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KSwKICAgICAgICAgICAgICAgICAgICBlbmRDb21w
YXJpc29uID0gZG9tLmNvbXBhcmVQb2ludHModGhpcy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zm
c2V0LCByYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7CgogICAgICAgICAgICAg
ICAgdmFyIGludGVyc2VjdGlvblJhbmdlID0gdGhpcy5jbG9uZVJhbmdlKCk7CgogICAgICAgICAg
ICAgICAgaWYgKHN0YXJ0Q29tcGFyaXNvbiA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGlu
dGVyc2VjdGlvblJhbmdlLnNldFN0YXJ0KHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFy
dE9mZnNldCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZW5kQ29tcGFy
aXNvbiA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUmFuZ2Uuc2V0RW5k
KHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KTsKICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb25SYW5nZTsKICAgICAgICAgICAgfQog
ICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAoKICAgICAgICB1bmlvbjogZnVuY3Rp
b24ocmFuZ2UpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0c1JhbmdlKHJhbmdlLCB0
cnVlKSkgewogICAgICAgICAgICAgICAgdmFyIHVuaW9uUmFuZ2UgPSB0aGlzLmNsb25lUmFuZ2Uo
KTsKICAgICAgICAgICAgICAgIGlmIChkb20uY29tcGFyZVBvaW50cyhyYW5nZS5zdGFydENvbnRh
aW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3RhcnRP
ZmZzZXQpID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgdW5pb25SYW5nZS5zZXRTdGFydChy
YW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQpOwogICAgICAgICAgICAgICAg
fQogICAgICAgICAgICAgICAgaWYgKGRvbS5jb21wYXJlUG9pbnRzKHJhbmdlLmVuZENvbnRhaW5l
ciwgcmFuZ2UuZW5kT2Zmc2V0LCB0aGlzLmVuZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQpID09
IDEpIHsKICAgICAgICAgICAgICAgICAgICB1bmlvblJhbmdlLnNldEVuZChyYW5nZS5lbmRDb250
YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg
ICByZXR1cm4gdW5pb25SYW5nZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg
IHRocm93IG5ldyBSYW5nZUV4Y2VwdGlvbigiUmFuZ2VzIGRvIG5vdCBpbnRlcnNlY3QiKTsKICAg
ICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNvbnRhaW5zTm9kZTogZnVuY3Rpb24obm9k
ZSwgYWxsb3dQYXJ0aWFsKSB7CiAgICAgICAgICAgIGlmIChhbGxvd1BhcnRpYWwpIHsKICAgICAg
ICAgICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdHNOb2RlKG5vZGUsIGZhbHNlKTsKICAgICAg
ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVOb2RlKG5v
ZGUpID09IG5faTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNvbnRhaW5zTm9k
ZUNvbnRlbnRzOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBh
cmVQb2ludChub2RlLCAwKSA+PSAwICYmIHRoaXMuY29tcGFyZVBvaW50KG5vZGUsIGRvbS5nZXRO
b2RlTGVuZ3RoKG5vZGUpKSA8PSAwOwogICAgICAgIH0sCgogICAgICAgIGNvbnRhaW5zUmFuZ2U6
IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvbihy
YW5nZSkuZXF1YWxzKHJhbmdlKTsKICAgICAgICB9LAoKICAgICAgICBjb250YWluc05vZGVUZXh0
OiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgIHZhciBub2RlUmFuZ2UgPSB0aGlzLmNsb25l
UmFuZ2UoKTsKICAgICAgICAgICAgbm9kZVJhbmdlLnNlbGVjdE5vZGUobm9kZSk7CiAgICAgICAg
ICAgIHZhciB0ZXh0Tm9kZXMgPSBub2RlUmFuZ2UuZ2V0Tm9kZXMoWzNdKTsKICAgICAgICAgICAg
aWYgKHRleHROb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBub2RlUmFuZ2Uuc2V0
U3RhcnQodGV4dE5vZGVzWzBdLCAwKTsKICAgICAgICAgICAgICAgIHZhciBsYXN0VGV4dE5vZGUg
PSB0ZXh0Tm9kZXMucG9wKCk7CiAgICAgICAgICAgICAgICBub2RlUmFuZ2Uuc2V0RW5kKGxhc3RU
ZXh0Tm9kZSwgbGFzdFRleHROb2RlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFp
bnMgPSB0aGlzLmNvbnRhaW5zUmFuZ2Uobm9kZVJhbmdlKTsKICAgICAgICAgICAgICAgIG5vZGVS
YW5nZS5kZXRhY2goKTsKICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluczsKICAgICAgICAg
ICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zTm9kZUNvbnRl
bnRzKG5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgY3JlYXRlTm9kZUl0
ZXJhdG9yOiBmdW5jdGlvbihub2RlVHlwZXMsIGZpbHRlcikgewogICAgICAgICAgICBhc3NlcnRS
YW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlTm9kZUl0ZXJhdG9y
KHRoaXMsIG5vZGVUeXBlcywgZmlsdGVyKTsKICAgICAgICB9LAoKICAgICAgICBnZXROb2Rlczog
ZnVuY3Rpb24obm9kZVR5cGVzLCBmaWx0ZXIpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxp
ZCh0aGlzKTsKICAgICAgICAgICAgcmV0dXJuIGdldE5vZGVzSW5SYW5nZSh0aGlzLCBub2RlVHlw
ZXMsIGZpbHRlcik7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0RG9jdW1lbnQ6IGZ1bmN0aW9uKCkg
ewogICAgICAgICAgICByZXR1cm4gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKTsKICAgICAgICB9LAoK
ICAgICAgICBjb2xsYXBzZUJlZm9yZTogZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICBhc3Nl
cnROb3REZXRhY2hlZCh0aGlzKTsKCiAgICAgICAgICAgIHRoaXMuc2V0RW5kQmVmb3JlKG5vZGUp
OwogICAgICAgICAgICB0aGlzLmNvbGxhcHNlKGZhbHNlKTsKICAgICAgICB9LAoKICAgICAgICBj
b2xsYXBzZUFmdGVyOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgIGFzc2VydE5vdERldGFj
aGVkKHRoaXMpOwoKICAgICAgICAgICAgdGhpcy5zZXRTdGFydEFmdGVyKG5vZGUpOwogICAgICAg
ICAgICB0aGlzLmNvbGxhcHNlKHRydWUpOwogICAgICAgIH0sCgogICAgICAgIGdldE5hbWU6IGZ1
bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gIkRvbVJhbmdlIjsKICAgICAgICB9LAoKICAg
ICAgICBlcXVhbHM6IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAgICAgICAgIHJldHVybiBSYW5nZS5y
YW5nZXNFcXVhbCh0aGlzLCByYW5nZSk7CiAgICAgICAgfSwKCiAgICAgICAgaXNWYWxpZDogZnVu
Y3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBpc1JhbmdlVmFsaWQodGhpcyk7CiAgICAgICAg
fSwKCiAgICAgICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBpbnNw
ZWN0KHRoaXMpOwogICAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gY29weUNvbXBhcmlzb25D
b25zdGFudHNUb09iamVjdChvYmopIHsKICAgICAgICBvYmouU1RBUlRfVE9fU1RBUlQgPSBzMnM7
CiAgICAgICAgb2JqLlNUQVJUX1RPX0VORCA9IHMyZTsKICAgICAgICBvYmouRU5EX1RPX0VORCA9
IGUyZTsKICAgICAgICBvYmouRU5EX1RPX1NUQVJUID0gZTJzOwoKICAgICAgICBvYmouTk9ERV9C
RUZPUkUgPSBuX2I7CiAgICAgICAgb2JqLk5PREVfQUZURVIgPSBuX2E7CiAgICAgICAgb2JqLk5P
REVfQkVGT1JFX0FORF9BRlRFUiA9IG5fYl9hOwogICAgICAgIG9iai5OT0RFX0lOU0lERSA9IG5f
aTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb3B5Q29tcGFyaXNvbkNvbnN0YW50cyhjb25zdHJ1Y3Rv
cikgewogICAgICAgIGNvcHlDb21wYXJpc29uQ29uc3RhbnRzVG9PYmplY3QoY29uc3RydWN0b3Ip
OwogICAgICAgIGNvcHlDb21wYXJpc29uQ29uc3RhbnRzVG9PYmplY3QoY29uc3RydWN0b3IucHJv
dG90eXBlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVSYW5nZUNvbnRlbnRSZW1vdmVyKHJl
bW92ZXIsIGJvdW5kYXJ5VXBkYXRlcikgewogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAg
ICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCiAgICAgICAgICAgIHZhciBzYyA9IHRo
aXMuc3RhcnRDb250YWluZXIsIHNvID0gdGhpcy5zdGFydE9mZnNldCwgcm9vdCA9IHRoaXMuY29t
bW9uQW5jZXN0b3JDb250YWluZXI7CgogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgUmFu
Z2VJdGVyYXRvcih0aGlzLCB0cnVlKTsKCiAgICAgICAgICAgIC8vIFdvcmsgb3V0IHdoZXJlIHRv
IHBvc2l0aW9uIHRoZSByYW5nZSBhZnRlciBjb250ZW50IHJlbW92YWwKICAgICAgICAgICAgdmFy
IG5vZGUsIGJvdW5kYXJ5OwogICAgICAgICAgICBpZiAoc2MgIT09IHJvb3QpIHsKICAgICAgICAg
ICAgICAgIG5vZGUgPSBkb20uZ2V0Q2xvc2VzdEFuY2VzdG9ySW4oc2MsIHJvb3QsIHRydWUpOwog
ICAgICAgICAgICAgICAgYm91bmRhcnkgPSBnZXRCb3VuZGFyeUFmdGVyTm9kZShub2RlKTsKICAg
ICAgICAgICAgICAgIHNjID0gYm91bmRhcnkubm9kZTsKICAgICAgICAgICAgICAgIHNvID0gYm91
bmRhcnkub2Zmc2V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDaGVjayBub25lIG9m
IHRoZSByYW5nZSBpcyByZWFkLW9ubHkKICAgICAgICAgICAgaXRlcmF0ZVN1YnRyZWUoaXRlcmF0
b3IsIGFzc2VydE5vZGVOb3RSZWFkT25seSk7CgogICAgICAgICAgICBpdGVyYXRvci5yZXNldCgp
OwoKICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjb250ZW50CiAgICAgICAgICAgIHZhciByZXR1
cm5WYWx1ZSA9IHJlbW92ZXIoaXRlcmF0b3IpOwogICAgICAgICAgICBpdGVyYXRvci5kZXRhY2go
KTsKCiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5ldyBwb3NpdGlvbgogICAgICAgICAgICBi
b3VuZGFyeVVwZGF0ZXIodGhpcywgc2MsIHNvLCBzYywgc28pOwoKICAgICAgICAgICAgcmV0dXJu
IHJldHVyblZhbHVlOwogICAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlUHJvdG90
eXBlUmFuZ2UoY29uc3RydWN0b3IsIGJvdW5kYXJ5VXBkYXRlciwgZGV0YWNoZXIpIHsKICAgICAg
ICBmdW5jdGlvbiBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIoaXNCZWZvcmUsIGlzU3RhcnQp
IHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIGFz
c2VydE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlw
ZShub2RlLCBiZWZvcmVBZnRlck5vZGVUeXBlcyk7CiAgICAgICAgICAgICAgICBhc3NlcnRWYWxp
ZE5vZGVUeXBlKGdldFJvb3RDb250YWluZXIobm9kZSksIHJvb3RDb250YWluZXJOb2RlVHlwZXMp
OwoKICAgICAgICAgICAgICAgIHZhciBib3VuZGFyeSA9IChpc0JlZm9yZSA/IGdldEJvdW5kYXJ5
QmVmb3JlTm9kZSA6IGdldEJvdW5kYXJ5QWZ0ZXJOb2RlKShub2RlKTsKICAgICAgICAgICAgICAg
IChpc1N0YXJ0ID8gc2V0UmFuZ2VTdGFydCA6IHNldFJhbmdlRW5kKSh0aGlzLCBib3VuZGFyeS5u
b2RlLCBib3VuZGFyeS5vZmZzZXQpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAg
ZnVuY3Rpb24gc2V0UmFuZ2VTdGFydChyYW5nZSwgbm9kZSwgb2Zmc2V0KSB7CiAgICAgICAgICAg
IHZhciBlYyA9IHJhbmdlLmVuZENvbnRhaW5lciwgZW8gPSByYW5nZS5lbmRPZmZzZXQ7CiAgICAg
ICAgICAgIGlmIChub2RlICE9PSByYW5nZS5zdGFydENvbnRhaW5lciB8fCBvZmZzZXQgIT09IHJh
bmdlLnN0YXJ0T2Zmc2V0KSB7CiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGUgcm9vdCBjb250
YWluZXJzIG9mIHRoZSByYW5nZSBhbmQgdGhlIG5ldyBib3VuZGFyeSwgYW5kIGFsc28gY2hlY2sg
d2hldGhlciB0aGUgbmV3IGJvdW5kYXJ5CiAgICAgICAgICAgICAgICAvLyBpcyBhZnRlciB0aGUg
Y3VycmVudCBlbmQuIEluIGVpdGhlciBjYXNlLCBjb2xsYXBzZSB0aGUgcmFuZ2UgdG8gdGhlIG5l
dyBwb3NpdGlvbgogICAgICAgICAgICAgICAgaWYgKGdldFJvb3RDb250YWluZXIobm9kZSkgIT0g
Z2V0Um9vdENvbnRhaW5lcihlYykgfHwgZG9tLmNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCBl
YywgZW8pID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAg
ICAgICAgICAgZW8gPSBvZmZzZXQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBi
b3VuZGFyeVVwZGF0ZXIocmFuZ2UsIG5vZGUsIG9mZnNldCwgZWMsIGVvKTsKICAgICAgICAgICAg
fQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0UmFuZ2VFbmQocmFuZ2UsIG5vZGUsIG9m
ZnNldCkgewogICAgICAgICAgICB2YXIgc2MgPSByYW5nZS5zdGFydENvbnRhaW5lciwgc28gPSBy
YW5nZS5zdGFydE9mZnNldDsKICAgICAgICAgICAgaWYgKG5vZGUgIT09IHJhbmdlLmVuZENvbnRh
aW5lciB8fCBvZmZzZXQgIT09IHJhbmdlLmVuZE9mZnNldCkgewogICAgICAgICAgICAgICAgLy8g
Q2hlY2sgdGhlIHJvb3QgY29udGFpbmVycyBvZiB0aGUgcmFuZ2UgYW5kIHRoZSBuZXcgYm91bmRh
cnksIGFuZCBhbHNvIGNoZWNrIHdoZXRoZXIgdGhlIG5ldyBib3VuZGFyeQogICAgICAgICAgICAg
ICAgLy8gaXMgYWZ0ZXIgdGhlIGN1cnJlbnQgZW5kLiBJbiBlaXRoZXIgY2FzZSwgY29sbGFwc2Ug
dGhlIHJhbmdlIHRvIHRoZSBuZXcgcG9zaXRpb24KICAgICAgICAgICAgICAgIGlmIChnZXRSb290
Q29udGFpbmVyKG5vZGUpICE9IGdldFJvb3RDb250YWluZXIoc2MpIHx8IGRvbS5jb21wYXJlUG9p
bnRzKG5vZGUsIG9mZnNldCwgc2MsIHNvKSA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHNj
ID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICBzbyA9IG9mZnNldDsKICAgICAgICAgICAgICAg
IH0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5VXBkYXRlcihyYW5nZSwgc2MsIHNvLCBub2RlLCBv
ZmZzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRSYW5n
ZVN0YXJ0QW5kRW5kKHJhbmdlLCBub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgaWYgKG5vZGUg
IT09IHJhbmdlLnN0YXJ0Q29udGFpbmVyIHx8IG9mZnNldCAhPT0gcmFuZ2Uuc3RhcnRPZmZzZXQg
fHwgbm9kZSAhPT0gcmFuZ2UuZW5kQ29udGFpbmVyIHx8IG9mZnNldCAhPT0gcmFuZ2UuZW5kT2Zm
c2V0KSB7CiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIocmFuZ2UsIG5vZGUsIG9mZnNl
dCwgbm9kZSwgb2Zmc2V0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3Ry
dWN0b3IucHJvdG90eXBlID0gbmV3IFJhbmdlUHJvdG90eXBlKCk7CgogICAgICAgIGFwaS51dGls
LmV4dGVuZChjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAgICAgICAgc2V0U3RhcnQ6IGZ1
bmN0aW9uKG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNoZWQo
dGhpcyk7CiAgICAgICAgICAgICAgICBhc3NlcnROb0RvY1R5cGVOb3RhdGlvbkVudGl0eUFuY2Vz
dG9yKG5vZGUsIHRydWUpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWRPZmZzZXQobm9kZSwg
b2Zmc2V0KTsKCiAgICAgICAgICAgICAgICBzZXRSYW5nZVN0YXJ0KHRoaXMsIG5vZGUsIG9mZnNl
dCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzZXRFbmQ6IGZ1bmN0aW9uKG5vZGUsIG9m
ZnNldCkgewogICAgICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CiAgICAgICAg
ICAgICAgICBhc3NlcnROb0RvY1R5cGVOb3RhdGlvbkVudGl0eUFuY2VzdG9yKG5vZGUsIHRydWUp
OwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWRPZmZzZXQobm9kZSwgb2Zmc2V0KTsKCiAgICAg
ICAgICAgICAgICBzZXRSYW5nZUVuZCh0aGlzLCBub2RlLCBvZmZzZXQpOwogICAgICAgICAgICB9
LAoKICAgICAgICAgICAgc2V0U3RhcnRCZWZvcmU6IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRl
cih0cnVlLCB0cnVlKSwKICAgICAgICAgICAgc2V0U3RhcnRBZnRlcjogY3JlYXRlQmVmb3JlQWZ0
ZXJOb2RlU2V0dGVyKGZhbHNlLCB0cnVlKSwKICAgICAgICAgICAgc2V0RW5kQmVmb3JlOiBjcmVh
dGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIodHJ1ZSwgZmFsc2UpLAogICAgICAgICAgICBzZXRFbmRB
ZnRlcjogY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKGZhbHNlLCBmYWxzZSksCgogICAgICAg
ICAgICBjb2xsYXBzZTogZnVuY3Rpb24oaXNTdGFydCkgewogICAgICAgICAgICAgICAgYXNzZXJ0
UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgICAgIGlmIChpc1N0YXJ0KSB7CiAgICAgICAg
ICAgICAgICAgICAgYm91bmRhcnlVcGRhdGVyKHRoaXMsIHRoaXMuc3RhcnRDb250YWluZXIsIHRo
aXMuc3RhcnRPZmZzZXQsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3RhcnRPZmZzZXQpOwog
ICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0
ZXIodGhpcywgdGhpcy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zmc2V0LCB0aGlzLmVuZENvbnRh
aW5lciwgdGhpcy5lbmRPZmZzZXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoK
ICAgICAgICAgICAgc2VsZWN0Tm9kZUNvbnRlbnRzOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgICAgICAvLyBUaGlzIGRvZXNuJ3Qgc2VlbSB3ZWxsIHNwZWNpZmllZDogdGhlIHNwZWMgdGFs
a3Mgb25seSBhYm91dCBzZWxlY3RpbmcgdGhlIG5vZGUncyBjb250ZW50cywgd2hpY2gKICAgICAg
ICAgICAgICAgIC8vIGNvdWxkIGJlIHRha2VuIHRvIG1lYW4gb25seSBpdHMgY2hpbGRyZW4uIEhv
d2V2ZXIsIGJyb3dzZXJzIGltcGxlbWVudCB0aGlzIHRoZSBzYW1lIGFzIHNlbGVjdE5vZGUgZm9y
CiAgICAgICAgICAgICAgICAvLyB0ZXh0IG5vZGVzLCBzbyBJIHNoYWxsIGRvIGxpa2V3aXNlCiAg
ICAgICAgICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0aGlzKTsKICAgICAgICAgICAgICAgIGFz
c2VydE5vRG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgdHJ1ZSk7CgogICAgICAg
ICAgICAgICAgYm91bmRhcnlVcGRhdGVyKHRoaXMsIG5vZGUsIDAsIG5vZGUsIGRvbS5nZXROb2Rl
TGVuZ3RoKG5vZGUpKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHNlbGVjdE5vZGU6IGZ1
bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIGFzc2VydE5vdERldGFjaGVkKHRoaXMpOwog
ICAgICAgICAgICAgICAgYXNzZXJ0Tm9Eb2NUeXBlTm90YXRpb25FbnRpdHlBbmNlc3Rvcihub2Rl
LCBmYWxzZSk7CiAgICAgICAgICAgICAgICBhc3NlcnRWYWxpZE5vZGVUeXBlKG5vZGUsIGJlZm9y
ZUFmdGVyTm9kZVR5cGVzKTsKCiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBnZXRCb3VuZGFy
eUJlZm9yZU5vZGUobm9kZSksIGVuZCA9IGdldEJvdW5kYXJ5QWZ0ZXJOb2RlKG5vZGUpOwogICAg
ICAgICAgICAgICAgYm91bmRhcnlVcGRhdGVyKHRoaXMsIHN0YXJ0Lm5vZGUsIHN0YXJ0Lm9mZnNl
dCwgZW5kLm5vZGUsIGVuZC5vZmZzZXQpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZXh0
cmFjdENvbnRlbnRzOiBjcmVhdGVSYW5nZUNvbnRlbnRSZW1vdmVyKGV4dHJhY3RTdWJ0cmVlLCBi
b3VuZGFyeVVwZGF0ZXIpLAoKICAgICAgICAgICAgZGVsZXRlQ29udGVudHM6IGNyZWF0ZVJhbmdl
Q29udGVudFJlbW92ZXIoZGVsZXRlU3VidHJlZSwgYm91bmRhcnlVcGRhdGVyKSwKCiAgICAgICAg
ICAgIGNhblN1cnJvdW5kQ29udGVudHM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgYXNz
ZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgICAgIGFzc2VydE5vZGVOb3RSZWFkT25s
eSh0aGlzLnN0YXJ0Q29udGFpbmVyKTsKICAgICAgICAgICAgICAgIGFzc2VydE5vZGVOb3RSZWFk
T25seSh0aGlzLmVuZENvbnRhaW5lcik7CgogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhl
IGNvbnRlbnRzIGNhbiBiZSBzdXJyb3VuZGVkLiBTcGVjaWZpY2FsbHksIHRoaXMgbWVhbnMgd2hl
dGhlciB0aGUgcmFuZ2UgcGFydGlhbGx5IHNlbGVjdHMKICAgICAgICAgICAgICAgIC8vIG5vIG5v
bi10ZXh0IG5vZGVzLgogICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFJhbmdlSXRl
cmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICB2YXIgYm91bmRhcmllc0ludmFsaWQg
PSAoaXRlcmF0b3IuX2ZpcnN0ICYmIChpc05vblRleHRQYXJ0aWFsbHlTZWxlY3RlZChpdGVyYXRv
ci5fZmlyc3QsIHRoaXMpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAoaXRlcmF0b3IuX2xh
c3QgJiYgaXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2xhc3QsIHRoaXMpKSk7
CiAgICAgICAgICAgICAgICBpdGVyYXRvci5kZXRhY2goKTsKICAgICAgICAgICAgICAgIHJldHVy
biAhYm91bmRhcmllc0ludmFsaWQ7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBkZXRhY2g6
IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZGV0YWNoZXIodGhpcyk7CiAgICAgICAgICAg
IH0sCgogICAgICAgICAgICBzcGxpdEJvdW5kYXJpZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAg
ICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCgogICAgICAgICAgICAgICAgdmFyIHNjID0g
dGhpcy5zdGFydENvbnRhaW5lciwgc28gPSB0aGlzLnN0YXJ0T2Zmc2V0LCBlYyA9IHRoaXMuZW5k
Q29udGFpbmVyLCBlbyA9IHRoaXMuZW5kT2Zmc2V0OwogICAgICAgICAgICAgICAgdmFyIHN0YXJ0
RW5kU2FtZSA9IChzYyA9PT0gZWMpOwoKICAgICAgICAgICAgICAgIGlmIChkb20uaXNDaGFyYWN0
ZXJEYXRhTm9kZShlYykgJiYgZW8gPiAwICYmIGVvIDwgZWMubGVuZ3RoKSB7CiAgICAgICAgICAg
ICAgICAgICAgZG9tLnNwbGl0RGF0YU5vZGUoZWMsIGVvKTsKCiAgICAgICAgICAgICAgICB9Cgog
ICAgICAgICAgICAgICAgaWYgKGRvbS5pc0NoYXJhY3RlckRhdGFOb2RlKHNjKSAmJiBzbyA+IDAg
JiYgc28gPCBzYy5sZW5ndGgpIHsKCiAgICAgICAgICAgICAgICAgICAgc2MgPSBkb20uc3BsaXRE
YXRhTm9kZShzYywgc28pOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGFydEVuZFNhbWUpIHsK
ICAgICAgICAgICAgICAgICAgICAgICAgZW8gLT0gc287CiAgICAgICAgICAgICAgICAgICAgICAg
IGVjID0gc2M7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlYyA9PSBzYy5wYXJlbnRO
b2RlICYmIGVvID49IGRvbS5nZXROb2RlSW5kZXgoc2MpKSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgIGVvKys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNvID0g
MDsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIodGhp
cywgc2MsIHNvLCBlYywgZW8pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbm9ybWFsaXpl
Qm91bmRhcmllczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlk
KHRoaXMpOwoKICAgICAgICAgICAgICAgIHZhciBzYyA9IHRoaXMuc3RhcnRDb250YWluZXIsIHNv
ID0gdGhpcy5zdGFydE9mZnNldCwgZWMgPSB0aGlzLmVuZENvbnRhaW5lciwgZW8gPSB0aGlzLmVu
ZE9mZnNldDsKCiAgICAgICAgICAgICAgICB2YXIgbWVyZ2VGb3J3YXJkID0gZnVuY3Rpb24obm9k
ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaWJsaW5nID0gbm9kZS5uZXh0U2libGluZzsK
ICAgICAgICAgICAgICAgICAgICBpZiAoc2libGluZyAmJiBzaWJsaW5nLm5vZGVUeXBlID09IG5v
ZGUubm9kZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWMgPSBub2RlOwogICAgICAg
ICAgICAgICAgICAgICAgICBlbyA9IG5vZGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAg
ICBub2RlLmFwcGVuZERhdGEoc2libGluZy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAg
c2libGluZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNpYmxpbmcpOwogICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG1lcmdlQmFja3dh
cmQgPSBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNpYmxpbmcgPSBu
b2RlLnByZXZpb3VzU2libGluZzsKICAgICAgICAgICAgICAgICAgICBpZiAoc2libGluZyAmJiBz
aWJsaW5nLm5vZGVUeXBlID09IG5vZGUubm9kZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAg
ICAgc2MgPSBub2RlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZUxlbmd0aCA9IG5v
ZGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBzbyA9IHNpYmxpbmcubGVuZ3RoOwog
ICAgICAgICAgICAgICAgICAgICAgICBub2RlLmluc2VydERhdGEoMCwgc2libGluZy5kYXRhKTsK
ICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNp
YmxpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2MgPT0gZWMpIHsKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGVvICs9IHNvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZWMgPSBzYzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlYyA9PSBub2RlLnBh
cmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSBk
b20uZ2V0Tm9kZUluZGV4KG5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVv
ID09IG5vZGVJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjID0gbm9k
ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbyA9IG5vZGVMZW5ndGg7CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVvID4gbm9kZUluZGV4KSB7CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZW8tLTsKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZVN0YXJ0ID0gdHJ1
ZTsKCiAgICAgICAgICAgICAgICBpZiAoZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGUoZWMpKSB7CiAg
ICAgICAgICAgICAgICAgICAgaWYgKGVjLmxlbmd0aCA9PSBlbykgewogICAgICAgICAgICAgICAg
ICAgICAgICBtZXJnZUZvcndhcmQoZWMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVvID4gMCkgewogICAgICAg
ICAgICAgICAgICAgICAgICB2YXIgZW5kTm9kZSA9IGVjLmNoaWxkTm9kZXNbZW8gLSAxXTsKICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZE5vZGUgJiYgZG9tLmlzQ2hhcmFjdGVyRGF0YU5v
ZGUoZW5kTm9kZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlRm9yd2FyZChl
bmROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVTdGFydCA9ICF0aGlzLmNvbGxhcHNlZDsKICAg
ICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplU3RhcnQpIHsKICAg
ICAgICAgICAgICAgICAgICBpZiAoZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGUoc2MpKSB7CiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIChzbyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBtZXJnZUJhY2t3YXJkKHNjKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbyA8IHNj
LmNoaWxkTm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Rh
cnROb2RlID0gc2MuY2hpbGROb2Rlc1tzb107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoc3RhcnROb2RlICYmIGRvbS5pc0NoYXJhY3RlckRhdGFOb2RlKHN0YXJ0Tm9kZSkpIHsKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUJhY2t3YXJkKHN0YXJ0Tm9kZSk7CiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg
ICAgICAgIHNjID0gZWM7CiAgICAgICAgICAgICAgICAgICAgc28gPSBlbzsKICAgICAgICAgICAg
ICAgIH0KCiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIodGhpcywgc2MsIHNvLCBlYywg
ZW8pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY29sbGFwc2VUb1BvaW50OiBmdW5jdGlv
bihub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgICAgIGFzc2VydE5vdERldGFjaGVkKHRoaXMp
OwoKICAgICAgICAgICAgICAgIGFzc2VydE5vRG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Io
bm9kZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBhc3NlcnRWYWxpZE9mZnNldChub2RlLCBvZmZz
ZXQpOwoKICAgICAgICAgICAgICAgIHNldFJhbmdlU3RhcnRBbmRFbmQodGhpcywgbm9kZSwgb2Zm
c2V0KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBjb3B5Q29tcGFyaXNvbkNv
bnN0YW50cyhjb25zdHJ1Y3Rvcik7CiAgICB9CgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyBVcGRhdGVzIGNvbW1v
bkFuY2VzdG9yQ29udGFpbmVyIGFuZCBjb2xsYXBzZWQgYWZ0ZXIgYm91bmRhcnkgY2hhbmdlCiAg
ICBmdW5jdGlvbiB1cGRhdGVDb2xsYXBzZWRBbmRDb21tb25BbmNlc3RvcihyYW5nZSkgewogICAg
ICAgIHJhbmdlLmNvbGxhcHNlZCA9IChyYW5nZS5zdGFydENvbnRhaW5lciA9PT0gcmFuZ2UuZW5k
Q29udGFpbmVyICYmIHJhbmdlLnN0YXJ0T2Zmc2V0ID09PSByYW5nZS5lbmRPZmZzZXQpOwogICAg
ICAgIHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyID0gcmFuZ2UuY29sbGFwc2VkID8KICAg
ICAgICAgICAgcmFuZ2Uuc3RhcnRDb250YWluZXIgOiBkb20uZ2V0Q29tbW9uQW5jZXN0b3IocmFu
Z2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcik7CiAgICB9CgogICAgZnVuY3Rp
b24gdXBkYXRlQm91bmRhcmllcyhyYW5nZSwgc3RhcnRDb250YWluZXIsIHN0YXJ0T2Zmc2V0LCBl
bmRDb250YWluZXIsIGVuZE9mZnNldCkgewogICAgICAgIHZhciBzdGFydE1vdmVkID0gKHJhbmdl
LnN0YXJ0Q29udGFpbmVyICE9PSBzdGFydENvbnRhaW5lciB8fCByYW5nZS5zdGFydE9mZnNldCAh
PT0gc3RhcnRPZmZzZXQpOwogICAgICAgIHZhciBlbmRNb3ZlZCA9IChyYW5nZS5lbmRDb250YWlu
ZXIgIT09IGVuZENvbnRhaW5lciB8fCByYW5nZS5lbmRPZmZzZXQgIT09IGVuZE9mZnNldCk7Cgog
ICAgICAgIHJhbmdlLnN0YXJ0Q29udGFpbmVyID0gc3RhcnRDb250YWluZXI7CiAgICAgICAgcmFu
Z2Uuc3RhcnRPZmZzZXQgPSBzdGFydE9mZnNldDsKICAgICAgICByYW5nZS5lbmRDb250YWluZXIg
PSBlbmRDb250YWluZXI7CiAgICAgICAgcmFuZ2UuZW5kT2Zmc2V0ID0gZW5kT2Zmc2V0OwoKICAg
ICAgICB1cGRhdGVDb2xsYXBzZWRBbmRDb21tb25BbmNlc3RvcihyYW5nZSk7CiAgICAgICAgZGlz
cGF0Y2hFdmVudChyYW5nZSwgImJvdW5kYXJ5Y2hhbmdlIiwge3N0YXJ0TW92ZWQ6IHN0YXJ0TW92
ZWQsIGVuZE1vdmVkOiBlbmRNb3ZlZH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRldGFjaChyYW5n
ZSkgewogICAgICAgIGFzc2VydE5vdERldGFjaGVkKHJhbmdlKTsKICAgICAgICByYW5nZS5zdGFy
dENvbnRhaW5lciA9IHJhbmdlLnN0YXJ0T2Zmc2V0ID0gcmFuZ2UuZW5kQ29udGFpbmVyID0gcmFu
Z2UuZW5kT2Zmc2V0ID0gbnVsbDsKICAgICAgICByYW5nZS5jb2xsYXBzZWQgPSByYW5nZS5jb21t
b25BbmNlc3RvckNvbnRhaW5lciA9IG51bGw7CiAgICAgICAgZGlzcGF0Y2hFdmVudChyYW5nZSwg
ImRldGFjaCIsIG51bGwpOwogICAgICAgIHJhbmdlLl9saXN0ZW5lcnMgPSBudWxsOwogICAgfQoK
ICAgIC8qKgogICAgICogQGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGZ1bmN0aW9uIFJhbmdlKGRv
YykgewogICAgICAgIHRoaXMuc3RhcnRDb250YWluZXIgPSBkb2M7CiAgICAgICAgdGhpcy5zdGFy
dE9mZnNldCA9IDA7CiAgICAgICAgdGhpcy5lbmRDb250YWluZXIgPSBkb2M7CiAgICAgICAgdGhp
cy5lbmRPZmZzZXQgPSAwOwogICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHsKICAgICAgICAgICAg
Ym91bmRhcnljaGFuZ2U6IFtdLAogICAgICAgICAgICBkZXRhY2g6IFtdCiAgICAgICAgfTsKICAg
ICAgICB1cGRhdGVDb2xsYXBzZWRBbmRDb21tb25BbmNlc3Rvcih0aGlzKTsKICAgIH0KCiAgICBj
cmVhdGVQcm90b3R5cGVSYW5nZShSYW5nZSwgdXBkYXRlQm91bmRhcmllcywgZGV0YWNoKTsKCiAg
ICBhcGkucmFuZ2VQcm90b3R5cGUgPSBSYW5nZVByb3RvdHlwZS5wcm90b3R5cGU7CgogICAgUmFu
Z2UucmFuZ2VQcm9wZXJ0aWVzID0gcmFuZ2VQcm9wZXJ0aWVzOwogICAgUmFuZ2UuUmFuZ2VJdGVy
YXRvciA9IFJhbmdlSXRlcmF0b3I7CiAgICBSYW5nZS5jb3B5Q29tcGFyaXNvbkNvbnN0YW50cyA9
IGNvcHlDb21wYXJpc29uQ29uc3RhbnRzOwogICAgUmFuZ2UuY3JlYXRlUHJvdG90eXBlUmFuZ2Ug
PSBjcmVhdGVQcm90b3R5cGVSYW5nZTsKICAgIFJhbmdlLmluc3BlY3QgPSBpbnNwZWN0OwogICAg
UmFuZ2UuZ2V0UmFuZ2VEb2N1bWVudCA9IGdldFJhbmdlRG9jdW1lbnQ7CiAgICBSYW5nZS5yYW5n
ZXNFcXVhbCA9IGZ1bmN0aW9uKHIxLCByMikgewogICAgICAgIHJldHVybiByMS5zdGFydENvbnRh
aW5lciA9PT0gcjIuc3RhcnRDb250YWluZXIgJiYKICAgICAgICAgICAgICAgcjEuc3RhcnRPZmZz
ZXQgPT09IHIyLnN0YXJ0T2Zmc2V0ICYmCiAgICAgICAgICAgICAgIHIxLmVuZENvbnRhaW5lciA9
PT0gcjIuZW5kQ29udGFpbmVyICYmCiAgICAgICAgICAgICAgIHIxLmVuZE9mZnNldCA9PT0gcjIu
ZW5kT2Zmc2V0OwogICAgfTsKCiAgICBhcGkuRG9tUmFuZ2UgPSBSYW5nZTsKICAgIGFwaS5SYW5n
ZUV4Y2VwdGlvbiA9IFJhbmdlRXhjZXB0aW9uOwp9KTtyYW5neS5jcmVhdGVNb2R1bGUoIldyYXBw
ZWRSYW5nZSIsIGZ1bmN0aW9uKGFwaSwgbW9kdWxlKSB7DQogICAgYXBpLnJlcXVpcmVNb2R1bGVz
KCBbIkRvbVV0aWwiLCAiRG9tUmFuZ2UiXSApOw0KDQogICAgLyoqDQogICAgICogQGNvbnN0cnVj
dG9yDQogICAgICovDQogICAgdmFyIFdyYXBwZWRSYW5nZTsNCiAgICB2YXIgZG9tID0gYXBpLmRv
bTsNCiAgICB2YXIgRG9tUG9zaXRpb24gPSBkb20uRG9tUG9zaXRpb247DQogICAgdmFyIERvbVJh
bmdlID0gYXBpLkRvbVJhbmdlOw0KDQoNCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICAvKg0KICAgIFRoaXMgaXMg
YSB3b3JrYXJvdW5kIGZvciBhIGJ1ZyB3aGVyZSBJRSByZXR1cm5zIHRoZSB3cm9uZyBjb250YWlu
ZXIgZWxlbWVudCBmcm9tIHRoZSBUZXh0UmFuZ2UncyBwYXJlbnRFbGVtZW50KCkNCiAgICBtZXRo
b2QuIEZvciBleGFtcGxlLCBpbiB0aGUgZm9sbG93aW5nICh3aGVyZSBwaXBlcyBkZW5vdGUgdGhl
IHNlbGVjdGlvbiBib3VuZGFyaWVzKToNCg0KICAgIDx1bCBpZD0idWwiPjxsaSBpZD0iYSI+fCBh
IDwvbGk+PGxpIGlkPSJiIj4gYiB8PC9saT48L3VsPg0KDQogICAgdmFyIHJhbmdlID0gZG9jdW1l
bnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7DQogICAgYWxlcnQocmFuZ2UucGFyZW50RWxlbWVu
dCgpLmlkKTsgLy8gU2hvdWxkIGFsZXJ0ICJ1bCIgYnV0IGFsZXJ0cyAiYiINCg0KICAgIFRoaXMg
bWV0aG9kIHJldHVybnMgdGhlIGNvbW1vbiBhbmNlc3RvciBub2RlIG9mIHRoZSBmb2xsb3dpbmc6
DQogICAgLSB0aGUgcGFyZW50RWxlbWVudCgpIG9mIHRoZSB0ZXh0UmFuZ2UNCiAgICAtIHRoZSBw
YXJlbnRFbGVtZW50KCkgb2YgdGhlIHRleHRSYW5nZSBhZnRlciBjYWxsaW5nIGNvbGxhcHNlKHRy
dWUpDQogICAgLSB0aGUgcGFyZW50RWxlbWVudCgpIG9mIHRoZSB0ZXh0UmFuZ2UgYWZ0ZXIgY2Fs
bGluZyBjb2xsYXBzZShmYWxzZSkNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBnZXRUZXh0UmFuZ2VD
b250YWluZXJFbGVtZW50KHRleHRSYW5nZSkgew0KICAgICAgICB2YXIgcGFyZW50RWwgPSB0ZXh0
UmFuZ2UucGFyZW50RWxlbWVudCgpOw0KDQogICAgICAgIHZhciByYW5nZSA9IHRleHRSYW5nZS5k
dXBsaWNhdGUoKTsNCiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7DQogICAgICAgIHZhciBz
dGFydEVsID0gcmFuZ2UucGFyZW50RWxlbWVudCgpOw0KICAgICAgICByYW5nZSA9IHRleHRSYW5n
ZS5kdXBsaWNhdGUoKTsNCiAgICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpOw0KICAgICAgICB2
YXIgZW5kRWwgPSByYW5nZS5wYXJlbnRFbGVtZW50KCk7DQogICAgICAgIHZhciBzdGFydEVuZENv
bnRhaW5lciA9IChzdGFydEVsID09IGVuZEVsKSA/IHN0YXJ0RWwgOiBkb20uZ2V0Q29tbW9uQW5j
ZXN0b3Ioc3RhcnRFbCwgZW5kRWwpOw0KDQogICAgICAgIHJldHVybiBzdGFydEVuZENvbnRhaW5l
ciA9PSBwYXJlbnRFbCA/IHN0YXJ0RW5kQ29udGFpbmVyIDogZG9tLmdldENvbW1vbkFuY2VzdG9y
KHBhcmVudEVsLCBzdGFydEVuZENvbnRhaW5lcik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdGV4
dFJhbmdlSXNDb2xsYXBzZWQodGV4dFJhbmdlKSB7DQogICAgICAgIHJldHVybiB0ZXh0UmFuZ2Uu
Y29tcGFyZUVuZFBvaW50cygiU3RhcnRUb0VuZCIsIHRleHRSYW5nZSkgPT0gMDsNCiAgICB9DQoN
CiAgICAvLyBHZXRzIHRoZSBib3VuZGFyeSBvZiBhIFRleHRSYW5nZSBleHByZXNzZWQgYXMgYSBu
b2RlIGFuZCBhbiBvZmZzZXQgd2l0aGluIHRoYXQgbm9kZS4gVGhpcyBmdW5jdGlvbiBzdGFydGVk
IG91dCBhcw0KICAgIC8vIGFuIGltcHJvdmVkIHZlcnNpb24gb2YgY29kZSBmb3VuZCBpbiBUaW0g
Q2FtZXJvbiBSeWFuJ3MgSUVSYW5nZSAoaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2llcmFuZ2Uv
KSBidXQgaGFzDQogICAgLy8gZ3Jvd24sIGZpeGluZyBwcm9ibGVtcyB3aXRoIGxpbmUgYnJlYWtz
IGluIHByZWZvcm1hdHRlZCB0ZXh0LCBhZGRpbmcgd29ya2Fyb3VuZCBmb3IgSUUgVGV4dFJhbmdl
IGJ1Z3MsIGhhbmRsaW5nDQogICAgLy8gZm9yIGlucHV0cyBhbmQgaW1hZ2VzLCBwbHVzIG9wdGlt
aXphdGlvbnMuDQogICAgZnVuY3Rpb24gZ2V0VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0ZXh0
UmFuZ2UsIHdob2xlUmFuZ2VDb250YWluZXJFbGVtZW50LCBpc1N0YXJ0LCBpc0NvbGxhcHNlZCkg
ew0KICAgICAgICB2YXIgd29ya2luZ1JhbmdlID0gdGV4dFJhbmdlLmR1cGxpY2F0ZSgpOw0KDQog
ICAgICAgIHdvcmtpbmdSYW5nZS5jb2xsYXBzZShpc1N0YXJ0KTsNCiAgICAgICAgdmFyIGNvbnRh
aW5lckVsZW1lbnQgPSB3b3JraW5nUmFuZ2UucGFyZW50RWxlbWVudCgpOw0KDQogICAgICAgIC8v
IFNvbWV0aW1lcyBjb2xsYXBzaW5nIGEgVGV4dFJhbmdlIHRoYXQncyBhdCB0aGUgc3RhcnQgb2Yg
YSB0ZXh0IG5vZGUgY2FuIG1vdmUgaXQgaW50byB0aGUgcHJldmlvdXMgbm9kZSwgc28NCiAgICAg
ICAgLy8gY2hlY2sgZm9yIHRoYXQNCiAgICAgICAgLy8gVE9ETzogRmluZCBvdXQgd2hlbi4gV29y
a2Fyb3VuZCBmb3Igd2hvbGVSYW5nZUNvbnRhaW5lckVsZW1lbnQgbWF5IGJyZWFrIHRoaXMNCiAg
ICAgICAgaWYgKCFkb20uaXNBbmNlc3Rvck9mKHdob2xlUmFuZ2VDb250YWluZXJFbGVtZW50LCBj
b250YWluZXJFbGVtZW50LCB0cnVlKSkgew0KICAgICAgICAgICAgY29udGFpbmVyRWxlbWVudCA9
IHdob2xlUmFuZ2VDb250YWluZXJFbGVtZW50Ow0KDQogICAgICAgIH0NCg0KDQoNCiAgICAgICAg
Ly8gRGVhbCB3aXRoIG5vZGVzIHRoYXQgY2Fubm90ICJjb250YWluIHJpY2ggSFRNTCBtYXJrdXAi
LiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyBmb3JtIGlucHV0cywgaW1hZ2VzIGFuZA0KICAgICAg
ICAvLyBzaW1pbGFyLiBTZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5
L2FhNzAzOTUwJTI4VlMuODUlMjkuYXNweA0KICAgICAgICBpZiAoIWNvbnRhaW5lckVsZW1lbnQu
Y2FuSGF2ZUhUTUwpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRG9tUG9zaXRpb24oY29udGFp
bmVyRWxlbWVudC5wYXJlbnROb2RlLCBkb20uZ2V0Tm9kZUluZGV4KGNvbnRhaW5lckVsZW1lbnQp
KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciB3b3JraW5nTm9kZSA9IGRvbS5nZXREb2N1bWVu
dChjb250YWluZXJFbGVtZW50KS5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQogICAgICAgIHZhciBj
b21wYXJpc29uLCB3b3JraW5nQ29tcGFyaXNvblR5cGUgPSBpc1N0YXJ0ID8gIlN0YXJ0VG9TdGFy
dCIgOiAiU3RhcnRUb0VuZCI7DQogICAgICAgIHZhciBwcmV2aW91c05vZGUsIG5leHROb2RlLCBi
b3VuZGFyeVBvc2l0aW9uLCBib3VuZGFyeU5vZGU7DQoNCiAgICAgICAgLy8gTW92ZSB0aGUgd29y
a2luZyByYW5nZSB0aHJvdWdoIHRoZSBjb250YWluZXIncyBjaGlsZHJlbiwgc3RhcnRpbmcgYXQg
dGhlIGVuZCBhbmQgd29ya2luZyBiYWNrd2FyZHMsIHVudGlsIHRoZQ0KICAgICAgICAvLyB3b3Jr
aW5nIHJhbmdlIHJlYWNoZXMgb3IgZ29lcyBwYXN0IHRoZSBib3VuZGFyeSB3ZSdyZSBpbnRlcmVz
dGVkIGluDQogICAgICAgIGRvIHsNCiAgICAgICAgICAgIGNvbnRhaW5lckVsZW1lbnQuaW5zZXJ0
QmVmb3JlKHdvcmtpbmdOb2RlLCB3b3JraW5nTm9kZS5wcmV2aW91c1NpYmxpbmcpOw0KICAgICAg
ICAgICAgd29ya2luZ1JhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KHdvcmtpbmdOb2RlKTsNCiAgICAg
ICAgfSB3aGlsZSAoIChjb21wYXJpc29uID0gd29ya2luZ1JhbmdlLmNvbXBhcmVFbmRQb2ludHMo
d29ya2luZ0NvbXBhcmlzb25UeXBlLCB0ZXh0UmFuZ2UpKSA+IDAgJiYNCiAgICAgICAgICAgICAg
ICB3b3JraW5nTm9kZS5wcmV2aW91c1NpYmxpbmcpOw0KDQogICAgICAgIC8vIFdlJ3ZlIG5vdyBy
ZWFjaGVkIG9yIGdvbmUgcGFzdCB0aGUgYm91bmRhcnkgb2YgdGhlIHRleHQgcmFuZ2Ugd2UncmUg
aW50ZXJlc3RlZCBpbg0KICAgICAgICAvLyBzbyBoYXZlIGlkZW50aWZpZWQgdGhlIG5vZGUgd2Ug
d2FudA0KICAgICAgICBib3VuZGFyeU5vZGUgPSB3b3JraW5nTm9kZS5uZXh0U2libGluZzsNCg0K
ICAgICAgICBpZiAoY29tcGFyaXNvbiA9PSAtMSAmJiBib3VuZGFyeU5vZGUgJiYgZG9tLmlzQ2hh
cmFjdGVyRGF0YU5vZGUoYm91bmRhcnlOb2RlKSkgew0KICAgICAgICAgICAgLy8gVGhpcyBpcyBh
IGNoYXJhY3RlciBkYXRhIG5vZGUgKHRleHQsIGNvbW1lbnQsIGNkYXRhKS4gVGhlIHdvcmtpbmcg
cmFuZ2UgaXMgY29sbGFwc2VkIGF0IHRoZSBzdGFydCBvZiB0aGUNCiAgICAgICAgICAgIC8vIG5v
ZGUgY29udGFpbmluZyB0aGUgdGV4dCByYW5nZSdzIGJvdW5kYXJ5LCBzbyB3ZSBtb3ZlIHRoZSBl
bmQgb2YgdGhlIHdvcmtpbmcgcmFuZ2UgdG8gdGhlIGJvdW5kYXJ5IHBvaW50DQogICAgICAgICAg
ICAvLyBhbmQgbWVhc3VyZSB0aGUgbGVuZ3RoIG9mIGl0cyB0ZXh0IHRvIGdldCB0aGUgYm91bmRh
cnkncyBvZmZzZXQgd2l0aGluIHRoZSBub2RlLg0KICAgICAgICAgICAgd29ya2luZ1JhbmdlLnNl
dEVuZFBvaW50KGlzU3RhcnQgPyAiRW5kVG9TdGFydCIgOiAiRW5kVG9FbmQiLCB0ZXh0UmFuZ2Up
Ow0KDQoNCiAgICAgICAgICAgIHZhciBvZmZzZXQ7DQoNCiAgICAgICAgICAgIGlmICgvW1xyXG5d
Ly50ZXN0KGJvdW5kYXJ5Tm9kZS5kYXRhKSkgew0KICAgICAgICAgICAgICAgIC8qDQogICAgICAg
ICAgICAgICAgRm9yIHRoZSBwYXJ0aWN1bGFyIGNhc2Ugb2YgYSBib3VuZGFyeSB3aXRoaW4gYSB0
ZXh0IG5vZGUgY29udGFpbmluZyBsaW5lIGJyZWFrcyAod2l0aGluIGEgPHByZT4gZWxlbWVudCwN
CiAgICAgICAgICAgICAgICBmb3IgZXhhbXBsZSksIHdlIG5lZWQgYSBzbGlnaHRseSBjb21wbGlj
YXRlZCBhcHByb2FjaCB0byBnZXQgdGhlIGJvdW5kYXJ5J3Mgb2Zmc2V0IGluIElFLiBUaGUgZmFj
dHM6DQoNCiAgICAgICAgICAgICAgICAtIEVhY2ggbGluZSBicmVhayBpcyByZXByZXNlbnRlZCBh
cyBcciBpbiB0aGUgdGV4dCBub2RlJ3MgZGF0YS9ub2RlVmFsdWUgcHJvcGVydGllcw0KICAgICAg
ICAgICAgICAgIC0gRWFjaCBsaW5lIGJyZWFrIGlzIHJlcHJlc2VudGVkIGFzIFxyXG4gaW4gdGhl
IFRleHRSYW5nZSdzICd0ZXh0JyBwcm9wZXJ0eQ0KICAgICAgICAgICAgICAgIC0gVGhlICd0ZXh0
JyBwcm9wZXJ0eSBvZiB0aGUgVGV4dFJhbmdlIGRvZXMgbm90IGNvbnRhaW4gdHJhaWxpbmcgbGlu
ZSBicmVha3MNCg0KICAgICAgICAgICAgICAgIFRvIGdldCByb3VuZCB0aGUgcHJvYmxlbSBwcmVz
ZW50ZWQgYnkgdGhlIGZpbmFsIGZhY3QgYWJvdmUsIHdlIGNhbiB1c2UgdGhlIGZhY3QgdGhhdCBU
ZXh0UmFuZ2Uncw0KICAgICAgICAgICAgICAgIG1vdmVTdGFydCgpIGFuZCBtb3ZlRW5kKCkgbWV0
aG9kcyByZXR1cm4gdGhlIGFjdHVhbCBudW1iZXIgb2YgY2hhcmFjdGVycyBtb3ZlZCwgd2hpY2gg
aXMgbm90IG5lY2Vzc2FyaWx5DQogICAgICAgICAgICAgICAgdGhlIHNhbWUgYXMgdGhlIG51bWJl
ciBvZiBjaGFyYWN0ZXJzIGl0IHdhcyBpbnN0cnVjdGVkIHRvIG1vdmUuIFRoZSBzaW1wbGVzdCBh
cHByb2FjaCBpcyB0byB1c2UgdGhpcyB0bw0KICAgICAgICAgICAgICAgIHN0b3JlIHRoZSBjaGFy
YWN0ZXJzIG1vdmVkIHdoZW4gbW92aW5nIGJvdGggdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHJh
bmdlIHRvIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQNCiAgICAgICAgICAgICAgICBib2R5IGFu
ZCBzdWJ0cmFjdGluZyB0aGUgc3RhcnQgb2Zmc2V0IGZyb20gdGhlIGVuZCBvZmZzZXQgKHRoZSAi
bW92ZS1uZWdhdGl2ZS1nYXppbGxpb24iIG1ldGhvZCkuDQogICAgICAgICAgICAgICAgSG93ZXZl
ciwgdGhpcyBpcyBleHRyZW1lbHkgc2xvdyB3aGVuIHRoZSBkb2N1bWVudCBpcyBsYXJnZSBhbmQg
dGhlIHJhbmdlIGlzIG5lYXIgdGhlIGVuZCBvZiBpdC4gQ2xlYXJseQ0KICAgICAgICAgICAgICAg
IGRvaW5nIHRoZSBtaXJyb3IgaW1hZ2UgKGkuZS4gbW92aW5nIHRoZSByYW5nZSBib3VuZGFyaWVz
IHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50KSBoYXMgdGhlIHNhbWUNCiAgICAgICAgICAgICAg
ICBwcm9ibGVtLg0KDQogICAgICAgICAgICAgICAgQW5vdGhlciBhcHByb2FjaCB0aGF0IHdvcmtz
IGlzIHRvIHVzZSBtb3ZlU3RhcnQoKSB0byBtb3ZlIHRoZSBzdGFydCBib3VuZGFyeSBvZiB0aGUg
cmFuZ2UgdXAgdG8gdGhlIGVuZA0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5IG9uZSBjaGFyYWN0
ZXIgYXQgYSB0aW1lIGFuZCBpbmNyZW1lbnRpbmcgYSBjb3VudGVyIHdpdGggdGhlIHZhbHVlIHJl
dHVybmVkIGJ5IHRoZSBtb3ZlU3RhcnQoKQ0KICAgICAgICAgICAgICAgIGNhbGwuIEhvd2V2ZXIs
IHRoZSBjaGVjayBmb3Igd2hldGhlciB0aGUgc3RhcnQgYm91bmRhcnkgaGFzIHJlYWNoZWQgdGhl
IGVuZCBib3VuZGFyeSBpcyBleHBlbnNpdmUsIHNvDQogICAgICAgICAgICAgICAgdGhpcyBtZXRo
b2QgaXMgc2xvdyAoYWx0aG91Z2ggdW5saWtlICJtb3ZlLW5lZ2F0aXZlLWdhemlsbGlvbiIgaXMg
bGFyZ2VseSB1bmFmZmVjdGVkIGJ5IHRoZSBsb2NhdGlvbiBvZg0KICAgICAgICAgICAgICAgIHRo
ZSByYW5nZSB3aXRoaW4gdGhlIGRvY3VtZW50KS4NCg0KICAgICAgICAgICAgICAgIFRoZSBtZXRo
b2QgYmVsb3cgaXMgYSBoeWJyaWQgb2YgdGhlIHR3byBtZXRob2RzIGFib3ZlLiBJdCB1c2VzIHRo
ZSBmYWN0IHRoYXQgYSBzdHJpbmcgY29udGFpbmluZyB0aGUNCiAgICAgICAgICAgICAgICBUZXh0
UmFuZ2UncyAndGV4dCcgcHJvcGVydHkgd2l0aCBlYWNoIFxyXG4gY29udmVydGVkIHRvIGEgc2lu
Z2xlIFxyIGNoYXJhY3RlciBjYW5ub3QgYmUgbG9uZ2VyIHRoYW4gdGhlDQogICAgICAgICAgICAg
ICAgdGV4dCBvZiB0aGUgVGV4dFJhbmdlLCBzbyB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIGlzIG1v
dmVkIHRoYXQgbGVuZ3RoIGluaXRpYWxseSBhbmQgdGhlbiBhIGNoYXJhY3RlciBhdA0KICAgICAg
ICAgICAgICAgIGEgdGltZSB0byBtYWtlIHVwIGZvciBhbnkgdHJhaWxpbmcgbGluZSBicmVha3Mg
bm90IGNvbnRhaW5lZCBpbiB0aGUgJ3RleHQnIHByb3BlcnR5LiBUaGlzIGhhcyBnb29kDQogICAg
ICAgICAgICAgICAgcGVyZm9ybWFuY2UgaW4gbW9zdCBzaXR1YXRpb25zIGNvbXBhcmVkIHRvIHRo
ZSBwcmV2aW91cyB0d28gbWV0aG9kcy4NCiAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAg
ICAgIHZhciB0ZW1wUmFuZ2UgPSB3b3JraW5nUmFuZ2UuZHVwbGljYXRlKCk7DQogICAgICAgICAg
ICAgICAgdmFyIHJhbmdlTGVuZ3RoID0gdGVtcFJhbmdlLnRleHQucmVwbGFjZSgvXHJcbi9nLCAi
XHIiKS5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICBvZmZzZXQgPSB0ZW1wUmFuZ2UubW92ZVN0
YXJ0KCJjaGFyYWN0ZXIiLCByYW5nZUxlbmd0aCk7DQogICAgICAgICAgICAgICAgd2hpbGUgKCAo
Y29tcGFyaXNvbiA9IHRlbXBSYW5nZS5jb21wYXJlRW5kUG9pbnRzKCJTdGFydFRvRW5kIiwgdGVt
cFJhbmdlKSkgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0Kys7DQogICAgICAg
ICAgICAgICAgICAgIHRlbXBSYW5nZS5tb3ZlU3RhcnQoImNoYXJhY3RlciIsIDEpOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgb2Zmc2V0
ID0gd29ya2luZ1JhbmdlLnRleHQubGVuZ3RoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
Ym91bmRhcnlQb3NpdGlvbiA9IG5ldyBEb21Qb3NpdGlvbihib3VuZGFyeU5vZGUsIG9mZnNldCk7
DQogICAgICAgIH0gZWxzZSB7DQoNCg0KICAgICAgICAgICAgLy8gSWYgdGhlIGJvdW5kYXJ5IGlt
bWVkaWF0ZWx5IGZvbGxvd3MgYSBjaGFyYWN0ZXIgZGF0YSBub2RlIGFuZCB0aGlzIGlzIHRoZSBl
bmQgYm91bmRhcnksIHdlIHNob3VsZCBmYXZvdXINCiAgICAgICAgICAgIC8vIGEgcG9zaXRpb24g
d2l0aGluIHRoYXQsIGFuZCBsaWtld2lzZSBmb3IgYSBzdGFydCBib3VuZGFyeSBwcmVjZWRpbmcg
YSBjaGFyYWN0ZXIgZGF0YSBub2RlDQogICAgICAgICAgICBwcmV2aW91c05vZGUgPSAoaXNDb2xs
YXBzZWQgfHwgIWlzU3RhcnQpICYmIHdvcmtpbmdOb2RlLnByZXZpb3VzU2libGluZzsNCiAgICAg
ICAgICAgIG5leHROb2RlID0gKGlzQ29sbGFwc2VkIHx8IGlzU3RhcnQpICYmIHdvcmtpbmdOb2Rl
Lm5leHRTaWJsaW5nOw0KDQoNCg0KICAgICAgICAgICAgaWYgKG5leHROb2RlICYmIGRvbS5pc0No
YXJhY3RlckRhdGFOb2RlKG5leHROb2RlKSkgew0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5UG9z
aXRpb24gPSBuZXcgRG9tUG9zaXRpb24obmV4dE5vZGUsIDApOw0KICAgICAgICAgICAgfSBlbHNl
IGlmIChwcmV2aW91c05vZGUgJiYgZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGUocHJldmlvdXNOb2Rl
KSkgew0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5UG9zaXRpb24gPSBuZXcgRG9tUG9zaXRpb24o
cHJldmlvdXNOb2RlLCBwcmV2aW91c05vZGUubGVuZ3RoKTsNCiAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgYm91bmRhcnlQb3NpdGlvbiA9IG5ldyBEb21Qb3NpdGlvbihjb250
YWluZXJFbGVtZW50LCBkb20uZ2V0Tm9kZUluZGV4KHdvcmtpbmdOb2RlKSk7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDbGVhbiB1cA0KICAgICAgICB3b3JraW5nTm9k
ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHdvcmtpbmdOb2RlKTsNCg0KICAgICAgICByZXR1cm4g
Ym91bmRhcnlQb3NpdGlvbjsNCiAgICB9DQoNCiAgICAvLyBSZXR1cm5zIGEgVGV4dFJhbmdlIHJl
cHJlc2VudGluZyB0aGUgYm91bmRhcnkgb2YgYSBUZXh0UmFuZ2UgZXhwcmVzc2VkIGFzIGEgbm9k
ZSBhbmQgYW4gb2Zmc2V0IHdpdGhpbiB0aGF0IG5vZGUuDQogICAgLy8gVGhpcyBmdW5jdGlvbiBz
dGFydGVkIG91dCBhcyBhbiBvcHRpbWl6ZWQgdmVyc2lvbiBvZiBjb2RlIGZvdW5kIGluIFRpbSBD
YW1lcm9uIFJ5YW4ncyBJRVJhbmdlDQogICAgLy8gKGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9p
ZXJhbmdlLykNCiAgICBmdW5jdGlvbiBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZShib3VuZGFyeVBv
c2l0aW9uLCBpc1N0YXJ0KSB7DQogICAgICAgIHZhciBib3VuZGFyeU5vZGUsIGJvdW5kYXJ5UGFy
ZW50LCBib3VuZGFyeU9mZnNldCA9IGJvdW5kYXJ5UG9zaXRpb24ub2Zmc2V0Ow0KICAgICAgICB2
YXIgZG9jID0gZG9tLmdldERvY3VtZW50KGJvdW5kYXJ5UG9zaXRpb24ubm9kZSk7DQogICAgICAg
IHZhciB3b3JraW5nTm9kZSwgY2hpbGROb2Rlcywgd29ya2luZ1JhbmdlID0gZG9jLmJvZHkuY3Jl
YXRlVGV4dFJhbmdlKCk7DQogICAgICAgIHZhciBub2RlSXNEYXRhTm9kZSA9IGRvbS5pc0NoYXJh
Y3RlckRhdGFOb2RlKGJvdW5kYXJ5UG9zaXRpb24ubm9kZSk7DQoNCiAgICAgICAgaWYgKG5vZGVJ
c0RhdGFOb2RlKSB7DQogICAgICAgICAgICBib3VuZGFyeU5vZGUgPSBib3VuZGFyeVBvc2l0aW9u
Lm5vZGU7DQogICAgICAgICAgICBib3VuZGFyeVBhcmVudCA9IGJvdW5kYXJ5Tm9kZS5wYXJlbnRO
b2RlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2hpbGROb2RlcyA9IGJvdW5kYXJ5
UG9zaXRpb24ubm9kZS5jaGlsZE5vZGVzOw0KICAgICAgICAgICAgYm91bmRhcnlOb2RlID0gKGJv
dW5kYXJ5T2Zmc2V0IDwgY2hpbGROb2Rlcy5sZW5ndGgpID8gY2hpbGROb2Rlc1tib3VuZGFyeU9m
ZnNldF0gOiBudWxsOw0KICAgICAgICAgICAgYm91bmRhcnlQYXJlbnQgPSBib3VuZGFyeVBvc2l0
aW9uLm5vZGU7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBQb3NpdGlvbiB0aGUgcmFuZ2UgaW1t
ZWRpYXRlbHkgYmVmb3JlIHRoZSBub2RlIGNvbnRhaW5pbmcgdGhlIGJvdW5kYXJ5DQogICAgICAg
IHdvcmtpbmdOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsNCg0KICAgICAgICAvLyBN
YWtpbmcgdGhlIHdvcmtpbmcgZWxlbWVudCBub24tZW1wdHkgZWxlbWVudCBwZXJzdWFkZXMgSUUg
dG8gY29uc2lkZXIgdGhlIFRleHRSYW5nZSBib3VuZGFyeSB0byBiZSB3aXRoaW4gdGhlDQogICAg
ICAgIC8vIGVsZW1lbnQgcmF0aGVyIHRoYW4gaW1tZWRpYXRlbHkgYmVmb3JlIG9yIGFmdGVyIGl0
LCB3aGljaCBpcyB3aGF0IHdlIHdhbnQNCiAgICAgICAgd29ya2luZ05vZGUuaW5uZXJIVE1MID0g
IiYjZmVmZjsiOw0KDQogICAgICAgIC8vIGluc2VydEJlZm9yZSBpcyBzdXBwb3NlZCB0byB3b3Jr
IGxpa2UgYXBwZW5kQ2hpbGQgaWYgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgbnVsbC4gSG93ZXZl
ciwgYSBidWcgcmVwb3J0DQogICAgICAgIC8vIGZvciBJRVJhbmdlIHN1Z2dlc3RzIHRoYXQgaXQg
Y2FuIGNyYXNoIHRoZSBicm93c2VyOiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvaWVyYW5nZS9p
c3N1ZXMvZGV0YWlsP2lkPTEyDQogICAgICAgIGlmIChib3VuZGFyeU5vZGUpIHsNCiAgICAgICAg
ICAgIGJvdW5kYXJ5UGFyZW50Lmluc2VydEJlZm9yZSh3b3JraW5nTm9kZSwgYm91bmRhcnlOb2Rl
KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJvdW5kYXJ5UGFyZW50LmFwcGVuZENo
aWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHdvcmtpbmdSYW5nZS5tb3Zl
VG9FbGVtZW50VGV4dCh3b3JraW5nTm9kZSk7DQogICAgICAgIHdvcmtpbmdSYW5nZS5jb2xsYXBz
ZSghaXNTdGFydCk7DQoNCiAgICAgICAgLy8gQ2xlYW4gdXANCiAgICAgICAgYm91bmRhcnlQYXJl
bnQucmVtb3ZlQ2hpbGQod29ya2luZ05vZGUpOw0KDQogICAgICAgIC8vIE1vdmUgdGhlIHdvcmtp
bmcgcmFuZ2UgdG8gdGhlIHRleHQgb2Zmc2V0LCBpZiByZXF1aXJlZA0KICAgICAgICBpZiAobm9k
ZUlzRGF0YU5vZGUpIHsNCiAgICAgICAgICAgIHdvcmtpbmdSYW5nZVtpc1N0YXJ0ID8gIm1vdmVT
dGFydCIgOiAibW92ZUVuZCJdKCJjaGFyYWN0ZXIiLCBib3VuZGFyeU9mZnNldCk7DQogICAgICAg
IH0NCg0KICAgICAgICByZXR1cm4gd29ya2luZ1JhbmdlOw0KICAgIH0NCg0KICAgIC8qLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAg
ICBpZiAoYXBpLmZlYXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSAmJiAoIWFwaS5mZWF0dXJlcy5p
bXBsZW1lbnRzVGV4dFJhbmdlIHx8ICFhcGkuY29uZmlnLnByZWZlclRleHRSYW5nZSkpIHsNCiAg
ICAgICAgLy8gVGhpcyBpcyBhIHdyYXBwZXIgYXJvdW5kIHRoZSBicm93c2VyJ3MgbmF0aXZlIERP
TSBSYW5nZS4gSXQgaGFzIHR3byBhaW1zOg0KICAgICAgICAvLyAtIFByb3ZpZGUgd29ya2Fyb3Vu
ZHMgZm9yIHNwZWNpZmljIGJyb3dzZXIgYnVncw0KICAgICAgICAvLyAtIHByb3ZpZGUgY29udmVu
aWVudCBleHRlbnNpb25zLCB3aGljaCBhcmUgaW5oZXJpdGVkIGZyb20gUmFuZ3kncyBEb21SYW5n
ZQ0KDQogICAgICAgIChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciByYW5nZVByb3RvOw0K
ICAgICAgICAgICAgdmFyIHJhbmdlUHJvcGVydGllcyA9IERvbVJhbmdlLnJhbmdlUHJvcGVydGll
czsNCiAgICAgICAgICAgIHZhciBjYW5TZXRSYW5nZVN0YXJ0QWZ0ZXJFbmQ7DQoNCiAgICAgICAg
ICAgIGZ1bmN0aW9uIHVwZGF0ZVJhbmdlUHJvcGVydGllcyhyYW5nZSkgew0KICAgICAgICAgICAg
ICAgIHZhciBpID0gcmFuZ2VQcm9wZXJ0aWVzLmxlbmd0aCwgcHJvcDsNCiAgICAgICAgICAgICAg
ICB3aGlsZSAoaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIHByb3AgPSByYW5nZVByb3BlcnRp
ZXNbaV07DQogICAgICAgICAgICAgICAgICAgIHJhbmdlW3Byb3BdID0gcmFuZ2UubmF0aXZlUmFu
Z2VbcHJvcF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAg
ICBmdW5jdGlvbiB1cGRhdGVOYXRpdmVSYW5nZShyYW5nZSwgc3RhcnRDb250YWluZXIsIHN0YXJ0
T2Zmc2V0LCBlbmRDb250YWluZXIsZW5kT2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgdmFyIHN0
YXJ0TW92ZWQgPSAocmFuZ2Uuc3RhcnRDb250YWluZXIgIT09IHN0YXJ0Q29udGFpbmVyIHx8IHJh
bmdlLnN0YXJ0T2Zmc2V0ICE9IHN0YXJ0T2Zmc2V0KTsNCiAgICAgICAgICAgICAgICB2YXIgZW5k
TW92ZWQgPSAocmFuZ2UuZW5kQ29udGFpbmVyICE9PSBlbmRDb250YWluZXIgfHwgcmFuZ2UuZW5k
T2Zmc2V0ICE9IGVuZE9mZnNldCk7DQoNCiAgICAgICAgICAgICAgICAvLyBBbHdheXMgc2V0IGJv
dGggYm91bmRhcmllcyBmb3IgdGhlIGJlbmVmaXQgb2YgSUU5IChzZWUgaXNzdWUgMzUpDQogICAg
ICAgICAgICAgICAgaWYgKHN0YXJ0TW92ZWQgfHwgZW5kTW92ZWQpIHsNCiAgICAgICAgICAgICAg
ICAgICAgcmFuZ2Uuc2V0RW5kKGVuZENvbnRhaW5lciwgZW5kT2Zmc2V0KTsNCiAgICAgICAgICAg
ICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQoc3RhcnRDb250YWluZXIsIHN0YXJ0T2Zmc2V0KTsNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZ1bmN0aW9uIGRl
dGFjaChyYW5nZSkgew0KICAgICAgICAgICAgICAgIHJhbmdlLm5hdGl2ZVJhbmdlLmRldGFjaCgp
Ow0KICAgICAgICAgICAgICAgIHJhbmdlLmRldGFjaGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAg
ICB2YXIgaSA9IHJhbmdlUHJvcGVydGllcy5sZW5ndGgsIHByb3A7DQogICAgICAgICAgICAgICAg
d2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAgICAgICBwcm9wID0gcmFuZ2VQcm9wZXJ0aWVz
W2ldOw0KICAgICAgICAgICAgICAgICAgICByYW5nZVtwcm9wXSA9IG51bGw7DQogICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgY3JlYXRlQmVmb3JlQWZ0
ZXJOb2RlU2V0dGVyOw0KDQogICAgICAgICAgICBXcmFwcGVkUmFuZ2UgPSBmdW5jdGlvbihyYW5n
ZSkgew0KICAgICAgICAgICAgICAgIGlmICghcmFuZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAg
dGhyb3cgbmV3IEVycm9yKCJSYW5nZSBtdXN0IGJlIHNwZWNpZmllZCIpOw0KICAgICAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlID0gcmFuZ2U7DQogICAgICAg
ICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgfTsNCg0K
ICAgICAgICAgICAgRG9tUmFuZ2UuY3JlYXRlUHJvdG90eXBlUmFuZ2UoV3JhcHBlZFJhbmdlLCB1
cGRhdGVOYXRpdmVSYW5nZSwgZGV0YWNoKTsNCg0KICAgICAgICAgICAgcmFuZ2VQcm90byA9IFdy
YXBwZWRSYW5nZS5wcm90b3R5cGU7DQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8uc2VsZWN0Tm9k
ZSA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNl
bGVjdE5vZGUobm9kZSk7DQogICAgICAgICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0aWVzKHRo
aXMpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgcmFuZ2VQcm90by5kZWxldGVDb250
ZW50cyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2UuZGVs
ZXRlQ29udGVudHMoKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhp
cyk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICByYW5nZVByb3RvLmV4dHJhY3RDb250
ZW50cyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciBmcmFnID0gdGhpcy5uYXRp
dmVSYW5nZS5leHRyYWN0Q29udGVudHMoKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVBy
b3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZyYWc7DQogICAgICAgICAg
ICB9Ow0KDQogICAgICAgICAgICByYW5nZVByb3RvLmNsb25lQ29udGVudHMgPSBmdW5jdGlvbigp
IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jbG9uZUNvbnRlbnRz
KCk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBUT0RPOiBVbnRpbCBJIGNhbiBm
aW5kIGEgd2F5IHRvIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlciB0aGUgRmlyZWZveCBidWcgKGFw
cGFyZW50bHkgbG9uZy1zdGFuZGluZywgc3RpbGwNCiAgICAgICAgICAgIC8vIHByZXNlbnQgaW4g
My42LjgpIHRoYXQgdGhyb3dzICJJbmRleCBvciBzaXplIGlzIG5lZ2F0aXZlIG9yIGdyZWF0ZXIg
dGhhbiB0aGUgYWxsb3dlZCBhbW91bnQiIGZvcg0KICAgICAgICAgICAgLy8gaW5zZXJ0Tm9kZSBp
biBzb21lIGNpcmN1bXN0YW5jZXMsIGFsbCBicm93c2VycyB3aWxsIGhhdmUgdG8gdXNlIHRoZSBS
YW5neSdzIG93biBpbXBsZW1lbnRhdGlvbiBvZg0KICAgICAgICAgICAgLy8gaW5zZXJ0Tm9kZSwg
d2hpY2ggd29ya3MgYnV0IGlzIGFsbW9zdCBjZXJ0YWlubHkgc2xvd2VyIHRoYW4gdGhlIG5hdGl2
ZSBpbXBsZW1lbnRhdGlvbi4NCi8qDQogICAgICAgICAgICByYW5nZVByb3RvLmluc2VydE5vZGUg
PSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5pbnNl
cnROb2RlKG5vZGUpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlz
KTsNCiAgICAgICAgICAgIH07DQoqLw0KDQogICAgICAgICAgICByYW5nZVByb3RvLnN1cnJvdW5k
Q29udGVudHMgPSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVS
YW5nZS5zdXJyb3VuZENvbnRlbnRzKG5vZGUpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdl
UHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHJhbmdlUHJv
dG8uY29sbGFwc2UgPSBmdW5jdGlvbihpc1N0YXJ0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5u
YXRpdmVSYW5nZS5jb2xsYXBzZShpc1N0YXJ0KTsNCiAgICAgICAgICAgICAgICB1cGRhdGVSYW5n
ZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICByYW5nZVBy
b3RvLmNsb25lUmFuZ2UgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3
IFdyYXBwZWRSYW5nZSh0aGlzLm5hdGl2ZVJhbmdlLmNsb25lUmFuZ2UoKSk7DQogICAgICAgICAg
ICB9Ow0KDQogICAgICAgICAgICByYW5nZVByb3RvLnJlZnJlc2ggPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9
Ow0KDQogICAgICAgICAgICByYW5nZVByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7DQogICAg
ICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UudG9TdHJpbmcoKTsNCiAgICAgICAg
ICAgIH07DQoNCiAgICAgICAgICAgIC8vIENyZWF0ZSB0ZXN0IHJhbmdlIGFuZCBub2RlIGZvciBm
ZWF0dXJlIGRldGVjdGlvbg0KDQogICAgICAgICAgICB2YXIgdGVzdFRleHROb2RlID0gZG9jdW1l
bnQuY3JlYXRlVGV4dE5vZGUoInRlc3QiKTsNCiAgICAgICAgICAgIGRvbS5nZXRCb2R5KGRvY3Vt
ZW50KS5hcHBlbmRDaGlsZCh0ZXN0VGV4dE5vZGUpOw0KICAgICAgICAgICAgdmFyIHJhbmdlID0g
ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsNCg0KICAgICAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICAgICAgICAgIC8vIFRlc3Qg
Zm9yIEZpcmVmb3ggMiBidWcgdGhhdCBwcmV2ZW50cyBtb3ZpbmcgdGhlIHN0YXJ0IG9mIGEgUmFu
Z2UgdG8gYSBwb2ludCBhZnRlciBpdHMgY3VycmVudCBlbmQgYW5kDQogICAgICAgICAgICAvLyBj
b3JyZWN0IGZvciBpdA0KDQogICAgICAgICAgICByYW5nZS5zZXRTdGFydCh0ZXN0VGV4dE5vZGUs
IDApOw0KICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kKHRlc3RUZXh0Tm9kZSwgMCk7DQoNCiAgICAg
ICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGVzdFRleHROb2Rl
LCAxKTsNCiAgICAgICAgICAgICAgICBjYW5TZXRSYW5nZVN0YXJ0QWZ0ZXJFbmQgPSB0cnVlOw0K
DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRTdGFydCA9IGZ1bmN0aW9uKG5vZGUsIG9m
ZnNldCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KG5v
ZGUsIG9mZnNldCk7DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0
aGlzKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5z
ZXRFbmQgPSBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhp
cy5uYXRpdmVSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAg
dXBkYXRlUmFuZ2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAg
ICAgICAgICAgICBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIgPSBmdW5jdGlvbihuYW1lKSB7
DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAg
ICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlW25hbWVdKG5vZGUpOw0KICAgICAgICAgICAg
ICAgICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgICAg
ICAgICB9Ow0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHsN
Cg0KDQogICAgICAgICAgICAgICAgY2FuU2V0UmFuZ2VTdGFydEFmdGVyRW5kID0gZmFsc2U7DQoN
CiAgICAgICAgICAgICAgICByYW5nZVByb3RvLnNldFN0YXJ0ID0gZnVuY3Rpb24obm9kZSwgb2Zm
c2V0KSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICB0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7DQogICAgICAgICAgICAg
ICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2
ZVJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhp
cy5uYXRpdmVSYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAg
ICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRFbmQgPSBm
dW5jdGlvbihub2RlLCBvZmZzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2V0RW5kKG5vZGUsIG9mZnNldCk7
DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICAgICAgICAg
ICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7DQogICAgICAgICAg
ICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQpOw0KICAg
ICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVy
dGllcyh0aGlzKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgY3JlYXRl
QmVmb3JlQWZ0ZXJOb2RlU2V0dGVyID0gZnVuY3Rpb24obmFtZSwgb3Bwb3NpdGVOYW1lKSB7DQog
ICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZl
UmFuZ2VbbmFtZV0obm9kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkg
ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Vbb3Bwb3NpdGVO
YW1lXShub2RlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdl
W25hbWVdKG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgICAgICAg
ICB9Ow0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJh
bmdlUHJvdG8uc2V0U3RhcnRCZWZvcmUgPSBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIoInNl
dFN0YXJ0QmVmb3JlIiwgInNldEVuZEJlZm9yZSIpOw0KICAgICAgICAgICAgcmFuZ2VQcm90by5z
ZXRTdGFydEFmdGVyID0gY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKCJzZXRTdGFydEFmdGVy
IiwgInNldEVuZEFmdGVyIik7DQogICAgICAgICAgICByYW5nZVByb3RvLnNldEVuZEJlZm9yZSA9
IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlcigic2V0RW5kQmVmb3JlIiwgInNldFN0YXJ0QmVm
b3JlIik7DQogICAgICAgICAgICByYW5nZVByb3RvLnNldEVuZEFmdGVyID0gY3JlYXRlQmVmb3Jl
QWZ0ZXJOb2RlU2V0dGVyKCJzZXRFbmRBZnRlciIsICJzZXRTdGFydEFmdGVyIik7DQoNCiAgICAg
ICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0q
Lw0KDQogICAgICAgICAgICAvLyBUZXN0IGZvciBhbmQgY29ycmVjdCBGaXJlZm94IDIgYmVoYXZp
b3VyIHdpdGggc2VsZWN0Tm9kZUNvbnRlbnRzIG9uIHRleHQgbm9kZXM6IGl0IGNvbGxhcHNlcyB0
aGUgcmFuZ2UgdG8NCiAgICAgICAgICAgIC8vIHRoZSAwdGggY2hhcmFjdGVyIG9mIHRoZSB0ZXh0
IG5vZGUNCiAgICAgICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0ZXN0VGV4dE5vZGUp
Ow0KICAgICAgICAgICAgaWYgKHJhbmdlLnN0YXJ0Q29udGFpbmVyID09IHRlc3RUZXh0Tm9kZSAm
JiByYW5nZS5lbmRDb250YWluZXIgPT0gdGVzdFRleHROb2RlICYmDQogICAgICAgICAgICAgICAg
ICAgIHJhbmdlLnN0YXJ0T2Zmc2V0ID09IDAgJiYgcmFuZ2UuZW5kT2Zmc2V0ID09IHRlc3RUZXh0
Tm9kZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICByYW5nZVByb3RvLnNlbGVjdE5vZGVDb250
ZW50cyA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVS
YW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7DQogICAgICAgICAgICAgICAgICAgIHVwZGF0
ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAg
fSBlbHNlIHsNCiAgICAgICAgICAgICAgICByYW5nZVByb3RvLnNlbGVjdE5vZGVDb250ZW50cyA9
IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGFydChub2Rl
LCAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbmQobm9kZSwgRG9tUmFuZ2UuZ2V0
RW5kT2Zmc2V0KG5vZGUpKTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQog
ICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tKi8NCg0KICAgICAgICAgICAgLy8gVGVzdCBmb3IgV2ViS2l0IGJ1ZyB0aGF0IGhhcyB0aGUg
YmVhaHZpb3VyIG9mIGNvbXBhcmVCb3VuZGFyeVBvaW50cyByb3VuZCB0aGUgd3Jvbmcgd2F5IGZv
ciBjb25zdGFudHMNCiAgICAgICAgICAgIC8vIFNUQVJUX1RPX0VORCBhbmQgRU5EX1RPX1NUQVJU
OiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjA3MzgNCg0KICAgICAg
ICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRlc3RUZXh0Tm9kZSk7DQogICAgICAgICAg
ICByYW5nZS5zZXRFbmQodGVzdFRleHROb2RlLCAzKTsNCg0KICAgICAgICAgICAgdmFyIHJhbmdl
MiA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7DQogICAgICAgICAgICByYW5nZTIuc2VsZWN0Tm9k
ZUNvbnRlbnRzKHRlc3RUZXh0Tm9kZSk7DQogICAgICAgICAgICByYW5nZTIuc2V0RW5kKHRlc3RU
ZXh0Tm9kZSwgNCk7DQogICAgICAgICAgICByYW5nZTIuc2V0U3RhcnQodGVzdFRleHROb2RlLCAy
KTsNCg0KICAgICAgICAgICAgaWYgKHJhbmdlLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhyYW5nZS5T
VEFSVF9UT19FTkQsIHJhbmdlMikgPT0gLTEgJg0KICAgICAgICAgICAgICAgICAgICByYW5nZS5j
b21wYXJlQm91bmRhcnlQb2ludHMocmFuZ2UuRU5EX1RPX1NUQVJULCByYW5nZTIpID09IDEpIHsN
CiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSB3cm9uZyB3YXkgcm91bmQsIHNvIGNvcnJl
Y3QgZm9yIGl0DQoNCg0KICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uY29tcGFyZUJvdW5kYXJ5
UG9pbnRzID0gZnVuY3Rpb24odHlwZSwgcmFuZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcmFu
Z2UgPSByYW5nZS5uYXRpdmVSYW5nZSB8fCByYW5nZTsNCiAgICAgICAgICAgICAgICAgICAgaWYg
KHR5cGUgPT0gcmFuZ2UuU1RBUlRfVE9fRU5EKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0
eXBlID0gcmFuZ2UuRU5EX1RPX1NUQVJUOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYg
KHR5cGUgPT0gcmFuZ2UuRU5EX1RPX1NUQVJUKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0
eXBlID0gcmFuZ2UuU1RBUlRfVE9fRU5EOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hdGl2ZVJhbmdlLmNvbXBhcmVCb3VuZGFyeVBvaW50
cyh0eXBlLCByYW5nZSk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5jb21wYXJlQm91bmRhcnlQb2ludHMgPSBmdW5j
dGlvbih0eXBlLCByYW5nZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRp
dmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHModHlwZSwgcmFuZ2UubmF0aXZlUmFuZ2UgfHwg
cmFuZ2UpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAg
IC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQog
ICAgICAgICAgICAvLyBUZXN0IGZvciBleGlzdGVuY2Ugb2YgY3JlYXRlQ29udGV4dHVhbEZyYWdt
ZW50IGFuZCBkZWxlZ2F0ZSB0byBpdCBpZiBpdCBleGlzdHMNCiAgICAgICAgICAgIGlmIChhcGku
dXRpbC5pc0hvc3RNZXRob2QocmFuZ2UsICJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiKSkgew0K
ICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50ID0gZnVu
Y3Rpb24oZnJhZ21lbnRTdHIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0
aXZlUmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGZyYWdtZW50U3RyKTsNCiAgICAgICAg
ICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gQ2xl
YW4gdXANCiAgICAgICAgICAgIGRvbS5nZXRCb2R5KGRvY3VtZW50KS5yZW1vdmVDaGlsZCh0ZXN0
VGV4dE5vZGUpOw0KICAgICAgICAgICAgcmFuZ2UuZGV0YWNoKCk7DQogICAgICAgICAgICByYW5n
ZTIuZGV0YWNoKCk7DQogICAgICAgIH0pKCk7DQoNCiAgICAgICAgYXBpLmNyZWF0ZU5hdGl2ZVJh
bmdlID0gZnVuY3Rpb24oZG9jKSB7DQogICAgICAgICAgICBkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7
DQogICAgICAgICAgICByZXR1cm4gZG9jLmNyZWF0ZVJhbmdlKCk7DQogICAgICAgIH07DQogICAg
fSBlbHNlIGlmIChhcGkuZmVhdHVyZXMuaW1wbGVtZW50c1RleHRSYW5nZSkgew0KICAgICAgICAv
LyBUaGlzIGlzIGEgd3JhcHBlciBhcm91bmQgYSBUZXh0UmFuZ2UsIHByb3ZpZGluZyBmdWxsIERP
TSBSYW5nZSBmdW5jdGlvbmFsaXR5IHVzaW5nIHJhbmd5J3MgRG9tUmFuZ2UgYXMgYQ0KICAgICAg
ICAvLyBwcm90b3R5cGUNCg0KICAgICAgICBXcmFwcGVkUmFuZ2UgPSBmdW5jdGlvbih0ZXh0UmFu
Z2UpIHsNCiAgICAgICAgICAgIHRoaXMudGV4dFJhbmdlID0gdGV4dFJhbmdlOw0KICAgICAgICAg
ICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgV3JhcHBlZFJhbmdlLnBy
b3RvdHlwZSA9IG5ldyBEb21SYW5nZShkb2N1bWVudCk7DQoNCiAgICAgICAgV3JhcHBlZFJhbmdl
LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgc3RhcnQs
IGVuZDsNCg0KICAgICAgICAgICAgLy8gVGV4dFJhbmdlJ3MgcGFyZW50RWxlbWVudCgpIG1ldGhv
ZCBjYW5ub3QgYmUgdHJ1c3RlZC4gZ2V0VGV4dFJhbmdlQ29udGFpbmVyRWxlbWVudCgpIHdvcmtz
IGFyb3VuZCB0aGF0Lg0KICAgICAgICAgICAgdmFyIHJhbmdlQ29udGFpbmVyRWxlbWVudCA9IGdl
dFRleHRSYW5nZUNvbnRhaW5lckVsZW1lbnQodGhpcy50ZXh0UmFuZ2UpOw0KDQogICAgICAgICAg
ICBpZiAodGV4dFJhbmdlSXNDb2xsYXBzZWQodGhpcy50ZXh0UmFuZ2UpKSB7DQogICAgICAgICAg
ICAgICAgZW5kID0gc3RhcnQgPSBnZXRUZXh0UmFuZ2VCb3VuZGFyeVBvc2l0aW9uKHRoaXMudGV4
dFJhbmdlLCByYW5nZUNvbnRhaW5lckVsZW1lbnQsIHRydWUsIHRydWUpOw0KICAgICAgICAgICAg
fSBlbHNlIHsNCg0KICAgICAgICAgICAgICAgIHN0YXJ0ID0gZ2V0VGV4dFJhbmdlQm91bmRhcnlQ
b3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJFbGVtZW50LCB0cnVlLCBmYWxz
ZSk7DQogICAgICAgICAgICAgICAgZW5kID0gZ2V0VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0
aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJFbGVtZW50LCBmYWxzZSwgZmFsc2UpOw0KICAg
ICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnNldFN0YXJ0KHN0YXJ0Lm5vZGUsIHN0YXJ0
Lm9mZnNldCk7DQogICAgICAgICAgICB0aGlzLnNldEVuZChlbmQubm9kZSwgZW5kLm9mZnNldCk7
DQogICAgICAgIH07DQoNCiAgICAgICAgRG9tUmFuZ2UuY29weUNvbXBhcmlzb25Db25zdGFudHMo
V3JhcHBlZFJhbmdlKTsNCg0KICAgICAgICAvLyBBZGQgV3JhcHBlZFJhbmdlIGFzIHRoZSBSYW5n
ZSBwcm9wZXJ0eSBvZiB0aGUgZ2xvYmFsIG9iamVjdCB0byBhbGxvdyBleHByZXNzaW9uIGxpa2Ug
UmFuZ2UuRU5EX1RPX0VORCB0byB3b3JrDQogICAgICAgIHZhciBnbG9iYWxPYmogPSAoZnVuY3Rp
b24oKSB7IHJldHVybiB0aGlzOyB9KSgpOw0KICAgICAgICBpZiAodHlwZW9mIGdsb2JhbE9iai5S
YW5nZSA9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgZ2xvYmFsT2JqLlJhbmdlID0gV3Jh
cHBlZFJhbmdlOw0KICAgICAgICB9DQoNCiAgICAgICAgYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlID0g
ZnVuY3Rpb24oZG9jKSB7DQogICAgICAgICAgICBkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7DQogICAg
ICAgICAgICByZXR1cm4gZG9jLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7DQogICAgICAgIH07DQog
ICAgfQ0KDQogICAgaWYgKGFwaS5mZWF0dXJlcy5pbXBsZW1lbnRzVGV4dFJhbmdlKSB7DQogICAg
ICAgIFdyYXBwZWRSYW5nZS5yYW5nZVRvVGV4dFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHsNCiAg
ICAgICAgICAgIGlmIChyYW5nZS5jb2xsYXBzZWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgdHIg
PSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZShuZXcgRG9tUG9zaXRpb24ocmFuZ2Uuc3RhcnRDb250
YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KSwgdHJ1ZSk7DQoNCg0KDQogICAgICAgICAgICAgICAg
cmV0dXJuIHRyOw0KDQogICAgICAgICAgICAgICAgLy9yZXR1cm4gY3JlYXRlQm91bmRhcnlUZXh0
UmFuZ2UobmV3IERvbVBvc2l0aW9uKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9m
ZnNldCksIHRydWUpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIg
c3RhcnRSYW5nZSA9IGNyZWF0ZUJvdW5kYXJ5VGV4dFJhbmdlKG5ldyBEb21Qb3NpdGlvbihyYW5n
ZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQpLCB0cnVlKTsNCiAgICAgICAgICAg
ICAgICB2YXIgZW5kUmFuZ2UgPSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZShuZXcgRG9tUG9zaXRp
b24ocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQpLCBmYWxzZSk7DQogICAgICAg
ICAgICAgICAgdmFyIHRleHRSYW5nZSA9IGRvbS5nZXREb2N1bWVudChyYW5nZS5zdGFydENvbnRh
aW5lcikuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTsNCiAgICAgICAgICAgICAgICB0ZXh0UmFuZ2Uu
c2V0RW5kUG9pbnQoIlN0YXJ0VG9TdGFydCIsIHN0YXJ0UmFuZ2UpOw0KICAgICAgICAgICAgICAg
IHRleHRSYW5nZS5zZXRFbmRQb2ludCgiRW5kVG9FbmQiLCBlbmRSYW5nZSk7DQogICAgICAgICAg
ICAgICAgcmV0dXJuIHRleHRSYW5nZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9
DQoNCiAgICBXcmFwcGVkUmFuZ2UucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgcmV0dXJuICJXcmFwcGVkUmFuZ2UiOw0KICAgIH07DQoNCiAgICBhcGkuV3JhcHBlZFJh
bmdlID0gV3JhcHBlZFJhbmdlOw0KDQogICAgYXBpLmNyZWF0ZVJhbmdlID0gZnVuY3Rpb24oZG9j
KSB7DQogICAgICAgIGRvYyA9IGRvYyB8fCBkb2N1bWVudDsNCiAgICAgICAgcmV0dXJuIG5ldyBX
cmFwcGVkUmFuZ2UoYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvYykpOw0KICAgIH07DQoNCiAgICBh
cGkuY3JlYXRlUmFuZ3lSYW5nZSA9IGZ1bmN0aW9uKGRvYykgew0KICAgICAgICBkb2MgPSBkb2Mg
fHwgZG9jdW1lbnQ7DQogICAgICAgIHJldHVybiBuZXcgRG9tUmFuZ2UoZG9jKTsNCiAgICB9Ow0K
DQogICAgYXBpLmNyZWF0ZUlmcmFtZVJhbmdlID0gZnVuY3Rpb24oaWZyYW1lRWwpIHsNCiAgICAg
ICAgcmV0dXJuIGFwaS5jcmVhdGVSYW5nZShkb20uZ2V0SWZyYW1lRG9jdW1lbnQoaWZyYW1lRWwp
KTsNCiAgICB9Ow0KDQogICAgYXBpLmNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2UgPSBmdW5jdGlvbihp
ZnJhbWVFbCkgew0KICAgICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmd5UmFuZ2UoZG9tLmdldElm
cmFtZURvY3VtZW50KGlmcmFtZUVsKSk7DQogICAgfTsNCg0KICAgIGFwaS5hZGRDcmVhdGVNaXNz
aW5nTmF0aXZlQXBpTGlzdGVuZXIoZnVuY3Rpb24od2luKSB7DQogICAgICAgIHZhciBkb2MgPSB3
aW4uZG9jdW1lbnQ7DQogICAgICAgIGlmICh0eXBlb2YgZG9jLmNyZWF0ZVJhbmdlID09ICJ1bmRl
ZmluZWQiKSB7DQogICAgICAgICAgICBkb2MuY3JlYXRlUmFuZ2UgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmdlKHRoaXMpOw0KICAgICAgICAgICAg
fTsNCiAgICAgICAgfQ0KICAgICAgICBkb2MgPSB3aW4gPSBudWxsOw0KICAgIH0pOw0KfSk7cmFu
Z3kuY3JlYXRlTW9kdWxlKCJXcmFwcGVkU2VsZWN0aW9uIiwgZnVuY3Rpb24oYXBpLCBtb2R1bGUp
IHsNCiAgICAvLyBUaGlzIHdpbGwgY3JlYXRlIGEgc2VsZWN0aW9uIG9iamVjdCB3cmFwcGVyIHRo
YXQgZm9sbG93cyB0aGUgU2VsZWN0aW9uIG9iamVjdCBmb3VuZCBpbiB0aGUgV0hBVFdHIGRyYWZ0
IERPTSBSYW5nZQ0KICAgIC8vIHNwZWMgKGh0dHA6Ly9odG1sNS5vcmcvc3BlY3MvZG9tLXJhbmdl
Lmh0bWwpDQoNCiAgICBhcGkucmVxdWlyZU1vZHVsZXMoIFsiRG9tVXRpbCIsICJEb21SYW5nZSIs
ICJXcmFwcGVkUmFuZ2UiXSApOw0KDQogICAgYXBpLmNvbmZpZy5jaGVja1NlbGVjdGlvblJhbmdl
cyA9IHRydWU7DQoNCiAgICB2YXIgQk9PTEVBTiA9ICJib29sZWFuIiwNCiAgICAgICAgd2luZG93
UHJvcGVydHlOYW1lID0gIl9yYW5neVNlbGVjdGlvbiIsDQogICAgICAgIGRvbSA9IGFwaS5kb20s
DQogICAgICAgIHV0aWwgPSBhcGkudXRpbCwNCiAgICAgICAgRG9tUmFuZ2UgPSBhcGkuRG9tUmFu
Z2UsDQogICAgICAgIFdyYXBwZWRSYW5nZSA9IGFwaS5XcmFwcGVkUmFuZ2UsDQogICAgICAgIERP
TUV4Y2VwdGlvbiA9IGFwaS5ET01FeGNlcHRpb24sDQogICAgICAgIERvbVBvc2l0aW9uID0gZG9t
LkRvbVBvc2l0aW9uLA0KICAgICAgICBnZXRTZWxlY3Rpb24sDQogICAgICAgIHNlbGVjdGlvbklz
Q29sbGFwc2VkLA0KICAgICAgICBDT05UUk9MID0gIkNvbnRyb2wiOw0KDQoNCg0KICAgIGZ1bmN0
aW9uIGdldFdpblNlbGVjdGlvbih3aW5QYXJhbSkgew0KICAgICAgICByZXR1cm4gKHdpblBhcmFt
IHx8IHdpbmRvdykuZ2V0U2VsZWN0aW9uKCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0RG9j
U2VsZWN0aW9uKHdpblBhcmFtKSB7DQogICAgICAgIHJldHVybiAod2luUGFyYW0gfHwgd2luZG93
KS5kb2N1bWVudC5zZWxlY3Rpb247DQogICAgfQ0KDQogICAgLy8gVGVzdCBmb3IgdGhlIFJhbmdl
L1RleHRSYW5nZSBhbmQgU2VsZWN0aW9uIGZlYXR1cmVzIHJlcXVpcmVkDQogICAgLy8gVGVzdCBm
b3IgYWJpbGl0eSB0byByZXRyaWV2ZSBzZWxlY3Rpb24NCiAgICB2YXIgaW1wbGVtZW50c1dpbkdl
dFNlbGVjdGlvbiA9IGFwaS51dGlsLmlzSG9zdE1ldGhvZCh3aW5kb3csICJnZXRTZWxlY3Rpb24i
KSwNCiAgICAgICAgaW1wbGVtZW50c0RvY1NlbGVjdGlvbiA9IGFwaS51dGlsLmlzSG9zdE9iamVj
dChkb2N1bWVudCwgInNlbGVjdGlvbiIpOw0KDQogICAgdmFyIHVzZURvY3VtZW50U2VsZWN0aW9u
ID0gaW1wbGVtZW50c0RvY1NlbGVjdGlvbiAmJiAoIWltcGxlbWVudHNXaW5HZXRTZWxlY3Rpb24g
fHwgYXBpLmNvbmZpZy5wcmVmZXJUZXh0UmFuZ2UpOw0KDQogICAgaWYgKHVzZURvY3VtZW50U2Vs
ZWN0aW9uKSB7DQogICAgICAgIGdldFNlbGVjdGlvbiA9IGdldERvY1NlbGVjdGlvbjsNCiAgICAg
ICAgYXBpLmlzU2VsZWN0aW9uVmFsaWQgPSBmdW5jdGlvbih3aW5QYXJhbSkgew0KICAgICAgICAg
ICAgdmFyIGRvYyA9ICh3aW5QYXJhbSB8fCB3aW5kb3cpLmRvY3VtZW50LCBuYXRpdmVTZWwgPSBk
b2Muc2VsZWN0aW9uOw0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBzZWxlY3Rp
b24gVGV4dFJhbmdlIGlzIGFjdHVhbGx5IGNvbnRhaW5lZCB3aXRoaW4gdGhlIGNvcnJlY3QgZG9j
dW1lbnQNCiAgICAgICAgICAgIHJldHVybiAobmF0aXZlU2VsLnR5cGUgIT0gIk5vbmUiIHx8IGRv
bS5nZXREb2N1bWVudChuYXRpdmVTZWwuY3JlYXRlUmFuZ2UoKS5wYXJlbnRFbGVtZW50KCkpID09
IGRvYyk7DQogICAgICAgIH07DQogICAgfSBlbHNlIGlmIChpbXBsZW1lbnRzV2luR2V0U2VsZWN0
aW9uKSB7DQogICAgICAgIGdldFNlbGVjdGlvbiA9IGdldFdpblNlbGVjdGlvbjsNCiAgICAgICAg
YXBpLmlzU2VsZWN0aW9uVmFsaWQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB0
cnVlOw0KICAgICAgICB9Ow0KICAgIH0gZWxzZSB7DQogICAgICAgIG1vZHVsZS5mYWlsKCJOZWl0
aGVyIGRvY3VtZW50LnNlbGVjdGlvbiBvciB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkgZGV0ZWN0ZWQu
Iik7DQogICAgfQ0KDQogICAgYXBpLmdldE5hdGl2ZVNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbjsN
Cg0KICAgIHZhciB0ZXN0U2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uKCk7DQogICAgdmFyIHRlc3RS
YW5nZSA9IGFwaS5jcmVhdGVOYXRpdmVSYW5nZShkb2N1bWVudCk7DQogICAgdmFyIGJvZHkgPSBk
b20uZ2V0Qm9keShkb2N1bWVudCk7DQoNCiAgICAvLyBPYnRhaW5pbmcgYSByYW5nZSBmcm9tIGEg
c2VsZWN0aW9uDQogICAgdmFyIHNlbGVjdGlvbkhhc0FuY2hvckFuZEZvY3VzID0gdXRpbC5hcmVI
b3N0T2JqZWN0cyh0ZXN0U2VsZWN0aW9uLCBbImFuY2hvck5vZGUiLCAiZm9jdXNOb2RlIl0gJiYN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmFyZUhvc3RQcm9wZXJ0
aWVzKHRlc3RTZWxlY3Rpb24sIFsiYW5jaG9yT2Zmc2V0IiwgImZvY3VzT2Zmc2V0Il0pKTsNCiAg
ICBhcGkuZmVhdHVyZXMuc2VsZWN0aW9uSGFzQW5jaG9yQW5kRm9jdXMgPSBzZWxlY3Rpb25IYXNB
bmNob3JBbmRGb2N1czsNCg0KICAgIC8vIFRlc3QgZm9yIGV4aXN0ZW5jZSBvZiBuYXRpdmUgc2Vs
ZWN0aW9uIGV4dGVuZCgpIG1ldGhvZA0KICAgIHZhciBzZWxlY3Rpb25IYXNFeHRlbmQgPSB1dGls
LmlzSG9zdE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAiZXh0ZW5kIik7DQogICAgYXBpLmZlYXR1cmVz
LnNlbGVjdGlvbkhhc0V4dGVuZCA9IHNlbGVjdGlvbkhhc0V4dGVuZDsNCg0KICAgIC8vIFRlc3Qg
aWYgcmFuZ2VDb3VudCBleGlzdHMNCiAgICB2YXIgc2VsZWN0aW9uSGFzUmFuZ2VDb3VudCA9ICh0
eXBlb2YgdGVzdFNlbGVjdGlvbi5yYW5nZUNvdW50ID09ICJudW1iZXIiKTsNCiAgICBhcGkuZmVh
dHVyZXMuc2VsZWN0aW9uSGFzUmFuZ2VDb3VudCA9IHNlbGVjdGlvbkhhc1JhbmdlQ291bnQ7DQoN
CiAgICB2YXIgc2VsZWN0aW9uU3VwcG9ydHNNdWx0aXBsZVJhbmdlcyA9IGZhbHNlOw0KICAgIHZh
ciBjb2xsYXBzZWROb25FZGl0YWJsZVNlbGVjdGlvbnNTdXBwb3J0ZWQgPSB0cnVlOw0KDQogICAg
aWYgKHV0aWwuYXJlSG9zdE1ldGhvZHModGVzdFNlbGVjdGlvbiwgWyJhZGRSYW5nZSIsICJnZXRS
YW5nZUF0IiwgInJlbW92ZUFsbFJhbmdlcyJdKSAmJg0KICAgICAgICAgICAgdHlwZW9mIHRlc3RT
ZWxlY3Rpb24ucmFuZ2VDb3VudCA9PSAibnVtYmVyIiAmJiBhcGkuZmVhdHVyZXMuaW1wbGVtZW50
c0RvbVJhbmdlKSB7DQoNCiAgICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIGlm
cmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOw0KICAgICAgICAgICAgaWZy
YW1lLmZyYW1lQm9yZGVyID0gMDsNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9
ICJhYnNvbHV0ZSI7DQogICAgICAgICAgICBpZnJhbWUuc3R5bGUubGVmdCA9ICItMTAwMDBweCI7
DQogICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7DQoNCiAgICAgICAgICAgIHZh
ciBpZnJhbWVEb2MgPSBkb20uZ2V0SWZyYW1lRG9jdW1lbnQoaWZyYW1lKTsNCiAgICAgICAgICAg
IGlmcmFtZURvYy5vcGVuKCk7DQogICAgICAgICAgICBpZnJhbWVEb2Mud3JpdGUoIjxodG1sPjxo
ZWFkPjwvaGVhZD48Ym9keT4xMjwvYm9keT48L2h0bWw+Iik7DQogICAgICAgICAgICBpZnJhbWVE
b2MuY2xvc2UoKTsNCg0KICAgICAgICAgICAgdmFyIHNlbCA9IGRvbS5nZXRJZnJhbWVXaW5kb3co
aWZyYW1lKS5nZXRTZWxlY3Rpb24oKTsNCiAgICAgICAgICAgIHZhciBkb2NFbCA9IGlmcmFtZURv
Yy5kb2N1bWVudEVsZW1lbnQ7DQogICAgICAgICAgICB2YXIgaWZyYW1lQm9keSA9IGRvY0VsLmxh
c3RDaGlsZCwgdGV4dE5vZGUgPSBpZnJhbWVCb2R5LmZpcnN0Q2hpbGQ7DQoNCiAgICAgICAgICAg
IC8vIFRlc3Qgd2hldGhlciB0aGUgbmF0aXZlIHNlbGVjdGlvbiB3aWxsIGFsbG93IGEgY29sbGFw
c2VkIHNlbGVjdGlvbiB3aXRoaW4gYSBub24tZWRpdGFibGUgZWxlbWVudA0KICAgICAgICAgICAg
dmFyIHIxID0gaWZyYW1lRG9jLmNyZWF0ZVJhbmdlKCk7DQogICAgICAgICAgICByMS5zZXRTdGFy
dCh0ZXh0Tm9kZSwgMSk7DQogICAgICAgICAgICByMS5jb2xsYXBzZSh0cnVlKTsNCiAgICAgICAg
ICAgIHNlbC5hZGRSYW5nZShyMSk7DQogICAgICAgICAgICBjb2xsYXBzZWROb25FZGl0YWJsZVNl
bGVjdGlvbnNTdXBwb3J0ZWQgPSAoc2VsLnJhbmdlQ291bnQgPT0gMSk7DQogICAgICAgICAgICBz
ZWwucmVtb3ZlQWxsUmFuZ2VzKCk7DQoNCiAgICAgICAgICAgIC8vIFRlc3Qgd2hldGhlciB0aGUg
bmF0aXZlIHNlbGVjdGlvbiBpcyBjYXBhYmxlIG9mIHN1cHBvcnRpbmcgbXVsdGlwbGUgcmFuZ2Vz
DQogICAgICAgICAgICB2YXIgcjIgPSByMS5jbG9uZVJhbmdlKCk7DQogICAgICAgICAgICByMS5z
ZXRTdGFydCh0ZXh0Tm9kZSwgMCk7DQogICAgICAgICAgICByMi5zZXRFbmQodGV4dE5vZGUsIDIp
Ow0KICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHIxKTsNCiAgICAgICAgICAgIHNlbC5hZGRSYW5n
ZShyMik7DQoNCiAgICAgICAgICAgIHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSAo
c2VsLnJhbmdlQ291bnQgPT0gMik7DQoNCiAgICAgICAgICAgIC8vIENsZWFuIHVwDQogICAgICAg
ICAgICByMS5kZXRhY2goKTsNCiAgICAgICAgICAgIHIyLmRldGFjaCgpOw0KDQogICAgICAgICAg
ICBib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7DQogICAgICAgIH0pKCk7DQogICAgfQ0KDQogICAg
YXBpLmZlYXR1cmVzLnNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSBzZWxlY3Rpb25T
dXBwb3J0c011bHRpcGxlUmFuZ2VzOw0KICAgIGFwaS5mZWF0dXJlcy5jb2xsYXBzZWROb25FZGl0
YWJsZVNlbGVjdGlvbnNTdXBwb3J0ZWQgPSBjb2xsYXBzZWROb25FZGl0YWJsZVNlbGVjdGlvbnNT
dXBwb3J0ZWQ7DQoNCiAgICAvLyBDb250cm9sUmFuZ2VzDQogICAgdmFyIGltcGxlbWVudHNDb250
cm9sUmFuZ2UgPSBmYWxzZSwgdGVzdENvbnRyb2xSYW5nZTsNCg0KICAgIGlmIChib2R5ICYmIHV0
aWwuaXNIb3N0TWV0aG9kKGJvZHksICJjcmVhdGVDb250cm9sUmFuZ2UiKSkgew0KICAgICAgICB0
ZXN0Q29udHJvbFJhbmdlID0gYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTsNCiAgICAgICAgaWYg
KHV0aWwuYXJlSG9zdFByb3BlcnRpZXModGVzdENvbnRyb2xSYW5nZSwgWyJpdGVtIiwgImFkZCJd
KSkgew0KICAgICAgICAgICAgaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9IHRydWU7DQogICAgICAg
IH0NCiAgICB9DQogICAgYXBpLmZlYXR1cmVzLmltcGxlbWVudHNDb250cm9sUmFuZ2UgPSBpbXBs
ZW1lbnRzQ29udHJvbFJhbmdlOw0KDQogICAgLy8gU2VsZWN0aW9uIGNvbGxhcHNlZG5lc3MNCiAg
ICBpZiAoc2VsZWN0aW9uSGFzQW5jaG9yQW5kRm9jdXMpIHsNCiAgICAgICAgc2VsZWN0aW9uSXND
b2xsYXBzZWQgPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIHJldHVybiBzZWwuYW5jaG9y
Tm9kZSA9PT0gc2VsLmZvY3VzTm9kZSAmJiBzZWwuYW5jaG9yT2Zmc2V0ID09PSBzZWwuZm9jdXNP
ZmZzZXQ7DQogICAgICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgc2VsZWN0aW9uSXNDb2xs
YXBzZWQgPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIHJldHVybiBzZWwucmFuZ2VDb3Vu
dCA/IHNlbC5nZXRSYW5nZUF0KHNlbC5yYW5nZUNvdW50IC0gMSkuY29sbGFwc2VkIDogZmFsc2U7
DQogICAgICAgIH07DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXBkYXRlQW5jaG9yQW5kRm9jdXNG
cm9tUmFuZ2Uoc2VsLCByYW5nZSwgYmFja3dhcmRzKSB7DQogICAgICAgIHZhciBhbmNob3JQcmVm
aXggPSBiYWNrd2FyZHMgPyAiZW5kIiA6ICJzdGFydCIsIGZvY3VzUHJlZml4ID0gYmFja3dhcmRz
ID8gInN0YXJ0IiA6ICJlbmQiOw0KICAgICAgICBzZWwuYW5jaG9yTm9kZSA9IHJhbmdlW2FuY2hv
clByZWZpeCArICJDb250YWluZXIiXTsNCiAgICAgICAgc2VsLmFuY2hvck9mZnNldCA9IHJhbmdl
W2FuY2hvclByZWZpeCArICJPZmZzZXQiXTsNCiAgICAgICAgc2VsLmZvY3VzTm9kZSA9IHJhbmdl
W2ZvY3VzUHJlZml4ICsgIkNvbnRhaW5lciJdOw0KICAgICAgICBzZWwuZm9jdXNPZmZzZXQgPSBy
YW5nZVtmb2N1c1ByZWZpeCArICJPZmZzZXQiXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB1cGRh
dGVBbmNob3JBbmRGb2N1c0Zyb21OYXRpdmVTZWxlY3Rpb24oc2VsKSB7DQogICAgICAgIHZhciBu
YXRpdmVTZWwgPSBzZWwubmF0aXZlU2VsZWN0aW9uOw0KICAgICAgICBzZWwuYW5jaG9yTm9kZSA9
IG5hdGl2ZVNlbC5hbmNob3JOb2RlOw0KICAgICAgICBzZWwuYW5jaG9yT2Zmc2V0ID0gbmF0aXZl
U2VsLmFuY2hvck9mZnNldDsNCiAgICAgICAgc2VsLmZvY3VzTm9kZSA9IG5hdGl2ZVNlbC5mb2N1
c05vZGU7DQogICAgICAgIHNlbC5mb2N1c09mZnNldCA9IG5hdGl2ZVNlbC5mb2N1c09mZnNldDsN
CiAgICB9DQoNCiAgICBmdW5jdGlvbiB1cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpIHsNCiAgICAg
ICAgc2VsLmFuY2hvck5vZGUgPSBzZWwuZm9jdXNOb2RlID0gbnVsbDsNCiAgICAgICAgc2VsLmFu
Y2hvck9mZnNldCA9IHNlbC5mb2N1c09mZnNldCA9IDA7DQogICAgICAgIHNlbC5yYW5nZUNvdW50
ID0gMDsNCiAgICAgICAgc2VsLmlzQ29sbGFwc2VkID0gdHJ1ZTsNCiAgICAgICAgc2VsLl9yYW5n
ZXMubGVuZ3RoID0gMDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXROYXRpdmVSYW5nZShyYW5n
ZSkgew0KICAgICAgICB2YXIgbmF0aXZlUmFuZ2U7DQogICAgICAgIGlmIChyYW5nZSBpbnN0YW5j
ZW9mIERvbVJhbmdlKSB7DQogICAgICAgICAgICBuYXRpdmVSYW5nZSA9IHJhbmdlLl9zZWxlY3Rp
b25OYXRpdmVSYW5nZTsNCiAgICAgICAgICAgIGlmICghbmF0aXZlUmFuZ2UpIHsNCiAgICAgICAg
ICAgICAgICBuYXRpdmVSYW5nZSA9IGFwaS5jcmVhdGVOYXRpdmVSYW5nZShkb20uZ2V0RG9jdW1l
bnQocmFuZ2Uuc3RhcnRDb250YWluZXIpKTsNCiAgICAgICAgICAgICAgICBuYXRpdmVSYW5nZS5z
ZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQpOw0KICAgICAgICAgICAg
ICAgIG5hdGl2ZVJhbmdlLnNldFN0YXJ0KHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFy
dE9mZnNldCk7DQogICAgICAgICAgICAgICAgcmFuZ2UuX3NlbGVjdGlvbk5hdGl2ZVJhbmdlID0g
bmF0aXZlUmFuZ2U7DQogICAgICAgICAgICAgICAgcmFuZ2UuYXR0YWNoTGlzdGVuZXIoImRldGFj
aCIsIGZ1bmN0aW9uKCkgew0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvbk5h
dGl2ZVJhbmdlID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAg
ICAgICAgfSBlbHNlIGlmIChyYW5nZSBpbnN0YW5jZW9mIFdyYXBwZWRSYW5nZSkgew0KICAgICAg
ICAgICAgbmF0aXZlUmFuZ2UgPSByYW5nZS5uYXRpdmVSYW5nZTsNCiAgICAgICAgfSBlbHNlIGlm
IChhcGkuZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlICYmIChyYW5nZSBpbnN0YW5jZW9mIGRv
bS5nZXRXaW5kb3cocmFuZ2Uuc3RhcnRDb250YWluZXIpLlJhbmdlKSkgew0KICAgICAgICAgICAg
bmF0aXZlUmFuZ2UgPSByYW5nZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmF0aXZlUmFu
Z2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmFuZ2VDb250YWluc1NpbmdsZUVsZW1lbnQocmFu
Z2VOb2Rlcykgew0KICAgICAgICBpZiAoIXJhbmdlTm9kZXMubGVuZ3RoIHx8IHJhbmdlTm9kZXNb
MF0ubm9kZVR5cGUgIT0gMSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9
DQogICAgICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSByYW5nZU5vZGVzLmxlbmd0aDsgaSA8IGxl
bjsgKytpKSB7DQogICAgICAgICAgICBpZiAoIWRvbS5pc0FuY2VzdG9yT2YocmFuZ2VOb2Rlc1sw
XSwgcmFuZ2VOb2Rlc1tpXSkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAg
ICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSkgew0KICAgICAgICB2YXIg
bm9kZXMgPSByYW5nZS5nZXROb2RlcygpOw0KICAgICAgICBpZiAoIXJhbmdlQ29udGFpbnNTaW5n
bGVFbGVtZW50KG5vZGVzKSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJnZXRTaW5n
bGVFbGVtZW50RnJvbVJhbmdlOiByYW5nZSAiICsgcmFuZ2UuaW5zcGVjdCgpICsgIiBkaWQgbm90
IGNvbnNpc3Qgb2YgYSBzaW5nbGUgZWxlbWVudCIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVy
biBub2Rlc1swXTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc1RleHRSYW5nZShyYW5nZSkgew0K
ICAgICAgICByZXR1cm4gISFyYW5nZSAmJiB0eXBlb2YgcmFuZ2UudGV4dCAhPSAidW5kZWZpbmVk
IjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB1cGRhdGVGcm9tVGV4dFJhbmdlKHNlbCwgcmFuZ2Up
IHsNCiAgICAgICAgLy8gQ3JlYXRlIGEgUmFuZ2UgZnJvbSB0aGUgc2VsZWN0ZWQgVGV4dFJhbmdl
DQogICAgICAgIHZhciB3cmFwcGVkUmFuZ2UgPSBuZXcgV3JhcHBlZFJhbmdlKHJhbmdlKTsNCiAg
ICAgICAgc2VsLl9yYW5nZXMgPSBbd3JhcHBlZFJhbmdlXTsNCg0KICAgICAgICB1cGRhdGVBbmNo
b3JBbmRGb2N1c0Zyb21SYW5nZShzZWwsIHdyYXBwZWRSYW5nZSwgZmFsc2UpOw0KICAgICAgICBz
ZWwucmFuZ2VDb3VudCA9IDE7DQogICAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHdyYXBwZWRSYW5n
ZS5jb2xsYXBzZWQ7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXBkYXRlQ29udHJvbFNlbGVjdGlv
bihzZWwpIHsNCiAgICAgICAgLy8gVXBkYXRlIHRoZSB3cmFwcGVkIHNlbGVjdGlvbiBiYXNlZCBv
biB3aGF0J3Mgbm93IGluIHRoZSBuYXRpdmUgc2VsZWN0aW9uDQogICAgICAgIHNlbC5fcmFuZ2Vz
Lmxlbmd0aCA9IDA7DQogICAgICAgIGlmIChzZWwuZG9jU2VsZWN0aW9uLnR5cGUgPT0gIk5vbmUi
KSB7DQogICAgICAgICAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpOw0KICAgICAgICB9IGVs
c2Ugew0KICAgICAgICAgICAgdmFyIGNvbnRyb2xSYW5nZSA9IHNlbC5kb2NTZWxlY3Rpb24uY3Jl
YXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIGlmIChpc1RleHRSYW5nZShjb250cm9sUmFuZ2UpKSB7
DQogICAgICAgICAgICAgICAgLy8gVGhpcyBjYXNlICh3aGVyZSB0aGUgc2VsZWN0aW9uIHR5cGUg
aXMgIkNvbnRyb2wiIGFuZCBjYWxsaW5nIGNyZWF0ZVJhbmdlKCkgb24gdGhlIHNlbGVjdGlvbiBy
ZXR1cm5zDQogICAgICAgICAgICAgICAgLy8gYSBUZXh0UmFuZ2UpIGNhbiBoYXBwZW4gaW4gSUUg
OS4gSXQgaGFwcGVucywgZm9yIGV4YW1wbGUsIHdoZW4gYWxsIGVsZW1lbnRzIGluIHRoZSBzZWxl
Y3RlZA0KICAgICAgICAgICAgICAgIC8vIENvbnRyb2xSYW5nZSBoYXZlIGJlZW4gcmVtb3ZlZCBm
cm9tIHRoZSBDb250cm9sUmFuZ2UgYW5kIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQuDQogICAg
ICAgICAgICAgICAgdXBkYXRlRnJvbVRleHRSYW5nZShzZWwsIGNvbnRyb2xSYW5nZSk7DQogICAg
ICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHNlbC5yYW5nZUNvdW50ID0gY29udHJv
bFJhbmdlLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB2YXIgcmFuZ2UsIGRvYyA9IGRvbS5nZXRE
b2N1bWVudChjb250cm9sUmFuZ2UuaXRlbSgwKSk7DQogICAgICAgICAgICAgICAgZm9yICh2YXIg
aSA9IDA7IGkgPCBzZWwucmFuZ2VDb3VudDsgKytpKSB7DQogICAgICAgICAgICAgICAgICAgIHJh
bmdlID0gYXBpLmNyZWF0ZVJhbmdlKGRvYyk7DQogICAgICAgICAgICAgICAgICAgIHJhbmdlLnNl
bGVjdE5vZGUoY29udHJvbFJhbmdlLml0ZW0oaSkpOw0KICAgICAgICAgICAgICAgICAgICBzZWwu
X3Jhbmdlcy5wdXNoKHJhbmdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAg
c2VsLmlzQ29sbGFwc2VkID0gc2VsLnJhbmdlQ291bnQgPT0gMSAmJiBzZWwuX3Jhbmdlc1swXS5j
b2xsYXBzZWQ7DQogICAgICAgICAgICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2Uo
c2VsLCBzZWwuX3Jhbmdlc1tzZWwucmFuZ2VDb3VudCAtIDFdLCBmYWxzZSk7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhZGRSYW5nZVRvQ29udHJvbFNl
bGVjdGlvbihzZWwsIHJhbmdlKSB7DQogICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSBzZWwuZG9j
U2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7DQogICAgICAgIHZhciByYW5nZUVsZW1lbnQgPSBnZXRT
aW5nbGVFbGVtZW50RnJvbVJhbmdlKHJhbmdlKTsNCg0KICAgICAgICAvLyBDcmVhdGUgYSBuZXcg
Q29udHJvbFJhbmdlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgc2VsZWN0ZWQg
Q29udHJvbFJhbmdlIHBsdXMgdGhlIGVsZW1lbnQNCiAgICAgICAgLy8gY29udGFpbmVkIGJ5IHRo
ZSBzdXBwbGllZCByYW5nZQ0KICAgICAgICB2YXIgZG9jID0gZG9tLmdldERvY3VtZW50KGNvbnRy
b2xSYW5nZS5pdGVtKDApKTsNCiAgICAgICAgdmFyIG5ld0NvbnRyb2xSYW5nZSA9IGRvbS5nZXRC
b2R5KGRvYykuY3JlYXRlQ29udHJvbFJhbmdlKCk7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBs
ZW4gPSBjb250cm9sUmFuZ2UubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIG5l
d0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0ZW0oaSkpOw0KICAgICAgICB9DQogICAg
ICAgIHRyeSB7DQogICAgICAgICAgICBuZXdDb250cm9sUmFuZ2UuYWRkKHJhbmdlRWxlbWVudCk7
DQogICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImFk
ZFJhbmdlKCk6IEVsZW1lbnQgd2l0aGluIHRoZSBzcGVjaWZpZWQgUmFuZ2UgY291bGQgbm90IGJl
IGFkZGVkIHRvIGNvbnRyb2wgc2VsZWN0aW9uIChkb2VzIGl0IGhhdmUgbGF5b3V0PykiKTsNCiAg
ICAgICAgfQ0KICAgICAgICBuZXdDb250cm9sUmFuZ2Uuc2VsZWN0KCk7DQoNCiAgICAgICAgLy8g
VXBkYXRlIHRoZSB3cmFwcGVkIHNlbGVjdGlvbiBiYXNlZCBvbiB3aGF0J3Mgbm93IGluIHRoZSBu
YXRpdmUgc2VsZWN0aW9uDQogICAgICAgIHVwZGF0ZUNvbnRyb2xTZWxlY3Rpb24oc2VsKTsNCiAg
ICB9DQoNCiAgICB2YXIgZ2V0U2VsZWN0aW9uUmFuZ2VBdDsNCg0KICAgIGlmICh1dGlsLmlzSG9z
dE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAgImdldFJhbmdlQXQiKSkgew0KICAgICAgICBnZXRTZWxl
Y3Rpb25SYW5nZUF0ID0gZnVuY3Rpb24oc2VsLCBpbmRleCkgew0KICAgICAgICAgICAgdHJ5IHsN
CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsLmdldFJhbmdlQXQoaW5kZXgpOw0KICAgICAgICAg
ICAgfSBjYXRjaChleCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAg
ICAgfQ0KICAgICAgICB9Ow0KICAgIH0gZWxzZSBpZiAoc2VsZWN0aW9uSGFzQW5jaG9yQW5kRm9j
dXMpIHsNCiAgICAgICAgZ2V0U2VsZWN0aW9uUmFuZ2VBdCA9IGZ1bmN0aW9uKHNlbCkgew0KICAg
ICAgICAgICAgdmFyIGRvYyA9IGRvbS5nZXREb2N1bWVudChzZWwuYW5jaG9yTm9kZSk7DQogICAg
ICAgICAgICB2YXIgcmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2UoZG9jKTsNCiAgICAgICAgICAgIHJh
bmdlLnNldFN0YXJ0KHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTsNCiAgICAgICAg
ICAgIHJhbmdlLnNldEVuZChzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpOw0KDQogICAg
ICAgICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlbiB0aGUgc2VsZWN0aW9uIHdhcyBzZWxlY3Rl
ZCBiYWNrd2FyZHMgKGZyb20gdGhlIGVuZCB0byB0aGUgc3RhcnQgaW4gdGhlDQogICAgICAgICAg
ICAvLyBkb2N1bWVudCkNCiAgICAgICAgICAgIGlmIChyYW5nZS5jb2xsYXBzZWQgIT09IHRoaXMu
aXNDb2xsYXBzZWQpIHsNCiAgICAgICAgICAgICAgICByYW5nZS5zZXRTdGFydChzZWwuZm9jdXNO
b2RlLCBzZWwuZm9jdXNPZmZzZXQpOw0KICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChzZWwu
YW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAg
ICAgIHJldHVybiByYW5nZTsNCiAgICAgICAgfTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBA
Y29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBXcmFwcGVkU2VsZWN0aW9uKHNlbGVj
dGlvbiwgZG9jU2VsZWN0aW9uLCB3aW4pIHsNCiAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24g
PSBzZWxlY3Rpb247DQogICAgICAgIHRoaXMuZG9jU2VsZWN0aW9uID0gZG9jU2VsZWN0aW9uOw0K
ICAgICAgICB0aGlzLl9yYW5nZXMgPSBbXTsNCiAgICAgICAgdGhpcy53aW4gPSB3aW47DQogICAg
ICAgIHRoaXMucmVmcmVzaCgpOw0KICAgIH0NCg0KICAgIGFwaS5nZXRTZWxlY3Rpb24gPSBmdW5j
dGlvbih3aW4pIHsNCiAgICAgICAgd2luID0gd2luIHx8IHdpbmRvdzsNCiAgICAgICAgdmFyIHNl
bCA9IHdpblt3aW5kb3dQcm9wZXJ0eU5hbWVdOw0KICAgICAgICB2YXIgbmF0aXZlU2VsID0gZ2V0
U2VsZWN0aW9uKHdpbiksIGRvY1NlbCA9IGltcGxlbWVudHNEb2NTZWxlY3Rpb24gPyBnZXREb2NT
ZWxlY3Rpb24od2luKSA6IG51bGw7DQogICAgICAgIGlmIChzZWwpIHsNCiAgICAgICAgICAgIHNl
bC5uYXRpdmVTZWxlY3Rpb24gPSBuYXRpdmVTZWw7DQogICAgICAgICAgICBzZWwuZG9jU2VsZWN0
aW9uID0gZG9jU2VsOw0KICAgICAgICAgICAgc2VsLnJlZnJlc2god2luKTsNCiAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgIHNlbCA9IG5ldyBXcmFwcGVkU2VsZWN0aW9uKG5hdGl2ZVNlbCwg
ZG9jU2VsLCB3aW4pOw0KICAgICAgICAgICAgd2luW3dpbmRvd1Byb3BlcnR5TmFtZV0gPSBzZWw7
DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNlbDsNCiAgICB9Ow0KDQogICAgYXBpLmdldElm
cmFtZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKGlmcmFtZUVsKSB7DQogICAgICAgIHJldHVybiBhcGku
Z2V0U2VsZWN0aW9uKGRvbS5nZXRJZnJhbWVXaW5kb3coaWZyYW1lRWwpKTsNCiAgICB9Ow0KDQog
ICAgdmFyIHNlbFByb3RvID0gV3JhcHBlZFNlbGVjdGlvbi5wcm90b3R5cGU7DQoNCiAgICBmdW5j
dGlvbiBjcmVhdGVDb250cm9sU2VsZWN0aW9uKHNlbCwgcmFuZ2VzKSB7DQogICAgICAgIC8vIEVu
c3VyZSB0aGF0IHRoZSBzZWxlY3Rpb24gYmVjb21lcyBvZiB0eXBlICJDb250cm9sIg0KICAgICAg
ICB2YXIgZG9jID0gZG9tLmdldERvY3VtZW50KHJhbmdlc1swXS5zdGFydENvbnRhaW5lcik7DQog
ICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSBkb20uZ2V0Qm9keShkb2MpLmNyZWF0ZUNvbnRyb2xS
YW5nZSgpOw0KICAgICAgICBmb3IgKHZhciBpID0gMCwgZWw7IGkgPCByYW5nZUNvdW50OyArK2kp
IHsNCiAgICAgICAgICAgIGVsID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZXNbaV0p
Ow0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb250cm9sUmFuZ2UuYWRkKGVs
KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3
IEVycm9yKCJzZXRSYW5nZXMoKTogRWxlbWVudCB3aXRoaW4gdGhlIG9uZSBvZiB0aGUgc3BlY2lm
aWVkIFJhbmdlcyBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24gKGRvZXMg
aXQgaGF2ZSBsYXlvdXQ/KSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNv
bnRyb2xSYW5nZS5zZWxlY3QoKTsNCg0KICAgICAgICAvLyBVcGRhdGUgdGhlIHdyYXBwZWQgc2Vs
ZWN0aW9uIGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2ZSBzZWxlY3Rpb24NCiAgICAg
ICAgdXBkYXRlQ29udHJvbFNlbGVjdGlvbihzZWwpOw0KICAgIH0NCg0KICAgIC8vIFNlbGVjdGlu
ZyBhIHJhbmdlDQogICAgaWYgKCF1c2VEb2N1bWVudFNlbGVjdGlvbiAmJiBzZWxlY3Rpb25IYXNB
bmNob3JBbmRGb2N1cyAmJiB1dGlsLmFyZUhvc3RNZXRob2RzKHRlc3RTZWxlY3Rpb24sIFsicmVt
b3ZlQWxsUmFuZ2VzIiwgImFkZFJhbmdlIl0pKSB7DQogICAgICAgIHNlbFByb3RvLnJlbW92ZUFs
bFJhbmdlcyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24u
cmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAgICAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbih0aGlz
KTsNCiAgICAgICAgfTsNCg0KICAgICAgICB2YXIgYWRkUmFuZ2VCYWNrd2FyZHMgPSBmdW5jdGlv
bihzZWwsIHJhbmdlKSB7DQogICAgICAgICAgICB2YXIgZG9jID0gRG9tUmFuZ2UuZ2V0UmFuZ2VE
b2N1bWVudChyYW5nZSk7DQogICAgICAgICAgICB2YXIgZW5kUmFuZ2UgPSBhcGkuY3JlYXRlUmFu
Z2UoZG9jKTsNCiAgICAgICAgICAgIGVuZFJhbmdlLmNvbGxhcHNlVG9Qb2ludChyYW5nZS5lbmRD
b250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7DQogICAgICAgICAgICBzZWwubmF0aXZlU2VsZWN0
aW9uLmFkZFJhbmdlKGdldE5hdGl2ZVJhbmdlKGVuZFJhbmdlKSk7DQogICAgICAgICAgICBzZWwu
bmF0aXZlU2VsZWN0aW9uLmV4dGVuZChyYW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRP
ZmZzZXQpOw0KICAgICAgICAgICAgc2VsLnJlZnJlc2goKTsNCiAgICAgICAgfTsNCg0KICAgICAg
ICBpZiAoc2VsZWN0aW9uSGFzUmFuZ2VDb3VudCkgew0KICAgICAgICAgICAgc2VsUHJvdG8uYWRk
UmFuZ2UgPSBmdW5jdGlvbihyYW5nZSwgYmFja3dhcmRzKSB7DQogICAgICAgICAgICAgICAgaWYg
KGltcGxlbWVudHNDb250cm9sUmFuZ2UgJiYgaW1wbGVtZW50c0RvY1NlbGVjdGlvbiAmJiB0aGlz
LmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAgICAgICAgICAgICAgICAgICAgYWRk
UmFuZ2VUb0NvbnRyb2xTZWxlY3Rpb24odGhpcywgcmFuZ2UpOw0KICAgICAgICAgICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChiYWNrd2FyZHMgJiYgc2VsZWN0aW9uSGFz
RXh0ZW5kKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhZGRSYW5nZUJhY2t3YXJkcyh0aGlz
LCByYW5nZSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAg
ICAgICAgICB2YXIgcHJldmlvdXNSYW5nZUNvdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBwcmV2aW91c1JhbmdlQ291bnQgPSB0aGlzLnJhbmdlQ291bnQ7DQogICAgICAg
ICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRo
aXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlv
dXNSYW5nZUNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgICAgIHRoaXMubmF0aXZlU2VsZWN0aW9uLmFkZFJhbmdlKGdldE5hdGl2ZVJhbmdl
KHJhbmdlKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWRk
aW5nIHRoZSByYW5nZSB3YXMgc3VjY2Vzc2Z1bA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhp
cy5yYW5nZUNvdW50ID0gdGhpcy5uYXRpdmVTZWxlY3Rpb24ucmFuZ2VDb3VudDsNCg0KICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCA9PSBwcmV2aW91c1JhbmdlQ291
bnQgKyAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJhbmdlIHdhcyBh
ZGRlZCBzdWNjZXNzZnVsbHkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNr
IHdoZXRoZXIgdGhlIHJhbmdlIHRoYXQgd2UgYWRkZWQgdG8gdGhlIHNlbGVjdGlvbiBpcyByZWZs
ZWN0ZWQgaW4gdGhlIGxhc3QgcmFuZ2UgZXh0cmFjdGVkIGZyb20NCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAvLyB0aGUgc2VsZWN0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgKGFwaS5jb25maWcuY2hlY2tTZWxlY3Rpb25SYW5nZXMpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdmFyIG5hdGl2ZVJhbmdlID0gZ2V0U2VsZWN0aW9uUmFuZ2VBdCh0aGlz
Lm5hdGl2ZVNlbGVjdGlvbiwgdGhpcy5yYW5nZUNvdW50IC0gMSk7DQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChuYXRpdmVSYW5nZSAmJiAhRG9tUmFuZ2UucmFuZ2VzRXF1YWwo
bmF0aXZlUmFuZ2UsIHJhbmdlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgLy8gSGFwcGVucyBpbiBXZWJLaXQgd2l0aCwgZm9yIGV4YW1wbGUsIGEgc2VsZWN0aW9uIHBs
YWNlZCBhdCB0aGUgc3RhcnQgb2YgYSB0ZXh0IG5vZGUNCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHJhbmdlID0gbmV3IFdyYXBwZWRSYW5nZShuYXRpdmVSYW5nZSk7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VD
b3VudCAtIDFdID0gcmFuZ2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQW5j
aG9yQW5kRm9jdXNGcm9tUmFuZ2UodGhpcywgcmFuZ2UsIHNlbGVjdGlvbklzQmFja3dhcmRzKHRo
aXMubmF0aXZlU2VsZWN0aW9uKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5p
c0NvbGxhcHNlZCA9IHNlbGVjdGlvbklzQ29sbGFwc2VkKHRoaXMpOw0KICAgICAgICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmFu
Z2Ugd2FzIG5vdCBhZGRlZCBzdWNjZXNzZnVsbHkuIFRoZSBzaW1wbGVzdCB0aGluZyBpcyB0byBy
ZWZyZXNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAg
ICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2Vs
UHJvdG8uYWRkUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSwgYmFja3dhcmRzKSB7DQogICAgICAgICAg
ICAgICAgaWYgKGJhY2t3YXJkcyAmJiBzZWxlY3Rpb25IYXNFeHRlbmQpIHsNCiAgICAgICAgICAg
ICAgICAgICAgYWRkUmFuZ2VCYWNrd2FyZHModGhpcywgcmFuZ2UpOw0KICAgICAgICAgICAgICAg
IH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlU2VsZWN0aW9uLmFkZFJh
bmdlKGdldE5hdGl2ZVJhbmdlKHJhbmdlKSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVm
cmVzaCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCg0K
ICAgICAgICBzZWxQcm90by5zZXRSYW5nZXMgPSBmdW5jdGlvbihyYW5nZXMpIHsNCiAgICAgICAg
ICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIHJhbmdlcy5sZW5ndGggPiAxKSB7DQog
ICAgICAgICAgICAgICAgY3JlYXRlQ29udHJvbFNlbGVjdGlvbih0aGlzLCByYW5nZXMpOw0KICAg
ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbFJhbmdlcygp
Ow0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBp
IDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShyYW5nZXNb
aV0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9
IGVsc2UgaWYgKHV0aWwuaXNIb3N0TWV0aG9kKHRlc3RTZWxlY3Rpb24sICJlbXB0eSIpICYmIHV0
aWwuaXNIb3N0TWV0aG9kKHRlc3RSYW5nZSwgInNlbGVjdCIpICYmDQogICAgICAgICAgICAgICBp
bXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIHVzZURvY3VtZW50U2VsZWN0aW9uKSB7DQoNCiAgICAg
ICAgc2VsUHJvdG8ucmVtb3ZlQWxsUmFuZ2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAv
LyBBZGRlZCB0cnkvY2F0Y2ggYXMgZml4IGZvciBpc3N1ZSAjMjENCiAgICAgICAgICAgIHRyeSB7
DQogICAgICAgICAgICAgICAgdGhpcy5kb2NTZWxlY3Rpb24uZW1wdHkoKTsNCg0KICAgICAgICAg
ICAgICAgIC8vIENoZWNrIGZvciBlbXB0eSgpIG5vdCB3b3JraW5nIChpc3N1ZSAjMjQpDQogICAg
ICAgICAgICAgICAgaWYgKHRoaXMuZG9jU2VsZWN0aW9uLnR5cGUgIT0gIk5vbmUiKSB7DQogICAg
ICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGZhaWx1cmUgdG8gZW1wdHkgYSBjb250cm9s
IHNlbGVjdGlvbiBieSBpbnN0ZWFkIHNlbGVjdGluZyBhIFRleHRSYW5nZSBhbmQgdGhlbg0KICAg
ICAgICAgICAgICAgICAgICAvLyBjYWxsaW5nIGVtcHR5KCkNCiAgICAgICAgICAgICAgICAgICAg
dmFyIGRvYzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5jaG9yTm9kZSkgew0KICAg
ICAgICAgICAgICAgICAgICAgICAgZG9jID0gZG9tLmdldERvY3VtZW50KHRoaXMuYW5jaG9yTm9k
ZSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2NTZWxlY3Rpb24udHlw
ZSA9PSBDT05UUk9MKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbFJhbmdl
ID0gdGhpcy5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIChjb250cm9sUmFuZ2UubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZG9jID0gZG9tLmdldERvY3VtZW50KGNvbnRyb2xSYW5nZS5pdGVtKDApKS5ib2R5LmNyZWF0
ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChkb2MpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIHZhciB0ZXh0UmFuZ2UgPSBkb2MuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRleHRSYW5nZS5zZWxlY3QoKTsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIHRoaXMuZG9jU2VsZWN0aW9uLmVtcHR5KCk7DQogICAgICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoKGV4KSB7fQ0KICAgICAgICAg
ICAgdXBkYXRlRW1wdHlTZWxlY3Rpb24odGhpcyk7DQogICAgICAgIH07DQoNCiAgICAgICAgc2Vs
UHJvdG8uYWRkUmFuZ2UgPSBmdW5jdGlvbihyYW5nZSkgew0KICAgICAgICAgICAgaWYgKHRoaXMu
ZG9jU2VsZWN0aW9uLnR5cGUgPT0gQ09OVFJPTCkgew0KICAgICAgICAgICAgICAgIGFkZFJhbmdl
VG9Db250cm9sU2VsZWN0aW9uKHRoaXMsIHJhbmdlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgICAgV3JhcHBlZFJhbmdlLnJhbmdlVG9UZXh0UmFuZ2UocmFuZ2UpLnNlbGVj
dCgpOw0KICAgICAgICAgICAgICAgIHRoaXMuX3Jhbmdlc1swXSA9IHJhbmdlOw0KICAgICAgICAg
ICAgICAgIHRoaXMucmFuZ2VDb3VudCA9IDE7DQogICAgICAgICAgICAgICAgdGhpcy5pc0NvbGxh
cHNlZCA9IHRoaXMuX3Jhbmdlc1swXS5jb2xsYXBzZWQ7DQogICAgICAgICAgICAgICAgdXBkYXRl
QW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2UodGhpcywgcmFuZ2UsIGZhbHNlKTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfTsNCg0KICAgICAgICBzZWxQcm90by5zZXRSYW5nZXMgPSBmdW5jdGlvbihy
YW5nZXMpIHsNCiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAgICAg
ICB2YXIgcmFuZ2VDb3VudCA9IHJhbmdlcy5sZW5ndGg7DQogICAgICAgICAgICBpZiAocmFuZ2VD
b3VudCA+IDEpIHsNCiAgICAgICAgICAgICAgICBjcmVhdGVDb250cm9sU2VsZWN0aW9uKHRoaXMs
IHJhbmdlcyk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlQ291bnQpIHsNCiAgICAgICAg
ICAgICAgICB0aGlzLmFkZFJhbmdlKHJhbmdlc1swXSk7DQogICAgICAgICAgICB9DQogICAgICAg
IH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgbW9kdWxlLmZhaWwoIk5vIG1lYW5zIG9mIHNlbGVj
dGluZyBhIFJhbmdlIG9yIFRleHRSYW5nZSB3YXMgZm91bmQiKTsNCiAgICAgICAgcmV0dXJuIGZh
bHNlOw0KICAgIH0NCg0KICAgIHNlbFByb3RvLmdldFJhbmdlQXQgPSBmdW5jdGlvbihpbmRleCkg
ew0KICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMucmFuZ2VDb3VudCkgew0K
ICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5ERVhfU0laRV9FUlIiKTsNCiAg
ICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yYW5nZXNbaW5kZXhdOw0K
ICAgICAgICB9DQogICAgfTsNCg0KICAgIHZhciByZWZyZXNoU2VsZWN0aW9uOw0KDQogICAgaWYg
KHVzZURvY3VtZW50U2VsZWN0aW9uKSB7DQogICAgICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5j
dGlvbihzZWwpIHsNCiAgICAgICAgICAgIHZhciByYW5nZTsNCiAgICAgICAgICAgIGlmIChhcGku
aXNTZWxlY3Rpb25WYWxpZChzZWwud2luKSkgew0KICAgICAgICAgICAgICAgIHJhbmdlID0gc2Vs
LmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAg
ICAgICAgICAgICByYW5nZSA9IGRvbS5nZXRCb2R5KHNlbC53aW4uZG9jdW1lbnQpLmNyZWF0ZVRl
eHRSYW5nZSgpOw0KICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpOw0KICAgICAg
ICAgICAgfQ0KDQoNCiAgICAgICAgICAgIGlmIChzZWwuZG9jU2VsZWN0aW9uLnR5cGUgPT0gQ09O
VFJPTCkgew0KICAgICAgICAgICAgICAgIHVwZGF0ZUNvbnRyb2xTZWxlY3Rpb24oc2VsKTsNCiAg
ICAgICAgICAgIH0gZWxzZSBpZiAoaXNUZXh0UmFuZ2UocmFuZ2UpKSB7DQogICAgICAgICAgICAg
ICAgdXBkYXRlRnJvbVRleHRSYW5nZShzZWwsIHJhbmdlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTZWxlY3Rpb24oc2VsKTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKHV0aWwuaXNIb3N0TWV0aG9kKHRlc3RTZWxl
Y3Rpb24sICJnZXRSYW5nZUF0IikgJiYgdHlwZW9mIHRlc3RTZWxlY3Rpb24ucmFuZ2VDb3VudCA9
PSAibnVtYmVyIikgew0KICAgICAgICByZWZyZXNoU2VsZWN0aW9uID0gZnVuY3Rpb24oc2VsKSB7
DQogICAgICAgICAgICBpZiAoaW1wbGVtZW50c0NvbnRyb2xSYW5nZSAmJiBpbXBsZW1lbnRzRG9j
U2VsZWN0aW9uICYmIHNlbC5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAg
ICAgICAgICAgdXBkYXRlQ29udHJvbFNlbGVjdGlvbihzZWwpOw0KICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICBzZWwuX3Jhbmdlcy5sZW5ndGggPSBzZWwucmFuZ2VDb3VudCA9
IHNlbC5uYXRpdmVTZWxlY3Rpb24ucmFuZ2VDb3VudDsNCiAgICAgICAgICAgICAgICBpZiAoc2Vs
LnJhbmdlQ291bnQpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9
IHNlbC5yYW5nZUNvdW50OyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
IHNlbC5fcmFuZ2VzW2ldID0gbmV3IGFwaS5XcmFwcGVkUmFuZ2Uoc2VsLm5hdGl2ZVNlbGVjdGlv
bi5nZXRSYW5nZUF0KGkpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZShzZWwsIHNlbC5fcmFuZ2VzW3NlbC5y
YW5nZUNvdW50IC0gMV0sIHNlbGVjdGlvbklzQmFja3dhcmRzKHNlbC5uYXRpdmVTZWxlY3Rpb24p
KTsNCiAgICAgICAgICAgICAgICAgICAgc2VsLmlzQ29sbGFwc2VkID0gc2VsZWN0aW9uSXNDb2xs
YXBzZWQoc2VsKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg
ICB1cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbkhhc0FuY2hvckFuZEZv
Y3VzICYmIHR5cGVvZiB0ZXN0U2VsZWN0aW9uLmlzQ29sbGFwc2VkID09IEJPT0xFQU4gJiYgdHlw
ZW9mIHRlc3RSYW5nZS5jb2xsYXBzZWQgPT0gQk9PTEVBTiAmJiBhcGkuZmVhdHVyZXMuaW1wbGVt
ZW50c0RvbVJhbmdlKSB7DQogICAgICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbihzZWwp
IHsNCiAgICAgICAgICAgIHZhciByYW5nZSwgbmF0aXZlU2VsID0gc2VsLm5hdGl2ZVNlbGVjdGlv
bjsNCiAgICAgICAgICAgIGlmIChuYXRpdmVTZWwuYW5jaG9yTm9kZSkgew0KICAgICAgICAgICAg
ICAgIHJhbmdlID0gZ2V0U2VsZWN0aW9uUmFuZ2VBdChuYXRpdmVTZWwsIDApOw0KICAgICAgICAg
ICAgICAgIHNlbC5fcmFuZ2VzID0gW3JhbmdlXTsNCiAgICAgICAgICAgICAgICBzZWwucmFuZ2VD
b3VudCA9IDE7DQogICAgICAgICAgICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tTmF0aXZl
U2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICAgICAgc2VsLmlzQ29sbGFwc2VkID0gc2VsZWN0
aW9uSXNDb2xsYXBzZWQoc2VsKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgdXBkYXRlRW1wdHlTZWxlY3Rpb24oc2VsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsN
CiAgICB9IGVsc2Ugew0KICAgICAgICBtb2R1bGUuZmFpbCgiTm8gbWVhbnMgb2Ygb2J0YWluaW5n
IGEgUmFuZ2Ugb3IgVGV4dFJhbmdlIGZyb20gdGhlIHVzZXIncyBzZWxlY3Rpb24gd2FzIGZvdW5k
Iik7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBzZWxQcm90by5yZWZyZXNo
ID0gZnVuY3Rpb24oY2hlY2tGb3JDaGFuZ2VzKSB7DQogICAgICAgIHZhciBvbGRSYW5nZXMgPSBj
aGVja0ZvckNoYW5nZXMgPyB0aGlzLl9yYW5nZXMuc2xpY2UoMCkgOiBudWxsOw0KICAgICAgICBy
ZWZyZXNoU2VsZWN0aW9uKHRoaXMpOw0KICAgICAgICBpZiAoY2hlY2tGb3JDaGFuZ2VzKSB7DQog
ICAgICAgICAgICB2YXIgaSA9IG9sZFJhbmdlcy5sZW5ndGg7DQogICAgICAgICAgICBpZiAoaSAh
PSB0aGlzLl9yYW5nZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0K
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAg
IGlmICghRG9tUmFuZ2UucmFuZ2VzRXF1YWwob2xkUmFuZ2VzW2ldLCB0aGlzLl9yYW5nZXNbaV0p
KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAg
IH07DQoNCiAgICAvLyBSZW1vdmFsIG9mIGEgc2luZ2xlIHJhbmdlDQogICAgdmFyIHJlbW92ZVJh
bmdlTWFudWFsbHkgPSBmdW5jdGlvbihzZWwsIHJhbmdlKSB7DQogICAgICAgIHZhciByYW5nZXMg
PSBzZWwuZ2V0QWxsUmFuZ2VzKCksIHJlbW92ZWQgPSBmYWxzZTsNCiAgICAgICAgc2VsLnJlbW92
ZUFsbFJhbmdlcygpOw0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmFuZ2VzLmxlbmd0
aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAgICAgICBpZiAocmVtb3ZlZCB8fCByYW5nZSAhPT0g
cmFuZ2VzW2ldKSB7DQogICAgICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlc1tpXSk7DQog
ICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUg
ZHJhZnQgV0hBVFdHIFJhbmdlIHNwZWMsIHRoZSBzYW1lIHJhbmdlIG1heSBiZSBhZGRlZCB0byB0
aGUgc2VsZWN0aW9uIG11bHRpcGxlDQogICAgICAgICAgICAgICAgLy8gdGltZXMuIHJlbW92ZVJh
bmdlIHNob3VsZCBvbmx5IHJlbW92ZSB0aGUgZmlyc3QgaW5zdGFuY2UsIHNvIHRoZSBmb2xsb3dp
bmcgZW5zdXJlcyBvbmx5IHRoZSBmaXJzdA0KICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlIGlz
IHJlbW92ZWQNCiAgICAgICAgICAgICAgICByZW1vdmVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfQ0KICAgICAgICBpZiAoIXNlbC5yYW5nZUNvdW50KSB7DQogICAgICAgICAgICB1
cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIGlmIChp
bXBsZW1lbnRzQ29udHJvbFJhbmdlKSB7DQogICAgICAgIHNlbFByb3RvLnJlbW92ZVJhbmdlID0g
ZnVuY3Rpb24ocmFuZ2UpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmRvY1NlbGVjdGlvbi50eXBl
ID09IENPTlRST0wpIHsNCiAgICAgICAgICAgICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5k
b2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VFbGVt
ZW50ID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7DQoNCiAgICAgICAgICAgICAg
ICAvLyBDcmVhdGUgYSBuZXcgQ29udHJvbFJhbmdlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50
cyBpbiB0aGUgc2VsZWN0ZWQgQ29udHJvbFJhbmdlIG1pbnVzIHRoZQ0KICAgICAgICAgICAgICAg
IC8vIGVsZW1lbnQgY29udGFpbmVkIGJ5IHRoZSBzdXBwbGllZCByYW5nZQ0KICAgICAgICAgICAg
ICAgIHZhciBkb2MgPSBkb20uZ2V0RG9jdW1lbnQoY29udHJvbFJhbmdlLml0ZW0oMCkpOw0KICAg
ICAgICAgICAgICAgIHZhciBuZXdDb250cm9sUmFuZ2UgPSBkb20uZ2V0Qm9keShkb2MpLmNyZWF0
ZUNvbnRyb2xSYW5nZSgpOw0KICAgICAgICAgICAgICAgIHZhciBlbCwgcmVtb3ZlZCA9IGZhbHNl
Ow0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb250cm9sUmFuZ2UubGVu
Z3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgZWwgPSBjb250cm9sUmFu
Z2UuaXRlbShpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsICE9PSByYW5nZUVsZW1lbnQg
fHwgcmVtb3ZlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udHJvbFJhbmdlLmFk
ZChjb250cm9sUmFuZ2UuaXRlbShpKSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBuZXdDb250cm9sUmFuZ2Uu
c2VsZWN0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHdyYXBwZWQgc2VsZWN0
aW9uIGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2ZSBzZWxlY3Rpb24NCiAgICAgICAg
ICAgICAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHRoaXMpOw0KICAgICAgICAgICAgfSBlbHNl
IHsNCiAgICAgICAgICAgICAgICByZW1vdmVSYW5nZU1hbnVhbGx5KHRoaXMsIHJhbmdlKTsNCiAg
ICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBzZWxQcm90by5y
ZW1vdmVSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAgICAgICByZW1vdmVSYW5nZU1h
bnVhbGx5KHRoaXMsIHJhbmdlKTsNCiAgICAgICAgfTsNCiAgICB9DQoNCiAgICAvLyBEZXRlY3Rp
bmcgaWYgYSBzZWxlY3Rpb24gaXMgYmFja3dhcmRzDQogICAgdmFyIHNlbGVjdGlvbklzQmFja3dh
cmRzOw0KICAgIGlmICghdXNlRG9jdW1lbnRTZWxlY3Rpb24gJiYgc2VsZWN0aW9uSGFzQW5jaG9y
QW5kRm9jdXMgJiYgYXBpLmZlYXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSkgew0KICAgICAgICBz
ZWxlY3Rpb25Jc0JhY2t3YXJkcyA9IGZ1bmN0aW9uKHNlbCkgew0KICAgICAgICAgICAgdmFyIGJh
Y2t3YXJkcyA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKHNlbC5hbmNob3JOb2RlKSB7DQogICAg
ICAgICAgICAgICAgYmFja3dhcmRzID0gKGRvbS5jb21wYXJlUG9pbnRzKHNlbC5hbmNob3JOb2Rl
LCBzZWwuYW5jaG9yT2Zmc2V0LCBzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpID09IDEp
Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGJhY2t3YXJkczsNCiAgICAgICAg
fTsNCg0KICAgICAgICBzZWxQcm90by5pc0JhY2t3YXJkcyA9IGZ1bmN0aW9uKCkgew0KICAgICAg
ICAgICAgcmV0dXJuIHNlbGVjdGlvbklzQmFja3dhcmRzKHRoaXMpOw0KICAgICAgICB9Ow0KICAg
IH0gZWxzZSB7DQogICAgICAgIHNlbGVjdGlvbklzQmFja3dhcmRzID0gc2VsUHJvdG8uaXNCYWNr
d2FyZHMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAg
fTsNCiAgICB9DQoNCiAgICAvLyBTZWxlY3Rpb24gdGV4dA0KICAgIC8vIFRoaXMgaXMgY29uZm9y
bWFudCB0byB0aGUgbmV3IFdIQVRXRyBET00gUmFuZ2UgZHJhZnQgc3BlYyBidXQgZGlmZmVycyBm
cm9tIFdlYktpdCBhbmQgTW96aWxsYSdzIGltcGxlbWVudGF0aW9uDQogICAgc2VsUHJvdG8udG9T
dHJpbmcgPSBmdW5jdGlvbigpIHsNCg0KICAgICAgICB2YXIgcmFuZ2VUZXh0cyA9IFtdOw0KICAg
ICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5yYW5nZUNvdW50OyBpIDwgbGVuOyArK2kp
IHsNCiAgICAgICAgICAgIHJhbmdlVGV4dHNbaV0gPSAiIiArIHRoaXMuX3Jhbmdlc1tpXTsNCiAg
ICAgICAgfQ0KICAgICAgICByZXR1cm4gcmFuZ2VUZXh0cy5qb2luKCIiKTsNCiAgICB9Ow0KDQog
ICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZUluU2FtZURvY3VtZW50KHNlbCwgbm9kZSkgew0KICAgICAg
ICBpZiAoc2VsLmFuY2hvck5vZGUgJiYgKGRvbS5nZXREb2N1bWVudChzZWwuYW5jaG9yTm9kZSkg
IT09IGRvbS5nZXREb2N1bWVudChub2RlKSkpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBET01F
eGNlcHRpb24oIldST05HX0RPQ1VNRU5UX0VSUiIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAg
Ly8gTm8gY3VycmVudCBicm93c2VycyBjb25mb3JtIGZ1bGx5IHRvIHRoZSBIVE1MIDUgZHJhZnQg
c3BlYyBmb3IgdGhpcyBtZXRob2QsIHNvIFJhbmd5J3Mgb3duIG1ldGhvZCBpcyBhbHdheXMgdXNl
ZA0KICAgIHNlbFByb3RvLmNvbGxhcHNlID0gZnVuY3Rpb24obm9kZSwgb2Zmc2V0KSB7DQogICAg
ICAgIGFzc2VydE5vZGVJblNhbWVEb2N1bWVudCh0aGlzLCBub2RlKTsNCiAgICAgICAgdmFyIHJh
bmdlID0gYXBpLmNyZWF0ZVJhbmdlKGRvbS5nZXREb2N1bWVudChub2RlKSk7DQogICAgICAgIHJh
bmdlLmNvbGxhcHNlVG9Qb2ludChub2RlLCBvZmZzZXQpOw0KICAgICAgICB0aGlzLnJlbW92ZUFs
bFJhbmdlcygpOw0KICAgICAgICB0aGlzLmFkZFJhbmdlKHJhbmdlKTsNCiAgICAgICAgdGhpcy5p
c0NvbGxhcHNlZCA9IHRydWU7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9TdGFy
dCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50KSB7DQogICAgICAg
ICAgICB2YXIgcmFuZ2UgPSB0aGlzLl9yYW5nZXNbMF07DQogICAgICAgICAgICB0aGlzLmNvbGxh
cHNlKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7DQogICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTlZBTElEX1NUQVRF
X0VSUiIpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9FbmQg
PSBmdW5jdGlvbigpIHsNCiAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCkgew0KICAgICAgICAg
ICAgdmFyIHJhbmdlID0gdGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudCAtIDFdOw0KICAgICAg
ICAgICAgdGhpcy5jb2xsYXBzZShyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7
DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJ
TlZBTElEX1NUQVRFX0VSUiIpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIFRoZSBIVE1M
IDUgc3BlYyBpcyB2ZXJ5IHNwZWNpZmljIG9uIGhvdyBzZWxlY3RBbGxDaGlsZHJlbiBzaG91bGQg
YmUgaW1wbGVtZW50ZWQgc28gdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiBpcw0KICAgIC8vIG5l
dmVyIHVzZWQgYnkgUmFuZ3kuDQogICAgc2VsUHJvdG8uc2VsZWN0QWxsQ2hpbGRyZW4gPSBmdW5j
dGlvbihub2RlKSB7DQogICAgICAgIGFzc2VydE5vZGVJblNhbWVEb2N1bWVudCh0aGlzLCBub2Rl
KTsNCiAgICAgICAgdmFyIHJhbmdlID0gYXBpLmNyZWF0ZVJhbmdlKGRvbS5nZXREb2N1bWVudChu
b2RlKSk7DQogICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhub2RlKTsNCiAgICAgICAg
dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgdGhpcy5hZGRSYW5nZShyYW5nZSk7DQog
ICAgfTsNCg0KICAgIHNlbFByb3RvLmRlbGV0ZUZyb21Eb2N1bWVudCA9IGZ1bmN0aW9uKCkgew0K
ICAgICAgICAvLyBTZXBjaWFsIGJlaGF2aW91ciByZXF1aXJlZCBmb3IgQ29udHJvbCBzZWxlY3Rp
b25zDQogICAgICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIGltcGxlbWVudHNEb2NT
ZWxlY3Rpb24gJiYgdGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAg
ICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsN
CiAgICAgICAgICAgIHZhciBlbGVtZW50Ow0KICAgICAgICAgICAgd2hpbGUgKGNvbnRyb2xSYW5n
ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBlbGVtZW50ID0gY29udHJvbFJhbmdlLml0ZW0o
MCk7DQogICAgICAgICAgICAgICAgY29udHJvbFJhbmdlLnJlbW92ZShlbGVtZW50KTsNCiAgICAg
ICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7DQogICAg
ICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgfSBlbHNlIGlm
ICh0aGlzLnJhbmdlQ291bnQpIHsNCiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLmdldEFs
bFJhbmdlcygpOw0KICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAg
ICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsN
CiAgICAgICAgICAgICAgICByYW5nZXNbaV0uZGVsZXRlQ29udGVudHMoKTsNCiAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIC8vIFRoZSBIVE1MNSBzcGVjIHNheXMgbm90aGluZyBhYm91dCB3aGF0
IHRoZSBzZWxlY3Rpb24gc2hvdWxkIGNvbnRhaW4gYWZ0ZXIgY2FsbGluZyBkZWxldGVDb250ZW50
cyBvbiBlYWNoDQogICAgICAgICAgICAvLyByYW5nZS4gRmlyZWZveCBtb3ZlcyB0aGUgc2VsZWN0
aW9uIHRvIHdoZXJlIHRoZSBmaW5hbCBzZWxlY3RlZCByYW5nZSB3YXMsIHNvIHdlIGVtdWxhdGUg
dGhhdA0KICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShyYW5nZXNbbGVuIC0gMV0pOw0KICAgICAg
ICB9DQogICAgfTsNCg0KICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlIG5vbi1zdGFuZGFyZCBleHRl
bnNpb25zDQogICAgc2VsUHJvdG8uZ2V0QWxsUmFuZ2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAg
IHJldHVybiB0aGlzLl9yYW5nZXMuc2xpY2UoMCk7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLnNl
dFNpbmdsZVJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHsNCiAgICAgICAgdGhpcy5zZXRSYW5nZXMo
IFtyYW5nZV0gKTsNCiAgICB9Ow0KDQogICAgc2VsUHJvdG8uY29udGFpbnNOb2RlID0gZnVuY3Rp
b24obm9kZSwgYWxsb3dQYXJ0aWFsKSB7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0
aGlzLl9yYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIGlmICh0aGlz
Ll9yYW5nZXNbaV0uY29udGFpbnNOb2RlKG5vZGUsIGFsbG93UGFydGlhbCkpIHsNCiAgICAgICAg
ICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBy
ZXR1cm4gZmFsc2U7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLnRvSHRtbCA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICB2YXIgaHRtbCA9ICIiOw0KICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50KSB7
DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gRG9tUmFuZ2UuZ2V0UmFuZ2VEb2N1bWVudCh0
aGlzLl9yYW5nZXNbMF0pLmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgZm9yICh2
YXIgaSA9IDAsIGxlbiA9IHRoaXMuX3Jhbmdlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkgew0KICAg
ICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yYW5nZXNbaV0uY2xvbmVD
b250ZW50cygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGh0bWwgPSBjb250YWluZXIu
aW5uZXJIVE1MOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBodG1sOw0KICAgIH07DQoNCiAg
ICBmdW5jdGlvbiBpbnNwZWN0KHNlbCkgew0KICAgICAgICB2YXIgcmFuZ2VJbnNwZWN0cyA9IFtd
Ow0KICAgICAgICB2YXIgYW5jaG9yID0gbmV3IERvbVBvc2l0aW9uKHNlbC5hbmNob3JOb2RlLCBz
ZWwuYW5jaG9yT2Zmc2V0KTsNCiAgICAgICAgdmFyIGZvY3VzID0gbmV3IERvbVBvc2l0aW9uKHNl
bC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7DQogICAgICAgIHZhciBuYW1lID0gKHR5cGVv
ZiBzZWwuZ2V0TmFtZSA9PSAiZnVuY3Rpb24iKSA/IHNlbC5nZXROYW1lKCkgOiAiU2VsZWN0aW9u
IjsNCg0KICAgICAgICBpZiAodHlwZW9mIHNlbC5yYW5nZUNvdW50ICE9ICJ1bmRlZmluZWQiKSB7
DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsLnJhbmdlQ291bnQ7IGkgPCBs
ZW47ICsraSkgew0KICAgICAgICAgICAgICAgIHJhbmdlSW5zcGVjdHNbaV0gPSBEb21SYW5nZS5p
bnNwZWN0KHNlbC5nZXRSYW5nZUF0KGkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAg
ICAgICByZXR1cm4gIlsiICsgbmFtZSArICIoUmFuZ2VzOiAiICsgcmFuZ2VJbnNwZWN0cy5qb2lu
KCIsICIpICsNCiAgICAgICAgICAgICAgICAiKShhbmNob3I6ICIgKyBhbmNob3IuaW5zcGVjdCgp
ICsgIiwgZm9jdXM6ICIgKyBmb2N1cy5pbnNwZWN0KCkgKyAiXSI7DQoNCiAgICB9DQoNCiAgICBz
ZWxQcm90by5nZXROYW1lID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiAiV3JhcHBlZFNl
bGVjdGlvbiI7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmluc3BlY3QgPSBmdW5jdGlvbigpIHsN
CiAgICAgICAgcmV0dXJuIGluc3BlY3QodGhpcyk7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmRl
dGFjaCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB0aGlzLndpblt3aW5kb3dQcm9wZXJ0eU5hbWVd
ID0gbnVsbDsNCiAgICAgICAgdGhpcy53aW4gPSB0aGlzLmFuY2hvck5vZGUgPSB0aGlzLmZvY3Vz
Tm9kZSA9IG51bGw7DQogICAgfTsNCg0KICAgIFdyYXBwZWRTZWxlY3Rpb24uaW5zcGVjdCA9IGlu
c3BlY3Q7DQoNCiAgICBhcGkuU2VsZWN0aW9uID0gV3JhcHBlZFNlbGVjdGlvbjsNCg0KICAgIGFw
aS5zZWxlY3Rpb25Qcm90b3R5cGUgPSBzZWxQcm90bzsNCg0KICAgIGFwaS5hZGRDcmVhdGVNaXNz
aW5nTmF0aXZlQXBpTGlzdGVuZXIoZnVuY3Rpb24od2luKSB7DQogICAgICAgIGlmICh0eXBlb2Yg
d2luLmdldFNlbGVjdGlvbiA9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgd2luLmdldFNl
bGVjdGlvbiA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0U2Vs
ZWN0aW9uKHRoaXMpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICB3aW4gPSBu
dWxsOw0KICAgIH0pOw0KfSk7DQo=
</content></attachment><attachment>
<filename>rangy-core-1.3.js</filename>
<filesize>143947</filesize>
<author>XWiki.Admin</author>
<date>1372254752000</date>
<version>1.1</version>
<comment></comment><content>LyoqDQogKiBSYW5neSwgYSBjcm9zcy1icm93c2VyIEphdmFTY3JpcHQgcmFuZ2UgYW5kIHNlbGVj
dGlvbiBsaWJyYXJ5DQogKiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcmFuZ3kvDQogKg0KICog
Q29weXJpZ2h0IDIwMTMsIFRpbSBEb3duDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vu
c2UuDQogKiBWZXJzaW9uOiAxLjNhbHBoYS43NzINCiAqIEJ1aWxkIGRhdGU6IDI2IEZlYnJ1YXJ5
IDIwMTMNCiAqLw0KDQp2YXIgcmFuZ3k7DQpyYW5neSA9IHJhbmd5IHx8IChmdW5jdGlvbigpIHsN
Cg0KICAgIHZhciBPQkpFQ1QgPSAib2JqZWN0IiwgRlVOQ1RJT04gPSAiZnVuY3Rpb24iLCBVTkRF
RklORUQgPSAidW5kZWZpbmVkIjsNCg0KICAgIC8vIE1pbmltYWwgc2V0IG9mIHByb3BlcnRpZXMg
cmVxdWlyZWQgZm9yIERPTSBMZXZlbCAyIFJhbmdlIGNvbXBsaWFuY2UuIENvbXBhcmlzb24gY29u
c3RhbnRzIHN1Y2ggYXMgU1RBUlRfVE9fU1RBUlQNCiAgICAvLyBhcmUgb21pdHRlZCBiZWNhdXNl
IHJhbmdlcyBpbiBLSFRNTCBkbyBub3QgaGF2ZSB0aGVtIGJ1dCBvdGhlcndpc2Ugd29yayBwZXJm
ZWN0bHkgd2VsbC4gU2VlIGlzc3VlIDExMy4NCiAgICB2YXIgZG9tUmFuZ2VQcm9wZXJ0aWVzID0g
WyJzdGFydENvbnRhaW5lciIsICJzdGFydE9mZnNldCIsICJlbmRDb250YWluZXIiLCAiZW5kT2Zm
c2V0IiwgImNvbGxhcHNlZCIsDQogICAgICAgICJjb21tb25BbmNlc3RvckNvbnRhaW5lciJdOw0K
DQogICAgLy8gTWluaW1hbCBzZXQgb2YgbWV0aG9kcyByZXF1aXJlZCBmb3IgRE9NIExldmVsIDIg
UmFuZ2UgY29tcGxpYW5jZQ0KICAgIHZhciBkb21SYW5nZU1ldGhvZHMgPSBbInNldFN0YXJ0Iiwg
InNldFN0YXJ0QmVmb3JlIiwgInNldFN0YXJ0QWZ0ZXIiLCAic2V0RW5kIiwgInNldEVuZEJlZm9y
ZSIsDQogICAgICAgICJzZXRFbmRBZnRlciIsICJjb2xsYXBzZSIsICJzZWxlY3ROb2RlIiwgInNl
bGVjdE5vZGVDb250ZW50cyIsICJjb21wYXJlQm91bmRhcnlQb2ludHMiLCAiZGVsZXRlQ29udGVu
dHMiLA0KICAgICAgICAiZXh0cmFjdENvbnRlbnRzIiwgImNsb25lQ29udGVudHMiLCAiaW5zZXJ0
Tm9kZSIsICJzdXJyb3VuZENvbnRlbnRzIiwgImNsb25lUmFuZ2UiLCAidG9TdHJpbmciLCAiZGV0
YWNoIl07DQoNCiAgICB2YXIgdGV4dFJhbmdlUHJvcGVydGllcyA9IFsiYm91bmRpbmdIZWlnaHQi
LCAiYm91bmRpbmdMZWZ0IiwgImJvdW5kaW5nVG9wIiwgImJvdW5kaW5nV2lkdGgiLCAiaHRtbFRl
eHQiLCAidGV4dCJdOw0KDQogICAgLy8gU3Vic2V0IG9mIFRleHRSYW5nZSdzIGZ1bGwgc2V0IG9m
IG1ldGhvZHMgdGhhdCB3ZSdyZSBpbnRlcmVzdGVkIGluDQogICAgdmFyIHRleHRSYW5nZU1ldGhv
ZHMgPSBbImNvbGxhcHNlIiwgImNvbXBhcmVFbmRQb2ludHMiLCAiZHVwbGljYXRlIiwgIm1vdmVU
b0VsZW1lbnRUZXh0IiwgInBhcmVudEVsZW1lbnQiLCAic2VsZWN0IiwNCiAgICAgICAgInNldEVu
ZFBvaW50IiwgImdldEJvdW5kaW5nQ2xpZW50UmVjdCJdOw0KDQogICAgLyotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgIC8vIFRy
aW8gb2YgZnVuY3Rpb25zIHRha2VuIGZyb20gUGV0ZXIgTWljaGF1eCdzIGFydGljbGU6DQogICAg
Ly8gaHR0cDovL3BldGVyLm1pY2hhdXguY2EvYXJ0aWNsZXMvZmVhdHVyZS1kZXRlY3Rpb24tc3Rh
dGUtb2YtdGhlLWFydC1icm93c2VyLXNjcmlwdGluZw0KICAgIGZ1bmN0aW9uIGlzSG9zdE1ldGhv
ZChvLCBwKSB7DQogICAgICAgIHZhciB0ID0gdHlwZW9mIG9bcF07DQogICAgICAgIHJldHVybiB0
ID09IEZVTkNUSU9OIHx8ICghISh0ID09IE9CSkVDVCAmJiBvW3BdKSkgfHwgdCA9PSAidW5rbm93
biI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNIb3N0T2JqZWN0KG8sIHApIHsNCiAgICAgICAg
cmV0dXJuICEhKHR5cGVvZiBvW3BdID09IE9CSkVDVCAmJiBvW3BdKTsNCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBpc0hvc3RQcm9wZXJ0eShvLCBwKSB7DQogICAgICAgIHJldHVybiB0eXBlb2Ygb1tw
XSAhPSBVTkRFRklORUQ7DQogICAgfQ0KDQogICAgLy8gQ3JlYXRlcyBhIGNvbnZlbmllbmNlIGZ1
bmN0aW9uIHRvIHNhdmUgdmVyYm9zZSByZXBlYXRlZCBjYWxscyB0byB0ZXN0cyBmdW5jdGlvbnMN
CiAgICBmdW5jdGlvbiBjcmVhdGVNdWx0aXBsZVByb3BlcnR5VGVzdCh0ZXN0RnVuYykgew0KICAg
ICAgICByZXR1cm4gZnVuY3Rpb24obywgcHJvcHMpIHsNCiAgICAgICAgICAgIHZhciBpID0gcHJv
cHMubGVuZ3RoOw0KICAgICAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAgIGlm
ICghdGVzdEZ1bmMobywgcHJvcHNbaV0pKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBm
YWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1
cm4gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICB9DQoNCiAgICAvLyBOZXh0IHRyaW8gb2YgZnVuY3Rp
b25zIGFyZSBhIGNvbnZlbmllbmNlIHRvIHNhdmUgdmVyYm9zZSByZXBlYXRlZCBjYWxscyB0byBw
cmV2aW91cyB0d28gZnVuY3Rpb25zDQogICAgdmFyIGFyZUhvc3RNZXRob2RzID0gY3JlYXRlTXVs
dGlwbGVQcm9wZXJ0eVRlc3QoaXNIb3N0TWV0aG9kKTsNCiAgICB2YXIgYXJlSG9zdE9iamVjdHMg
PSBjcmVhdGVNdWx0aXBsZVByb3BlcnR5VGVzdChpc0hvc3RPYmplY3QpOw0KICAgIHZhciBhcmVI
b3N0UHJvcGVydGllcyA9IGNyZWF0ZU11bHRpcGxlUHJvcGVydHlUZXN0KGlzSG9zdFByb3BlcnR5
KTsNCg0KICAgIGZ1bmN0aW9uIGlzVGV4dFJhbmdlKHJhbmdlKSB7DQogICAgICAgIHJldHVybiBy
YW5nZSAmJiBhcmVIb3N0TWV0aG9kcyhyYW5nZSwgdGV4dFJhbmdlTWV0aG9kcykgJiYgYXJlSG9z
dFByb3BlcnRpZXMocmFuZ2UsIHRleHRSYW5nZVByb3BlcnRpZXMpOw0KICAgIH0NCiAgICANCiAg
ICBmdW5jdGlvbiBnZXRCb2R5KGRvYykgew0KICAgICAgICByZXR1cm4gaXNIb3N0T2JqZWN0KGRv
YywgImJvZHkiKSA/IGRvYy5ib2R5IDogZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5Iilb
MF07DQogICAgfQ0KDQogICAgdmFyIG1vZHVsZXMgPSB7fTsNCiAgICANCiAgICB2YXIgYXBpID0g
ew0KICAgICAgICB2ZXJzaW9uOiAiMS4zYWxwaGEuNzcyIiwNCiAgICAgICAgaW5pdGlhbGl6ZWQ6
IGZhbHNlLA0KICAgICAgICBzdXBwb3J0ZWQ6IHRydWUsDQoNCiAgICAgICAgdXRpbDogew0KICAg
ICAgICAgICAgaXNIb3N0TWV0aG9kOiBpc0hvc3RNZXRob2QsDQogICAgICAgICAgICBpc0hvc3RP
YmplY3Q6IGlzSG9zdE9iamVjdCwNCiAgICAgICAgICAgIGlzSG9zdFByb3BlcnR5OiBpc0hvc3RQ
cm9wZXJ0eSwNCiAgICAgICAgICAgIGFyZUhvc3RNZXRob2RzOiBhcmVIb3N0TWV0aG9kcywNCiAg
ICAgICAgICAgIGFyZUhvc3RPYmplY3RzOiBhcmVIb3N0T2JqZWN0cywNCiAgICAgICAgICAgIGFy
ZUhvc3RQcm9wZXJ0aWVzOiBhcmVIb3N0UHJvcGVydGllcywNCiAgICAgICAgICAgIGlzVGV4dFJh
bmdlOiBpc1RleHRSYW5nZSwNCiAgICAgICAgICAgIGdldEJvZHk6IGdldEJvZHkNCiAgICAgICAg
fSwNCg0KICAgICAgICBmZWF0dXJlczoge30sDQoNCiAgICAgICAgbW9kdWxlczogbW9kdWxlcywN
CiAgICAgICAgY29uZmlnOiB7DQogICAgICAgICAgICBhbGVydE9uRmFpbDogdHJ1ZSwNCiAgICAg
ICAgICAgIGFsZXJ0T25XYXJuOiBmYWxzZSwNCiAgICAgICAgICAgIHByZWZlclRleHRSYW5nZTog
ZmFsc2UNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBjb25zb2xlTG9nKG1zZykg
ew0KICAgICAgICBpZiAoaXNIb3N0T2JqZWN0KHdpbmRvdywgImNvbnNvbGUiKSAmJiBpc0hvc3RN
ZXRob2Qod2luZG93LmNvbnNvbGUsICJsb2ciKSkgew0KICAgICAgICAgICAgd2luZG93LmNvbnNv
bGUubG9nKG1zZyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbGVydE9yTG9n
KG1zZywgc2hvdWxkQWxlcnQpIHsNCiAgICAgICAgaWYgKHNob3VsZEFsZXJ0KSB7DQogICAgICAg
ICAgICB3aW5kb3cuYWxlcnQobXNnKTsNCiAgICAgICAgfSBlbHNlICB7DQogICAgICAgICAgICBj
b25zb2xlTG9nKG1zZyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmYWlsKHJl
YXNvbikgew0KICAgICAgICBhcGkuaW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgICAgICBhcGkuc3Vw
cG9ydGVkID0gZmFsc2U7DQogICAgICAgIGFsZXJ0T3JMb2coIlJhbmd5IGlzIG5vdCBzdXBwb3J0
ZWQgb24gdGhpcyBwYWdlIGluIHlvdXIgYnJvd3Nlci4gUmVhc29uOiAiICsgcmVhc29uLCBhcGku
Y29uZmlnLmFsZXJ0T25GYWlsKTsNCiAgICB9DQoNCiAgICBhcGkuZmFpbCA9IGZhaWw7DQoNCiAg
ICBmdW5jdGlvbiB3YXJuKG1zZykgew0KICAgICAgICBhbGVydE9yTG9nKCJSYW5neSB3YXJuaW5n
OiAiICsgbXNnLCBhcGkuY29uZmlnLmFsZXJ0T25XYXJuKTsNCiAgICB9DQoNCiAgICBhcGkud2Fy
biA9IHdhcm47DQoNCiAgICAvLyBBZGQgdXRpbGl0eSBleHRlbmQoKSBtZXRob2QNCiAgICBpZiAo
e30uaGFzT3duUHJvcGVydHkpIHsNCiAgICAgICAgYXBpLnV0aWwuZXh0ZW5kID0gZnVuY3Rpb24o
b2JqLCBwcm9wcywgZGVlcCkgew0KICAgICAgICAgICAgdmFyIG8sIHA7DQogICAgICAgICAgICBm
b3IgKHZhciBpIGluIHByb3BzKSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blBy
b3BlcnR5KGkpKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBvYmpbaV07DQogICAgICAgICAg
ICAgICAgICAgIHAgPSBwcm9wc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgLy9pZiAoZGVlcCkg
YWxlcnQoW28gIT09IG51bGwsIHR5cGVvZiBvID09ICJvYmplY3QiLCBwICE9PSBudWxsLCB0eXBl
b2YgcCA9PSAib2JqZWN0Il0pDQogICAgICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIG8gIT09
IG51bGwgJiYgdHlwZW9mIG8gPT0gIm9iamVjdCIgJiYgcCAhPT0gbnVsbCAmJiB0eXBlb2YgcCA9
PSAib2JqZWN0Iikgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnV0aWwuZXh0ZW5kKG8s
IHAsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG9i
altpXSA9IHA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
cmV0dXJuIG9iajsNCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBmYWlsKCJoYXNP
d25Qcm9wZXJ0eSBub3Qgc3VwcG9ydGVkIik7DQogICAgfQ0KDQogICAgLy8gVGVzdCB3aGV0aGVy
IEFycmF5LnByb3RvdHlwZS5zbGljZSBjYW4gYmUgcmVsaWVkIG9uIGZvciBOb2RlTGlzdHMgYW5k
IHVzZSBhbiBhbHRlcm5hdGl2ZSB0b0FycmF5KCkgaWYgbm90DQogICAgKGZ1bmN0aW9uKCkgew0K
ICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAg
ZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpKTsNCiAgICAgICAg
dmFyIHNsaWNlID0gW10uc2xpY2U7DQogICAgICAgIHZhciB0b0FycmF5Ow0KICAgICAgICB0cnkg
ew0KICAgICAgICAgICAgaWYgKHNsaWNlLmNhbGwoZWwuY2hpbGROb2RlcywgMClbMF0ubm9kZVR5
cGUgPT0gMSkgew0KICAgICAgICAgICAgICAgIHRvQXJyYXkgPSBmdW5jdGlvbihhcnJheUxpa2Up
IHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXlMaWtlLCAwKTsN
CiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlKSB7
fQ0KDQogICAgICAgIGlmICghdG9BcnJheSkgew0KICAgICAgICAgICAgdG9BcnJheSA9IGZ1bmN0
aW9uKGFycmF5TGlrZSkgew0KICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTsNCiAgICAgICAg
ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXlMaWtlLmxlbmd0aDsgaSA8IGxlbjsg
KytpKSB7DQogICAgICAgICAgICAgICAgICAgIGFycltpXSA9IGFycmF5TGlrZVtpXTsNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGFycjsNCiAgICAgICAgICAgIH07
DQogICAgICAgIH0NCg0KICAgICAgICBhcGkudXRpbC50b0FycmF5ID0gdG9BcnJheTsNCiAgICB9
KSgpOw0KDQoNCiAgICAvLyBWZXJ5IHNpbXBsZSBldmVudCBoYW5kbGVyIHdyYXBwZXIgZnVuY3Rp
b24gdGhhdCBkb2Vzbid0IGF0dGVtcHQgdG8gc29sdmUgaXNzdWUgc3VjaCBhcyAidGhpcyIgaGFu
ZGxpbmcgb3INCiAgICAvLyBub3JtYWxpemF0aW9uIG9mIGV2ZW50IHByb3BlcnRpZXMNCiAgICB2
YXIgYWRkTGlzdGVuZXI7DQogICAgaWYgKGlzSG9zdE1ldGhvZChkb2N1bWVudCwgImFkZEV2ZW50
TGlzdGVuZXIiKSkgew0KICAgICAgICBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKG9iaiwgZXZlbnRU
eXBlLCBsaXN0ZW5lcikgew0KICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRU
eXBlLCBsaXN0ZW5lciwgZmFsc2UpOw0KICAgICAgICB9Ow0KICAgIH0gZWxzZSBpZiAoaXNIb3N0
TWV0aG9kKGRvY3VtZW50LCAiYXR0YWNoRXZlbnQiKSkgew0KICAgICAgICBhZGRMaXN0ZW5lciA9
IGZ1bmN0aW9uKG9iaiwgZXZlbnRUeXBlLCBsaXN0ZW5lcikgew0KICAgICAgICAgICAgb2JqLmF0
dGFjaEV2ZW50KCJvbiIgKyBldmVudFR5cGUsIGxpc3RlbmVyKTsNCiAgICAgICAgfTsNCiAgICB9
IGVsc2Ugew0KICAgICAgICBmYWlsKCJEb2N1bWVudCBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIGFk
ZEV2ZW50TGlzdGVuZXIgb3IgYXR0YWNoRXZlbnQgbWV0aG9kIik7DQogICAgfQ0KICAgIA0KICAg
IGFwaS51dGlsLmFkZExpc3RlbmVyID0gYWRkTGlzdGVuZXI7DQoNCiAgICB2YXIgaW5pdExpc3Rl
bmVycyA9IFtdOw0KICAgIA0KICAgIGZ1bmN0aW9uIGdldEVycm9yRGVzYyhleCkgew0KICAgICAg
ICByZXR1cm4gZXgubWVzc2FnZSB8fCBleC5kZXNjcmlwdGlvbiB8fCBTdHJpbmcoZXgpOw0KICAg
IH0NCg0KICAgIC8vIEluaXRpYWxpemF0aW9uDQogICAgZnVuY3Rpb24gaW5pdCgpIHsNCiAgICAg
ICAgaWYgKGFwaS5pbml0aWFsaXplZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9
DQogICAgICAgIHZhciB0ZXN0UmFuZ2U7DQogICAgICAgIHZhciBpbXBsZW1lbnRzRG9tUmFuZ2Ug
PSBmYWxzZSwgaW1wbGVtZW50c1RleHRSYW5nZSA9IGZhbHNlOw0KDQogICAgICAgIC8vIEZpcnN0
LCBwZXJmb3JtIGJhc2ljIGZlYXR1cmUgdGVzdHMNCg0KICAgICAgICBpZiAoaXNIb3N0TWV0aG9k
KGRvY3VtZW50LCAiY3JlYXRlUmFuZ2UiKSkgew0KICAgICAgICAgICAgdGVzdFJhbmdlID0gZG9j
dW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIGlmIChhcmVIb3N0TWV0aG9kcyh0ZXN0
UmFuZ2UsIGRvbVJhbmdlTWV0aG9kcykgJiYgYXJlSG9zdFByb3BlcnRpZXModGVzdFJhbmdlLCBk
b21SYW5nZVByb3BlcnRpZXMpKSB7DQogICAgICAgICAgICAgICAgaW1wbGVtZW50c0RvbVJhbmdl
ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRlc3RSYW5nZS5kZXRhY2goKTsN
CiAgICAgICAgfQ0KDQogICAgICAgIHZhciBib2R5ID0gZ2V0Qm9keShkb2N1bWVudCk7DQogICAg
ICAgIGlmICghYm9keSB8fCBib2R5Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT0gImJvZHkiKSB7
DQogICAgICAgICAgICBmYWlsKCJObyBib2R5IGVsZW1lbnQgZm91bmQiKTsNCiAgICAgICAgICAg
IHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChib2R5ICYmIGlzSG9zdE1ldGhvZChi
b2R5LCAiY3JlYXRlVGV4dFJhbmdlIikpIHsNCiAgICAgICAgICAgIHRlc3RSYW5nZSA9IGJvZHku
Y3JlYXRlVGV4dFJhbmdlKCk7DQogICAgICAgICAgICBpZiAoaXNUZXh0UmFuZ2UodGVzdFJhbmdl
KSkgew0KICAgICAgICAgICAgICAgIGltcGxlbWVudHNUZXh0UmFuZ2UgPSB0cnVlOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFpbXBsZW1lbnRzRG9tUmFuZ2UgJiYg
IWltcGxlbWVudHNUZXh0UmFuZ2UpIHsNCiAgICAgICAgICAgIGZhaWwoIk5laXRoZXIgUmFuZ2Ug
bm9yIFRleHRSYW5nZSBhcmUgYXZhaWxhYmxlIik7DQogICAgICAgICAgICByZXR1cm47DQogICAg
ICAgIH0NCg0KICAgICAgICBhcGkuaW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgICAgICBhcGkuZmVh
dHVyZXMgPSB7DQogICAgICAgICAgICBpbXBsZW1lbnRzRG9tUmFuZ2U6IGltcGxlbWVudHNEb21S
YW5nZSwNCiAgICAgICAgICAgIGltcGxlbWVudHNUZXh0UmFuZ2U6IGltcGxlbWVudHNUZXh0UmFu
Z2UNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBJbml0aWFsaXplIG1vZHVsZXMNCiAgICAgICAg
dmFyIG1vZHVsZSwgZXJyb3JNZXNzYWdlOw0KICAgICAgICBmb3IgKHZhciBtb2R1bGVOYW1lIGlu
IG1vZHVsZXMpIHsNCiAgICAgICAgICAgIGlmICggKG1vZHVsZSA9IG1vZHVsZXNbbW9kdWxlTmFt
ZV0pIGluc3RhbmNlb2YgTW9kdWxlICkgew0KICAgICAgICAgICAgICAgIG1vZHVsZS5pbml0KCk7
DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENhbGwgaW5p
dCBsaXN0ZW5lcnMNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGluaXRMaXN0ZW5lcnMu
bGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAg
ICAgaW5pdExpc3RlbmVyc1tpXShhcGkpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAg
ICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAiUmFuZ3kgaW5pdCBsaXN0ZW5lciB0aHJldyBh
biBleGNlcHRpb24uIENvbnRpbnVpbmcuIERldGFpbDogIiArIGdldEVycm9yRGVzYyhleCk7DQog
ICAgICAgICAgICAgICAgY29uc29sZUxvZyhlcnJvck1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0K
ICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gQWxsb3cgZXh0ZXJuYWwgc2NyaXB0cyB0byBpbml0
aWFsaXplIHRoaXMgbGlicmFyeSBpbiBjYXNlIGl0J3MgbG9hZGVkIGFmdGVyIHRoZSBkb2N1bWVu
dCBoYXMgbG9hZGVkDQogICAgYXBpLmluaXQgPSBpbml0Ow0KDQogICAgLy8gRXhlY3V0ZSBsaXN0
ZW5lciBpbW1lZGlhdGVseSBpZiBhbHJlYWR5IGluaXRpYWxpemVkDQogICAgYXBpLmFkZEluaXRM
aXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7DQogICAgICAgIGlmIChhcGkuaW5pdGlhbGl6
ZWQpIHsNCiAgICAgICAgICAgIGxpc3RlbmVyKGFwaSk7DQogICAgICAgIH0gZWxzZSB7DQogICAg
ICAgICAgICBpbml0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9DQogICAgfTsN
Cg0KICAgIHZhciBjcmVhdGVNaXNzaW5nTmF0aXZlQXBpTGlzdGVuZXJzID0gW107DQoNCiAgICBh
cGkuYWRkQ3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIp
IHsNCiAgICAgICAgY3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVycy5wdXNoKGxpc3RlbmVy
KTsNCiAgICB9Ow0KDQogICAgZnVuY3Rpb24gY3JlYXRlTWlzc2luZ05hdGl2ZUFwaSh3aW4pIHsN
CiAgICAgICAgd2luID0gd2luIHx8IHdpbmRvdzsNCiAgICAgICAgaW5pdCgpOw0KDQogICAgICAg
IC8vIE5vdGlmeSBsaXN0ZW5lcnMNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNyZWF0
ZU1pc3NpbmdOYXRpdmVBcGlMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAg
ICAgICAgIGNyZWF0ZU1pc3NpbmdOYXRpdmVBcGlMaXN0ZW5lcnNbaV0od2luKTsNCiAgICAgICAg
fQ0KICAgIH0NCg0KICAgIGFwaS5jcmVhdGVNaXNzaW5nTmF0aXZlQXBpID0gY3JlYXRlTWlzc2lu
Z05hdGl2ZUFwaTsNCg0KICAgIGZ1bmN0aW9uIE1vZHVsZShuYW1lLCBpbml0aWFsaXplcikgew0K
ICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFs
c2U7DQogICAgICAgIHRoaXMuc3VwcG9ydGVkID0gZmFsc2U7DQogICAgICAgIHRoaXMuaW5pdCA9
IGluaXRpYWxpemVyOw0KICAgIH0NCg0KICAgIE1vZHVsZS5wcm90b3R5cGUgPSB7DQogICAgICAg
IGZhaWw6IGZ1bmN0aW9uKHJlYXNvbikgew0KICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9
IHRydWU7DQogICAgICAgICAgICB0aGlzLnN1cHBvcnRlZCA9IGZhbHNlOw0KICAgICAgICAgICAg
dGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgJyIgKyB0aGlzLm5hbWUgKyAiJyBmYWlsZWQgdG8gbG9h
ZDogIiArIHJlYXNvbik7DQogICAgICAgIH0sDQoNCiAgICAgICAgd2FybjogZnVuY3Rpb24obXNn
KSB7DQogICAgICAgICAgICBhcGkud2FybigiTW9kdWxlICIgKyB0aGlzLm5hbWUgKyAiOiAiICsg
bXNnKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZXByZWNhdGlvbk5vdGljZTogZnVuY3Rpb24o
ZGVwcmVjYXRlZCwgcmVwbGFjZW1lbnQpIHsNCiAgICAgICAgICAgIGFwaS53YXJuKCJERVBSRUNB
VEVEOiAiICsgZGVwcmVjYXRlZCArICIgaW4gbW9kdWxlICIgKyB0aGlzLm5hbWUgKyAiaXMgZGVw
cmVjYXRlZC4gUGxlYXNlIHVzZSAiDQogICAgICAgICAgICAgICAgKyByZXBsYWNlbWVudCArICIg
aW5zdGVhZCIpOw0KICAgICAgICB9LA0KDQogICAgICAgIGNyZWF0ZUVycm9yOiBmdW5jdGlvbiht
c2cpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoIkVycm9yIGluIFJhbmd5ICIgKyB0
aGlzLm5hbWUgKyAiIG1vZHVsZTogIiArIG1zZyk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAg
YXBpLmNyZWF0ZU1vZHVsZSA9IGZ1bmN0aW9uKG5hbWUsIGluaXRGdW5jKSB7DQogICAgICAgIHZh
ciBtb2R1bGUgPSBuZXcgTW9kdWxlKG5hbWUsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYg
KCFtb2R1bGUuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgICAgICAgICBtb2R1bGUuaW5pdGlhbGl6
ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGlu
aXRGdW5jKGFwaSwgbW9kdWxlKTsNCiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLnN1cHBvcnRl
ZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAg
ICAgICAgdmFyIGVycm9yTWVzc2FnZSA9ICJNb2R1bGUgJyIgKyBuYW1lICsgIicgZmFpbGVkIHRv
IGxvYWQ6ICIgKyBnZXRFcnJvckRlc2MoZXgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xl
TG9nKGVycm9yTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9KTsNCiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG1vZHVsZTsNCiAgICB9Ow0KDQogICAg
YXBpLnJlcXVpcmVNb2R1bGVzID0gZnVuY3Rpb24obW9kdWxlTmFtZXMpIHsNCiAgICAgICAgZm9y
ICh2YXIgaSA9IDAsIGxlbiA9IG1vZHVsZU5hbWVzLmxlbmd0aCwgbW9kdWxlLCBtb2R1bGVOYW1l
OyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICAgIG1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lc1tp
XTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbW9kdWxlID0gbW9kdWxlc1ttb2R1bGVOYW1l
XTsNCiAgICAgICAgICAgIGlmICghbW9kdWxlIHx8ICEobW9kdWxlIGluc3RhbmNlb2YgTW9kdWxl
KSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicmVxdWlyZWQgbW9kdWxlICci
ICsgbW9kdWxlTmFtZSArICInIG5vdCBmb3VuZCIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICBtb2R1bGUuaW5pdCgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIW1vZHVs
ZS5zdXBwb3J0ZWQpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInJlcXVpcmVk
IG1vZHVsZSAnIiArIG1vZHVsZU5hbWUgKyAiJyBub3Qgc3VwcG9ydGVkIik7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgIC8vIFdhaXQgZm9yIGRvY3Vt
ZW50IHRvIGxvYWQgYmVmb3JlIHJ1bm5pbmcgdGVzdHMNCg0KICAgIHZhciBkb2NSZWFkeSA9IGZh
bHNlOw0KDQogICAgdmFyIGxvYWRIYW5kbGVyID0gZnVuY3Rpb24oZSkgew0KICAgICAgICBpZiAo
IWRvY1JlYWR5KSB7DQogICAgICAgICAgICBkb2NSZWFkeSA9IHRydWU7DQogICAgICAgICAgICBp
ZiAoIWFwaS5pbml0aWFsaXplZCkgew0KICAgICAgICAgICAgICAgIGluaXQoKTsNCiAgICAgICAg
ICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICAvLyBUZXN0IHdoZXRoZXIgd2UgaGF2ZSB3
aW5kb3cgYW5kIGRvY3VtZW50IG9iamVjdHMgdGhhdCB3ZSB3aWxsIG5lZWQNCiAgICBpZiAodHlw
ZW9mIHdpbmRvdyA9PSBVTkRFRklORUQpIHsNCiAgICAgICAgZmFpbCgiTm8gd2luZG93IGZvdW5k
Iik7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PSBV
TkRFRklORUQpIHsNCiAgICAgICAgZmFpbCgiTm8gZG9jdW1lbnQgZm91bmQiKTsNCiAgICAgICAg
cmV0dXJuOw0KICAgIH0NCg0KICAgIGlmIChpc0hvc3RNZXRob2QoZG9jdW1lbnQsICJhZGRFdmVu
dExpc3RlbmVyIikpIHsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29u
dGVudExvYWRlZCIsIGxvYWRIYW5kbGVyLCBmYWxzZSk7DQogICAgfQ0KDQogICAgLy8gQWRkIGEg
ZmFsbGJhY2sgaW4gY2FzZSB0aGUgRE9NQ29udGVudExvYWRlZCBldmVudCBpc24ndCBzdXBwb3J0
ZWQNCiAgICBhZGRMaXN0ZW5lcih3aW5kb3csICJsb2FkIiwgbG9hZEhhbmRsZXIpOw0KDQogICAg
cmV0dXJuIGFwaTsNCn0pKCk7DQoKcmFuZ3kuY3JlYXRlTW9kdWxlKCJEb21VdGlsIiwgZnVuY3Rp
b24oYXBpLCBtb2R1bGUpIHsNCiAgICB2YXIgVU5ERUYgPSAidW5kZWZpbmVkIjsNCiAgICB2YXIg
dXRpbCA9IGFwaS51dGlsOw0KDQogICAgLy8gUGVyZm9ybSBmZWF0dXJlIHRlc3RzDQogICAgaWYg
KCF1dGlsLmFyZUhvc3RNZXRob2RzKGRvY3VtZW50LCBbImNyZWF0ZURvY3VtZW50RnJhZ21lbnQi
LCAiY3JlYXRlRWxlbWVudCIsICJjcmVhdGVUZXh0Tm9kZSJdKSkgew0KICAgICAgICBtb2R1bGUu
ZmFpbCgiZG9jdW1lbnQgbWlzc2luZyBhIE5vZGUgY3JlYXRpb24gbWV0aG9kIik7DQogICAgfQ0K
DQogICAgaWYgKCF1dGlsLmlzSG9zdE1ldGhvZChkb2N1bWVudCwgImdldEVsZW1lbnRzQnlUYWdO
YW1lIikpIHsNCiAgICAgICAgbW9kdWxlLmZhaWwoImRvY3VtZW50IG1pc3NpbmcgZ2V0RWxlbWVu
dHNCeVRhZ05hbWUgbWV0aG9kIik7DQogICAgfQ0KDQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3Jl
YXRlRWxlbWVudCgiZGl2Iik7DQogICAgaWYgKCF1dGlsLmFyZUhvc3RNZXRob2RzKGVsLCBbImlu
c2VydEJlZm9yZSIsICJhcHBlbmRDaGlsZCIsICJjbG9uZU5vZGUiXSB8fA0KICAgICAgICAgICAg
IXV0aWwuYXJlSG9zdE9iamVjdHMoZWwsIFsicHJldmlvdXNTaWJsaW5nIiwgIm5leHRTaWJsaW5n
IiwgImNoaWxkTm9kZXMiLCAicGFyZW50Tm9kZSJdKSkpIHsNCiAgICAgICAgbW9kdWxlLmZhaWwo
IkluY29tcGxldGUgRWxlbWVudCBpbXBsZW1lbnRhdGlvbiIpOw0KICAgIH0NCg0KICAgIC8vIGlu
bmVySFRNTCBpcyByZXF1aXJlZCBmb3IgUmFuZ2UncyBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQg
bWV0aG9kDQogICAgaWYgKCF1dGlsLmlzSG9zdFByb3BlcnR5KGVsLCAiaW5uZXJIVE1MIikpIHsN
CiAgICAgICAgbW9kdWxlLmZhaWwoIkVsZW1lbnQgaXMgbWlzc2luZyBpbm5lckhUTUwgcHJvcGVy
dHkiKTsNCiAgICB9DQoNCiAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9k
ZSgidGVzdCIpOw0KICAgIGlmICghdXRpbC5hcmVIb3N0TWV0aG9kcyh0ZXh0Tm9kZSwgWyJzcGxp
dFRleHQiLCAiZGVsZXRlRGF0YSIsICJpbnNlcnREYXRhIiwgImFwcGVuZERhdGEiLCAiY2xvbmVO
b2RlIl0gfHwNCiAgICAgICAgICAgICF1dGlsLmFyZUhvc3RPYmplY3RzKGVsLCBbInByZXZpb3Vz
U2libGluZyIsICJuZXh0U2libGluZyIsICJjaGlsZE5vZGVzIiwgInBhcmVudE5vZGUiXSkgfHwN
CiAgICAgICAgICAgICF1dGlsLmFyZUhvc3RQcm9wZXJ0aWVzKHRleHROb2RlLCBbImRhdGEiXSkp
KSB7DQogICAgICAgIG1vZHVsZS5mYWlsKCJJbmNvbXBsZXRlIFRleHQgTm9kZSBpbXBsZW1lbnRh
dGlvbiIpOw0KICAgIH0NCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICAvLyBSZW1vdmVkIHVzZSBvZiBpbmRleE9m
IGJlY2F1c2Ugb2YgYSBiaXphcnJlIGJ1ZyBpbiBPcGVyYSB0aGF0IGlzIHRocm93biBpbiBvbmUg
b2YgdGhlIEFjaWQzIHRlc3RzLiBJIGhhdmVuJ3QgYmVlbg0KICAgIC8vIGFibGUgdG8gcmVwbGlj
YXRlIGl0IG91dHNpZGUgb2YgdGhlIHRlc3QuIFRoZSBidWcgaXMgdGhhdCBpbmRleE9mIHJldHVy
bnMgLTEgd2hlbiBjYWxsZWQgb24gYW4gQXJyYXkgdGhhdA0KICAgIC8vIGNvbnRhaW5zIGp1c3Qg
dGhlIGRvY3VtZW50IGFzIGEgc2luZ2xlIGVsZW1lbnQgYW5kIHRoZSB2YWx1ZSBzZWFyY2hlZCBm
b3IgaXMgdGhlIGRvY3VtZW50Lg0KICAgIHZhciBhcnJheUNvbnRhaW5zID0gLypBcnJheS5wcm90
b3R5cGUuaW5kZXhPZiA/DQogICAgICAgIGZ1bmN0aW9uKGFyciwgdmFsKSB7DQogICAgICAgICAg
ICByZXR1cm4gYXJyLmluZGV4T2YodmFsKSA+IC0xOw0KICAgICAgICB9OiovDQoNCiAgICAgICAg
ZnVuY3Rpb24oYXJyLCB2YWwpIHsNCiAgICAgICAgICAgIHZhciBpID0gYXJyLmxlbmd0aDsNCiAg
ICAgICAgICAgIHdoaWxlIChpLS0pIHsNCiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09PSB2
YWwpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0K
DQogICAgLy8gT3BlcmEgMTEgcHV0cyBIVE1MIGVsZW1lbnRzIGluIHRoZSBudWxsIG5hbWVzcGFj
ZSwgaXQgc2VlbXMsIGFuZCBJRSA3IGhhcyB1bmRlZmluZWQgbmFtZXNwYWNlVVJJDQogICAgZnVu
Y3Rpb24gaXNIdG1sTmFtZXNwYWNlKG5vZGUpIHsNCiAgICAgICAgdmFyIG5zOw0KICAgICAgICBy
ZXR1cm4gdHlwZW9mIG5vZGUubmFtZXNwYWNlVVJJID09IFVOREVGIHx8ICgobnMgPSBub2RlLm5h
bWVzcGFjZVVSSSkgPT09IG51bGwgfHwgbnMgPT0gImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0
bWwiKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBwYXJlbnRFbGVtZW50KG5vZGUpIHsNCiAgICAg
ICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgcmV0dXJuIChwYXJlbnQu
bm9kZVR5cGUgPT0gMSkgPyBwYXJlbnQgOiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdl
dE5vZGVJbmRleChub2RlKSB7DQogICAgICAgIHZhciBpID0gMDsNCiAgICAgICAgd2hpbGUoIChu
b2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmcpICkgew0KICAgICAgICAgICAgKytpOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldE5vZGVMZW5n
dGgobm9kZSkgew0KICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHsNCiAgICAgICAgICAg
IGNhc2UgNzoNCiAgICAgICAgICAgIGNhc2UgMTA6DQogICAgICAgICAgICAgICAgcmV0dXJuIDA7
DQogICAgICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICBjYXNlIDg6DQogICAgICAgICAgICAg
ICAgcmV0dXJuIG5vZGUubGVuZ3RoOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAg
ICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgIH0NCg0K
ICAgIGZ1bmN0aW9uIGdldENvbW1vbkFuY2VzdG9yKG5vZGUxLCBub2RlMikgew0KICAgICAgICB2
YXIgYW5jZXN0b3JzID0gW10sIG47DQogICAgICAgIGZvciAobiA9IG5vZGUxOyBuOyBuID0gbi5w
YXJlbnROb2RlKSB7DQogICAgICAgICAgICBhbmNlc3RvcnMucHVzaChuKTsNCiAgICAgICAgfQ0K
DQogICAgICAgIGZvciAobiA9IG5vZGUyOyBuOyBuID0gbi5wYXJlbnROb2RlKSB7DQogICAgICAg
ICAgICBpZiAoYXJyYXlDb250YWlucyhhbmNlc3RvcnMsIG4pKSB7DQogICAgICAgICAgICAgICAg
cmV0dXJuIG47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbnVs
bDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc0FuY2VzdG9yT2YoYW5jZXN0b3IsIGRlc2NlbmRh
bnQsIHNlbGZJc0FuY2VzdG9yKSB7DQogICAgICAgIHZhciBuID0gc2VsZklzQW5jZXN0b3IgPyBk
ZXNjZW5kYW50IDogZGVzY2VuZGFudC5wYXJlbnROb2RlOw0KICAgICAgICB3aGlsZSAobikgew0K
ICAgICAgICAgICAgaWYgKG4gPT09IGFuY2VzdG9yKSB7DQogICAgICAgICAgICAgICAgcmV0dXJu
IHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG4gPSBuLnBhcmVu
dE5vZGU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0K
ICAgIH0NCg0KICAgIGZ1bmN0aW9uIGlzT3JJc0FuY2VzdG9yT2YoYW5jZXN0b3IsIGRlc2NlbmRh
bnQpIHsNCiAgICAgICAgcmV0dXJuIGlzQW5jZXN0b3JPZihhbmNlc3RvciwgZGVzY2VuZGFudCwg
dHJ1ZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdEFuY2VzdG9ySW4obm9kZSwg
YW5jZXN0b3IsIHNlbGZJc0FuY2VzdG9yKSB7DQogICAgICAgIHZhciBwLCBuID0gc2VsZklzQW5j
ZXN0b3IgPyBub2RlIDogbm9kZS5wYXJlbnROb2RlOw0KICAgICAgICB3aGlsZSAobikgew0KICAg
ICAgICAgICAgcCA9IG4ucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIGlmIChwID09PSBhbmNlc3Rv
cikgew0KICAgICAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgbiA9IHA7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gaXNDaGFyYWN0ZXJEYXRhTm9kZShub2RlKSB7DQogICAgICAgIHZhciB0ID0gbm9k
ZS5ub2RlVHlwZTsNCiAgICAgICAgcmV0dXJuIHQgPT0gMyB8fCB0ID09IDQgfHwgdCA9PSA4IDsg
Ly8gVGV4dCwgQ0RhdGFTZWN0aW9uIG9yIENvbW1lbnQNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBp
c1RleHRPckNvbW1lbnROb2RlKG5vZGUpIHsNCiAgICAgICAgaWYgKCFub2RlKSB7DQogICAgICAg
ICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHQgPSBub2RlLm5vZGVU
eXBlOw0KICAgICAgICByZXR1cm4gdCA9PSAzIHx8IHQgPT0gOCA7IC8vIFRleHQgb3IgQ29tbWVu
dA0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGluc2VydEFmdGVyKG5vZGUsIHByZWNlZGluZ05vZGUp
IHsNCiAgICAgICAgdmFyIG5leHROb2RlID0gcHJlY2VkaW5nTm9kZS5uZXh0U2libGluZywgcGFy
ZW50ID0gcHJlY2VkaW5nTm9kZS5wYXJlbnROb2RlOw0KICAgICAgICBpZiAobmV4dE5vZGUpIHsN
CiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dE5vZGUpOw0KICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpOw0KICAgICAg
ICB9DQogICAgICAgIHJldHVybiBub2RlOw0KICAgIH0NCg0KICAgIC8vIE5vdGUgdGhhdCB3ZSBj
YW5ub3QgdXNlIHNwbGl0VGV4dCgpIGJlY2F1c2UgaXQgaXMgYnVncmlkZGVuIGluIElFIDkuDQog
ICAgZnVuY3Rpb24gc3BsaXREYXRhTm9kZShub2RlLCBpbmRleCwgcG9zaXRpb25zVG9QcmVzZXJ2
ZSkgew0KICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKTsNCiAgICAg
ICAgbmV3Tm9kZS5kZWxldGVEYXRhKDAsIGluZGV4KTsNCiAgICAgICAgbm9kZS5kZWxldGVEYXRh
KGluZGV4LCBub2RlLmxlbmd0aCAtIGluZGV4KTsNCiAgICAgICAgaW5zZXJ0QWZ0ZXIobmV3Tm9k
ZSwgbm9kZSk7DQoNCiAgICAgICAgLy8gUHJlc2VydmUgcG9zaXRpb25zDQogICAgICAgIGlmIChw
b3NpdGlvbnNUb1ByZXNlcnZlKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgcG9zaXRp
b247IHBvc2l0aW9uID0gcG9zaXRpb25zVG9QcmVzZXJ2ZVtpKytdOyApIHsNCiAgICAgICAgICAg
ICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBwb3NpdGlvbiB3YXMgaW5zaWRlIHRoZSBwb3J0aW9u
IG9mIG5vZGUgYWZ0ZXIgdGhlIHNwbGl0IHBvaW50DQogICAgICAgICAgICAgICAgaWYgKHBvc2l0
aW9uLm5vZGUgPT0gbm9kZSAmJiBwb3NpdGlvbi5vZmZzZXQgPiBpbmRleCkgew0KICAgICAgICAg
ICAgICAgICAgICBwb3NpdGlvbi5ub2RlID0gbmV3Tm9kZTsNCiAgICAgICAgICAgICAgICAgICAg
cG9zaXRpb24ub2Zmc2V0IC09IGluZGV4Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHBvc2l0aW9uIGlzIGEgbm9kZSBvZmZz
ZXQgd2l0aGluIG5vZGUncyBwYXJlbnQNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlv
bi5ub2RlID09IG5vZGUucGFyZW50Tm9kZSAmJiBwb3NpdGlvbi5vZmZzZXQgPiBnZXROb2RlSW5k
ZXgobm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgKytwb3NpdGlvbi5vZmZzZXQ7DQogICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBu
ZXdOb2RlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldERvY3VtZW50KG5vZGUpIHsNCiAgICAg
ICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gOSkgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGU7DQog
ICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUub3duZXJEb2N1bWVudCAhPSBVTkRFRikgew0K
ICAgICAgICAgICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDsNCiAgICAgICAgfSBlbHNlIGlm
ICh0eXBlb2Ygbm9kZS5kb2N1bWVudCAhPSBVTkRFRikgew0KICAgICAgICAgICAgcmV0dXJuIG5v
ZGUuZG9jdW1lbnQ7DQogICAgICAgIH0gZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSB7DQogICAg
ICAgICAgICByZXR1cm4gZ2V0RG9jdW1lbnQobm9kZS5wYXJlbnROb2RlKTsNCiAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiZ2V0RG9jdW1lbnQ6
IG5vIGRvY3VtZW50IGZvdW5kIGZvciBub2RlIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBnZXRXaW5kb3cobm9kZSkgew0KICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnQo
bm9kZSk7DQogICAgICAgIGlmICh0eXBlb2YgZG9jLmRlZmF1bHRWaWV3ICE9IFVOREVGKSB7DQog
ICAgICAgICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3Ow0KICAgICAgICB9IGVsc2UgaWYgKHR5
cGVvZiBkb2MucGFyZW50V2luZG93ICE9IFVOREVGKSB7DQogICAgICAgICAgICByZXR1cm4gZG9j
LnBhcmVudFdpbmRvdzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVs
ZS5jcmVhdGVFcnJvcigiQ2Fubm90IGdldCBhIHdpbmRvdyBvYmplY3QgZm9yIG5vZGUiKTsNCiAg
ICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElmcmFtZURvY3VtZW50KGlmcmFtZUVs
KSB7DQogICAgICAgIGlmICh0eXBlb2YgaWZyYW1lRWwuY29udGVudERvY3VtZW50ICE9IFVOREVG
KSB7DQogICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudERvY3VtZW50Ow0KICAgICAg
ICB9IGVsc2UgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50V2luZG93ICE9IFVOREVGKSB7DQog
ICAgICAgICAgICByZXR1cm4gaWZyYW1lRWwuY29udGVudFdpbmRvdy5kb2N1bWVudDsNCiAgICAg
ICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiZ2V0SWZy
YW1lRG9jdW1lbnQ6IE5vIERvY3VtZW50IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1lbnQi
KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElmcmFtZVdpbmRvdyhpZnJh
bWVFbCkgew0KICAgICAgICBpZiAodHlwZW9mIGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cgIT0gVU5E
RUYpIHsNCiAgICAgICAgICAgIHJldHVybiBpZnJhbWVFbC5jb250ZW50V2luZG93Ow0KICAgICAg
ICB9IGVsc2UgaWYgKHR5cGVvZiBpZnJhbWVFbC5jb250ZW50RG9jdW1lbnQgIT0gVU5ERUYpIHsN
CiAgICAgICAgICAgIHJldHVybiBpZnJhbWVFbC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7
DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aHJvdyBtb2R1bGUuY3JlYXRlRXJyb3Io
ImdldElmcmFtZVdpbmRvdzogTm8gV2luZG93IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1l
bnQiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIFRoaXMgbG9va3MgYmFkLiBJcyBpdCB3
b3J0aCBpdD8NCiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHsNCiAgICAgICAgcmV0dXJuIG9i
aiAmJiB1dGlsLmlzSG9zdE1ldGhvZChvYmosICJzZXRUaW1lb3V0IikgJiYgdXRpbC5pc0hvc3RP
YmplY3Qob2JqLCAiZG9jdW1lbnQiKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDb250ZW50
RG9jdW1lbnQob2JqLCBtb2R1bGUsIG1ldGhvZE5hbWUpIHsNCiAgICAgICAgdmFyIGRvYzsNCg0K
ICAgICAgICBpZiAoIW9iaikgew0KICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQ7DQogICAgICAg
IH0NCg0KICAgICAgICAvLyBUZXN0IGlmIGEgRE9NIG5vZGUgaGFzIGJlZW4gcGFzc2VkIGFuZCBv
YnRhaW4gYSBkb2N1bWVudCBvYmplY3QgZm9yIGl0IGlmIHNvDQogICAgICAgIGVsc2UgaWYgKHV0
aWwuaXNIb3N0UHJvcGVydHkob2JqLCAibm9kZVR5cGUiKSkgew0KICAgICAgICAgICAgZG9jID0g
KG9iai5ub2RlVHlwZSA9PSAxICYmIG9iai50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gImlmcmFt
ZSIpDQogICAgICAgICAgICAgICAgPyBnZXRJZnJhbWVEb2N1bWVudChvYmopIDogZ2V0RG9jdW1l
bnQob2JqKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFRlc3QgaWYgdGhlIGRvYyBwYXJhbWV0
ZXIgYXBwZWFycyB0byBiZSBhIFdpbmRvdyBvYmplY3QNCiAgICAgICAgZWxzZSBpZiAoaXNXaW5k
b3cob2JqKSkgew0KICAgICAgICAgICAgZG9jID0gb2JqLmRvY3VtZW50Ow0KICAgICAgICB9DQoN
CiAgICAgICAgaWYgKCFkb2MpIHsNCiAgICAgICAgICAgIHRocm93IG1vZHVsZS5jcmVhdGVFcnJv
cihtZXRob2ROYW1lICsgIigpOiBQYXJhbWV0ZXIgbXVzdCBiZSBhIFdpbmRvdyBvYmplY3Qgb3Ig
RE9NIG5vZGUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBkb2M7DQogICAgfQ0KDQog
ICAgZnVuY3Rpb24gZ2V0Um9vdENvbnRhaW5lcihub2RlKSB7DQogICAgICAgIHZhciBwYXJlbnQ7
DQogICAgICAgIHdoaWxlICggKHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZSkgKSB7DQogICAgICAg
ICAgICBub2RlID0gcGFyZW50Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiBub2RlOw0KICAg
IH0NCg0KICAgIGZ1bmN0aW9uIGNvbXBhcmVQb2ludHMobm9kZUEsIG9mZnNldEEsIG5vZGVCLCBv
ZmZzZXRCKSB7DQogICAgICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwt
Mi1UcmF2ZXJzYWwtUmFuZ2UvcmFuZ2VzLmh0bWwjTGV2ZWwtMi1SYW5nZS1Db21wYXJpbmcNCiAg
ICAgICAgdmFyIG5vZGVDLCByb290LCBjaGlsZEEsIGNoaWxkQiwgbjsNCiAgICAgICAgaWYgKG5v
ZGVBID09IG5vZGVCKSB7DQogICAgICAgICAgICAvLyBDYXNlIDE6IG5vZGVzIGFyZSB0aGUgc2Ft
ZQ0KICAgICAgICAgICAgcmV0dXJuIG9mZnNldEEgPT09IG9mZnNldEIgPyAwIDogKG9mZnNldEEg
PCBvZmZzZXRCKSA/IC0xIDogMTsNCiAgICAgICAgfSBlbHNlIGlmICggKG5vZGVDID0gZ2V0Q2xv
c2VzdEFuY2VzdG9ySW4obm9kZUIsIG5vZGVBLCB0cnVlKSkgKSB7DQogICAgICAgICAgICAvLyBD
YXNlIDI6IG5vZGUgQyAoY29udGFpbmVyIEIgb3IgYW4gYW5jZXN0b3IpIGlzIGEgY2hpbGQgbm9k
ZSBvZiBBDQogICAgICAgICAgICByZXR1cm4gb2Zmc2V0QSA8PSBnZXROb2RlSW5kZXgobm9kZUMp
ID8gLTEgOiAxOw0KICAgICAgICB9IGVsc2UgaWYgKCAobm9kZUMgPSBnZXRDbG9zZXN0QW5jZXN0
b3JJbihub2RlQSwgbm9kZUIsIHRydWUpKSApIHsNCiAgICAgICAgICAgIC8vIENhc2UgMzogbm9k
ZSBDIChjb250YWluZXIgQSBvciBhbiBhbmNlc3RvcikgaXMgYSBjaGlsZCBub2RlIG9mIEINCiAg
ICAgICAgICAgIHJldHVybiBnZXROb2RlSW5kZXgobm9kZUMpIDwgb2Zmc2V0QiAgPyAtMSA6IDE7
DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBDYXNlIDQ6IGNvbnRhaW5lcnMgYXJl
IHNpYmxpbmdzIG9yIGRlc2NlbmRhbnRzIG9mIHNpYmxpbmdzDQogICAgICAgICAgICByb290ID0g
Z2V0Q29tbW9uQW5jZXN0b3Iobm9kZUEsIG5vZGVCKTsNCiAgICAgICAgICAgIGNoaWxkQSA9IChu
b2RlQSA9PT0gcm9vdCkgPyByb290IDogZ2V0Q2xvc2VzdEFuY2VzdG9ySW4obm9kZUEsIHJvb3Qs
IHRydWUpOw0KICAgICAgICAgICAgY2hpbGRCID0gKG5vZGVCID09PSByb290KSA/IHJvb3QgOiBn
ZXRDbG9zZXN0QW5jZXN0b3JJbihub2RlQiwgcm9vdCwgdHJ1ZSk7DQoNCiAgICAgICAgICAgIGlm
IChjaGlsZEEgPT09IGNoaWxkQikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkbid0
IGJlIHBvc3NpYmxlDQogICAgICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJj
b21wYXJlUG9pbnRzIGdvdCB0byBjYXNlIDQgYW5kIGNoaWxkQSBhbmQgY2hpbGRCIGFyZSB0aGUg
c2FtZSEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbiA9IHJvb3Qu
Zmlyc3RDaGlsZDsNCiAgICAgICAgICAgICAgICB3aGlsZSAobikgew0KICAgICAgICAgICAgICAg
ICAgICBpZiAobiA9PT0gY2hpbGRBKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
LTE7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gY2hpbGRCKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgICAgICBuID0gbi5uZXh0U2libGluZzsNCiAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgLy8gVGVzdCBm
b3IgSUUncyBjcmFzaCAoSUUgNi83KSBvciBleGNlcHRpb24gKElFID49IDgpIHdoZW4gYSByZWZl
cmVuY2UgdG8gZ2FyYmFnZS1jb2xsZWN0ZWQgdGV4dCBub2RlIGlzIHF1ZXJpZWQNCiAgICB2YXIg
Y3Jhc2h5VGV4dE5vZGVzID0gZmFsc2U7DQoNCiAgICBmdW5jdGlvbiBpc0Jyb2tlbk5vZGUobm9k
ZSkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlOw0KICAgICAg
ICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIChmdW5jdGlvbigpIHsNCiAgICAg
ICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYiIpOw0KICAgICAgICBlbC5pbm5l
ckhUTUwgPSAiMSI7DQogICAgICAgIHZhciB0ZXh0Tm9kZSA9IGVsLmZpcnN0Q2hpbGQ7DQogICAg
ICAgIGVsLmlubmVySFRNTCA9ICI8YnI+IjsNCiAgICAgICAgY3Jhc2h5VGV4dE5vZGVzID0gaXNC
cm9rZW5Ob2RlKHRleHROb2RlKTsNCg0KICAgICAgICBhcGkuZmVhdHVyZXMuY3Jhc2h5VGV4dE5v
ZGVzID0gY3Jhc2h5VGV4dE5vZGVzOw0KICAgIH0pKCk7DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgZnVuY3Rp
b24gaW5zcGVjdE5vZGUobm9kZSkgew0KICAgICAgICBpZiAoIW5vZGUpIHsNCiAgICAgICAgICAg
IHJldHVybiAiW05vIG5vZGVdIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoY3Jhc2h5VGV4dE5v
ZGVzICYmIGlzQnJva2VuTm9kZShub2RlKSkgew0KICAgICAgICAgICAgcmV0dXJuICJbQnJva2Vu
IG5vZGVdIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNDaGFyYWN0ZXJEYXRhTm9kZShub2Rl
KSkgew0KICAgICAgICAgICAgcmV0dXJuICciJyArIG5vZGUuZGF0YSArICciJzsNCiAgICAgICAg
fQ0KICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7DQogICAgICAgICAgICB2YXIgaWRB
dHRyID0gbm9kZS5pZCA/ICcgaWQ9IicgKyBub2RlLmlkICsgJyInIDogIiI7DQogICAgICAgICAg
ICByZXR1cm4gIjwiICsgbm9kZS5ub2RlTmFtZSArIGlkQXR0ciArICI+WyIgKyBub2RlLmNoaWxk
Tm9kZXMubGVuZ3RoICsgIl1bIiArIG5vZGUuaW5uZXJIVE1MLnNsaWNlKDAsIDIwKSArICJdIjsN
CiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbm9kZS5ub2RlTmFtZTsNCiAgICB9DQoNCiAgICBm
dW5jdGlvbiBmcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW4obm9kZSkgew0KICAgICAgICB2YXIgZnJh
Z21lbnQgPSBnZXREb2N1bWVudChub2RlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIGNoaWxk
Ow0KICAgICAgICB3aGlsZSAoIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkgKSB7DQogICAgICAg
ICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0
dXJuIGZyYWdtZW50Ow0KICAgIH0NCg0KICAgIHZhciBnZXRDb21wdXRlZFN0eWxlUHJvcGVydHk7
DQogICAgaWYgKHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAhPSBVTkRFRikgew0KICAg
ICAgICBnZXRDb21wdXRlZFN0eWxlUHJvcGVydHkgPSBmdW5jdGlvbihlbCwgcHJvcE5hbWUpIHsN
CiAgICAgICAgICAgIHJldHVybiBnZXRXaW5kb3coZWwpLmdldENvbXB1dGVkU3R5bGUoZWwsIG51
bGwpW3Byb3BOYW1lXTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVu
dC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlICE9IFVOREVGKSB7DQogICAgICAgIGdldENv
bXB1dGVkU3R5bGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKGVsLCBwcm9wTmFtZSkgew0KICAgICAgICAg
ICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtwcm9wTmFtZV07DQogICAgICAgIH07DQogICAgfSBl
bHNlIHsNCiAgICAgICAgbW9kdWxlLmZhaWwoIk5vIG1lYW5zIG9mIG9idGFpbmluZyBjb21wdXRl
ZCBzdHlsZSBwcm9wZXJ0aWVzIGZvdW5kIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gTm9kZUl0
ZXJhdG9yKHJvb3QpIHsNCiAgICAgICAgdGhpcy5yb290ID0gcm9vdDsNCiAgICAgICAgdGhpcy5f
bmV4dCA9IHJvb3Q7DQogICAgfQ0KDQogICAgTm9kZUl0ZXJhdG9yLnByb3RvdHlwZSA9IHsNCiAg
ICAgICAgX2N1cnJlbnQ6IG51bGwsDQoNCiAgICAgICAgaGFzTmV4dDogZnVuY3Rpb24oKSB7DQog
ICAgICAgICAgICByZXR1cm4gISF0aGlzLl9uZXh0Ow0KICAgICAgICB9LA0KDQogICAgICAgIG5l
eHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9jdXJyZW50ID0gdGhp
cy5fbmV4dDsNCiAgICAgICAgICAgIHZhciBjaGlsZCwgbmV4dDsNCiAgICAgICAgICAgIGlmICh0
aGlzLl9jdXJyZW50KSB7DQogICAgICAgICAgICAgICAgY2hpbGQgPSBuLmZpcnN0Q2hpbGQ7DQog
ICAgICAgICAgICAgICAgaWYgKGNoaWxkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX25l
eHQgPSBjaGlsZDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg
ICBuZXh0ID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChuICE9PSB0aGlzLnJv
b3QpICYmICEobmV4dCA9IG4ubmV4dFNpYmxpbmcpKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBuID0gbi5wYXJlbnROb2RlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAg
ICAgICAgIHRoaXMuX25leHQgPSBuZXh0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50Ow0KICAgICAgICB9LA0KDQogICAg
ICAgIGRldGFjaDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhp
cy5fbmV4dCA9IHRoaXMucm9vdCA9IG51bGw7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgZnVu
Y3Rpb24gY3JlYXRlSXRlcmF0b3Iocm9vdCkgew0KICAgICAgICByZXR1cm4gbmV3IE5vZGVJdGVy
YXRvcihyb290KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBEb21Qb3NpdGlvbihub2RlLCBvZmZz
ZXQpIHsNCiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTsNCiAgICAgICAgdGhpcy5vZmZzZXQgPSBv
ZmZzZXQ7DQogICAgfQ0KDQogICAgRG9tUG9zaXRpb24ucHJvdG90eXBlID0gew0KICAgICAgICBl
cXVhbHM6IGZ1bmN0aW9uKHBvcykgew0KICAgICAgICAgICAgcmV0dXJuICEhcG9zICYmIHRoaXMu
bm9kZSA9PT0gcG9zLm5vZGUgJiYgdGhpcy5vZmZzZXQgPT0gcG9zLm9mZnNldDsNCiAgICAgICAg
fSwNCg0KICAgICAgICBpbnNwZWN0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiAi
W0RvbVBvc2l0aW9uKCIgKyBpbnNwZWN0Tm9kZSh0aGlzLm5vZGUpICsgIjoiICsgdGhpcy5vZmZz
ZXQgKyAiKV0iOw0KICAgICAgICB9LA0KDQogICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsN
CiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3BlY3QoKTsNCiAgICAgICAgfQ0KICAgIH07DQoN
CiAgICBmdW5jdGlvbiBET01FeGNlcHRpb24oY29kZU5hbWUpIHsNCiAgICAgICAgdGhpcy5jb2Rl
ID0gdGhpc1tjb2RlTmFtZV07DQogICAgICAgIHRoaXMuY29kZU5hbWUgPSBjb2RlTmFtZTsNCiAg
ICAgICAgdGhpcy5tZXNzYWdlID0gIkRPTUV4Y2VwdGlvbjogIiArIHRoaXMuY29kZU5hbWU7DQog
ICAgfQ0KDQogICAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZSA9IHsNCiAgICAgICAgSU5ERVhfU0la
RV9FUlI6IDEsDQogICAgICAgIEhJRVJBUkNIWV9SRVFVRVNUX0VSUjogMywNCiAgICAgICAgV1JP
TkdfRE9DVU1FTlRfRVJSOiA0LA0KICAgICAgICBOT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlI6
IDcsDQogICAgICAgIE5PVF9GT1VORF9FUlI6IDgsDQogICAgICAgIE5PVF9TVVBQT1JURURfRVJS
OiA5LA0KICAgICAgICBJTlZBTElEX1NUQVRFX0VSUjogMTENCiAgICB9Ow0KDQogICAgRE9NRXhj
ZXB0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4g
dGhpcy5tZXNzYWdlOw0KICAgIH07DQoNCiAgICBhcGkuZG9tID0gew0KICAgICAgICBhcnJheUNv
bnRhaW5zOiBhcnJheUNvbnRhaW5zLA0KICAgICAgICBpc0h0bWxOYW1lc3BhY2U6IGlzSHRtbE5h
bWVzcGFjZSwNCiAgICAgICAgcGFyZW50RWxlbWVudDogcGFyZW50RWxlbWVudCwNCiAgICAgICAg
Z2V0Tm9kZUluZGV4OiBnZXROb2RlSW5kZXgsDQogICAgICAgIGdldE5vZGVMZW5ndGg6IGdldE5v
ZGVMZW5ndGgsDQogICAgICAgIGdldENvbW1vbkFuY2VzdG9yOiBnZXRDb21tb25BbmNlc3RvciwN
CiAgICAgICAgaXNBbmNlc3Rvck9mOiBpc0FuY2VzdG9yT2YsDQogICAgICAgIGlzT3JJc0FuY2Vz
dG9yT2Y6IGlzT3JJc0FuY2VzdG9yT2YsDQogICAgICAgIGdldENsb3Nlc3RBbmNlc3RvckluOiBn
ZXRDbG9zZXN0QW5jZXN0b3JJbiwNCiAgICAgICAgaXNDaGFyYWN0ZXJEYXRhTm9kZTogaXNDaGFy
YWN0ZXJEYXRhTm9kZSwNCiAgICAgICAgaXNUZXh0T3JDb21tZW50Tm9kZTogaXNUZXh0T3JDb21t
ZW50Tm9kZSwNCiAgICAgICAgaW5zZXJ0QWZ0ZXI6IGluc2VydEFmdGVyLA0KICAgICAgICBzcGxp
dERhdGFOb2RlOiBzcGxpdERhdGFOb2RlLA0KICAgICAgICBnZXREb2N1bWVudDogZ2V0RG9jdW1l
bnQsDQogICAgICAgIGdldFdpbmRvdzogZ2V0V2luZG93LA0KICAgICAgICBnZXRJZnJhbWVXaW5k
b3c6IGdldElmcmFtZVdpbmRvdywNCiAgICAgICAgZ2V0SWZyYW1lRG9jdW1lbnQ6IGdldElmcmFt
ZURvY3VtZW50LA0KICAgICAgICBnZXRCb2R5OiB1dGlsLmdldEJvZHksDQogICAgICAgIGlzV2lu
ZG93OiBpc1dpbmRvdywNCiAgICAgICAgZ2V0Q29udGVudERvY3VtZW50OiBnZXRDb250ZW50RG9j
dW1lbnQsDQogICAgICAgIGdldFJvb3RDb250YWluZXI6IGdldFJvb3RDb250YWluZXIsDQogICAg
ICAgIGNvbXBhcmVQb2ludHM6IGNvbXBhcmVQb2ludHMsDQogICAgICAgIGlzQnJva2VuTm9kZTog
aXNCcm9rZW5Ob2RlLA0KICAgICAgICBpbnNwZWN0Tm9kZTogaW5zcGVjdE5vZGUsDQogICAgICAg
IGdldENvbXB1dGVkU3R5bGVQcm9wZXJ0eTogZ2V0Q29tcHV0ZWRTdHlsZVByb3BlcnR5LA0KICAg
ICAgICBmcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW46IGZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbiwN
CiAgICAgICAgY3JlYXRlSXRlcmF0b3I6IGNyZWF0ZUl0ZXJhdG9yLA0KICAgICAgICBEb21Qb3Np
dGlvbjogRG9tUG9zaXRpb24NCiAgICB9Ow0KDQogICAgYXBpLkRPTUV4Y2VwdGlvbiA9IERPTUV4
Y2VwdGlvbjsNCn0pOwpyYW5neS5jcmVhdGVNb2R1bGUoIkRvbVJhbmdlIiwgZnVuY3Rpb24oYXBp
LCBtb2R1bGUpIHsKICAgIGFwaS5yZXF1aXJlTW9kdWxlcyggWyJEb21VdGlsIl0gKTsKCiAgICB2
YXIgZG9tID0gYXBpLmRvbTsKICAgIHZhciB1dGlsID0gYXBpLnV0aWw7CiAgICB2YXIgRG9tUG9z
aXRpb24gPSBkb20uRG9tUG9zaXRpb247CiAgICB2YXIgRE9NRXhjZXB0aW9uID0gYXBpLkRPTUV4
Y2VwdGlvbjsKCiAgICB2YXIgaXNDaGFyYWN0ZXJEYXRhTm9kZSA9IGRvbS5pc0NoYXJhY3RlckRh
dGFOb2RlOwogICAgdmFyIGdldE5vZGVJbmRleCA9IGRvbS5nZXROb2RlSW5kZXg7CiAgICB2YXIg
aXNPcklzQW5jZXN0b3JPZiA9IGRvbS5pc09ySXNBbmNlc3Rvck9mOwogICAgdmFyIGdldERvY3Vt
ZW50ID0gZG9tLmdldERvY3VtZW50OwogICAgdmFyIGNvbXBhcmVQb2ludHMgPSBkb20uY29tcGFy
ZVBvaW50czsKICAgIHZhciBzcGxpdERhdGFOb2RlID0gZG9tLnNwbGl0RGF0YU5vZGU7CiAgICB2
YXIgZ2V0Q2xvc2VzdEFuY2VzdG9ySW4gPSBkb20uZ2V0Q2xvc2VzdEFuY2VzdG9ySW47CiAgICB2
YXIgZ2V0Tm9kZUxlbmd0aCA9IGRvbS5nZXROb2RlTGVuZ3RoOwogICAgdmFyIGFycmF5Q29udGFp
bnMgPSBkb20uYXJyYXlDb250YWluczsKICAgIHZhciBnZXRSb290Q29udGFpbmVyID0gZG9tLmdl
dFJvb3RDb250YWluZXI7CiAgICB2YXIgY3Jhc2h5VGV4dE5vZGVzID0gYXBpLmZlYXR1cmVzLmNy
YXNoeVRleHROb2RlczsKCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKICAgIC8vIFV0aWxpdHkgZnVuY3Rpb25zCgogICAgZnVu
Y3Rpb24gaXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQobm9kZSwgcmFuZ2UpIHsKICAgICAgICBy
ZXR1cm4gKG5vZGUubm9kZVR5cGUgIT0gMykgJiYKICAgICAgICAgICAgICAgKGlzT3JJc0FuY2Vz
dG9yT2Yobm9kZSwgcmFuZ2Uuc3RhcnRDb250YWluZXIpIHx8IGlzT3JJc0FuY2VzdG9yT2Yobm9k
ZSwgcmFuZ2UuZW5kQ29udGFpbmVyKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmFuZ2VEb2N1
bWVudChyYW5nZSkgewogICAgICAgIHJldHVybiByYW5nZS5kb2N1bWVudCB8fCBnZXREb2N1bWVu
dChyYW5nZS5zdGFydENvbnRhaW5lcik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm91bmRhcnlC
ZWZvcmVOb2RlKG5vZGUpIHsKICAgICAgICByZXR1cm4gbmV3IERvbVBvc2l0aW9uKG5vZGUucGFy
ZW50Tm9kZSwgZ2V0Tm9kZUluZGV4KG5vZGUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCb3Vu
ZGFyeUFmdGVyTm9kZShub2RlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEb21Qb3NpdGlvbihub2Rl
LnBhcmVudE5vZGUsIGdldE5vZGVJbmRleChub2RlKSArIDEpOwogICAgfQoKICAgIGZ1bmN0aW9u
IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIG4sIG8pIHsKICAgICAgICB2YXIgZmlyc3ROb2Rl
SW5zZXJ0ZWQgPSBub2RlLm5vZGVUeXBlID09IDExID8gbm9kZS5maXJzdENoaWxkIDogbm9kZTsK
ICAgICAgICBpZiAoaXNDaGFyYWN0ZXJEYXRhTm9kZShuKSkgewogICAgICAgICAgICBpZiAobyA9
PSBuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgZG9tLmluc2VydEFmdGVyKG5vZGUsIG4pOwog
ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbi5wYXJlbnROb2RlLmluc2VydEJl
Zm9yZShub2RlLCBvID09IDAgPyBuIDogc3BsaXREYXRhTm9kZShuLCBvKSk7CiAgICAgICAgICAg
IH0KICAgICAgICB9IGVsc2UgaWYgKG8gPj0gbi5jaGlsZE5vZGVzLmxlbmd0aCkgewogICAgICAg
ICAgICBuLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG4u
aW5zZXJ0QmVmb3JlKG5vZGUsIG4uY2hpbGROb2Rlc1tvXSk7CiAgICAgICAgfQogICAgICAgIHJl
dHVybiBmaXJzdE5vZGVJbnNlcnRlZDsKICAgIH0KCiAgICBmdW5jdGlvbiByYW5nZXNJbnRlcnNl
Y3QocmFuZ2VBLCByYW5nZUIsIHRvdWNoaW5nSXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICBhc3Nl
cnRSYW5nZVZhbGlkKHJhbmdlQSk7CiAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZChyYW5nZUIpOwoK
ICAgICAgICBpZiAoZ2V0UmFuZ2VEb2N1bWVudChyYW5nZUIpICE9IGdldFJhbmdlRG9jdW1lbnQo
cmFuZ2VBKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJXUk9OR19ET0NV
TUVOVF9FUlIiKTsKICAgICAgICB9CgogICAgICAgIHZhciBzdGFydENvbXBhcmlzb24gPSBjb21w
YXJlUG9pbnRzKHJhbmdlQS5zdGFydENvbnRhaW5lciwgcmFuZ2VBLnN0YXJ0T2Zmc2V0LCByYW5n
ZUIuZW5kQ29udGFpbmVyLCByYW5nZUIuZW5kT2Zmc2V0KSwKICAgICAgICAgICAgZW5kQ29tcGFy
aXNvbiA9IGNvbXBhcmVQb2ludHMocmFuZ2VBLmVuZENvbnRhaW5lciwgcmFuZ2VBLmVuZE9mZnNl
dCwgcmFuZ2VCLnN0YXJ0Q29udGFpbmVyLCByYW5nZUIuc3RhcnRPZmZzZXQpOwoKICAgICAgICBy
ZXR1cm4gdG91Y2hpbmdJc0ludGVyc2VjdGluZyA/IHN0YXJ0Q29tcGFyaXNvbiA8PSAwICYmIGVu
ZENvbXBhcmlzb24gPj0gMCA6IHN0YXJ0Q29tcGFyaXNvbiA8IDAgJiYgZW5kQ29tcGFyaXNvbiA+
IDA7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvbmVTdWJ0cmVlKGl0ZXJhdG9yKSB7CiAgICAgICAg
dmFyIHBhcnRpYWxseVNlbGVjdGVkOwogICAgICAgIGZvciAodmFyIG5vZGUsIGZyYWcgPSBnZXRS
YW5nZURvY3VtZW50KGl0ZXJhdG9yLnJhbmdlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIHN1
Ykl0ZXJhdG9yOyBub2RlID0gaXRlcmF0b3IubmV4dCgpOyApIHsKICAgICAgICAgICAgcGFydGlh
bGx5U2VsZWN0ZWQgPSBpdGVyYXRvci5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpOwogICAg
ICAgICAgICBub2RlID0gbm9kZS5jbG9uZU5vZGUoIXBhcnRpYWxseVNlbGVjdGVkKTsKICAgICAg
ICAgICAgaWYgKHBhcnRpYWxseVNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICBzdWJJdGVyYXRv
ciA9IGl0ZXJhdG9yLmdldFN1YnRyZWVJdGVyYXRvcigpOwogICAgICAgICAgICAgICAgbm9kZS5h
cHBlbmRDaGlsZChjbG9uZVN1YnRyZWUoc3ViSXRlcmF0b3IpKTsKICAgICAgICAgICAgICAgIHN1
Ykl0ZXJhdG9yLmRldGFjaCh0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5v
ZGUubm9kZVR5cGUgPT0gMTApIHsgLy8gRG9jdW1lbnRUeXBlCiAgICAgICAgICAgICAgICB0aHJv
dyBuZXcgRE9NRXhjZXB0aW9uKCJISUVSQVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAgICAgICAg
fQogICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICBy
ZXR1cm4gZnJhZzsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlU3VidHJlZShyYW5nZUl0ZXJh
dG9yLCBmdW5jLCBpdGVyYXRvclN0YXRlKSB7CiAgICAgICAgdmFyIGl0LCBuOwogICAgICAgIGl0
ZXJhdG9yU3RhdGUgPSBpdGVyYXRvclN0YXRlIHx8IHsgc3RvcDogZmFsc2UgfTsKICAgICAgICBm
b3IgKHZhciBub2RlLCBzdWJSYW5nZUl0ZXJhdG9yOyBub2RlID0gcmFuZ2VJdGVyYXRvci5uZXh0
KCk7ICkgewogICAgICAgICAgICBpZiAocmFuZ2VJdGVyYXRvci5pc1BhcnRpYWxseVNlbGVjdGVk
U3VidHJlZSgpKSB7CiAgICAgICAgICAgICAgICBpZiAoZnVuYyhub2RlKSA9PT0gZmFsc2UpIHsK
ICAgICAgICAgICAgICAgICAgICBpdGVyYXRvclN0YXRlLnN0b3AgPSB0cnVlOwogICAgICAgICAg
ICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
ICAgICAgLy8gVGhlIG5vZGUgaXMgcGFydGlhbGx5IHNlbGVjdGVkIGJ5IHRoZSBSYW5nZSwgc28g
d2UgY2FuIHVzZSBhIG5ldyBSYW5nZUl0ZXJhdG9yIG9uIHRoZSBwb3J0aW9uIG9mCiAgICAgICAg
ICAgICAgICAgICAgLy8gdGhlIG5vZGUgc2VsZWN0ZWQgYnkgdGhlIFJhbmdlLgogICAgICAgICAg
ICAgICAgICAgIHN1YlJhbmdlSXRlcmF0b3IgPSByYW5nZUl0ZXJhdG9yLmdldFN1YnRyZWVJdGVy
YXRvcigpOwogICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVTdWJ0cmVlKHN1YlJhbmdlSXRlcmF0
b3IsIGZ1bmMsIGl0ZXJhdG9yU3RhdGUpOwogICAgICAgICAgICAgICAgICAgIHN1YlJhbmdlSXRl
cmF0b3IuZGV0YWNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvclN0YXRl
LnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg
ICAgIC8vIFRoZSB3aG9sZSBub2RlIGlzIHNlbGVjdGVkLCBzbyB3ZSBjYW4gdXNlIGVmZmljaWVu
dCBET00gaXRlcmF0aW9uIHRvIGl0ZXJhdGUgb3ZlciB0aGUgbm9kZSBhbmQgaXRzCiAgICAgICAg
ICAgICAgICAvLyBkZXNjZW5kYW50cwogICAgICAgICAgICAgICAgaXQgPSBkb20uY3JlYXRlSXRl
cmF0b3Iobm9kZSk7CiAgICAgICAgICAgICAgICB3aGlsZSAoIChuID0gaXQubmV4dCgpKSApIHsK
ICAgICAgICAgICAgICAgICAgICBpZiAoZnVuYyhuKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAg
ICAgICAgICAgICAgaXRlcmF0b3JTdGF0ZS5zdG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVTdWJ0cmVlKGl0
ZXJhdG9yKSB7CiAgICAgICAgdmFyIHN1Ykl0ZXJhdG9yOwogICAgICAgIHdoaWxlIChpdGVyYXRv
ci5uZXh0KCkpIHsKICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmlzUGFydGlhbGx5U2VsZWN0ZWRT
dWJ0cmVlKCkpIHsKICAgICAgICAgICAgICAgIHN1Ykl0ZXJhdG9yID0gaXRlcmF0b3IuZ2V0U3Vi
dHJlZUl0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICBkZWxldGVTdWJ0cmVlKHN1Ykl0ZXJhdG9y
KTsKICAgICAgICAgICAgICAgIHN1Ykl0ZXJhdG9yLmRldGFjaCh0cnVlKTsKICAgICAgICAgICAg
fSBlbHNlIHsKICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnJlbW92ZSgpOwogICAgICAgICAgICB9
CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGV4dHJhY3RTdWJ0cmVlKGl0ZXJhdG9yKSB7
CiAgICAgICAgZm9yICh2YXIgbm9kZSwgZnJhZyA9IGdldFJhbmdlRG9jdW1lbnQoaXRlcmF0b3Iu
cmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgc3ViSXRlcmF0b3I7IG5vZGUgPSBpdGVy
YXRvci5uZXh0KCk7ICkgewoKICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmlzUGFydGlhbGx5U2Vs
ZWN0ZWRTdWJ0cmVlKCkpIHsKICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmNsb25lTm9kZShm
YWxzZSk7CiAgICAgICAgICAgICAgICBzdWJJdGVyYXRvciA9IGl0ZXJhdG9yLmdldFN1YnRyZWVJ
dGVyYXRvcigpOwogICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChleHRyYWN0U3VidHJl
ZShzdWJJdGVyYXRvcikpOwogICAgICAgICAgICAgICAgc3ViSXRlcmF0b3IuZGV0YWNoKHRydWUp
OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXRlcmF0b3IucmVtb3ZlKCk7
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMTApIHsgLy8g
RG9jdW1lbnRUeXBlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJISUVS
QVJDSFlfUkVRVUVTVF9FUlIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmcmFnLmFwcGVu
ZENoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZnJhZzsKICAgIH0KCiAgICBm
dW5jdGlvbiBnZXROb2Rlc0luUmFuZ2UocmFuZ2UsIG5vZGVUeXBlcywgZmlsdGVyKSB7CiAgICAg
ICAgdmFyIGZpbHRlck5vZGVUeXBlcyA9ICEhKG5vZGVUeXBlcyAmJiBub2RlVHlwZXMubGVuZ3Ro
KSwgcmVnZXg7CiAgICAgICAgdmFyIGZpbHRlckV4aXN0cyA9ICEhZmlsdGVyOwogICAgICAgIGlm
IChmaWx0ZXJOb2RlVHlwZXMpIHsKICAgICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKCJeKCIg
KyBub2RlVHlwZXMuam9pbigifCIpICsgIikkIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgbm9k
ZXMgPSBbXTsKICAgICAgICBpdGVyYXRlU3VidHJlZShuZXcgUmFuZ2VJdGVyYXRvcihyYW5nZSwg
ZmFsc2UpLCBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgIGlmICgoIWZpbHRlck5vZGVUeXBl
cyB8fCByZWdleC50ZXN0KG5vZGUubm9kZVR5cGUpKSAmJiAoIWZpbHRlckV4aXN0cyB8fCBmaWx0
ZXIobm9kZSkpKSB7CiAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpOwogICAgICAgICAg
ICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG5vZGVzOwogICAgfQoKICAgIGZ1bmN0aW9u
IGluc3BlY3QocmFuZ2UpIHsKICAgICAgICB2YXIgbmFtZSA9ICh0eXBlb2YgcmFuZ2UuZ2V0TmFt
ZSA9PSAidW5kZWZpbmVkIikgPyAiUmFuZ2UiIDogcmFuZ2UuZ2V0TmFtZSgpOwogICAgICAgIHJl
dHVybiAiWyIgKyBuYW1lICsgIigiICsgZG9tLmluc3BlY3ROb2RlKHJhbmdlLnN0YXJ0Q29udGFp
bmVyKSArICI6IiArIHJhbmdlLnN0YXJ0T2Zmc2V0ICsgIiwgIiArCiAgICAgICAgICAgICAgICBk
b20uaW5zcGVjdE5vZGUocmFuZ2UuZW5kQ29udGFpbmVyKSArICI6IiArIHJhbmdlLmVuZE9mZnNl
dCArICIpXSI7CiAgICB9CgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyBSYW5nZUl0ZXJhdG9yIGNvZGUgcGFydGlh
bGx5IGJvcnJvd3MgZnJvbSBJRVJhbmdlIGJ5IFRpbSBSeWFuIChodHRwOi8vZ2l0aHViLmNvbS90
aW1jYW1lcm9ucnlhbi9JRVJhbmdlKQoKICAgIGZ1bmN0aW9uIFJhbmdlSXRlcmF0b3IocmFuZ2Us
IGNsb25lUGFydGlhbGx5U2VsZWN0ZWRUZXh0Tm9kZXMpIHsKICAgICAgICB0aGlzLnJhbmdlID0g
cmFuZ2U7CiAgICAgICAgdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzID0gY2xv
bmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlczsKCgogICAgICAgIGlmICghcmFuZ2UuY29sbGFw
c2VkKSB7CiAgICAgICAgICAgIHRoaXMuc2MgPSByYW5nZS5zdGFydENvbnRhaW5lcjsKICAgICAg
ICAgICAgdGhpcy5zbyA9IHJhbmdlLnN0YXJ0T2Zmc2V0OwogICAgICAgICAgICB0aGlzLmVjID0g
cmFuZ2UuZW5kQ29udGFpbmVyOwogICAgICAgICAgICB0aGlzLmVvID0gcmFuZ2UuZW5kT2Zmc2V0
OwogICAgICAgICAgICB2YXIgcm9vdCA9IHJhbmdlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOwoK
ICAgICAgICAgICAgaWYgKHRoaXMuc2MgPT09IHRoaXMuZWMgJiYgaXNDaGFyYWN0ZXJEYXRhTm9k
ZSh0aGlzLnNjKSkgewogICAgICAgICAgICAgICAgdGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFO
b2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0ID0gdGhpcy5fbGFzdCA9IHRo
aXMuX25leHQgPSB0aGlzLnNjOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg
dGhpcy5fZmlyc3QgPSB0aGlzLl9uZXh0ID0gKHRoaXMuc2MgPT09IHJvb3QgJiYgIWlzQ2hhcmFj
dGVyRGF0YU5vZGUodGhpcy5zYykpID8KICAgICAgICAgICAgICAgICAgICB0aGlzLnNjLmNoaWxk
Tm9kZXNbdGhpcy5zb10gOiBnZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLnNjLCByb290LCB0cnVl
KTsKICAgICAgICAgICAgICAgIHRoaXMuX2xhc3QgPSAodGhpcy5lYyA9PT0gcm9vdCAmJiAhaXND
aGFyYWN0ZXJEYXRhTm9kZSh0aGlzLmVjKSkgPwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWMu
Y2hpbGROb2Rlc1t0aGlzLmVvIC0gMV0gOiBnZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLmVjLCBy
b290LCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBSYW5nZUl0ZXJh
dG9yLnByb3RvdHlwZSA9IHsKICAgICAgICBfY3VycmVudDogbnVsbCwKICAgICAgICBfbmV4dDog
bnVsbCwKICAgICAgICBfZmlyc3Q6IG51bGwsCiAgICAgICAgX2xhc3Q6IG51bGwsCiAgICAgICAg
aXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZTogZmFsc2UsCgogICAgICAgIHJlc2V0OiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgdGhpcy5fY3VycmVudCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMu
X25leHQgPSB0aGlzLl9maXJzdDsKICAgICAgICB9LAoKICAgICAgICBoYXNOZXh0OiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fbmV4dDsKICAgICAgICB9LAoKICAgICAg
ICBuZXh0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgLy8gTW92ZSB0byBuZXh0IG5vZGUKICAg
ICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9jdXJyZW50ID0gdGhpcy5fbmV4dDsKICAgICAg
ICAgICAgaWYgKGN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIHRoaXMuX25leHQgPSAoY3VycmVu
dCAhPT0gdGhpcy5fbGFzdCkgPyBjdXJyZW50Lm5leHRTaWJsaW5nIDogbnVsbDsKCiAgICAgICAg
ICAgICAgICAvLyBDaGVjayBmb3IgcGFydGlhbGx5IHNlbGVjdGVkIHRleHQgbm9kZXMKICAgICAg
ICAgICAgICAgIGlmIChpc0NoYXJhY3RlckRhdGFOb2RlKGN1cnJlbnQpICYmIHRoaXMuY2xvbmVQ
YXJ0aWFsbHlTZWxlY3RlZFRleHROb2RlcykgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJy
ZW50ID09PSB0aGlzLmVjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChjdXJyZW50ID0gY3Vy
cmVudC5jbG9uZU5vZGUodHJ1ZSkpLmRlbGV0ZURhdGEodGhpcy5lbywgY3VycmVudC5sZW5ndGgg
LSB0aGlzLmVvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYg
KHRoaXMuX2N1cnJlbnQgPT09IHRoaXMuc2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgKGN1
cnJlbnQgPSBjdXJyZW50LmNsb25lTm9kZSh0cnVlKSkuZGVsZXRlRGF0YSgwLCB0aGlzLnNvKTsK
ICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAg
ICAgICAgICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0sCgogICAgICAgIHJlbW92ZTogZnVu
Y3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5fY3VycmVudCwgc3RhcnQs
IGVuZDsKCiAgICAgICAgICAgIGlmIChpc0NoYXJhY3RlckRhdGFOb2RlKGN1cnJlbnQpICYmIChj
dXJyZW50ID09PSB0aGlzLnNjIHx8IGN1cnJlbnQgPT09IHRoaXMuZWMpKSB7CiAgICAgICAgICAg
ICAgICBzdGFydCA9IChjdXJyZW50ID09PSB0aGlzLnNjKSA/IHRoaXMuc28gOiAwOwogICAgICAg
ICAgICAgICAgZW5kID0gKGN1cnJlbnQgPT09IHRoaXMuZWMpID8gdGhpcy5lbyA6IGN1cnJlbnQu
bGVuZ3RoOwogICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICE9IGVuZCkgewogICAgICAgICAgICAg
ICAgICAgIGN1cnJlbnQuZGVsZXRlRGF0YShzdGFydCwgZW5kIC0gc3RhcnQpOwogICAgICAgICAg
ICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQu
cGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQucGFyZW50Tm9kZS5yZW1v
dmVDaGlsZChjdXJyZW50KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvLyBDaGVja3MgaWYgdGhlIGN1
cnJlbnQgbm9kZSBpcyBwYXJ0aWFsbHkgc2VsZWN0ZWQKICAgICAgICBpc1BhcnRpYWxseVNlbGVj
dGVkU3VidHJlZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5f
Y3VycmVudDsKICAgICAgICAgICAgcmV0dXJuIGlzTm9uVGV4dFBhcnRpYWxseVNlbGVjdGVkKGN1
cnJlbnQsIHRoaXMucmFuZ2UpOwogICAgICAgIH0sCgogICAgICAgIGdldFN1YnRyZWVJdGVyYXRv
cjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBzdWJSYW5nZTsKICAgICAgICAgICAgaWYg
KHRoaXMuaXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZSkgewogICAgICAgICAgICAgICAgc3ViUmFu
Z2UgPSB0aGlzLnJhbmdlLmNsb25lUmFuZ2UoKTsKICAgICAgICAgICAgICAgIHN1YlJhbmdlLmNv
bGxhcHNlKGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN1YlJh
bmdlID0gbmV3IFJhbmdlKGdldFJhbmdlRG9jdW1lbnQodGhpcy5yYW5nZSkpOwogICAgICAgICAg
ICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9jdXJyZW50OwogICAgICAgICAgICAgICAgdmFyIHN0
YXJ0Q29udGFpbmVyID0gY3VycmVudCwgc3RhcnRPZmZzZXQgPSAwLCBlbmRDb250YWluZXIgPSBj
dXJyZW50LCBlbmRPZmZzZXQgPSBnZXROb2RlTGVuZ3RoKGN1cnJlbnQpOwoKICAgICAgICAgICAg
ICAgIGlmIChpc09ySXNBbmNlc3Rvck9mKGN1cnJlbnQsIHRoaXMuc2MpKSB7CiAgICAgICAgICAg
ICAgICAgICAgc3RhcnRDb250YWluZXIgPSB0aGlzLnNjOwogICAgICAgICAgICAgICAgICAgIHN0
YXJ0T2Zmc2V0ID0gdGhpcy5zbzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm
IChpc09ySXNBbmNlc3Rvck9mKGN1cnJlbnQsIHRoaXMuZWMpKSB7CiAgICAgICAgICAgICAgICAg
ICAgZW5kQ29udGFpbmVyID0gdGhpcy5lYzsKICAgICAgICAgICAgICAgICAgICBlbmRPZmZzZXQg
PSB0aGlzLmVvOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5k
YXJpZXMoc3ViUmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBzdGFydE9mZnNldCwgZW5kQ29udGFpbmVy
LCBlbmRPZmZzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2VJ
dGVyYXRvcihzdWJSYW5nZSwgdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzKTsK
ICAgICAgICB9LAoKICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uKGRldGFjaFJhbmdlKSB7CiAgICAg
ICAgICAgIGlmIChkZXRhY2hSYW5nZSkgewogICAgICAgICAgICAgICAgdGhpcy5yYW5nZS5kZXRh
Y2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5fY3VycmVu
dCA9IHRoaXMuX25leHQgPSB0aGlzLl9maXJzdCA9IHRoaXMuX2xhc3QgPSB0aGlzLnNjID0gdGhp
cy5zbyA9IHRoaXMuZWMgPSB0aGlzLmVvID0gbnVsbDsKICAgICAgICB9CiAgICB9OwoKICAgIC8q
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSov
CgogICAgLy8gRXhjZXB0aW9ucwoKICAgIGZ1bmN0aW9uIFJhbmdlRXhjZXB0aW9uKGNvZGVOYW1l
KSB7CiAgICAgICAgdGhpcy5jb2RlID0gdGhpc1tjb2RlTmFtZV07CiAgICAgICAgdGhpcy5jb2Rl
TmFtZSA9IGNvZGVOYW1lOwogICAgICAgIHRoaXMubWVzc2FnZSA9ICJSYW5nZUV4Y2VwdGlvbjog
IiArIHRoaXMuY29kZU5hbWU7CiAgICB9CgogICAgUmFuZ2VFeGNlcHRpb24ucHJvdG90eXBlID0g
ewogICAgICAgIEJBRF9CT1VOREFSWVBPSU5UU19FUlI6IDEsCiAgICAgICAgSU5WQUxJRF9OT0RF
X1RZUEVfRVJSOiAyCiAgICB9OwoKICAgIFJhbmdlRXhjZXB0aW9uLnByb3RvdHlwZS50b1N0cmlu
ZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7CiAgICB9OwoKICAg
IC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LSovCgogICAgdmFyIGJlZm9yZUFmdGVyTm9kZVR5cGVzID0gWzEsIDMsIDQsIDUsIDcsIDgsIDEw
XTsKICAgIHZhciByb290Q29udGFpbmVyTm9kZVR5cGVzID0gWzIsIDksIDExXTsKICAgIHZhciBy
ZWFkb25seU5vZGVUeXBlcyA9IFs1LCA2LCAxMCwgMTJdOwogICAgdmFyIGluc2VydGFibGVOb2Rl
VHlwZXMgPSBbMSwgMywgNCwgNSwgNywgOCwgMTAsIDExXTsKICAgIHZhciBzdXJyb3VuZE5vZGVU
eXBlcyA9IFsxLCAzLCA0LCA1LCA3LCA4XTsKCiAgICBmdW5jdGlvbiBjcmVhdGVBbmNlc3RvckZp
bmRlcihub2RlVHlwZXMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSwgc2VsZklzQW5j
ZXN0b3IpIHsKICAgICAgICAgICAgdmFyIHQsIG4gPSBzZWxmSXNBbmNlc3RvciA/IG5vZGUgOiBu
b2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgIHdoaWxlIChuKSB7CiAgICAgICAgICAgICAgICB0
ID0gbi5ub2RlVHlwZTsKICAgICAgICAgICAgICAgIGlmIChhcnJheUNvbnRhaW5zKG5vZGVUeXBl
cywgdCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgIG4gPSBuLnBhcmVudE5vZGU7CiAgICAgICAgICAgIH0KICAgICAgICAg
ICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKICAgIH0KCiAgICB2YXIgZ2V0RG9jdW1lbnRPckZy
YWdtZW50Q29udGFpbmVyID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIoIFs5LCAxMV0gKTsKICAgIHZh
ciBnZXRSZWFkb25seUFuY2VzdG9yID0gY3JlYXRlQW5jZXN0b3JGaW5kZXIocmVhZG9ubHlOb2Rl
VHlwZXMpOwogICAgdmFyIGdldERvY1R5cGVOb3RhdGlvbkVudGl0eUFuY2VzdG9yID0gY3JlYXRl
QW5jZXN0b3JGaW5kZXIoIFs2LCAxMCwgMTJdICk7CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9Eb2NU
eXBlTm90YXRpb25FbnRpdHlBbmNlc3Rvcihub2RlLCBhbGxvd1NlbGYpIHsKICAgICAgICBpZiAo
Z2V0RG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgYWxsb3dTZWxmKSkgewogICAg
ICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIklOVkFMSURfTk9ERV9UWVBFX0VSUiIp
OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnROb3REZXRhY2hlZChyYW5nZSkg
ewogICAgICAgIGlmICghcmFuZ2Uuc3RhcnRDb250YWluZXIpIHsKICAgICAgICAgICAgdGhyb3cg
bmV3IERPTUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFURV9FUlIiKTsKICAgICAgICB9CiAgICB9Cgog
ICAgZnVuY3Rpb24gYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBpbnZhbGlkVHlwZXMpIHsKICAg
ICAgICBpZiAoIWFycmF5Q29udGFpbnMoaW52YWxpZFR5cGVzLCBub2RlLm5vZGVUeXBlKSkgewog
ICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIklOVkFMSURfTk9ERV9UWVBFX0VS
UiIpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRWYWxpZE9mZnNldChub2Rl
LCBvZmZzZXQpIHsKICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgPiAoaXNDaGFyYWN0
ZXJEYXRhTm9kZShub2RlKSA/IG5vZGUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkp
IHsKICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5ERVhfU0laRV9FUlIiKTsK
ICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0U2FtZURvY3VtZW50T3JGcmFnbWVu
dChub2RlMSwgbm9kZTIpIHsKICAgICAgICBpZiAoZ2V0RG9jdW1lbnRPckZyYWdtZW50Q29udGFp
bmVyKG5vZGUxLCB0cnVlKSAhPT0gZ2V0RG9jdW1lbnRPckZyYWdtZW50Q29udGFpbmVyKG5vZGUy
LCB0cnVlKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJXUk9OR19ET0NV
TUVOVF9FUlIiKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU5vdFJl
YWRPbmx5KG5vZGUpIHsKICAgICAgICBpZiAoZ2V0UmVhZG9ubHlBbmNlc3Rvcihub2RlLCB0cnVl
KSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJOT19NT0RJRklDQVRJT05f
QUxMT1dFRF9FUlIiKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZShu
b2RlLCBjb2RlTmFtZSkgewogICAgICAgIGlmICghbm9kZSkgewogICAgICAgICAgICB0aHJvdyBu
ZXcgRE9NRXhjZXB0aW9uKGNvZGVOYW1lKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24g
aXNPcnBoYW4obm9kZSkgewogICAgICAgIHJldHVybiAoY3Jhc2h5VGV4dE5vZGVzICYmIGRvbS5p
c0Jyb2tlbk5vZGUobm9kZSkpIHx8CiAgICAgICAgICAgICFhcnJheUNvbnRhaW5zKHJvb3RDb250
YWluZXJOb2RlVHlwZXMsIG5vZGUubm9kZVR5cGUpICYmICFnZXREb2N1bWVudE9yRnJhZ21lbnRD
b250YWluZXIobm9kZSwgdHJ1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNWYWxpZE9mZnNldChu
b2RlLCBvZmZzZXQpIHsKICAgICAgICByZXR1cm4gb2Zmc2V0IDw9IChpc0NoYXJhY3RlckRhdGFO
b2RlKG5vZGUpID8gbm9kZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKTsKICAgIH0K
CiAgICBmdW5jdGlvbiBpc1JhbmdlVmFsaWQocmFuZ2UpIHsKICAgICAgICByZXR1cm4gKCEhcmFu
Z2Uuc3RhcnRDb250YWluZXIgJiYgISFyYW5nZS5lbmRDb250YWluZXIKICAgICAgICAgICAgICAg
ICYmICFpc09ycGhhbihyYW5nZS5zdGFydENvbnRhaW5lcikKICAgICAgICAgICAgICAgICYmICFp
c09ycGhhbihyYW5nZS5lbmRDb250YWluZXIpCiAgICAgICAgICAgICAgICAmJiBpc1ZhbGlkT2Zm
c2V0KHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCkKICAgICAgICAgICAg
ICAgICYmIGlzVmFsaWRPZmZzZXQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQp
KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRSYW5nZVZhbGlkKHJhbmdlKSB7CiAgICAgICAg
YXNzZXJ0Tm90RGV0YWNoZWQocmFuZ2UpOwogICAgICAgIGlmICghaXNSYW5nZVZhbGlkKHJhbmdl
KSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJhbmdlIGVycm9yOiBSYW5nZSBpcyBu
byBsb25nZXIgdmFsaWQgYWZ0ZXIgRE9NIG11dGF0aW9uICgiICsgcmFuZ2UuaW5zcGVjdCgpICsg
IikiKTsKICAgICAgICB9CiAgICB9CgogICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCiAgICAvLyBUZXN0IHRoZSBicm93c2VyJ3Mg
aW5uZXJIVE1MIHN1cHBvcnQgdG8gZGVjaWRlIGhvdyB0byBpbXBsZW1lbnQgY3JlYXRlQ29udGV4
dHVhbEZyYWdtZW50CiAgICB2YXIgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0
eWxlIik7CiAgICB2YXIgaHRtbFBhcnNpbmdDb25mb3JtcyA9IGZhbHNlOwogICAgdHJ5IHsKICAg
ICAgICBzdHlsZUVsLmlubmVySFRNTCA9ICI8Yj54PC9iPiI7CiAgICAgICAgaHRtbFBhcnNpbmdD
b25mb3JtcyA9IChzdHlsZUVsLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT0gMyk7IC8vIE9wZXJhIGlu
Y29ycmVjdGx5IGNyZWF0ZXMgYW4gZWxlbWVudCBub2RlCiAgICB9IGNhdGNoIChlKSB7CiAgICAg
ICAgLy8gSUUgNiBhbmQgNyB0aHJvdwogICAgfQoKICAgIGFwaS5mZWF0dXJlcy5odG1sUGFyc2lu
Z0NvbmZvcm1zID0gaHRtbFBhcnNpbmdDb25mb3JtczsKCiAgICB2YXIgY3JlYXRlQ29udGV4dHVh
bEZyYWdtZW50ID0gaHRtbFBhcnNpbmdDb25mb3JtcyA/CgogICAgICAgIC8vIEltcGxlbWVudGF0
aW9uIGFzIHBlciBIVE1MIHBhcnNpbmcgc3BlYywgdHJ1c3RpbmcgaW4gdGhlIGJyb3dzZXIncyBp
bXBsZW1lbnRhdGlvbiBvZiBpbm5lckhUTUwuIFNlZQogICAgICAgIC8vIGRpc2N1c3Npb24gYW5k
IGJhc2UgY29kZSBmb3IgdGhpcyBpbXBsZW1lbnRhdGlvbiBhdCBpc3N1ZSA2Ny4KICAgICAgICAv
LyBTcGVjOiBodHRwOi8vaHRtbDUub3JnL3NwZWNzL2RvbS1wYXJzaW5nLmh0bWwjZXh0ZW5zaW9u
cy10by10aGUtcmFuZ2UtaW50ZXJmYWNlCiAgICAgICAgLy8gVGhhbmtzIHRvIEFsZWtzIFdpbGxp
YW1zLgogICAgICAgIGZ1bmN0aW9uKGZyYWdtZW50U3RyKSB7CiAgICAgICAgICAgIC8vICJMZXQg
bm9kZSB0aGUgY29udGV4dCBvYmplY3QncyBzdGFydCdzIG5vZGUuIgogICAgICAgICAgICB2YXIg
bm9kZSA9IHRoaXMuc3RhcnRDb250YWluZXI7CiAgICAgICAgICAgIHZhciBkb2MgPSBnZXREb2N1
bWVudChub2RlKTsKCiAgICAgICAgICAgIC8vICJJZiB0aGUgY29udGV4dCBvYmplY3QncyBzdGFy
dCdzIG5vZGUgaXMgbnVsbCwgcmFpc2UgYW4gSU5WQUxJRF9TVEFURV9FUlIKICAgICAgICAgICAg
Ly8gZXhjZXB0aW9uIGFuZCBhYm9ydCB0aGVzZSBzdGVwcy4iCiAgICAgICAgICAgIGlmICghbm9k
ZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiSU5WQUxJRF9TVEFU
RV9FUlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gIkxldCBlbGVtZW50IGJlIGFz
IGZvbGxvd3MsIGRlcGVuZGluZyBvbiBub2RlJ3MgaW50ZXJmYWNlOiIKICAgICAgICAgICAgLy8g
RG9jdW1lbnQsIERvY3VtZW50IEZyYWdtZW50OiBudWxsCiAgICAgICAgICAgIHZhciBlbCA9IG51
bGw7CgogICAgICAgICAgICAvLyAiRWxlbWVudDogbm9kZSIKICAgICAgICAgICAgaWYgKG5vZGUu
bm9kZVR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgZWwgPSBub2RlOwoKICAgICAgICAgICAg
Ly8gIlRleHQsIENvbW1lbnQ6IG5vZGUncyBwYXJlbnRFbGVtZW50IgogICAgICAgICAgICB9IGVs
c2UgaWYgKGlzQ2hhcmFjdGVyRGF0YU5vZGUobm9kZSkpIHsKICAgICAgICAgICAgICAgIGVsID0g
ZG9tLnBhcmVudEVsZW1lbnQobm9kZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICJJ
ZiBlaXRoZXIgZWxlbWVudCBpcyBudWxsIG9yIGVsZW1lbnQncyBvd25lckRvY3VtZW50IGlzIGFu
IEhUTUwgZG9jdW1lbnQKICAgICAgICAgICAgLy8gYW5kIGVsZW1lbnQncyBsb2NhbCBuYW1lIGlz
ICJodG1sIiBhbmQgZWxlbWVudCdzIG5hbWVzcGFjZSBpcyB0aGUgSFRNTAogICAgICAgICAgICAv
LyBuYW1lc3BhY2UiCiAgICAgICAgICAgIGlmIChlbCA9PT0gbnVsbCB8fCAoCiAgICAgICAgICAg
ICAgICBlbC5ub2RlTmFtZSA9PSAiSFRNTCIKICAgICAgICAgICAgICAgICYmIGRvbS5pc0h0bWxO
YW1lc3BhY2UoZ2V0RG9jdW1lbnQoZWwpLmRvY3VtZW50RWxlbWVudCkKICAgICAgICAgICAgICAg
ICYmIGRvbS5pc0h0bWxOYW1lc3BhY2UoZWwpCiAgICAgICAgICAgICkpIHsKCiAgICAgICAgICAg
IC8vICJsZXQgZWxlbWVudCBiZSBhIG5ldyBFbGVtZW50IHdpdGggImJvZHkiIGFzIGl0cyBsb2Nh
bCBuYW1lIGFuZCB0aGUgSFRNTAogICAgICAgICAgICAvLyBuYW1lc3BhY2UgYXMgaXRzIG5hbWVz
cGFjZS4iIgogICAgICAgICAgICAgICAgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgiYm9keSIpOwog
ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWwgPSBlbC5jbG9uZU5vZGUoZmFs
c2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAiSWYgdGhlIG5vZGUncyBkb2N1bWVu
dCBpcyBhbiBIVE1MIGRvY3VtZW50OiBJbnZva2UgdGhlIEhUTUwgZnJhZ21lbnQgcGFyc2luZyBh
bGdvcml0aG0uIgogICAgICAgICAgICAvLyAiSWYgdGhlIG5vZGUncyBkb2N1bWVudCBpcyBhbiBY
TUwgZG9jdW1lbnQ6IEludm9rZSB0aGUgWE1MIGZyYWdtZW50IHBhcnNpbmcgYWxnb3JpdGhtLiIK
ICAgICAgICAgICAgLy8gIkluIGVpdGhlciBjYXNlLCB0aGUgYWxnb3JpdGhtIG11c3QgYmUgaW52
b2tlZCB3aXRoIGZyYWdtZW50IGFzIHRoZSBpbnB1dAogICAgICAgICAgICAvLyBhbmQgZWxlbWVu
dCBhcyB0aGUgY29udGV4dCBlbGVtZW50LiIKICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gZnJh
Z21lbnRTdHI7CgogICAgICAgICAgICAvLyAiSWYgdGhpcyByYWlzZXMgYW4gZXhjZXB0aW9uLCB0
aGVuIGFib3J0IHRoZXNlIHN0ZXBzLiBPdGhlcndpc2UsIGxldCBuZXcKICAgICAgICAgICAgLy8g
Y2hpbGRyZW4gYmUgdGhlIG5vZGVzIHJldHVybmVkLiIKCiAgICAgICAgICAgIC8vICJMZXQgZnJh
Z21lbnQgYmUgYSBuZXcgRG9jdW1lbnRGcmFnbWVudC4iCiAgICAgICAgICAgIC8vICJBcHBlbmQg
YWxsIG5ldyBjaGlsZHJlbiB0byBmcmFnbWVudC4iCiAgICAgICAgICAgIC8vICJSZXR1cm4gZnJh
Z21lbnQuIgogICAgICAgICAgICByZXR1cm4gZG9tLmZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbihl
bCk7CiAgICAgICAgfSA6CgogICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaW5uZXJIVE1MIGNhbm5v
dCBiZSB0cnVzdGVkLCBzbyBmYWxsIGJhY2sgdG8gYSBzaW1wbGVyLCBub24tY29uZm9ybWFudCBp
bXBsZW1lbnRhdGlvbiB0aGF0CiAgICAgICAgLy8gcHJldmlvdXMgdmVyc2lvbnMgb2YgUmFuZ3kg
dXNlZCAod2l0aCB0aGUgZXhjZXB0aW9uIG9mIHVzaW5nIGEgYm9keSBlbGVtZW50IHJhdGhlciB0
aGFuIGEgZGl2KQogICAgICAgIGZ1bmN0aW9uKGZyYWdtZW50U3RyKSB7CiAgICAgICAgICAgIGFz
c2VydE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICB2YXIgZG9jID0gZ2V0UmFuZ2VEb2N1
bWVudCh0aGlzKTsKICAgICAgICAgICAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoImJvZHki
KTsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gZnJhZ21lbnRTdHI7CgogICAgICAgICAgICBy
ZXR1cm4gZG9tLmZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbihlbCk7CiAgICAgICAgfTsKCiAgICBm
dW5jdGlvbiBzcGxpdFJhbmdlQm91bmRhcmllcyhyYW5nZSwgcG9zaXRpb25zVG9QcmVzZXJ2ZSkg
ewogICAgICAgIGFzc2VydFJhbmdlVmFsaWQocmFuZ2UpOwoKICAgICAgICB2YXIgc2MgPSByYW5n
ZS5zdGFydENvbnRhaW5lciwgc28gPSByYW5nZS5zdGFydE9mZnNldCwgZWMgPSByYW5nZS5lbmRD
b250YWluZXIsIGVvID0gcmFuZ2UuZW5kT2Zmc2V0OwogICAgICAgIHZhciBzdGFydEVuZFNhbWUg
PSAoc2MgPT09IGVjKTsKCiAgICAgICAgaWYgKGlzQ2hhcmFjdGVyRGF0YU5vZGUoZWMpICYmIGVv
ID4gMCAmJiBlbyA8IGVjLmxlbmd0aCkgewogICAgICAgICAgICBzcGxpdERhdGFOb2RlKGVjLCBl
bywgcG9zaXRpb25zVG9QcmVzZXJ2ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNDaGFyYWN0
ZXJEYXRhTm9kZShzYykgJiYgc28gPiAwICYmIHNvIDwgc2MubGVuZ3RoKSB7CiAgICAgICAgICAg
IHNjID0gc3BsaXREYXRhTm9kZShzYywgc28sIHBvc2l0aW9uc1RvUHJlc2VydmUpOwogICAgICAg
ICAgICBpZiAoc3RhcnRFbmRTYW1lKSB7CiAgICAgICAgICAgICAgICBlbyAtPSBzbzsKICAgICAg
ICAgICAgICAgIGVjID0gc2M7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWMgPT0gc2MucGFyZW50
Tm9kZSAmJiBlbyA+PSBnZXROb2RlSW5kZXgoc2MpKSB7CiAgICAgICAgICAgICAgICBlbysrOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIHNvID0gMDsKICAgICAgICB9CiAgICAgICAgcmFuZ2Uu
c2V0U3RhcnRBbmRFbmQoc2MsIHNvLCBlYywgZW8pOwogICAgfQoKICAgIC8qLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgdmFyIHJh
bmdlUHJvcGVydGllcyA9IFsic3RhcnRDb250YWluZXIiLCAic3RhcnRPZmZzZXQiLCAiZW5kQ29u
dGFpbmVyIiwgImVuZE9mZnNldCIsICJjb2xsYXBzZWQiLAogICAgICAgICJjb21tb25BbmNlc3Rv
ckNvbnRhaW5lciJdOwoKICAgIHZhciBzMnMgPSAwLCBzMmUgPSAxLCBlMmUgPSAyLCBlMnMgPSAz
OwogICAgdmFyIG5fYiA9IDAsIG5fYSA9IDEsIG5fYl9hID0gMiwgbl9pID0gMzsKCiAgICBmdW5j
dGlvbiBSYW5nZVByb3RvdHlwZSgpIHt9CgogICAgUmFuZ2VQcm90b3R5cGUucHJvdG90eXBlID0g
ewogICAgICAgIGNvbXBhcmVCb3VuZGFyeVBvaW50czogZnVuY3Rpb24oaG93LCByYW5nZSkgewog
ICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3NlcnRTYW1l
RG9jdW1lbnRPckZyYWdtZW50KHRoaXMuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0Q29udGFp
bmVyKTsKCiAgICAgICAgICAgIHZhciBub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNldEI7CiAg
ICAgICAgICAgIHZhciBwcmVmaXhBID0gKGhvdyA9PSBlMnMgfHwgaG93ID09IHMycykgPyAic3Rh
cnQiIDogImVuZCI7CiAgICAgICAgICAgIHZhciBwcmVmaXhCID0gKGhvdyA9PSBzMmUgfHwgaG93
ID09IHMycykgPyAic3RhcnQiIDogImVuZCI7CiAgICAgICAgICAgIG5vZGVBID0gdGhpc1twcmVm
aXhBICsgIkNvbnRhaW5lciJdOwogICAgICAgICAgICBvZmZzZXRBID0gdGhpc1twcmVmaXhBICsg
Ik9mZnNldCJdOwogICAgICAgICAgICBub2RlQiA9IHJhbmdlW3ByZWZpeEIgKyAiQ29udGFpbmVy
Il07CiAgICAgICAgICAgIG9mZnNldEIgPSByYW5nZVtwcmVmaXhCICsgIk9mZnNldCJdOwogICAg
ICAgICAgICByZXR1cm4gY29tcGFyZVBvaW50cyhub2RlQSwgb2Zmc2V0QSwgbm9kZUIsIG9mZnNl
dEIpOwogICAgICAgIH0sCgogICAgICAgIGluc2VydE5vZGU6IGZ1bmN0aW9uKG5vZGUpIHsKICAg
ICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNzZXJ0VmFsaWRO
b2RlVHlwZShub2RlLCBpbnNlcnRhYmxlTm9kZVR5cGVzKTsKICAgICAgICAgICAgYXNzZXJ0Tm9k
ZU5vdFJlYWRPbmx5KHRoaXMuc3RhcnRDb250YWluZXIpOwoKICAgICAgICAgICAgaWYgKGlzT3JJ
c0FuY2VzdG9yT2Yobm9kZSwgdGhpcy5zdGFydENvbnRhaW5lcikpIHsKICAgICAgICAgICAgICAg
IHRocm93IG5ldyBET01FeGNlcHRpb24oIkhJRVJBUkNIWV9SRVFVRVNUX0VSUiIpOwogICAgICAg
ICAgICB9CgogICAgICAgICAgICAvLyBObyBjaGVjayBmb3Igd2hldGhlciB0aGUgY29udGFpbmVy
IG9mIHRoZSBzdGFydCBvZiB0aGUgUmFuZ2UgaXMgb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWxs
b3cKICAgICAgICAgICAgLy8gY2hpbGRyZW4gb2YgdGhlIHR5cGUgb2Ygbm9kZTogdGhlIGJyb3dz
ZXIncyBET00gaW1wbGVtZW50YXRpb24gc2hvdWxkIGRvIHRoaXMgZm9yIHVzIHdoZW4gd2UgYXR0
ZW1wdAogICAgICAgICAgICAvLyB0byBhZGQgdGhlIG5vZGUKCiAgICAgICAgICAgIHZhciBmaXJz
dE5vZGVJbnNlcnRlZCA9IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIHRoaXMuc3RhcnRDb250
YWluZXIsIHRoaXMuc3RhcnRPZmZzZXQpOwogICAgICAgICAgICB0aGlzLnNldFN0YXJ0QmVmb3Jl
KGZpcnN0Tm9kZUluc2VydGVkKTsKICAgICAgICB9LAoKICAgICAgICBjbG9uZUNvbnRlbnRzOiBm
dW5jdGlvbigpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKCiAgICAgICAg
ICAgIHZhciBjbG9uZSwgZnJhZzsKICAgICAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkKSB7CiAg
ICAgICAgICAgICAgICByZXR1cm4gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKS5jcmVhdGVEb2N1bWVu
dEZyYWdtZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhp
cy5zdGFydENvbnRhaW5lciA9PT0gdGhpcy5lbmRDb250YWluZXIgJiYgaXNDaGFyYWN0ZXJEYXRh
Tm9kZSh0aGlzLnN0YXJ0Q29udGFpbmVyKSkgewogICAgICAgICAgICAgICAgICAgIGNsb25lID0g
dGhpcy5zdGFydENvbnRhaW5lci5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAg
Y2xvbmUuZGF0YSA9IGNsb25lLmRhdGEuc2xpY2UodGhpcy5zdGFydE9mZnNldCwgdGhpcy5lbmRP
ZmZzZXQpOwogICAgICAgICAgICAgICAgICAgIGZyYWcgPSBnZXRSYW5nZURvY3VtZW50KHRoaXMp
LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgICAgICAgICAgICAgICBmcmFnLmFwcGVu
ZENoaWxkKGNsb25lKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhZzsKICAgICAgICAg
ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFJh
bmdlSXRlcmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBjbG9u
ZVN1YnRyZWUoaXRlcmF0b3IpOwogICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmRldGFjaCgp
OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lOwogICAgICAg
ICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgY2FuU3Vycm91bmRDb250ZW50czogZnVuY3Rpb24o
KSB7CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgICAgIGFzc2Vy
dE5vZGVOb3RSZWFkT25seSh0aGlzLnN0YXJ0Q29udGFpbmVyKTsKICAgICAgICAgICAgYXNzZXJ0
Tm9kZU5vdFJlYWRPbmx5KHRoaXMuZW5kQ29udGFpbmVyKTsKCiAgICAgICAgICAgIC8vIENoZWNr
IGlmIHRoZSBjb250ZW50cyBjYW4gYmUgc3Vycm91bmRlZC4gU3BlY2lmaWNhbGx5LCB0aGlzIG1l
YW5zIHdoZXRoZXIgdGhlIHJhbmdlIHBhcnRpYWxseSBzZWxlY3RzCiAgICAgICAgICAgIC8vIG5v
IG5vbi10ZXh0IG5vZGVzLgogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgUmFuZ2VJdGVy
YXRvcih0aGlzLCB0cnVlKTsKICAgICAgICAgICAgdmFyIGJvdW5kYXJpZXNJbnZhbGlkID0gKGl0
ZXJhdG9yLl9maXJzdCAmJiAoaXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2Zp
cnN0LCB0aGlzKSkgfHwKICAgICAgICAgICAgICAgICAgICAoaXRlcmF0b3IuX2xhc3QgJiYgaXNO
b25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2xhc3QsIHRoaXMpKSk7CiAgICAgICAg
ICAgIGl0ZXJhdG9yLmRldGFjaCgpOwogICAgICAgICAgICByZXR1cm4gIWJvdW5kYXJpZXNJbnZh
bGlkOwogICAgICAgIH0sCgogICAgICAgIHN1cnJvdW5kQ29udGVudHM6IGZ1bmN0aW9uKG5vZGUp
IHsKICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBzdXJyb3VuZE5vZGVUeXBl
cyk7CgogICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3Vycm91bmRDb250ZW50cygpKSB7CiAgICAg
ICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFeGNlcHRpb24oIkJBRF9CT1VOREFSWVBPSU5UU19F
UlIiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgY29udGVudHMK
ICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmV4dHJhY3RDb250ZW50cygpOwoKICAgICAg
ICAgICAgLy8gQ2xlYXIgdGhlIGNoaWxkcmVuIG9mIHRoZSBub2RlCiAgICAgICAgICAgIGlmIChu
b2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgICAgICAgICAgd2hpbGUgKG5vZGUubGFzdENo
aWxkKSB7CiAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGls
ZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEluc2Vy
dCB0aGUgbmV3IG5vZGUgYW5kIGFkZCB0aGUgZXh0cmFjdGVkIGNvbnRlbnRzCiAgICAgICAgICAg
IGluc2VydE5vZGVBdFBvc2l0aW9uKG5vZGUsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3Rh
cnRPZmZzZXQpOwogICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNvbnRlbnQpOwoKICAgICAg
ICAgICAgdGhpcy5zZWxlY3ROb2RlKG5vZGUpOwogICAgICAgIH0sCgogICAgICAgIGNsb25lUmFu
Z2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAg
ICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2UoZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKSk7CiAg
ICAgICAgICAgIHZhciBpID0gcmFuZ2VQcm9wZXJ0aWVzLmxlbmd0aCwgcHJvcDsKICAgICAgICAg
ICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgcHJvcCA9IHJhbmdlUHJvcGVydGllc1tp
XTsKICAgICAgICAgICAgICAgIHJhbmdlW3Byb3BdID0gdGhpc1twcm9wXTsKICAgICAgICAgICAg
fQogICAgICAgICAgICByZXR1cm4gcmFuZ2U7CiAgICAgICAgfSwKCiAgICAgICAgdG9TdHJpbmc6
IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAg
ICAgICB2YXIgc2MgPSB0aGlzLnN0YXJ0Q29udGFpbmVyOwogICAgICAgICAgICBpZiAoc2MgPT09
IHRoaXMuZW5kQ29udGFpbmVyICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUoc2MpKSB7CiAgICAgICAg
ICAgICAgICByZXR1cm4gKHNjLm5vZGVUeXBlID09IDMgfHwgc2Mubm9kZVR5cGUgPT0gNCkgPyBz
Yy5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsIHRoaXMuZW5kT2Zmc2V0KSA6ICIiOwogICAg
ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHRleHRCaXRzID0gW10sIGl0ZXJh
dG9yID0gbmV3IFJhbmdlSXRlcmF0b3IodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBpdGVy
YXRlU3VidHJlZShpdGVyYXRvciwgZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAgICAgICAg
IC8vIEFjY2VwdCBvbmx5IHRleHQgb3IgQ0RBVEEgbm9kZXMsIG5vdCBjb21tZW50cwogICAgICAg
ICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgfHwgbm9kZS5ub2RlVHlwZSA9PSA0
KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRCaXRzLnB1c2gobm9kZS5kYXRhKTsKICAg
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGl0
ZXJhdG9yLmRldGFjaCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRleHRCaXRzLmpvaW4oIiIp
OwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLy8gVGhlIG1ldGhvZHMgYmVsb3cg
YXJlIGFsbCBub24tc3RhbmRhcmQuIFRoZSBmb2xsb3dpbmcgYmF0Y2ggd2VyZSBpbnRyb2R1Y2Vk
IGJ5IE1vemlsbGEgYnV0IGhhdmUgc2luY2UKICAgICAgICAvLyBiZWVuIHJlbW92ZWQgZnJvbSBN
b3ppbGxhLgoKICAgICAgICBjb21wYXJlTm9kZTogZnVuY3Rpb24obm9kZSkgewogICAgICAgICAg
ICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwoKICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUu
cGFyZW50Tm9kZTsKICAgICAgICAgICAgdmFyIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleChub2Rl
KTsKCiAgICAgICAgICAgIGlmICghcGFyZW50KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg
RE9NRXhjZXB0aW9uKCJOT1RfRk9VTkRfRVJSIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg
IHZhciBzdGFydENvbXBhcmlzb24gPSB0aGlzLmNvbXBhcmVQb2ludChwYXJlbnQsIG5vZGVJbmRl
eCksCiAgICAgICAgICAgICAgICBlbmRDb21wYXJpc29uID0gdGhpcy5jb21wYXJlUG9pbnQocGFy
ZW50LCBub2RlSW5kZXggKyAxKTsKCiAgICAgICAgICAgIGlmIChzdGFydENvbXBhcmlzb24gPCAw
KSB7IC8vIE5vZGUgc3RhcnRzIGJlZm9yZQogICAgICAgICAgICAgICAgcmV0dXJuIChlbmRDb21w
YXJpc29uID4gMCkgPyBuX2JfYSA6IG5fYjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgICAgIHJldHVybiAoZW5kQ29tcGFyaXNvbiA+IDApID8gbl9hIDogbl9pOwogICAgICAgICAg
ICB9CiAgICAgICAgfSwKCiAgICAgICAgY29tcGFyZVBvaW50OiBmdW5jdGlvbihub2RlLCBvZmZz
ZXQpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VWYWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNz
ZXJ0Tm9kZShub2RlLCAiSElFUkFSQ0hZX1JFUVVFU1RfRVJSIik7CiAgICAgICAgICAgIGFzc2Vy
dFNhbWVEb2N1bWVudE9yRnJhZ21lbnQobm9kZSwgdGhpcy5zdGFydENvbnRhaW5lcik7CgogICAg
ICAgICAgICBpZiAoY29tcGFyZVBvaW50cyhub2RlLCBvZmZzZXQsIHRoaXMuc3RhcnRDb250YWlu
ZXIsIHRoaXMuc3RhcnRPZmZzZXQpIDwgMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIC0xOwog
ICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCB0aGlzLmVu
ZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQpID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJu
IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKCiAgICAg
ICAgY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50OiBjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQsCgog
ICAgICAgIHRvSHRtbDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQo
dGhpcyk7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbW1vbkFuY2VzdG9yQ29u
dGFpbmVyLnBhcmVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTsKICAgICAgICAgICAgY29udGFpbmVy
LmFwcGVuZENoaWxkKHRoaXMuY2xvbmVDb250ZW50cygpKTsKICAgICAgICAgICAgcmV0dXJuIGNv
bnRhaW5lci5pbm5lckhUTUw7CiAgICAgICAgfSwKCiAgICAgICAgLy8gdG91Y2hpbmdJc0ludGVy
c2VjdGluZyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhpcyBtZXRob2QgY29uc2lkZXJzIGEgbm9kZSB0
aGF0IGJvcmRlcnMgYSByYW5nZSBpbnRlcnNlY3RzCiAgICAgICAgLy8gd2l0aCBpdCAoYXMgaW4g
V2ViS2l0KSBvciBub3QgKGFzIGluIEdlY2tvIHByZS0xLjksIGFuZCB0aGUgZGVmYXVsdCkKICAg
ICAgICBpbnRlcnNlY3RzTm9kZTogZnVuY3Rpb24obm9kZSwgdG91Y2hpbmdJc0ludGVyc2VjdGlu
ZykgewogICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRoaXMpOwogICAgICAgICAgICBhc3Nl
cnROb2RlKG5vZGUsICJOT1RfRk9VTkRfRVJSIik7CiAgICAgICAgICAgIGlmIChnZXREb2N1bWVu
dChub2RlKSAhPT0gZ2V0UmFuZ2VEb2N1bWVudCh0aGlzKSkgewogICAgICAgICAgICAgICAgcmV0
dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5w
YXJlbnROb2RlLCBvZmZzZXQgPSBnZXROb2RlSW5kZXgobm9kZSk7CiAgICAgICAgICAgIGFzc2Vy
dE5vZGUocGFyZW50LCAiTk9UX0ZPVU5EX0VSUiIpOwoKICAgICAgICAgICAgdmFyIHN0YXJ0Q29t
cGFyaXNvbiA9IGNvbXBhcmVQb2ludHMocGFyZW50LCBvZmZzZXQsIHRoaXMuZW5kQ29udGFpbmVy
LCB0aGlzLmVuZE9mZnNldCksCiAgICAgICAgICAgICAgICBlbmRDb21wYXJpc29uID0gY29tcGFy
ZVBvaW50cyhwYXJlbnQsIG9mZnNldCArIDEsIHRoaXMuc3RhcnRDb250YWluZXIsIHRoaXMuc3Rh
cnRPZmZzZXQpOwoKICAgICAgICAgICAgcmV0dXJuIHRvdWNoaW5nSXNJbnRlcnNlY3RpbmcgPyBz
dGFydENvbXBhcmlzb24gPD0gMCAmJiBlbmRDb21wYXJpc29uID49IDAgOiBzdGFydENvbXBhcmlz
b24gPCAwICYmIGVuZENvbXBhcmlzb24gPiAwOwogICAgICAgIH0sCgogICAgICAgIGlzUG9pbnRJ
blJhbmdlOiBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgYXNzZXJ0UmFuZ2VW
YWxpZCh0aGlzKTsKICAgICAgICAgICAgYXNzZXJ0Tm9kZShub2RlLCAiSElFUkFSQ0hZX1JFUVVF
U1RfRVJSIik7CiAgICAgICAgICAgIGFzc2VydFNhbWVEb2N1bWVudE9yRnJhZ21lbnQobm9kZSwg
dGhpcy5zdGFydENvbnRhaW5lcik7CgogICAgICAgICAgICByZXR1cm4gKGNvbXBhcmVQb2ludHMo
bm9kZSwgb2Zmc2V0LCB0aGlzLnN0YXJ0Q29udGFpbmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KSA+PSAw
KSAmJgogICAgICAgICAgICAgICAgICAgKGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCB0aGlz
LmVuZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQpIDw9IDApOwogICAgICAgIH0sCgogICAgICAg
IC8vIFRoZSBtZXRob2RzIGJlbG93IGFyZSBub24tc3RhbmRhcmQgYW5kIGludmVudGVkIGJ5IG1l
LgoKICAgICAgICAvLyBTaGFyaW5nIGEgYm91bmRhcnkgc3RhcnQtdG8tZW5kIG9yIGVuZC10by1z
dGFydCBkb2VzIG5vdCBjb3VudCBhcyBpbnRlcnNlY3Rpb24uCiAgICAgICAgaW50ZXJzZWN0c1Jh
bmdlOiBmdW5jdGlvbihyYW5nZSkgewogICAgICAgICAgICByZXR1cm4gcmFuZ2VzSW50ZXJzZWN0
KHRoaXMsIHJhbmdlLCBmYWxzZSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gU2hhcmluZyBhIGJv
dW5kYXJ5IHN0YXJ0LXRvLWVuZCBvciBlbmQtdG8tc3RhcnQgZG9lcyBjb3VudCBhcyBpbnRlcnNl
Y3Rpb24uCiAgICAgICAgaW50ZXJzZWN0c09yVG91Y2hlc1JhbmdlOiBmdW5jdGlvbihyYW5nZSkg
ewogICAgICAgICAgICByZXR1cm4gcmFuZ2VzSW50ZXJzZWN0KHRoaXMsIHJhbmdlLCB0cnVlKTsK
ICAgICAgICB9LAoKICAgICAgICBpbnRlcnNlY3Rpb246IGZ1bmN0aW9uKHJhbmdlKSB7CiAgICAg
ICAgICAgIGlmICh0aGlzLmludGVyc2VjdHNSYW5nZShyYW5nZSkpIHsKICAgICAgICAgICAgICAg
IHZhciBzdGFydENvbXBhcmlzb24gPSBjb21wYXJlUG9pbnRzKHRoaXMuc3RhcnRDb250YWluZXIs
IHRoaXMuc3RhcnRPZmZzZXQsIHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNl
dCksCiAgICAgICAgICAgICAgICAgICAgZW5kQ29tcGFyaXNvbiA9IGNvbXBhcmVQb2ludHModGhp
cy5lbmRDb250YWluZXIsIHRoaXMuZW5kT2Zmc2V0LCByYW5nZS5lbmRDb250YWluZXIsIHJhbmdl
LmVuZE9mZnNldCk7CgogICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvblJhbmdlID0gdGhp
cy5jbG9uZVJhbmdlKCk7CiAgICAgICAgICAgICAgICBpZiAoc3RhcnRDb21wYXJpc29uID09IC0x
KSB7CiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uUmFuZ2Uuc2V0U3RhcnQocmFuZ2Uu
c3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KTsKICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgIGlmIChlbmRDb21wYXJpc29uID09IDEpIHsKICAgICAgICAgICAgICAgICAg
ICBpbnRlcnNlY3Rpb25SYW5nZS5zZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRP
ZmZzZXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2Vj
dGlvblJhbmdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg
IH0sCgogICAgICAgIHVuaW9uOiBmdW5jdGlvbihyYW5nZSkgewogICAgICAgICAgICBpZiAodGhp
cy5pbnRlcnNlY3RzT3JUb3VjaGVzUmFuZ2UocmFuZ2UpKSB7CiAgICAgICAgICAgICAgICB2YXIg
dW5pb25SYW5nZSA9IHRoaXMuY2xvbmVSYW5nZSgpOwogICAgICAgICAgICAgICAgaWYgKGNvbXBh
cmVQb2ludHMocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0LCB0aGlzLnN0
YXJ0Q29udGFpbmVyLCB0aGlzLnN0YXJ0T2Zmc2V0KSA9PSAtMSkgewogICAgICAgICAgICAgICAg
ICAgIHVuaW9uUmFuZ2Uuc2V0U3RhcnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0
T2Zmc2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb21wYXJlUG9p
bnRzKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0LCB0aGlzLmVuZENvbnRhaW5l
ciwgdGhpcy5lbmRPZmZzZXQpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB1bmlvblJhbmdl
LnNldEVuZChyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7CiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdW5pb25SYW5nZTsKICAgICAgICAgICAgfSBl
bHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUV4Y2VwdGlvbigiUmFuZ2VzIGRv
IG5vdCBpbnRlcnNlY3QiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNvbnRh
aW5zTm9kZTogZnVuY3Rpb24obm9kZSwgYWxsb3dQYXJ0aWFsKSB7CiAgICAgICAgICAgIGlmIChh
bGxvd1BhcnRpYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdHNOb2Rl
KG5vZGUsIGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVy
biB0aGlzLmNvbXBhcmVOb2RlKG5vZGUpID09IG5faTsKICAgICAgICAgICAgfQogICAgICAgIH0s
CgogICAgICAgIGNvbnRhaW5zTm9kZUNvbnRlbnRzOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgIHJldHVybiB0aGlzLmNvbXBhcmVQb2ludChub2RlLCAwKSA+PSAwICYmIHRoaXMuY29tcGFy
ZVBvaW50KG5vZGUsIGdldE5vZGVMZW5ndGgobm9kZSkpIDw9IDA7CiAgICAgICAgfSwKCiAgICAg
ICAgY29udGFpbnNSYW5nZTogZnVuY3Rpb24ocmFuZ2UpIHsKICAgICAgICAgICAgdmFyIGludGVy
c2VjdGlvbiA9IHRoaXMuaW50ZXJzZWN0aW9uKHJhbmdlKTsKICAgICAgICAgICAgcmV0dXJuIGlu
dGVyc2VjdGlvbiAhPT0gbnVsbCAmJiByYW5nZS5lcXVhbHMoaW50ZXJzZWN0aW9uKTsKICAgICAg
ICB9LAoKICAgICAgICBjb250YWluc05vZGVUZXh0OiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgIHZhciBub2RlUmFuZ2UgPSB0aGlzLmNsb25lUmFuZ2UoKTsKICAgICAgICAgICAgbm9kZVJh
bmdlLnNlbGVjdE5vZGUobm9kZSk7CiAgICAgICAgICAgIHZhciB0ZXh0Tm9kZXMgPSBub2RlUmFu
Z2UuZ2V0Tm9kZXMoWzNdKTsKICAgICAgICAgICAgaWYgKHRleHROb2Rlcy5sZW5ndGggPiAwKSB7
CiAgICAgICAgICAgICAgICBub2RlUmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGVzWzBdLCAwKTsKICAg
ICAgICAgICAgICAgIHZhciBsYXN0VGV4dE5vZGUgPSB0ZXh0Tm9kZXMucG9wKCk7CiAgICAgICAg
ICAgICAgICBub2RlUmFuZ2Uuc2V0RW5kKGxhc3RUZXh0Tm9kZSwgbGFzdFRleHROb2RlLmxlbmd0
aCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmNvbnRhaW5zUmFuZ2Uobm9k
ZVJhbmdlKTsKICAgICAgICAgICAgICAgIG5vZGVSYW5nZS5kZXRhY2goKTsKICAgICAgICAgICAg
ICAgIHJldHVybiBjb250YWluczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg
IHJldHVybiB0aGlzLmNvbnRhaW5zTm9kZUNvbnRlbnRzKG5vZGUpOwogICAgICAgICAgICB9CiAg
ICAgICAgfSwKCiAgICAgICAgZ2V0Tm9kZXM6IGZ1bmN0aW9uKG5vZGVUeXBlcywgZmlsdGVyKSB7
CiAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgICAgIHJldHVybiBn
ZXROb2Rlc0luUmFuZ2UodGhpcywgbm9kZVR5cGVzLCBmaWx0ZXIpOwogICAgICAgIH0sCgogICAg
ICAgIGdldERvY3VtZW50OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGdldFJhbmdl
RG9jdW1lbnQodGhpcyk7CiAgICAgICAgfSwKCiAgICAgICAgY29sbGFwc2VCZWZvcmU6IGZ1bmN0
aW9uKG5vZGUpIHsKICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CgogICAgICAg
ICAgICB0aGlzLnNldEVuZEJlZm9yZShub2RlKTsKICAgICAgICAgICAgdGhpcy5jb2xsYXBzZShm
YWxzZSk7CiAgICAgICAgfSwKCiAgICAgICAgY29sbGFwc2VBZnRlcjogZnVuY3Rpb24obm9kZSkg
ewogICAgICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0aGlzKTsKCiAgICAgICAgICAgIHRoaXMu
c2V0U3RhcnRBZnRlcihub2RlKTsKICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSh0cnVlKTsKICAg
ICAgICB9LAogICAgICAgIAogICAgICAgIGdldEJvb2ttYXJrOiBmdW5jdGlvbihjb250YWluZXJO
b2RlKSB7CiAgICAgICAgICAgIHZhciBkb2MgPSBnZXRSYW5nZURvY3VtZW50KHRoaXMpOwogICAg
ICAgICAgICB2YXIgcHJlU2VsZWN0aW9uUmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2UoZG9jKTsKICAg
ICAgICAgICAgY29udGFpbmVyTm9kZSA9IGNvbnRhaW5lck5vZGUgfHwgZG9tLmdldEJvZHkoZG9j
KTsKICAgICAgICAgICAgcHJlU2VsZWN0aW9uUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGNvbnRh
aW5lck5vZGUpOwogICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmludGVyc2VjdGlvbihwcmVT
ZWxlY3Rpb25SYW5nZSk7CiAgICAgICAgICAgIHZhciBzdGFydCA9IDAsIGVuZCA9IDA7CiAgICAg
ICAgICAgIGlmIChyYW5nZSkgewogICAgICAgICAgICAgICAgcHJlU2VsZWN0aW9uUmFuZ2Uuc2V0
RW5kKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7CiAgICAgICAgICAg
ICAgICBzdGFydCA9IHByZVNlbGVjdGlvblJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoOwogICAgICAg
ICAgICAgICAgZW5kID0gc3RhcnQgKyByYW5nZS50b1N0cmluZygpLmxlbmd0aDsKICAgICAgICAg
ICAgICAgIHByZVNlbGVjdGlvblJhbmdlLmRldGFjaCgpOwogICAgICAgICAgICB9CgogICAgICAg
ICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICAg
ICAgZW5kOiBlbmQsCiAgICAgICAgICAgICAgICBjb250YWluZXJOb2RlOiBjb250YWluZXJOb2Rl
CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBtb3ZlVG9Cb29rbWFy
azogZnVuY3Rpb24oYm9va21hcmspIHsKICAgICAgICAgICAgdmFyIGNvbnRhaW5lck5vZGUgPSBi
b29rbWFyay5jb250YWluZXJOb2RlOwogICAgICAgICAgICB2YXIgY2hhckluZGV4ID0gMDsKICAg
ICAgICAgICAgdGhpcy5zZXRTdGFydChjb250YWluZXJOb2RlLCAwKTsKICAgICAgICAgICAgdGhp
cy5jb2xsYXBzZSh0cnVlKTsKICAgICAgICAgICAgdmFyIG5vZGVTdGFjayA9IFtjb250YWluZXJO
b2RlXSwgbm9kZSwgZm91bmRTdGFydCA9IGZhbHNlLCBzdG9wID0gZmFsc2U7CiAgICAgICAgICAg
IHZhciBuZXh0Q2hhckluZGV4LCBpLCBjaGlsZE5vZGVzOwoKICAgICAgICAgICAgd2hpbGUgKCFz
dG9wICYmIChub2RlID0gbm9kZVN0YWNrLnBvcCgpKSkgewogICAgICAgICAgICAgICAgaWYgKG5v
ZGUubm9kZVR5cGUgPT0gMykgewogICAgICAgICAgICAgICAgICAgIG5leHRDaGFySW5kZXggPSBj
aGFySW5kZXggKyBub2RlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kU3Rh
cnQgJiYgYm9va21hcmsuc3RhcnQgPj0gY2hhckluZGV4ICYmIGJvb2ttYXJrLnN0YXJ0IDw9IG5l
eHRDaGFySW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGFydChub2Rl
LCBib29rbWFyay5zdGFydCAtIGNoYXJJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZv
dW5kU3RhcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICBpZiAoZm91bmRTdGFydCAmJiBib29rbWFyay5lbmQgPj0gY2hhckluZGV4ICYmIGJvb2ttYXJr
LmVuZCA8PSBuZXh0Q2hhckluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0
RW5kKG5vZGUsIGJvb2ttYXJrLmVuZCAtIGNoYXJJbmRleCk7CiAgICAgICAgICAgICAgICAgICAg
ICAgIHN0b3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICBjaGFySW5kZXggPSBuZXh0Q2hhckluZGV4OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAg
ICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzID0gbm9kZS5jaGlsZE5vZGVzOwogICAgICAgICAg
ICAgICAgICAgIGkgPSBjaGlsZE5vZGVzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB3aGls
ZSAoaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTdGFjay5wdXNoKGNoaWxkTm9k
ZXNbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgfQogICAgICAgIH0sCgogICAgICAgIGdldE5hbWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAg
ICByZXR1cm4gIkRvbVJhbmdlIjsKICAgICAgICB9LAoKICAgICAgICBlcXVhbHM6IGZ1bmN0aW9u
KHJhbmdlKSB7CiAgICAgICAgICAgIHJldHVybiBSYW5nZS5yYW5nZXNFcXVhbCh0aGlzLCByYW5n
ZSk7CiAgICAgICAgfSwKCiAgICAgICAgaXNWYWxpZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAg
IHJldHVybiBpc1JhbmdlVmFsaWQodGhpcyk7CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICBp
bnNwZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGluc3BlY3QodGhpcyk7CiAg
ICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBjb3B5Q29tcGFyaXNvbkNvbnN0YW50c1RvT2Jq
ZWN0KG9iaikgewogICAgICAgIG9iai5TVEFSVF9UT19TVEFSVCA9IHMyczsKICAgICAgICBvYmou
U1RBUlRfVE9fRU5EID0gczJlOwogICAgICAgIG9iai5FTkRfVE9fRU5EID0gZTJlOwogICAgICAg
IG9iai5FTkRfVE9fU1RBUlQgPSBlMnM7CgogICAgICAgIG9iai5OT0RFX0JFRk9SRSA9IG5fYjsK
ICAgICAgICBvYmouTk9ERV9BRlRFUiA9IG5fYTsKICAgICAgICBvYmouTk9ERV9CRUZPUkVfQU5E
X0FGVEVSID0gbl9iX2E7CiAgICAgICAgb2JqLk5PREVfSU5TSURFID0gbl9pOwogICAgfQoKICAg
IGZ1bmN0aW9uIGNvcHlDb21wYXJpc29uQ29uc3RhbnRzKGNvbnN0cnVjdG9yKSB7CiAgICAgICAg
Y29weUNvbXBhcmlzb25Db25zdGFudHNUb09iamVjdChjb25zdHJ1Y3Rvcik7CiAgICAgICAgY29w
eUNvbXBhcmlzb25Db25zdGFudHNUb09iamVjdChjb25zdHJ1Y3Rvci5wcm90b3R5cGUpOwogICAg
fQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVJhbmdlQ29udGVudFJlbW92ZXIocmVtb3ZlciwgYm91bmRh
cnlVcGRhdGVyKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhc3Nl
cnRSYW5nZVZhbGlkKHRoaXMpOwoKICAgICAgICAgICAgdmFyIHNjID0gdGhpcy5zdGFydENvbnRh
aW5lciwgc28gPSB0aGlzLnN0YXJ0T2Zmc2V0LCByb290ID0gdGhpcy5jb21tb25BbmNlc3RvckNv
bnRhaW5lcjsKCiAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBSYW5nZUl0ZXJhdG9yKHRo
aXMsIHRydWUpOwoKICAgICAgICAgICAgLy8gV29yayBvdXQgd2hlcmUgdG8gcG9zaXRpb24gdGhl
IHJhbmdlIGFmdGVyIGNvbnRlbnQgcmVtb3ZhbAogICAgICAgICAgICB2YXIgbm9kZSwgYm91bmRh
cnk7CiAgICAgICAgICAgIGlmIChzYyAhPT0gcm9vdCkgewogICAgICAgICAgICAgICAgbm9kZSA9
IGdldENsb3Nlc3RBbmNlc3RvckluKHNjLCByb290LCB0cnVlKTsKICAgICAgICAgICAgICAgIGJv
dW5kYXJ5ID0gZ2V0Qm91bmRhcnlBZnRlck5vZGUobm9kZSk7CiAgICAgICAgICAgICAgICBzYyA9
IGJvdW5kYXJ5Lm5vZGU7CiAgICAgICAgICAgICAgICBzbyA9IGJvdW5kYXJ5Lm9mZnNldDsKICAg
ICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2hlY2sgbm9uZSBvZiB0aGUgcmFuZ2UgaXMgcmVh
ZC1vbmx5CiAgICAgICAgICAgIGl0ZXJhdGVTdWJ0cmVlKGl0ZXJhdG9yLCBhc3NlcnROb2RlTm90
UmVhZE9ubHkpOwoKICAgICAgICAgICAgaXRlcmF0b3IucmVzZXQoKTsKCiAgICAgICAgICAgIC8v
IFJlbW92ZSB0aGUgY29udGVudAogICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSByZW1vdmVy
KGl0ZXJhdG9yKTsKICAgICAgICAgICAgaXRlcmF0b3IuZGV0YWNoKCk7CgogICAgICAgICAgICAv
LyBNb3ZlIHRvIHRoZSBuZXcgcG9zaXRpb24KICAgICAgICAgICAgYm91bmRhcnlVcGRhdGVyKHRo
aXMsIHNjLCBzbywgc2MsIHNvKTsKCiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICAg
ICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVByb3RvdHlwZVJhbmdlKGNvbnN0cnVj
dG9yLCBib3VuZGFyeVVwZGF0ZXIsIGRldGFjaGVyKSB7CiAgICAgICAgZnVuY3Rpb24gY3JlYXRl
QmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKGlzQmVmb3JlLCBpc1N0YXJ0KSB7CiAgICAgICAgICAgIHJl
dHVybiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0
aGlzKTsKICAgICAgICAgICAgICAgIGFzc2VydFZhbGlkTm9kZVR5cGUobm9kZSwgYmVmb3JlQWZ0
ZXJOb2RlVHlwZXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWROb2RlVHlwZShnZXRSb290
Q29udGFpbmVyKG5vZGUpLCByb290Q29udGFpbmVyTm9kZVR5cGVzKTsKCiAgICAgICAgICAgICAg
ICB2YXIgYm91bmRhcnkgPSAoaXNCZWZvcmUgPyBnZXRCb3VuZGFyeUJlZm9yZU5vZGUgOiBnZXRC
b3VuZGFyeUFmdGVyTm9kZSkobm9kZSk7CiAgICAgICAgICAgICAgICAoaXNTdGFydCA/IHNldFJh
bmdlU3RhcnQgOiBzZXRSYW5nZUVuZCkodGhpcywgYm91bmRhcnkubm9kZSwgYm91bmRhcnkub2Zm
c2V0KTsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFJhbmdl
U3RhcnQocmFuZ2UsIG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICB2YXIgZWMgPSByYW5nZS5l
bmRDb250YWluZXIsIGVvID0gcmFuZ2UuZW5kT2Zmc2V0OwogICAgICAgICAgICBpZiAobm9kZSAh
PT0gcmFuZ2Uuc3RhcnRDb250YWluZXIgfHwgb2Zmc2V0ICE9PSByYW5nZS5zdGFydE9mZnNldCkg
ewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJvb3QgY29udGFpbmVycyBvZiB0aGUgcmFu
Z2UgYW5kIHRoZSBuZXcgYm91bmRhcnksIGFuZCBhbHNvIGNoZWNrIHdoZXRoZXIgdGhlIG5ldyBi
b3VuZGFyeQogICAgICAgICAgICAgICAgLy8gaXMgYWZ0ZXIgdGhlIGN1cnJlbnQgZW5kLiBJbiBl
aXRoZXIgY2FzZSwgY29sbGFwc2UgdGhlIHJhbmdlIHRvIHRoZSBuZXcgcG9zaXRpb24KICAgICAg
ICAgICAgICAgIGlmIChnZXRSb290Q29udGFpbmVyKG5vZGUpICE9IGdldFJvb3RDb250YWluZXIo
ZWMpIHx8IGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCBlYywgZW8pID09IDEpIHsKICAgICAg
ICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgZW8gPSBvZmZzZXQ7
CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIocmFuZ2Us
IG5vZGUsIG9mZnNldCwgZWMsIGVvKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg
ZnVuY3Rpb24gc2V0UmFuZ2VFbmQocmFuZ2UsIG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICB2
YXIgc2MgPSByYW5nZS5zdGFydENvbnRhaW5lciwgc28gPSByYW5nZS5zdGFydE9mZnNldDsKICAg
ICAgICAgICAgaWYgKG5vZGUgIT09IHJhbmdlLmVuZENvbnRhaW5lciB8fCBvZmZzZXQgIT09IHJh
bmdlLmVuZE9mZnNldCkgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJvb3QgY29udGFp
bmVycyBvZiB0aGUgcmFuZ2UgYW5kIHRoZSBuZXcgYm91bmRhcnksIGFuZCBhbHNvIGNoZWNrIHdo
ZXRoZXIgdGhlIG5ldyBib3VuZGFyeQogICAgICAgICAgICAgICAgLy8gaXMgYWZ0ZXIgdGhlIGN1
cnJlbnQgZW5kLiBJbiBlaXRoZXIgY2FzZSwgY29sbGFwc2UgdGhlIHJhbmdlIHRvIHRoZSBuZXcg
cG9zaXRpb24KICAgICAgICAgICAgICAgIGlmIChnZXRSb290Q29udGFpbmVyKG5vZGUpICE9IGdl
dFJvb3RDb250YWluZXIoc2MpIHx8IGNvbXBhcmVQb2ludHMobm9kZSwgb2Zmc2V0LCBzYywgc28p
ID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgc2MgPSBub2RlOwogICAgICAgICAgICAgICAg
ICAgIHNvID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYm91bmRh
cnlVcGRhdGVyKHJhbmdlLCBzYywgc28sIG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0KICAg
ICAgICB9CgogICAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IG5ldyBSYW5nZVByb3RvdHlw
ZSgpOwoKICAgICAgICB1dGlsLmV4dGVuZChjb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAg
ICAgICAgc2V0U3RhcnQ6IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICAgICAg
YXNzZXJ0Tm90RGV0YWNoZWQodGhpcyk7CiAgICAgICAgICAgICAgICBhc3NlcnROb0RvY1R5cGVO
b3RhdGlvbkVudGl0eUFuY2VzdG9yKG5vZGUsIHRydWUpOwogICAgICAgICAgICAgICAgYXNzZXJ0
VmFsaWRPZmZzZXQobm9kZSwgb2Zmc2V0KTsKCiAgICAgICAgICAgICAgICBzZXRSYW5nZVN0YXJ0
KHRoaXMsIG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzZXRFbmQ6
IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgewogICAgICAgICAgICAgICAgYXNzZXJ0Tm90RGV0YWNo
ZWQodGhpcyk7CiAgICAgICAgICAgICAgICBhc3NlcnROb0RvY1R5cGVOb3RhdGlvbkVudGl0eUFu
Y2VzdG9yKG5vZGUsIHRydWUpOwogICAgICAgICAgICAgICAgYXNzZXJ0VmFsaWRPZmZzZXQobm9k
ZSwgb2Zmc2V0KTsKCiAgICAgICAgICAgICAgICBzZXRSYW5nZUVuZCh0aGlzLCBub2RlLCBvZmZz
ZXQpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIENvbnZl
bmllbmNlIG1ldGhvZCB0byBzZXQgYSByYW5nZSdzIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcy4g
T3ZlcmxvYWRlZCBhcyBmb2xsb3dzOgogICAgICAgICAgICAgKiAtIFR3byBwYXJhbWV0ZXJzIChu
b2RlLCBvZmZzZXQpIGNyZWF0ZXMgYSBjb2xsYXBzZWQgcmFuZ2UgYXQgdGhhdCBwb3NpdGlvbgog
ICAgICAgICAgICAgKiAtIFRocmVlIHBhcmFtZXRlcnMgKG5vZGUsIHN0YXJ0T2Zmc2V0LCBlbmRP
ZmZzZXQpIGNyZWF0ZXMgYSByYW5nZSBjb250YWluZWQgd2l0aCBub2RlIHN0YXJ0aW5nIGF0CiAg
ICAgICAgICAgICAqICAgc3RhcnRPZmZzZXQgYW5kIGVuZGluZyBhdCBlbmRPZmZzZXQKICAgICAg
ICAgICAgICogLSBGb3VyIHBhcmFtZXRlcnMgKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQsIGVuZE5v
ZGUsIGVuZE9mZnNldCkgY3JlYXRlcyBhIHJhbmdlIHN0YXJ0aW5nIGF0IHN0YXJ0T2Zmc2V0IGlu
CiAgICAgICAgICAgICAqICAgc3RhcnROb2RlIGFuZCBlbmRpbmcgYXQgZW5kT2Zmc2V0IGluIGVu
ZE5vZGUKICAgICAgICAgICAgICovCiAgICAgICAgICAgIHNldFN0YXJ0QW5kRW5kOiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgICAgIGFzc2VydE5vdERldGFjaGVkKHRoaXMpOwoKICAgICAgICAg
ICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgdmFyIHNjID0gYXJn
c1swXSwgc28gPSBhcmdzWzFdLCBlYyA9IHNjLCBlbyA9IHNvOwoKICAgICAgICAgICAgICAgIHN3
aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAg
ICAgICAgICAgICAgICAgIGVvID0gYXJnc1syXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBl
YyA9IGFyZ3NbMl07CiAgICAgICAgICAgICAgICAgICAgICAgIGVvID0gYXJnc1szXTsKICAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg
ICAgYm91bmRhcnlVcGRhdGVyKHRoaXMsIHNjLCBzbywgZWMsIGVvKTsKICAgICAgICAgICAgfSwK
ICAgICAgICAgICAgCiAgICAgICAgICAgIHNldEJvdW5kYXJ5OiBmdW5jdGlvbihub2RlLCBvZmZz
ZXQsIGlzU3RhcnQpIHsKICAgICAgICAgICAgICAgIHRoaXNbInNldCIgKyAoaXNTdGFydCA/ICJT
dGFydCIgOiAiRW5kIildKG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAg
ICBzZXRTdGFydEJlZm9yZTogY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyKHRydWUsIHRydWUp
LAogICAgICAgICAgICBzZXRTdGFydEFmdGVyOiBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIo
ZmFsc2UsIHRydWUpLAogICAgICAgICAgICBzZXRFbmRCZWZvcmU6IGNyZWF0ZUJlZm9yZUFmdGVy
Tm9kZVNldHRlcih0cnVlLCBmYWxzZSksCiAgICAgICAgICAgIHNldEVuZEFmdGVyOiBjcmVhdGVC
ZWZvcmVBZnRlck5vZGVTZXR0ZXIoZmFsc2UsIGZhbHNlKSwKCiAgICAgICAgICAgIGNvbGxhcHNl
OiBmdW5jdGlvbihpc1N0YXJ0KSB7CiAgICAgICAgICAgICAgICBhc3NlcnRSYW5nZVZhbGlkKHRo
aXMpOwogICAgICAgICAgICAgICAgaWYgKGlzU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICBi
b3VuZGFyeVVwZGF0ZXIodGhpcywgdGhpcy5zdGFydENvbnRhaW5lciwgdGhpcy5zdGFydE9mZnNl
dCwgdGhpcy5zdGFydENvbnRhaW5lciwgdGhpcy5zdGFydE9mZnNldCk7CiAgICAgICAgICAgICAg
ICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5VXBkYXRlcih0aGlzLCB0aGlz
LmVuZENvbnRhaW5lciwgdGhpcy5lbmRPZmZzZXQsIHRoaXMuZW5kQ29udGFpbmVyLCB0aGlzLmVu
ZE9mZnNldCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBz
ZWxlY3ROb2RlQ29udGVudHM6IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIGFzc2Vy
dE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0Tm9Eb2NUeXBlTm90YXRp
b25FbnRpdHlBbmNlc3Rvcihub2RlLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBib3VuZGFyeVVw
ZGF0ZXIodGhpcywgbm9kZSwgMCwgbm9kZSwgZ2V0Tm9kZUxlbmd0aChub2RlKSk7CiAgICAgICAg
ICAgIH0sCgogICAgICAgICAgICBzZWxlY3ROb2RlOiBmdW5jdGlvbihub2RlKSB7CiAgICAgICAg
ICAgICAgICBhc3NlcnROb3REZXRhY2hlZCh0aGlzKTsKICAgICAgICAgICAgICAgIGFzc2VydE5v
RG9jVHlwZU5vdGF0aW9uRW50aXR5QW5jZXN0b3Iobm9kZSwgZmFsc2UpOwogICAgICAgICAgICAg
ICAgYXNzZXJ0VmFsaWROb2RlVHlwZShub2RlLCBiZWZvcmVBZnRlck5vZGVUeXBlcyk7CgogICAg
ICAgICAgICAgICAgdmFyIHN0YXJ0ID0gZ2V0Qm91bmRhcnlCZWZvcmVOb2RlKG5vZGUpLCBlbmQg
PSBnZXRCb3VuZGFyeUFmdGVyTm9kZShub2RlKTsKICAgICAgICAgICAgICAgIGJvdW5kYXJ5VXBk
YXRlcih0aGlzLCBzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQsIGVuZC5ub2RlLCBlbmQub2Zmc2V0
KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGV4dHJhY3RDb250ZW50czogY3JlYXRlUmFu
Z2VDb250ZW50UmVtb3ZlcihleHRyYWN0U3VidHJlZSwgYm91bmRhcnlVcGRhdGVyKSwKCiAgICAg
ICAgICAgIGRlbGV0ZUNvbnRlbnRzOiBjcmVhdGVSYW5nZUNvbnRlbnRSZW1vdmVyKGRlbGV0ZVN1
YnRyZWUsIGJvdW5kYXJ5VXBkYXRlciksCgogICAgICAgICAgICBjYW5TdXJyb3VuZENvbnRlbnRz
OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CiAg
ICAgICAgICAgICAgICBhc3NlcnROb2RlTm90UmVhZE9ubHkodGhpcy5zdGFydENvbnRhaW5lcik7
CiAgICAgICAgICAgICAgICBhc3NlcnROb2RlTm90UmVhZE9ubHkodGhpcy5lbmRDb250YWluZXIp
OwoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250ZW50cyBjYW4gYmUgc3Vycm91
bmRlZC4gU3BlY2lmaWNhbGx5LCB0aGlzIG1lYW5zIHdoZXRoZXIgdGhlIHJhbmdlIHBhcnRpYWxs
eSBzZWxlY3RzCiAgICAgICAgICAgICAgICAvLyBubyBub24tdGV4dCBub2Rlcy4KICAgICAgICAg
ICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBSYW5nZUl0ZXJhdG9yKHRoaXMsIHRydWUpOwogICAg
ICAgICAgICAgICAgdmFyIGJvdW5kYXJpZXNJbnZhbGlkID0gKGl0ZXJhdG9yLl9maXJzdCAmJiAo
aXNOb25UZXh0UGFydGlhbGx5U2VsZWN0ZWQoaXRlcmF0b3IuX2ZpcnN0LCB0aGlzKSkgfHwKICAg
ICAgICAgICAgICAgICAgICAgICAgKGl0ZXJhdG9yLl9sYXN0ICYmIGlzTm9uVGV4dFBhcnRpYWxs
eVNlbGVjdGVkKGl0ZXJhdG9yLl9sYXN0LCB0aGlzKSkpOwogICAgICAgICAgICAgICAgaXRlcmF0
b3IuZGV0YWNoKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gIWJvdW5kYXJpZXNJbnZhbGlkOwog
ICAgICAgICAgICB9LAoKICAgICAgICAgICAgZGV0YWNoOiBmdW5jdGlvbigpIHsKICAgICAgICAg
ICAgICAgIGRldGFjaGVyKHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc3BsaXRC
b3VuZGFyaWVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHNwbGl0UmFuZ2VCb3VuZGFy
aWVzKHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc3BsaXRCb3VuZGFyaWVzUHJl
c2VydmluZ1Bvc2l0aW9uczogZnVuY3Rpb24ocG9zaXRpb25zVG9QcmVzZXJ2ZSkgewogICAgICAg
ICAgICAgICAgc3BsaXRSYW5nZUJvdW5kYXJpZXModGhpcywgcG9zaXRpb25zVG9QcmVzZXJ2ZSk7
CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBub3JtYWxpemVCb3VuZGFyaWVzOiBmdW5jdGlv
bigpIHsKICAgICAgICAgICAgICAgIGFzc2VydFJhbmdlVmFsaWQodGhpcyk7CgogICAgICAgICAg
ICAgICAgdmFyIHNjID0gdGhpcy5zdGFydENvbnRhaW5lciwgc28gPSB0aGlzLnN0YXJ0T2Zmc2V0
LCBlYyA9IHRoaXMuZW5kQ29udGFpbmVyLCBlbyA9IHRoaXMuZW5kT2Zmc2V0OwoKICAgICAgICAg
ICAgICAgIHZhciBtZXJnZUZvcndhcmQgPSBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAg
ICAgICAgdmFyIHNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAg
IGlmIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT0gbm9kZS5ub2RlVHlwZSkgewogICAg
ICAgICAgICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVv
ID0gbm9kZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kRGF0YShz
aWJsaW5nLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5nLnBhcmVudE5vZGUu
cmVtb3ZlQ2hpbGQoc2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbWVyZ2VCYWNrd2FyZCA9IGZ1bmN0aW9uKG5vZGUp
IHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5n
OwogICAgICAgICAgICAgICAgICAgIGlmIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT0g
bm9kZS5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzYyA9IG5vZGU7CiAgICAg
ICAgICAgICAgICAgICAgICAgIHZhciBub2RlTGVuZ3RoID0gbm9kZS5sZW5ndGg7CiAgICAgICAg
ICAgICAgICAgICAgICAgIHNvID0gc2libGluZy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAg
ICAgIG5vZGUuaW5zZXJ0RGF0YSgwLCBzaWJsaW5nLmRhdGEpOwogICAgICAgICAgICAgICAgICAg
ICAgICBzaWJsaW5nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2libGluZyk7CiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIChzYyA9PSBlYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZW8gKz0gc287CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYyA9IHNjOwogICAgICAgICAg
ICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVjID09IG5vZGUucGFyZW50Tm9kZSkgewogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleChub2RlKTsK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbyA9PSBub2RlSW5kZXgpIHsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlYyA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZW8gPSBub2RlTGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg
fSBlbHNlIGlmIChlbyA+IG5vZGVJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGVvLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAg
ICAgICAgICAgIHZhciBub3JtYWxpemVTdGFydCA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYg
KGlzQ2hhcmFjdGVyRGF0YU5vZGUoZWMpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVjLmxl
bmd0aCA9PSBlbykgewogICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUZvcndhcmQoZWMpOwog
ICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICAgICAgaWYgKGVvID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTm9k
ZSA9IGVjLmNoaWxkTm9kZXNbZW8gLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVu
ZE5vZGUgJiYgaXNDaGFyYWN0ZXJEYXRhTm9kZShlbmROb2RlKSkgewogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbWVyZ2VGb3J3YXJkKGVuZE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZVN0
YXJ0ID0gIXRoaXMuY29sbGFwc2VkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAg
IGlmIChub3JtYWxpemVTdGFydCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc0NoYXJhY3Rl
ckRhdGFOb2RlKHNjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc28gPT0gMCkgewog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VCYWNrd2FyZChzYyk7CiAgICAgICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg
ICAgICAgICAgICBpZiAoc28gPCBzYy5jaGlsZE5vZGVzLmxlbmd0aCkgewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHNjLmNoaWxkTm9kZXNbc29dOwogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0Tm9kZSAmJiBpc0NoYXJhY3RlckRhdGFOb2Rl
KHN0YXJ0Tm9kZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUJhY2t3
YXJkKHN0YXJ0Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVs
c2UgewogICAgICAgICAgICAgICAgICAgIHNjID0gZWM7CiAgICAgICAgICAgICAgICAgICAgc28g
PSBlbzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBib3VuZGFyeVVwZGF0ZXIo
dGhpcywgc2MsIHNvLCBlYywgZW8pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY29sbGFw
c2VUb1BvaW50OiBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHsKICAgICAgICAgICAgICAgIGFzc2Vy
dE5vdERldGFjaGVkKHRoaXMpOwogICAgICAgICAgICAgICAgYXNzZXJ0Tm9Eb2NUeXBlTm90YXRp
b25FbnRpdHlBbmNlc3Rvcihub2RlLCB0cnVlKTsKICAgICAgICAgICAgICAgIGFzc2VydFZhbGlk
T2Zmc2V0KG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXJ0QW5kRW5k
KG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgY29weUNv
bXBhcmlzb25Db25zdGFudHMoY29uc3RydWN0b3IpOwogICAgfQoKICAgIC8qLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgogICAgLy8gVXBk
YXRlcyBjb21tb25BbmNlc3RvckNvbnRhaW5lciBhbmQgY29sbGFwc2VkIGFmdGVyIGJvdW5kYXJ5
IGNoYW5nZQogICAgZnVuY3Rpb24gdXBkYXRlQ29sbGFwc2VkQW5kQ29tbW9uQW5jZXN0b3IocmFu
Z2UpIHsKICAgICAgICByYW5nZS5jb2xsYXBzZWQgPSAocmFuZ2Uuc3RhcnRDb250YWluZXIgPT09
IHJhbmdlLmVuZENvbnRhaW5lciAmJiByYW5nZS5zdGFydE9mZnNldCA9PT0gcmFuZ2UuZW5kT2Zm
c2V0KTsKICAgICAgICByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciA9IHJhbmdlLmNvbGxh
cHNlZCA/CiAgICAgICAgICAgIHJhbmdlLnN0YXJ0Q29udGFpbmVyIDogZG9tLmdldENvbW1vbkFu
Y2VzdG9yKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5lbmRDb250YWluZXIpOwogICAgfQoK
ICAgIGZ1bmN0aW9uIHVwZGF0ZUJvdW5kYXJpZXMocmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBzdGFy
dE9mZnNldCwgZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpIHsKICAgICAgICByYW5nZS5zdGFydENv
bnRhaW5lciA9IHN0YXJ0Q29udGFpbmVyOwogICAgICAgIHJhbmdlLnN0YXJ0T2Zmc2V0ID0gc3Rh
cnRPZmZzZXQ7CiAgICAgICAgcmFuZ2UuZW5kQ29udGFpbmVyID0gZW5kQ29udGFpbmVyOwogICAg
ICAgIHJhbmdlLmVuZE9mZnNldCA9IGVuZE9mZnNldDsKICAgICAgICByYW5nZS5kb2N1bWVudCA9
IGRvbS5nZXREb2N1bWVudChzdGFydENvbnRhaW5lcik7CgogICAgICAgIHVwZGF0ZUNvbGxhcHNl
ZEFuZENvbW1vbkFuY2VzdG9yKHJhbmdlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXRhY2gocmFu
Z2UpIHsKICAgICAgICBhc3NlcnROb3REZXRhY2hlZChyYW5nZSk7CiAgICAgICAgcmFuZ2Uuc3Rh
cnRDb250YWluZXIgPSByYW5nZS5zdGFydE9mZnNldCA9IHJhbmdlLmVuZENvbnRhaW5lciA9IHJh
bmdlLmVuZE9mZnNldCA9IHJhbmdlLmRvY3VtZW50ID0gbnVsbDsKICAgICAgICByYW5nZS5jb2xs
YXBzZWQgPSByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciA9IG51bGw7CiAgICB9CgogICAg
ZnVuY3Rpb24gUmFuZ2UoZG9jKSB7CiAgICAgICAgdGhpcy5zdGFydENvbnRhaW5lciA9IGRvYzsK
ICAgICAgICB0aGlzLnN0YXJ0T2Zmc2V0ID0gMDsKICAgICAgICB0aGlzLmVuZENvbnRhaW5lciA9
IGRvYzsKICAgICAgICB0aGlzLmVuZE9mZnNldCA9IDA7CiAgICAgICAgdGhpcy5kb2N1bWVudCA9
IGRvYzsKICAgICAgICB1cGRhdGVDb2xsYXBzZWRBbmRDb21tb25BbmNlc3Rvcih0aGlzKTsKICAg
IH0KCiAgICBjcmVhdGVQcm90b3R5cGVSYW5nZShSYW5nZSwgdXBkYXRlQm91bmRhcmllcywgZGV0
YWNoKTsKCiAgICBhcGkucmFuZ2VQcm90b3R5cGUgPSBSYW5nZVByb3RvdHlwZS5wcm90b3R5cGU7
CgogICAgdXRpbC5leHRlbmQoUmFuZ2UsIHsKICAgICAgICByYW5nZVByb3BlcnRpZXM6IHJhbmdl
UHJvcGVydGllcywKICAgICAgICBSYW5nZUl0ZXJhdG9yOiBSYW5nZUl0ZXJhdG9yLAogICAgICAg
IGNvcHlDb21wYXJpc29uQ29uc3RhbnRzOiBjb3B5Q29tcGFyaXNvbkNvbnN0YW50cywKICAgICAg
ICBjcmVhdGVQcm90b3R5cGVSYW5nZTogY3JlYXRlUHJvdG90eXBlUmFuZ2UsCiAgICAgICAgaW5z
cGVjdDogaW5zcGVjdCwKICAgICAgICBnZXRSYW5nZURvY3VtZW50OiBnZXRSYW5nZURvY3VtZW50
LAogICAgICAgIHJhbmdlc0VxdWFsOiBmdW5jdGlvbihyMSwgcjIpIHsKICAgICAgICAgICAgcmV0
dXJuIHIxLnN0YXJ0Q29udGFpbmVyID09PSByMi5zdGFydENvbnRhaW5lciAmJgogICAgICAgICAg
ICAgICAgcjEuc3RhcnRPZmZzZXQgPT09IHIyLnN0YXJ0T2Zmc2V0ICYmCiAgICAgICAgICAgICAg
ICByMS5lbmRDb250YWluZXIgPT09IHIyLmVuZENvbnRhaW5lciAmJgogICAgICAgICAgICAgICAg
cjEuZW5kT2Zmc2V0ID09PSByMi5lbmRPZmZzZXQ7CiAgICAgICAgfQogICAgfSk7CgogICAgYXBp
LkRvbVJhbmdlID0gUmFuZ2U7CiAgICBhcGkuUmFuZ2VFeGNlcHRpb24gPSBSYW5nZUV4Y2VwdGlv
bjsKfSk7CnJhbmd5LmNyZWF0ZU1vZHVsZSgiV3JhcHBlZFJhbmdlIiwgZnVuY3Rpb24oYXBpLCBt
b2R1bGUpIHsNCiAgICBhcGkucmVxdWlyZU1vZHVsZXMoIFsiRG9tVXRpbCIsICJEb21SYW5nZSJd
ICk7DQoNCiAgICB2YXIgV3JhcHBlZFJhbmdlLCBXcmFwcGVkVGV4dFJhbmdlOw0KICAgIHZhciBk
b20gPSBhcGkuZG9tOw0KICAgIHZhciB1dGlsID0gYXBpLnV0aWw7DQogICAgdmFyIERvbVBvc2l0
aW9uID0gZG9tLkRvbVBvc2l0aW9uOw0KICAgIHZhciBEb21SYW5nZSA9IGFwaS5Eb21SYW5nZTsN
CiAgICB2YXIgZ2V0Qm9keSA9IGRvbS5nZXRCb2R5Ow0KICAgIHZhciBnZXRDb250ZW50RG9jdW1l
bnQgPSBkb20uZ2V0Q29udGVudERvY3VtZW50Ow0KICAgIHZhciBpc0NoYXJhY3RlckRhdGFOb2Rl
ID0gZG9tLmlzQ2hhcmFjdGVyRGF0YU5vZGU7DQoNCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICBpZiAoYXBpLmZl
YXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSkgew0KICAgICAgICAvLyBUaGlzIGlzIGEgd3JhcHBl
ciBhcm91bmQgdGhlIGJyb3dzZXIncyBuYXRpdmUgRE9NIFJhbmdlLiBJdCBoYXMgdHdvIGFpbXM6
DQogICAgICAgIC8vIC0gUHJvdmlkZSB3b3JrYXJvdW5kcyBmb3Igc3BlY2lmaWMgYnJvd3NlciBi
dWdzDQogICAgICAgIC8vIC0gcHJvdmlkZSBjb252ZW5pZW50IGV4dGVuc2lvbnMsIHdoaWNoIGFy
ZSBpbmhlcml0ZWQgZnJvbSBSYW5neSdzIERvbVJhbmdlDQoNCiAgICAgICAgKGZ1bmN0aW9uKCkg
ew0KICAgICAgICAgICAgdmFyIHJhbmdlUHJvdG87DQogICAgICAgICAgICB2YXIgcmFuZ2VQcm9w
ZXJ0aWVzID0gRG9tUmFuZ2UucmFuZ2VQcm9wZXJ0aWVzOw0KDQogICAgICAgICAgICBmdW5jdGlv
biB1cGRhdGVSYW5nZVByb3BlcnRpZXMocmFuZ2UpIHsNCiAgICAgICAgICAgICAgICB2YXIgaSA9
IHJhbmdlUHJvcGVydGllcy5sZW5ndGgsIHByb3A7DQogICAgICAgICAgICAgICAgd2hpbGUgKGkt
LSkgew0KICAgICAgICAgICAgICAgICAgICBwcm9wID0gcmFuZ2VQcm9wZXJ0aWVzW2ldOw0KICAg
ICAgICAgICAgICAgICAgICByYW5nZVtwcm9wXSA9IHJhbmdlLm5hdGl2ZVJhbmdlW3Byb3BdOw0K
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGJyb2tlbiBjb2xs
YXBzZWQgcHJvcGVydHkgaW4gSUUgOS4NCiAgICAgICAgICAgICAgICByYW5nZS5jb2xsYXBzZWQg
PSAocmFuZ2Uuc3RhcnRDb250YWluZXIgPT09IHJhbmdlLmVuZENvbnRhaW5lciAmJiByYW5nZS5z
dGFydE9mZnNldCA9PT0gcmFuZ2UuZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAg
ICAgICAgZnVuY3Rpb24gdXBkYXRlTmF0aXZlUmFuZ2UocmFuZ2UsIHN0YXJ0Q29udGFpbmVyLCBz
dGFydE9mZnNldCwgZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpIHsNCiAgICAgICAgICAgICAgICB2
YXIgc3RhcnRNb3ZlZCA9IChyYW5nZS5zdGFydENvbnRhaW5lciAhPT0gc3RhcnRDb250YWluZXIg
fHwgcmFuZ2Uuc3RhcnRPZmZzZXQgIT0gc3RhcnRPZmZzZXQpOw0KICAgICAgICAgICAgICAgIHZh
ciBlbmRNb3ZlZCA9IChyYW5nZS5lbmRDb250YWluZXIgIT09IGVuZENvbnRhaW5lciB8fCByYW5n
ZS5lbmRPZmZzZXQgIT0gZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgICAgICB2YXIgbmF0aXZlUmFu
Z2VEaWZmZXJlbnQgPSAhcmFuZ2UuZXF1YWxzKHJhbmdlLm5hdGl2ZVJhbmdlKTsNCg0KICAgICAg
ICAgICAgICAgIC8vIEFsd2F5cyBzZXQgYm90aCBib3VuZGFyaWVzIGZvciB0aGUgYmVuZWZpdCBv
ZiBJRTkgKHNlZSBpc3N1ZSAzNSkNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRNb3ZlZCB8fCBl
bmRNb3ZlZCB8fCBuYXRpdmVSYW5nZURpZmZlcmVudCkgew0KICAgICAgICAgICAgICAgICAgICBy
YW5nZS5zZXRFbmQoZW5kQ29udGFpbmVyLCBlbmRPZmZzZXQpOw0KICAgICAgICAgICAgICAgICAg
ICByYW5nZS5zZXRTdGFydChzdGFydENvbnRhaW5lciwgc3RhcnRPZmZzZXQpOw0KICAgICAgICAg
ICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnVuY3Rpb24gZGV0YWNoKHJh
bmdlKSB7DQogICAgICAgICAgICAgICAgcmFuZ2UubmF0aXZlUmFuZ2UuZGV0YWNoKCk7DQogICAg
ICAgICAgICAgICAgcmFuZ2UuZGV0YWNoZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHZhciBp
ID0gcmFuZ2VQcm9wZXJ0aWVzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7
DQogICAgICAgICAgICAgICAgICAgIHJhbmdlWyByYW5nZVByb3BlcnRpZXNbaV0gXSA9IG51bGw7
DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgY3Jl
YXRlQmVmb3JlQWZ0ZXJOb2RlU2V0dGVyOw0KDQogICAgICAgICAgICBXcmFwcGVkUmFuZ2UgPSBm
dW5jdGlvbihyYW5nZSkgew0KICAgICAgICAgICAgICAgIGlmICghcmFuZ2UpIHsNCiAgICAgICAg
ICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJXcmFwcGVkUmFuZ2U6IFJhbmdl
IG11c3QgYmUgc3BlY2lmaWVkIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IHRoaXMubmF0aXZlUmFuZ2UgPSByYW5nZTsNCiAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVBy
b3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBEb21SYW5nZS5j
cmVhdGVQcm90b3R5cGVSYW5nZShXcmFwcGVkUmFuZ2UsIHVwZGF0ZU5hdGl2ZVJhbmdlLCBkZXRh
Y2gpOw0KDQogICAgICAgICAgICByYW5nZVByb3RvID0gV3JhcHBlZFJhbmdlLnByb3RvdHlwZTsN
Cg0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3ROb2RlID0gZnVuY3Rpb24obm9kZSkgew0K
ICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZShub2RlKTsNCiAgICAg
ICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICB9Ow0K
DQogICAgICAgICAgICByYW5nZVByb3RvLmNsb25lQ29udGVudHMgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jbG9uZUNvbnRlbnRzKCk7DQog
ICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBEdWUgdG8gYSBsb25nLXN0YW5kaW5nIEZp
cmVmb3ggYnVnIHRoYXQgSSBoYXZlIG5vdCBiZWVuIGFibGUgdG8gZmluZCBhIHJlbGlhYmxlIHdh
eSB0byBkZXRlY3QsDQogICAgICAgICAgICAvLyBpbnNlcnROb2RlKCkgaXMgbmV2ZXIgZGVsZWdh
dGVkIHRvIHRoZSBuYXRpdmUgcmFuZ2UuDQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8uc3Vycm91
bmRDb250ZW50cyA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2
ZVJhbmdlLnN1cnJvdW5kQ29udGVudHMobm9kZSk7DQogICAgICAgICAgICAgICAgdXBkYXRlUmFu
Z2VQcm9wZXJ0aWVzKHRoaXMpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgcmFuZ2VQ
cm90by5jb2xsYXBzZSA9IGZ1bmN0aW9uKGlzU3RhcnQpIHsNCiAgICAgICAgICAgICAgICB0aGlz
Lm5hdGl2ZVJhbmdlLmNvbGxhcHNlKGlzU3RhcnQpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVJh
bmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHJhbmdl
UHJvdG8uY2xvbmVSYW5nZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBu
ZXcgV3JhcHBlZFJhbmdlKHRoaXMubmF0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpKTsNCiAgICAgICAg
ICAgIH07DQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8ucmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0K
ICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAg
IH07DQoNCiAgICAgICAgICAgIHJhbmdlUHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHsNCiAg
ICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS50b1N0cmluZygpOw0KICAgICAg
ICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gQ3JlYXRlIHRlc3QgcmFuZ2UgYW5kIG5vZGUgZm9y
IGZlYXR1cmUgZGV0ZWN0aW9uDQoNCiAgICAgICAgICAgIHZhciB0ZXN0VGV4dE5vZGUgPSBkb2N1
bWVudC5jcmVhdGVUZXh0Tm9kZSgidGVzdCIpOw0KICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVu
dCkuYXBwZW5kQ2hpbGQodGVzdFRleHROb2RlKTsNCiAgICAgICAgICAgIHZhciByYW5nZSA9IGRv
Y3VtZW50LmNyZWF0ZVJhbmdlKCk7DQoNCiAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgICAgICAgICAvLyBUZXN0IGZv
ciBGaXJlZm94IDIgYnVnIHRoYXQgcHJldmVudHMgbW92aW5nIHRoZSBzdGFydCBvZiBhIFJhbmdl
IHRvIGEgcG9pbnQgYWZ0ZXIgaXRzIGN1cnJlbnQgZW5kIGFuZA0KICAgICAgICAgICAgLy8gY29y
cmVjdCBmb3IgaXQNCg0KICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGVzdFRleHROb2RlLCAw
KTsNCiAgICAgICAgICAgIHJhbmdlLnNldEVuZCh0ZXN0VGV4dE5vZGUsIDApOw0KDQogICAgICAg
ICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRlc3RUZXh0Tm9kZSwg
MSk7DQoNCiAgICAgICAgICAgICAgICByYW5nZVByb3RvLnNldFN0YXJ0ID0gZnVuY3Rpb24obm9k
ZSwgb2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2V0U3Rh
cnQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmFuZ2VQcm9wZXJ0
aWVzKHRoaXMpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICByYW5nZVBy
b3RvLnNldEVuZCA9IGZ1bmN0aW9uKG5vZGUsIG9mZnNldCkgew0KICAgICAgICAgICAgICAgICAg
ICB0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgICAg
ICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCg0K
ICAgICAgICAgICAgICAgIGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlciA9IGZ1bmN0aW9uKG5h
bWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlUmFuZ2VbbmFtZV0obm9kZSk7DQogICAgICAg
ICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAg
ICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgfSBjYXRjaChl
eCkgew0KDQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRTdGFydCA9IGZ1bmN0aW9uKG5v
ZGUsIG9mZnNldCkgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAg
ICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpOw0KICAgICAg
ICAgICAgICAgICAgICB9IGNhdGNoIChleCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhp
cy5uYXRpdmVSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHRoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQobm9kZSwgb2Zmc2V0KTsNCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhp
cyk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uc2V0
RW5kID0gZnVuY3Rpb24obm9kZSwgb2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7
DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChub2RlLCBv
ZmZzZXQpOw0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRTdGFydChub2RlLCBvZmZzZXQpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0
KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5n
ZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAg
IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlciA9IGZ1bmN0aW9uKG5hbWUsIG9wcG9zaXRlTmFt
ZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSkgew0KICAgICAg
ICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlz
Lm5hdGl2ZVJhbmdlW25hbWVdKG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRj
aCAoZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlW29w
cG9zaXRlTmFtZV0obm9kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRp
dmVSYW5nZVtuYW1lXShub2RlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICAgICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAg
ICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICByYW5nZVByb3RvLnNldFN0YXJ0QmVmb3JlID0gY3JlYXRlQmVmb3JlQWZ0ZXJOb2RlU2V0
dGVyKCJzZXRTdGFydEJlZm9yZSIsICJzZXRFbmRCZWZvcmUiKTsNCiAgICAgICAgICAgIHJhbmdl
UHJvdG8uc2V0U3RhcnRBZnRlciA9IGNyZWF0ZUJlZm9yZUFmdGVyTm9kZVNldHRlcigic2V0U3Rh
cnRBZnRlciIsICJzZXRFbmRBZnRlciIpOw0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRFbmRC
ZWZvcmUgPSBjcmVhdGVCZWZvcmVBZnRlck5vZGVTZXR0ZXIoInNldEVuZEJlZm9yZSIsICJzZXRT
dGFydEJlZm9yZSIpOw0KICAgICAgICAgICAgcmFuZ2VQcm90by5zZXRFbmRBZnRlciA9IGNyZWF0
ZUJlZm9yZUFmdGVyTm9kZVNldHRlcigic2V0RW5kQWZ0ZXIiLCAic2V0U3RhcnRBZnRlciIpOw0K
DQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gVGVzdCBmb3IgYW5kIGNvcnJlY3QgRmlyZWZveCAy
IGJlaGF2aW91ciB3aXRoIHNlbGVjdE5vZGVDb250ZW50cyBvbiB0ZXh0IG5vZGVzOiBpdCBjb2xs
YXBzZXMgdGhlIHJhbmdlIHRvDQogICAgICAgICAgICAvLyB0aGUgMHRoIGNoYXJhY3RlciBvZiB0
aGUgdGV4dCBub2RlDQogICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGVzdFRl
eHROb2RlKTsNCiAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydENvbnRhaW5lciA9PSB0ZXN0VGV4
dE5vZGUgJiYgcmFuZ2UuZW5kQ29udGFpbmVyID09IHRlc3RUZXh0Tm9kZSAmJg0KICAgICAgICAg
ICAgICAgICAgICByYW5nZS5zdGFydE9mZnNldCA9PSAwICYmIHJhbmdlLmVuZE9mZnNldCA9PSB0
ZXN0VGV4dE5vZGUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3RO
b2RlQ29udGVudHMgPSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMu
bmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKG5vZGUpOw0KICAgICAgICAgICAgICAgICAg
ICB1cGRhdGVSYW5nZVByb3BlcnRpZXModGhpcyk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAg
ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5zZWxlY3ROb2RlQ29u
dGVudHMgPSBmdW5jdGlvbihub2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3Rh
cnRBbmRFbmQobm9kZSwgMCwgZG9tLmdldE5vZGVMZW5ndGgobm9kZSkpOw0KICAgICAgICAgICAg
ICAgIH07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgICAgICAgICAvLyBUZXN0IGZv
ciBhbmQgY29ycmVjdCBXZWJLaXQgYnVnIHRoYXQgaGFzIHRoZSBiZWhhdmlvdXIgb2YgY29tcGFy
ZUJvdW5kYXJ5UG9pbnRzIHJvdW5kIHRoZSB3cm9uZyB3YXkgZm9yDQogICAgICAgICAgICAvLyBj
b25zdGFudHMgU1RBUlRfVE9fRU5EIGFuZCBFTkRfVE9fU1RBUlQ6IGh0dHBzOi8vYnVncy53ZWJr
aXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMDczOA0KDQogICAgICAgICAgICByYW5nZS5zZWxlY3RO
b2RlQ29udGVudHModGVzdFRleHROb2RlKTsNCiAgICAgICAgICAgIHJhbmdlLnNldEVuZCh0ZXN0
VGV4dE5vZGUsIDMpOw0KDQogICAgICAgICAgICB2YXIgcmFuZ2UyID0gZG9jdW1lbnQuY3JlYXRl
UmFuZ2UoKTsNCiAgICAgICAgICAgIHJhbmdlMi5zZWxlY3ROb2RlQ29udGVudHModGVzdFRleHRO
b2RlKTsNCiAgICAgICAgICAgIHJhbmdlMi5zZXRFbmQodGVzdFRleHROb2RlLCA0KTsNCiAgICAg
ICAgICAgIHJhbmdlMi5zZXRTdGFydCh0ZXN0VGV4dE5vZGUsIDIpOw0KDQogICAgICAgICAgICBp
ZiAocmFuZ2UuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKHJhbmdlLlNUQVJUX1RPX0VORCwgcmFuZ2Uy
KSA9PSAtMSAmJg0KICAgICAgICAgICAgICAgICAgICByYW5nZS5jb21wYXJlQm91bmRhcnlQb2lu
dHMocmFuZ2UuRU5EX1RPX1NUQVJULCByYW5nZTIpID09IDEpIHsNCiAgICAgICAgICAgICAgICAv
LyBUaGlzIGlzIHRoZSB3cm9uZyB3YXkgcm91bmQsIHNvIGNvcnJlY3QgZm9yIGl0DQoNCiAgICAg
ICAgICAgICAgICByYW5nZVByb3RvLmNvbXBhcmVCb3VuZGFyeVBvaW50cyA9IGZ1bmN0aW9uKHR5
cGUsIHJhbmdlKSB7DQogICAgICAgICAgICAgICAgICAgIHJhbmdlID0gcmFuZ2UubmF0aXZlUmFu
Z2UgfHwgcmFuZ2U7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IHJhbmdlLlNUQVJU
X1RPX0VORCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHJhbmdlLkVORF9UT19T
VEFSVDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IHJhbmdlLkVORF9U
T19TVEFSVCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHJhbmdlLlNUQVJUX1RP
X0VORDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4g
dGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHModHlwZSwgcmFuZ2UpOw0KICAg
ICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJh
bmdlUHJvdG8uY29tcGFyZUJvdW5kYXJ5UG9pbnRzID0gZnVuY3Rpb24odHlwZSwgcmFuZ2UpIHsN
CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UuY29tcGFyZUJvdW5k
YXJ5UG9pbnRzKHR5cGUsIHJhbmdlLm5hdGl2ZVJhbmdlIHx8IHJhbmdlKTsNCiAgICAgICAgICAg
ICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gVGVzdCBm
b3IgSUUgOSBkZWxldGVDb250ZW50cygpIGFuZCBleHRyYWN0Q29udGVudHMoKSBidWcgYW5kIGNv
cnJlY3QgaXQuIFNlZSBpc3N1ZSAxMDcuDQoNCiAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50
LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gIjEyMyI7
DQogICAgICAgICAgICB2YXIgdGV4dE5vZGUgPSBlbC5maXJzdENoaWxkOw0KICAgICAgICAgICAg
dmFyIGJvZHkgPSBnZXRCb2R5KGRvY3VtZW50KTsNCiAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hp
bGQoZWwpOw0KDQogICAgICAgICAgICByYW5nZS5zZXRTdGFydCh0ZXh0Tm9kZSwgMSk7DQogICAg
ICAgICAgICByYW5nZS5zZXRFbmQodGV4dE5vZGUsIDIpOw0KICAgICAgICAgICAgcmFuZ2UuZGVs
ZXRlQ29udGVudHMoKTsNCg0KICAgICAgICAgICAgaWYgKHRleHROb2RlLmRhdGEgPT0gIjEzIikg
ew0KICAgICAgICAgICAgICAgIC8vIEJlaGF2aW91ciBpcyBjb3JyZWN0IHBlciBET000IFJhbmdl
IHNvIHdyYXAgdGhlIGJyb3dzZXIncyBpbXBsZW1lbnRhdGlvbiBvZiBkZWxldGVDb250ZW50cygp
IGFuZA0KICAgICAgICAgICAgICAgIC8vIGV4dHJhY3RDb250ZW50cygpDQogICAgICAgICAgICAg
ICAgcmFuZ2VQcm90by5kZWxldGVDb250ZW50cyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAg
ICAgICAgICB0aGlzLm5hdGl2ZVJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7DQogICAgICAgICAgICAg
ICAgICAgIHVwZGF0ZVJhbmdlUHJvcGVydGllcyh0aGlzKTsNCiAgICAgICAgICAgICAgICB9Ow0K
DQogICAgICAgICAgICAgICAgcmFuZ2VQcm90by5leHRyYWN0Q29udGVudHMgPSBmdW5jdGlvbigp
IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYWcgPSB0aGlzLm5hdGl2ZVJhbmdlLmV4dHJh
Y3RDb250ZW50cygpOw0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVSYW5nZVByb3BlcnRpZXMo
dGhpcyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmcmFnOw0KICAgICAgICAgICAgICAg
IH07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBi
b2R5LnJlbW92ZUNoaWxkKGVsKTsNCiAgICAgICAgICAgIGJvZHkgPSBudWxsOw0KDQogICAgICAg
ICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8N
Cg0KICAgICAgICAgICAgLy8gVGVzdCBmb3IgZXhpc3RlbmNlIG9mIGNyZWF0ZUNvbnRleHR1YWxG
cmFnbWVudCBhbmQgZGVsZWdhdGUgdG8gaXQgaWYgaXQgZXhpc3RzDQogICAgICAgICAgICBpZiAo
dXRpbC5pc0hvc3RNZXRob2QocmFuZ2UsICJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiKSkgew0K
ICAgICAgICAgICAgICAgIHJhbmdlUHJvdG8uY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50ID0gZnVu
Y3Rpb24oZnJhZ21lbnRTdHIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmF0
aXZlUmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGZyYWdtZW50U3RyKTsNCiAgICAgICAg
ICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvKi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KICAgICAgICAgICAgLy8gQ2xl
YW4gdXANCiAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLnJlbW92ZUNoaWxkKHRlc3RUZXh0
Tm9kZSk7DQogICAgICAgICAgICByYW5nZS5kZXRhY2goKTsNCiAgICAgICAgICAgIHJhbmdlMi5k
ZXRhY2goKTsNCg0KICAgICAgICAgICAgcmFuZ2VQcm90by5nZXROYW1lID0gZnVuY3Rpb24oKSB7
DQogICAgICAgICAgICAgICAgcmV0dXJuICJXcmFwcGVkUmFuZ2UiOw0KICAgICAgICAgICAgfTsN
Cg0KICAgICAgICAgICAgYXBpLldyYXBwZWRSYW5nZSA9IFdyYXBwZWRSYW5nZTsNCg0KICAgICAg
ICAgICAgYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlID0gZnVuY3Rpb24oZG9jKSB7DQogICAgICAgICAg
ICAgICAgZG9jID0gZ2V0Q29udGVudERvY3VtZW50KGRvYywgbW9kdWxlLCAiY3JlYXRlTmF0aXZl
UmFuZ2UiKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZG9jLmNyZWF0ZVJhbmdlKCk7DQogICAg
ICAgICAgICB9Ow0KICAgICAgICB9KSgpOw0KICAgIH0NCiAgICANCiAgICBpZiAoYXBpLmZlYXR1
cmVzLmltcGxlbWVudHNUZXh0UmFuZ2UpIHsNCiAgICAgICAgLyoNCiAgICAgICAgIFRoaXMgaXMg
YSB3b3JrYXJvdW5kIGZvciBhIGJ1ZyB3aGVyZSBJRSByZXR1cm5zIHRoZSB3cm9uZyBjb250YWlu
ZXIgZWxlbWVudCBmcm9tIHRoZSBUZXh0UmFuZ2UncyBwYXJlbnRFbGVtZW50KCkNCiAgICAgICAg
IG1ldGhvZC4gRm9yIGV4YW1wbGUsIGluIHRoZSBmb2xsb3dpbmcgKHdoZXJlIHBpcGVzIGRlbm90
ZSB0aGUgc2VsZWN0aW9uIGJvdW5kYXJpZXMpOg0KDQogICAgICAgICA8dWwgaWQ9InVsIj48bGkg
aWQ9ImEiPnwgYSA8L2xpPjxsaSBpZD0iYiI+IGIgfDwvbGk+PC91bD4NCg0KICAgICAgICAgdmFy
IHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7DQogICAgICAgICBhbGVy
dChyYW5nZS5wYXJlbnRFbGVtZW50KCkuaWQpOyAvLyBTaG91bGQgYWxlcnQgInVsIiBidXQgYWxl
cnRzICJiIg0KDQogICAgICAgICBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjb21tb24gYW5jZXN0
b3Igbm9kZSBvZiB0aGUgZm9sbG93aW5nOg0KICAgICAgICAgLSB0aGUgcGFyZW50RWxlbWVudCgp
IG9mIHRoZSB0ZXh0UmFuZ2UNCiAgICAgICAgIC0gdGhlIHBhcmVudEVsZW1lbnQoKSBvZiB0aGUg
dGV4dFJhbmdlIGFmdGVyIGNhbGxpbmcgY29sbGFwc2UodHJ1ZSkNCiAgICAgICAgIC0gdGhlIHBh
cmVudEVsZW1lbnQoKSBvZiB0aGUgdGV4dFJhbmdlIGFmdGVyIGNhbGxpbmcgY29sbGFwc2UoZmFs
c2UpDQogICAgICAgICAqLw0KICAgICAgICB2YXIgZ2V0VGV4dFJhbmdlQ29udGFpbmVyRWxlbWVu
dCA9IGZ1bmN0aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgdmFyIHBhcmVudEVsID0gdGV4
dFJhbmdlLnBhcmVudEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHZhciByYW5nZSA9IHRleHRSYW5n
ZS5kdXBsaWNhdGUoKTsNCiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpOw0KICAgICAg
ICAgICAgdmFyIHN0YXJ0RWwgPSByYW5nZS5wYXJlbnRFbGVtZW50KCk7DQogICAgICAgICAgICBy
YW5nZSA9IHRleHRSYW5nZS5kdXBsaWNhdGUoKTsNCiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNl
KGZhbHNlKTsNCiAgICAgICAgICAgIHZhciBlbmRFbCA9IHJhbmdlLnBhcmVudEVsZW1lbnQoKTsN
CiAgICAgICAgICAgIHZhciBzdGFydEVuZENvbnRhaW5lciA9IChzdGFydEVsID09IGVuZEVsKSA/
IHN0YXJ0RWwgOiBkb20uZ2V0Q29tbW9uQW5jZXN0b3Ioc3RhcnRFbCwgZW5kRWwpOw0KDQogICAg
ICAgICAgICByZXR1cm4gc3RhcnRFbmRDb250YWluZXIgPT0gcGFyZW50RWwgPyBzdGFydEVuZENv
bnRhaW5lciA6IGRvbS5nZXRDb21tb25BbmNlc3RvcihwYXJlbnRFbCwgc3RhcnRFbmRDb250YWlu
ZXIpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciB0ZXh0UmFuZ2VJc0NvbGxhcHNlZCA9IGZ1
bmN0aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgcmV0dXJuIHRleHRSYW5nZS5jb21wYXJl
RW5kUG9pbnRzKCJTdGFydFRvRW5kIiwgdGV4dFJhbmdlKSA9PSAwOw0KICAgICAgICB9Ow0KDQog
ICAgICAgIC8vIEdldHMgdGhlIGJvdW5kYXJ5IG9mIGEgVGV4dFJhbmdlIGV4cHJlc3NlZCBhcyBh
IG5vZGUgYW5kIGFuIG9mZnNldCB3aXRoaW4gdGhhdCBub2RlLiBUaGlzIGZ1bmN0aW9uIHN0YXJ0
ZWQgb3V0IGFzDQogICAgICAgIC8vIGFuIGltcHJvdmVkIHZlcnNpb24gb2YgY29kZSBmb3VuZCBp
biBUaW0gQ2FtZXJvbiBSeWFuJ3MgSUVSYW5nZSAoaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ll
cmFuZ2UvKSBidXQgaGFzDQogICAgICAgIC8vIGdyb3duLCBmaXhpbmcgcHJvYmxlbXMgd2l0aCBs
aW5lIGJyZWFrcyBpbiBwcmVmb3JtYXR0ZWQgdGV4dCwgYWRkaW5nIHdvcmthcm91bmQgZm9yIElF
IFRleHRSYW5nZSBidWdzLCBoYW5kbGluZw0KICAgICAgICAvLyBmb3IgaW5wdXRzIGFuZCBpbWFn
ZXMsIHBsdXMgb3B0aW1pemF0aW9ucy4NCiAgICAgICAgdmFyIGdldFRleHRSYW5nZUJvdW5kYXJ5
UG9zaXRpb24gPSBmdW5jdGlvbih0ZXh0UmFuZ2UsIHdob2xlUmFuZ2VDb250YWluZXJFbGVtZW50
LCBpc1N0YXJ0LCBpc0NvbGxhcHNlZCwgc3RhcnRJbmZvKSB7DQogICAgICAgICAgICB2YXIgd29y
a2luZ1JhbmdlID0gdGV4dFJhbmdlLmR1cGxpY2F0ZSgpOw0KICAgICAgICAgICAgd29ya2luZ1Jh
bmdlLmNvbGxhcHNlKGlzU3RhcnQpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lckVsZW1lbnQg
PSB3b3JraW5nUmFuZ2UucGFyZW50RWxlbWVudCgpOw0KDQogICAgICAgICAgICAvLyBTb21ldGlt
ZXMgY29sbGFwc2luZyBhIFRleHRSYW5nZSB0aGF0J3MgYXQgdGhlIHN0YXJ0IG9mIGEgdGV4dCBu
b2RlIGNhbiBtb3ZlIGl0IGludG8gdGhlIHByZXZpb3VzIG5vZGUsIHNvDQogICAgICAgICAgICAv
LyBjaGVjayBmb3IgdGhhdA0KICAgICAgICAgICAgaWYgKCFkb20uaXNPcklzQW5jZXN0b3JPZih3
aG9sZVJhbmdlQ29udGFpbmVyRWxlbWVudCwgY29udGFpbmVyRWxlbWVudCkpIHsNCiAgICAgICAg
ICAgICAgICBjb250YWluZXJFbGVtZW50ID0gd2hvbGVSYW5nZUNvbnRhaW5lckVsZW1lbnQ7DQog
ICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgLy8gRGVhbCB3aXRoIG5vZGVzIHRoYXQgY2Fu
bm90ICJjb250YWluIHJpY2ggSFRNTCBtYXJrdXAiLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyBm
b3JtIGlucHV0cywgaW1hZ2VzIGFuZA0KICAgICAgICAgICAgLy8gc2ltaWxhci4gU2VlIGh0dHA6
Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9hYTcwMzk1MCUyOFZTLjg1JTI5LmFz
cHgNCiAgICAgICAgICAgIGlmICghY29udGFpbmVyRWxlbWVudC5jYW5IYXZlSFRNTCkgew0KICAg
ICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgRG9tUG9zaXRpb24oY29udGFpbmVyRWxlbWVudC5w
YXJlbnROb2RlLCBkb20uZ2V0Tm9kZUluZGV4KGNvbnRhaW5lckVsZW1lbnQpKTsNCiAgICAgICAg
ICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBib3VuZGFyeVBvc2l0aW9uOiBw
b3MsDQogICAgICAgICAgICAgICAgICAgIG5vZGVJbmZvOiB7DQogICAgICAgICAgICAgICAgICAg
ICAgICBub2RlSW5kZXg6IHBvcy5vZmZzZXQsDQogICAgICAgICAgICAgICAgICAgICAgICBjb250
YWluZXJFbGVtZW50OiBwb3Mubm9kZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgICAgfTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHdvcmtpbmdOb2RlID0g
ZG9tLmdldERvY3VtZW50KGNvbnRhaW5lckVsZW1lbnQpLmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsN
Cg0KICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgSFRNTDUgU2hpdidzIGluc2FuZSB2aW9s
YXRpb24gb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgpLiBTZWUgUmFuZ3kgaXNzdWUgMTA0IGFu
ZCBIVE1MNQ0KICAgICAgICAgICAgLy8gU2hpdiBpc3N1ZSA2NDogaHR0cHM6Ly9naXRodWIuY29t
L2FGYXJrYXMvaHRtbDVzaGl2L2lzc3Vlcy82NA0KICAgICAgICAgICAgaWYgKHdvcmtpbmdOb2Rl
LnBhcmVudE5vZGUpIHsNCiAgICAgICAgICAgICAgICB3b3JraW5nTm9kZS5wYXJlbnROb2RlLnJl
bW92ZUNoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFy
IGNvbXBhcmlzb24sIHdvcmtpbmdDb21wYXJpc29uVHlwZSA9IGlzU3RhcnQgPyAiU3RhcnRUb1N0
YXJ0IiA6ICJTdGFydFRvRW5kIjsNCiAgICAgICAgICAgIHZhciBwcmV2aW91c05vZGUsIG5leHRO
b2RlLCBib3VuZGFyeVBvc2l0aW9uLCBib3VuZGFyeU5vZGU7DQogICAgICAgICAgICB2YXIgc3Rh
cnQgPSAoc3RhcnRJbmZvICYmIHN0YXJ0SW5mby5jb250YWluZXJFbGVtZW50ID09IGNvbnRhaW5l
ckVsZW1lbnQpID8gc3RhcnRJbmZvLm5vZGVJbmRleCA6IDA7DQogICAgICAgICAgICB2YXIgY2hp
bGROb2RlQ291bnQgPSBjb250YWluZXJFbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOw0KICAgICAg
ICAgICAgdmFyIGVuZCA9IGNoaWxkTm9kZUNvdW50Ow0KDQogICAgICAgICAgICAvLyBDaGVjayBl
bmQgZmlyc3QuIENvZGUgd2l0aGluIHRoZSBsb29wIGFzc3VtZXMgdGhhdCB0aGUgZW5kdGggY2hp
bGQgbm9kZSBvZiB0aGUgY29udGFpbmVyIGlzIGRlZmluaXRlbHkNCiAgICAgICAgICAgIC8vIGFm
dGVyIHRoZSByYW5nZSBib3VuZGFyeS4NCiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSBlbmQ7
DQoNCiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKG5vZGVJ
bmRleCA9PSBjaGlsZE5vZGVDb3VudCkgew0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJF
bGVtZW50LmFwcGVuZENoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ug
ew0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50Lmluc2VydEJlZm9yZSh3b3Jr
aW5nTm9kZSwgY29udGFpbmVyRWxlbWVudC5jaGlsZE5vZGVzW25vZGVJbmRleF0pOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB3b3JraW5nUmFuZ2UubW92ZVRvRWxlbWVudFRl
eHQod29ya2luZ05vZGUpOw0KICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSB3b3JraW5nUmFu
Z2UuY29tcGFyZUVuZFBvaW50cyh3b3JraW5nQ29tcGFyaXNvblR5cGUsIHRleHRSYW5nZSk7DQog
ICAgICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPT0gMCB8fCBzdGFydCA9PSBlbmQpIHsNCiAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21w
YXJpc29uID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gc3RhcnQgKyAx
KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBrbm93IHRoZSBlbmR0aCBjaGlsZCBu
b2RlIGlzIGFmdGVyIHRoZSByYW5nZSBib3VuZGFyeSwgc28gd2UgbXVzdCBiZSBkb25lLg0KICAg
ICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7
DQogICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG5vZGVJbmRleDsNCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAg
IGVuZCA9IChlbmQgPT0gc3RhcnQgKyAxKSA/IHN0YXJ0IDogbm9kZUluZGV4Ow0KICAgICAgICAg
ICAgICAgIH0NCiAgICAgICAgICAgICAgICBub2RlSW5kZXggPSBNYXRoLmZsb29yKChzdGFydCAr
IGVuZCkgLyAyKTsNCiAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50LnJlbW92ZUNoaWxk
KHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAvLyBXZSd2ZSBu
b3cgcmVhY2hlZCBvciBnb25lIHBhc3QgdGhlIGJvdW5kYXJ5IG9mIHRoZSB0ZXh0IHJhbmdlIHdl
J3JlIGludGVyZXN0ZWQgaW4NCiAgICAgICAgICAgIC8vIHNvIGhhdmUgaWRlbnRpZmllZCB0aGUg
bm9kZSB3ZSB3YW50DQogICAgICAgICAgICBib3VuZGFyeU5vZGUgPSB3b3JraW5nTm9kZS5uZXh0
U2libGluZzsNCg0KICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gPT0gLTEgJiYgYm91bmRhcnlO
b2RlICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUoYm91bmRhcnlOb2RlKSkgew0KICAgICAgICAgICAg
ICAgIC8vIFRoaXMgaXMgYSBjaGFyYWN0ZXIgZGF0YSBub2RlICh0ZXh0LCBjb21tZW50LCBjZGF0
YSkuIFRoZSB3b3JraW5nIHJhbmdlIGlzIGNvbGxhcHNlZCBhdCB0aGUgc3RhcnQgb2YgdGhlDQog
ICAgICAgICAgICAgICAgLy8gbm9kZSBjb250YWluaW5nIHRoZSB0ZXh0IHJhbmdlJ3MgYm91bmRh
cnksIHNvIHdlIG1vdmUgdGhlIGVuZCBvZiB0aGUgd29ya2luZyByYW5nZSB0byB0aGUgYm91bmRh
cnkgcG9pbnQNCiAgICAgICAgICAgICAgICAvLyBhbmQgbWVhc3VyZSB0aGUgbGVuZ3RoIG9mIGl0
cyB0ZXh0IHRvIGdldCB0aGUgYm91bmRhcnkncyBvZmZzZXQgd2l0aGluIHRoZSBub2RlLg0KICAg
ICAgICAgICAgICAgIHdvcmtpbmdSYW5nZS5zZXRFbmRQb2ludChpc1N0YXJ0ID8gIkVuZFRvU3Rh
cnQiIDogIkVuZFRvRW5kIiwgdGV4dFJhbmdlKTsNCg0KICAgICAgICAgICAgICAgIHZhciBvZmZz
ZXQ7DQoNCiAgICAgICAgICAgICAgICBpZiAoL1tcclxuXS8udGVzdChib3VuZGFyeU5vZGUuZGF0
YSkpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoNCiAgICAgICAgICAgICAgICAgICAgIEZvciB0
aGUgcGFydGljdWxhciBjYXNlIG9mIGEgYm91bmRhcnkgd2l0aGluIGEgdGV4dCBub2RlIGNvbnRh
aW5pbmcgcmVuZGVyZWQgbGluZSBicmVha3MgKHdpdGhpbiBhIDxwcmU+DQogICAgICAgICAgICAg
ICAgICAgICBlbGVtZW50LCBmb3IgZXhhbXBsZSksIHdlIG5lZWQgYSBzbGlnaHRseSBjb21wbGlj
YXRlZCBhcHByb2FjaCB0byBnZXQgdGhlIGJvdW5kYXJ5J3Mgb2Zmc2V0IGluIElFLiBUaGUNCiAg
ICAgICAgICAgICAgICAgICAgIGZhY3RzOg0KDQogICAgICAgICAgICAgICAgICAgICAtIEVhY2gg
bGluZSBicmVhayBpcyByZXByZXNlbnRlZCBhcyBcciBpbiB0aGUgdGV4dCBub2RlJ3MgZGF0YS9u
b2RlVmFsdWUgcHJvcGVydGllcw0KICAgICAgICAgICAgICAgICAgICAgLSBFYWNoIGxpbmUgYnJl
YWsgaXMgcmVwcmVzZW50ZWQgYXMgXHJcbiBpbiB0aGUgVGV4dFJhbmdlJ3MgJ3RleHQnIHByb3Bl
cnR5DQogICAgICAgICAgICAgICAgICAgICAtIFRoZSAndGV4dCcgcHJvcGVydHkgb2YgdGhlIFRl
eHRSYW5nZSBkb2VzIG5vdCBjb250YWluIHRyYWlsaW5nIGxpbmUgYnJlYWtzDQoNCiAgICAgICAg
ICAgICAgICAgICAgIFRvIGdldCByb3VuZCB0aGUgcHJvYmxlbSBwcmVzZW50ZWQgYnkgdGhlIGZp
bmFsIGZhY3QgYWJvdmUsIHdlIGNhbiB1c2UgdGhlIGZhY3QgdGhhdCBUZXh0UmFuZ2Uncw0KICAg
ICAgICAgICAgICAgICAgICAgbW92ZVN0YXJ0KCkgYW5kIG1vdmVFbmQoKSBtZXRob2RzIHJldHVy
biB0aGUgYWN0dWFsIG51bWJlciBvZiBjaGFyYWN0ZXJzIG1vdmVkLCB3aGljaCBpcyBub3QgbmVj
ZXNzYXJpbHkNCiAgICAgICAgICAgICAgICAgICAgIHRoZSBzYW1lIGFzIHRoZSBudW1iZXIgb2Yg
Y2hhcmFjdGVycyBpdCB3YXMgaW5zdHJ1Y3RlZCB0byBtb3ZlLiBUaGUgc2ltcGxlc3QgYXBwcm9h
Y2ggaXMgdG8gdXNlIHRoaXMgdG8NCiAgICAgICAgICAgICAgICAgICAgIHN0b3JlIHRoZSBjaGFy
YWN0ZXJzIG1vdmVkIHdoZW4gbW92aW5nIGJvdGggdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHJh
bmdlIHRvIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQNCiAgICAgICAgICAgICAgICAgICAgIGJv
ZHkgYW5kIHN1YnRyYWN0aW5nIHRoZSBzdGFydCBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mZnNldCAo
dGhlICJtb3ZlLW5lZ2F0aXZlLWdhemlsbGlvbiIgbWV0aG9kKS4NCiAgICAgICAgICAgICAgICAg
ICAgIEhvd2V2ZXIsIHRoaXMgaXMgZXh0cmVtZWx5IHNsb3cgd2hlbiB0aGUgZG9jdW1lbnQgaXMg
bGFyZ2UgYW5kIHRoZSByYW5nZSBpcyBuZWFyIHRoZSBlbmQgb2YgaXQuIENsZWFybHkNCiAgICAg
ICAgICAgICAgICAgICAgIGRvaW5nIHRoZSBtaXJyb3IgaW1hZ2UgKGkuZS4gbW92aW5nIHRoZSBy
YW5nZSBib3VuZGFyaWVzIHRvIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50KSBoYXMgdGhlIHNhbWUN
CiAgICAgICAgICAgICAgICAgICAgIHByb2JsZW0uDQoNCiAgICAgICAgICAgICAgICAgICAgIEFu
b3RoZXIgYXBwcm9hY2ggdGhhdCB3b3JrcyBpcyB0byB1c2UgbW92ZVN0YXJ0KCkgdG8gbW92ZSB0
aGUgc3RhcnQgYm91bmRhcnkgb2YgdGhlIHJhbmdlIHVwIHRvIHRoZSBlbmQNCiAgICAgICAgICAg
ICAgICAgICAgIGJvdW5kYXJ5IG9uZSBjaGFyYWN0ZXIgYXQgYSB0aW1lIGFuZCBpbmNyZW1lbnRp
bmcgYSBjb3VudGVyIHdpdGggdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBtb3ZlU3RhcnQoKQ0K
ICAgICAgICAgICAgICAgICAgICAgY2FsbC4gSG93ZXZlciwgdGhlIGNoZWNrIGZvciB3aGV0aGVy
IHRoZSBzdGFydCBib3VuZGFyeSBoYXMgcmVhY2hlZCB0aGUgZW5kIGJvdW5kYXJ5IGlzIGV4cGVu
c2l2ZSwgc28NCiAgICAgICAgICAgICAgICAgICAgIHRoaXMgbWV0aG9kIGlzIHNsb3cgKGFsdGhv
dWdoIHVubGlrZSAibW92ZS1uZWdhdGl2ZS1nYXppbGxpb24iIGlzIGxhcmdlbHkgdW5hZmZlY3Rl
ZCBieSB0aGUgbG9jYXRpb24gb2YNCiAgICAgICAgICAgICAgICAgICAgIHRoZSByYW5nZSB3aXRo
aW4gdGhlIGRvY3VtZW50KS4NCg0KICAgICAgICAgICAgICAgICAgICAgVGhlIG1ldGhvZCBiZWxv
dyBpcyBhIGh5YnJpZCBvZiB0aGUgdHdvIG1ldGhvZHMgYWJvdmUuIEl0IHVzZXMgdGhlIGZhY3Qg
dGhhdCBhIHN0cmluZyBjb250YWluaW5nIHRoZQ0KICAgICAgICAgICAgICAgICAgICAgVGV4dFJh
bmdlJ3MgJ3RleHQnIHByb3BlcnR5IHdpdGggZWFjaCBcclxuIGNvbnZlcnRlZCB0byBhIHNpbmds
ZSBcciBjaGFyYWN0ZXIgY2Fubm90IGJlIGxvbmdlciB0aGFuIHRoZQ0KICAgICAgICAgICAgICAg
ICAgICAgdGV4dCBvZiB0aGUgVGV4dFJhbmdlLCBzbyB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIGlz
IG1vdmVkIHRoYXQgbGVuZ3RoIGluaXRpYWxseSBhbmQgdGhlbiBhIGNoYXJhY3RlciBhdA0KICAg
ICAgICAgICAgICAgICAgICAgYSB0aW1lIHRvIG1ha2UgdXAgZm9yIGFueSB0cmFpbGluZyBsaW5l
IGJyZWFrcyBub3QgY29udGFpbmVkIGluIHRoZSAndGV4dCcgcHJvcGVydHkuIFRoaXMgaGFzIGdv
b2QNCiAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlIGluIG1vc3Qgc2l0dWF0aW9ucyBj
b21wYXJlZCB0byB0aGUgcHJldmlvdXMgdHdvIG1ldGhvZHMuDQogICAgICAgICAgICAgICAgICAg
ICAqLw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcFJhbmdlID0gd29ya2luZ1JhbmdlLmR1
cGxpY2F0ZSgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2VMZW5ndGggPSB0ZW1wUmFu
Z2UudGV4dC5yZXBsYWNlKC9cclxuL2csICJcciIpLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAg
ICAgICBvZmZzZXQgPSB0ZW1wUmFuZ2UubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLCByYW5nZUxlbmd0
aCk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGNvbXBhcmlzb24gPSB0ZW1wUmFuZ2Uu
Y29tcGFyZUVuZFBvaW50cygiU3RhcnRUb0VuZCIsIHRlbXBSYW5nZSkpID09IC0xKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICBvZmZzZXQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRl
bXBSYW5nZS5tb3ZlU3RhcnQoImNoYXJhY3RlciIsIDEpOw0KICAgICAgICAgICAgICAgICAgICB9
DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0g
d29ya2luZ1JhbmdlLnRleHQubGVuZ3RoOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICBib3VuZGFyeVBvc2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKGJvdW5kYXJ5Tm9kZSwgb2Zm
c2V0KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUg
Ym91bmRhcnkgaW1tZWRpYXRlbHkgZm9sbG93cyBhIGNoYXJhY3RlciBkYXRhIG5vZGUgYW5kIHRo
aXMgaXMgdGhlIGVuZCBib3VuZGFyeSwgd2Ugc2hvdWxkIGZhdm91cg0KICAgICAgICAgICAgICAg
IC8vIGEgcG9zaXRpb24gd2l0aGluIHRoYXQsIGFuZCBsaWtld2lzZSBmb3IgYSBzdGFydCBib3Vu
ZGFyeSBwcmVjZWRpbmcgYSBjaGFyYWN0ZXIgZGF0YSBub2RlDQogICAgICAgICAgICAgICAgcHJl
dmlvdXNOb2RlID0gKGlzQ29sbGFwc2VkIHx8ICFpc1N0YXJ0KSAmJiB3b3JraW5nTm9kZS5wcmV2
aW91c1NpYmxpbmc7DQogICAgICAgICAgICAgICAgbmV4dE5vZGUgPSAoaXNDb2xsYXBzZWQgfHwg
aXNTdGFydCkgJiYgd29ya2luZ05vZGUubmV4dFNpYmxpbmc7DQogICAgICAgICAgICAgICAgaWYg
KG5leHROb2RlICYmIGlzQ2hhcmFjdGVyRGF0YU5vZGUobmV4dE5vZGUpKSB7DQogICAgICAgICAg
ICAgICAgICAgIGJvdW5kYXJ5UG9zaXRpb24gPSBuZXcgRG9tUG9zaXRpb24obmV4dE5vZGUsIDAp
Ow0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNOb2RlICYmIGlzQ2hhcmFjdGVy
RGF0YU5vZGUocHJldmlvdXNOb2RlKSkgew0KICAgICAgICAgICAgICAgICAgICBib3VuZGFyeVBv
c2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKHByZXZpb3VzTm9kZSwgcHJldmlvdXNOb2RlLmRhdGEu
bGVuZ3RoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBi
b3VuZGFyeVBvc2l0aW9uID0gbmV3IERvbVBvc2l0aW9uKGNvbnRhaW5lckVsZW1lbnQsIGRvbS5n
ZXROb2RlSW5kZXgod29ya2luZ05vZGUpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICB9DQoNCiAgICAgICAgICAgIC8vIENsZWFuIHVwDQogICAgICAgICAgICB3b3JraW5nTm9kZS5w
YXJlbnROb2RlLnJlbW92ZUNoaWxkKHdvcmtpbmdOb2RlKTsNCg0KICAgICAgICAgICAgcmV0dXJu
IHsNCiAgICAgICAgICAgICAgICBib3VuZGFyeVBvc2l0aW9uOiBib3VuZGFyeVBvc2l0aW9uLA0K
ICAgICAgICAgICAgICAgIG5vZGVJbmZvOiB7DQogICAgICAgICAgICAgICAgICAgIG5vZGVJbmRl
eDogbm9kZUluZGV4LA0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBjb250
YWluZXJFbGVtZW50DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAg
fTsNCg0KICAgICAgICAvLyBSZXR1cm5zIGEgVGV4dFJhbmdlIHJlcHJlc2VudGluZyB0aGUgYm91
bmRhcnkgb2YgYSBUZXh0UmFuZ2UgZXhwcmVzc2VkIGFzIGEgbm9kZSBhbmQgYW4gb2Zmc2V0IHdp
dGhpbiB0aGF0IG5vZGUuDQogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gc3RhcnRlZCBvdXQgYXMg
YW4gb3B0aW1pemVkIHZlcnNpb24gb2YgY29kZSBmb3VuZCBpbiBUaW0gQ2FtZXJvbiBSeWFuJ3Mg
SUVSYW5nZQ0KICAgICAgICAvLyAoaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2llcmFuZ2UvKQ0K
ICAgICAgICB2YXIgY3JlYXRlQm91bmRhcnlUZXh0UmFuZ2UgPSBmdW5jdGlvbihib3VuZGFyeVBv
c2l0aW9uLCBpc1N0YXJ0KSB7DQogICAgICAgICAgICB2YXIgYm91bmRhcnlOb2RlLCBib3VuZGFy
eVBhcmVudCwgYm91bmRhcnlPZmZzZXQgPSBib3VuZGFyeVBvc2l0aW9uLm9mZnNldDsNCiAgICAg
ICAgICAgIHZhciBkb2MgPSBkb20uZ2V0RG9jdW1lbnQoYm91bmRhcnlQb3NpdGlvbi5ub2RlKTsN
CiAgICAgICAgICAgIHZhciB3b3JraW5nTm9kZSwgY2hpbGROb2Rlcywgd29ya2luZ1JhbmdlID0g
Z2V0Qm9keShkb2MpLmNyZWF0ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAgdmFyIG5vZGVJc0Rh
dGFOb2RlID0gaXNDaGFyYWN0ZXJEYXRhTm9kZShib3VuZGFyeVBvc2l0aW9uLm5vZGUpOw0KDQog
ICAgICAgICAgICBpZiAobm9kZUlzRGF0YU5vZGUpIHsNCiAgICAgICAgICAgICAgICBib3VuZGFy
eU5vZGUgPSBib3VuZGFyeVBvc2l0aW9uLm5vZGU7DQogICAgICAgICAgICAgICAgYm91bmRhcnlQ
YXJlbnQgPSBib3VuZGFyeU5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQog
ICAgICAgICAgICAgICAgY2hpbGROb2RlcyA9IGJvdW5kYXJ5UG9zaXRpb24ubm9kZS5jaGlsZE5v
ZGVzOw0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5Tm9kZSA9IChib3VuZGFyeU9mZnNldCA8IGNo
aWxkTm9kZXMubGVuZ3RoKSA/IGNoaWxkTm9kZXNbYm91bmRhcnlPZmZzZXRdIDogbnVsbDsNCiAg
ICAgICAgICAgICAgICBib3VuZGFyeVBhcmVudCA9IGJvdW5kYXJ5UG9zaXRpb24ubm9kZTsNCiAg
ICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUG9zaXRpb24gdGhlIHJhbmdlIGltbWVkaWF0
ZWx5IGJlZm9yZSB0aGUgbm9kZSBjb250YWluaW5nIHRoZSBib3VuZGFyeQ0KICAgICAgICAgICAg
d29ya2luZ05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCgic3BhbiIpOw0KDQogICAgICAgICAgICAv
LyBNYWtpbmcgdGhlIHdvcmtpbmcgZWxlbWVudCBub24tZW1wdHkgZWxlbWVudCBwZXJzdWFkZXMg
SUUgdG8gY29uc2lkZXIgdGhlIFRleHRSYW5nZSBib3VuZGFyeSB0byBiZSB3aXRoaW4gdGhlDQog
ICAgICAgICAgICAvLyBlbGVtZW50IHJhdGhlciB0aGFuIGltbWVkaWF0ZWx5IGJlZm9yZSBvciBh
ZnRlciBpdA0KICAgICAgICAgICAgd29ya2luZ05vZGUuaW5uZXJIVE1MID0gIiYjZmVmZjsiOw0K
DQogICAgICAgICAgICAvLyBpbnNlcnRCZWZvcmUgaXMgc3VwcG9zZWQgdG8gd29yayBsaWtlIGFw
cGVuZENoaWxkIGlmIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIG51bGwuIEhvd2V2ZXIsIGEgYnVn
IHJlcG9ydA0KICAgICAgICAgICAgLy8gZm9yIElFUmFuZ2Ugc3VnZ2VzdHMgdGhhdCBpdCBjYW4g
Y3Jhc2ggdGhlIGJyb3dzZXI6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9pZXJhbmdlL2lzc3Vl
cy9kZXRhaWw/aWQ9MTINCiAgICAgICAgICAgIGlmIChib3VuZGFyeU5vZGUpIHsNCiAgICAgICAg
ICAgICAgICBib3VuZGFyeVBhcmVudC5pbnNlcnRCZWZvcmUod29ya2luZ05vZGUsIGJvdW5kYXJ5
Tm9kZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJvdW5kYXJ5UGFy
ZW50LmFwcGVuZENoaWxkKHdvcmtpbmdOb2RlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAg
ICAgd29ya2luZ1JhbmdlLm1vdmVUb0VsZW1lbnRUZXh0KHdvcmtpbmdOb2RlKTsNCiAgICAgICAg
ICAgIHdvcmtpbmdSYW5nZS5jb2xsYXBzZSghaXNTdGFydCk7DQoNCiAgICAgICAgICAgIC8vIENs
ZWFuIHVwDQogICAgICAgICAgICBib3VuZGFyeVBhcmVudC5yZW1vdmVDaGlsZCh3b3JraW5nTm9k
ZSk7DQoNCiAgICAgICAgICAgIC8vIE1vdmUgdGhlIHdvcmtpbmcgcmFuZ2UgdG8gdGhlIHRleHQg
b2Zmc2V0LCBpZiByZXF1aXJlZA0KICAgICAgICAgICAgaWYgKG5vZGVJc0RhdGFOb2RlKSB7DQog
ICAgICAgICAgICAgICAgd29ya2luZ1JhbmdlW2lzU3RhcnQgPyAibW92ZVN0YXJ0IiA6ICJtb3Zl
RW5kIl0oImNoYXJhY3RlciIsIGJvdW5kYXJ5T2Zmc2V0KTsNCiAgICAgICAgICAgIH0NCg0KICAg
ICAgICAgICAgcmV0dXJuIHdvcmtpbmdSYW5nZTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvKi0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAg
ICAgICAgLy8gVGhpcyBpcyBhIHdyYXBwZXIgYXJvdW5kIGEgVGV4dFJhbmdlLCBwcm92aWRpbmcg
ZnVsbCBET00gUmFuZ2UgZnVuY3Rpb25hbGl0eSB1c2luZyByYW5neSdzIERvbVJhbmdlIGFzIGEN
CiAgICAgICAgLy8gcHJvdG90eXBlDQoNCiAgICAgICAgV3JhcHBlZFRleHRSYW5nZSA9IGZ1bmN0
aW9uKHRleHRSYW5nZSkgew0KICAgICAgICAgICAgdGhpcy50ZXh0UmFuZ2UgPSB0ZXh0UmFuZ2U7
DQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBXcmFw
cGVkVGV4dFJhbmdlLnByb3RvdHlwZSA9IG5ldyBEb21SYW5nZShkb2N1bWVudCk7DQoNCiAgICAg
ICAgV3JhcHBlZFRleHRSYW5nZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0KICAg
ICAgICAgICAgdmFyIHN0YXJ0LCBlbmQsIHN0YXJ0Qm91bmRhcnk7DQoNCiAgICAgICAgICAgIC8v
IFRleHRSYW5nZSdzIHBhcmVudEVsZW1lbnQoKSBtZXRob2QgY2Fubm90IGJlIHRydXN0ZWQuIGdl
dFRleHRSYW5nZUNvbnRhaW5lckVsZW1lbnQoKSB3b3JrcyBhcm91bmQgdGhhdC4NCiAgICAgICAg
ICAgIHZhciByYW5nZUNvbnRhaW5lckVsZW1lbnQgPSBnZXRUZXh0UmFuZ2VDb250YWluZXJFbGVt
ZW50KHRoaXMudGV4dFJhbmdlKTsNCg0KICAgICAgICAgICAgaWYgKHRleHRSYW5nZUlzQ29sbGFw
c2VkKHRoaXMudGV4dFJhbmdlKSkgew0KICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ID0gZ2V0
VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJF
bGVtZW50LCB0cnVlLA0KICAgICAgICAgICAgICAgICAgICB0cnVlKS5ib3VuZGFyeVBvc2l0aW9u
Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdGFydEJvdW5kYXJ5ID0g
Z2V0VGV4dFJhbmdlQm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWlu
ZXJFbGVtZW50LCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgc3RhcnQgPSBzdGFydEJv
dW5kYXJ5LmJvdW5kYXJ5UG9zaXRpb247DQoNCiAgICAgICAgICAgICAgICAvLyBBbiBvcHRpbWl6
YXRpb24gdXNlZCBoZXJlIGlzIHRoYXQgaWYgdGhlIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcyBo
YXZlIHRoZSBzYW1lIHBhcmVudCBlbGVtZW50LCB0aGUNCiAgICAgICAgICAgICAgICAvLyBzZWFy
Y2ggc2NvcGUgZm9yIHRoZSBlbmQgYm91bmRhcnkgY2FuIGJlIGxpbWl0ZWQgdG8gZXhjbHVkZSB0
aGUgcG9ydGlvbiBvZiB0aGUgZWxlbWVudCB0aGF0IHByZWNlZGVzDQogICAgICAgICAgICAgICAg
Ly8gdGhlIHN0YXJ0IGJvdW5kYXJ5DQogICAgICAgICAgICAgICAgZW5kID0gZ2V0VGV4dFJhbmdl
Qm91bmRhcnlQb3NpdGlvbih0aGlzLnRleHRSYW5nZSwgcmFuZ2VDb250YWluZXJFbGVtZW50LCBm
YWxzZSwgZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHN0YXJ0Qm91bmRhcnkubm9kZUluZm8p
LmJvdW5kYXJ5UG9zaXRpb247DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMuc2V0
U3RhcnQoc3RhcnQubm9kZSwgc3RhcnQub2Zmc2V0KTsNCiAgICAgICAgICAgIHRoaXMuc2V0RW5k
KGVuZC5ub2RlLCBlbmQub2Zmc2V0KTsNCiAgICAgICAgfTsNCg0KICAgICAgICBXcmFwcGVkVGV4
dFJhbmdlLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1
cm4gIldyYXBwZWRUZXh0UmFuZ2UiOw0KICAgICAgICB9Ow0KDQogICAgICAgIERvbVJhbmdlLmNv
cHlDb21wYXJpc29uQ29uc3RhbnRzKFdyYXBwZWRUZXh0UmFuZ2UpOw0KDQogICAgICAgIFdyYXBw
ZWRUZXh0UmFuZ2UucmFuZ2VUb1RleHRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAg
ICAgICBpZiAocmFuZ2UuY29sbGFwc2VkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0
ZUJvdW5kYXJ5VGV4dFJhbmdlKG5ldyBEb21Qb3NpdGlvbihyYW5nZS5zdGFydENvbnRhaW5lciwg
cmFuZ2Uuc3RhcnRPZmZzZXQpLCB0cnVlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgdmFyIHN0YXJ0UmFuZ2UgPSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZShuZXcgRG9t
UG9zaXRpb24ocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KSwgdHJ1ZSk7
DQogICAgICAgICAgICAgICAgdmFyIGVuZFJhbmdlID0gY3JlYXRlQm91bmRhcnlUZXh0UmFuZ2Uo
bmV3IERvbVBvc2l0aW9uKHJhbmdlLmVuZENvbnRhaW5lciwgcmFuZ2UuZW5kT2Zmc2V0KSwgZmFs
c2UpOw0KICAgICAgICAgICAgICAgIHZhciB0ZXh0UmFuZ2UgPSBnZXRCb2R5KCBEb21SYW5nZS5n
ZXRSYW5nZURvY3VtZW50KHJhbmdlKSApLmNyZWF0ZVRleHRSYW5nZSgpOw0KICAgICAgICAgICAg
ICAgIHRleHRSYW5nZS5zZXRFbmRQb2ludCgiU3RhcnRUb1N0YXJ0Iiwgc3RhcnRSYW5nZSk7DQog
ICAgICAgICAgICAgICAgdGV4dFJhbmdlLnNldEVuZFBvaW50KCJFbmRUb0VuZCIsIGVuZFJhbmdl
KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dFJhbmdlOw0KICAgICAgICAgICAgfQ0KICAg
ICAgICB9Ow0KDQogICAgICAgIGFwaS5XcmFwcGVkVGV4dFJhbmdlID0gV3JhcHBlZFRleHRSYW5n
ZTsNCg0KICAgICAgICAvLyBJRSA5IGFuZCBhYm92ZSBoYXZlIGJvdGggaW1wbGVtZW50YXRpb25z
IGFuZCBSYW5neSBtYWtlcyBib3RoIGF2YWlsYWJsZS4gVGhlIG5leHQgZmV3IGxpbmVzIHNldHMg
d2hpY2gNCiAgICAgICAgLy8gaW1wbGVtZW50YXRpb24gdG8gdXNlIGJ5IGRlZmF1bHQuDQogICAg
ICAgIGlmICghYXBpLmZlYXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSB8fCBhcGkuY29uZmlnLnBy
ZWZlclRleHRSYW5nZSkgew0KICAgICAgICAgICAgLy8gQWRkIFdyYXBwZWRUZXh0UmFuZ2UgYXMg
dGhlIFJhbmdlIHByb3BlcnR5IG9mIHRoZSBnbG9iYWwgb2JqZWN0IHRvIGFsbG93IGV4cHJlc3Np
b24gbGlrZSBSYW5nZS5FTkRfVE9fRU5EIHRvIHdvcmsNCiAgICAgICAgICAgIHZhciBnbG9iYWxP
YmogPSAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSgpOw0KICAgICAgICAgICAgaWYgKHR5
cGVvZiBnbG9iYWxPYmouUmFuZ2UgPT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgICAgICBn
bG9iYWxPYmouUmFuZ2UgPSBXcmFwcGVkVGV4dFJhbmdlOw0KICAgICAgICAgICAgfQ0KDQogICAg
ICAgICAgICBhcGkuY3JlYXRlTmF0aXZlUmFuZ2UgPSBmdW5jdGlvbihkb2MpIHsNCiAgICAgICAg
ICAgICAgICBkb2MgPSBnZXRDb250ZW50RG9jdW1lbnQoZG9jLCBtb2R1bGUsICJjcmVhdGVOYXRp
dmVSYW5nZSIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBnZXRCb2R5KGRvYykuY3JlYXRlVGV4
dFJhbmdlKCk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBhcGkuV3JhcHBlZFJhbmdl
ID0gV3JhcHBlZFRleHRSYW5nZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGFwaS5jcmVhdGVS
YW5nZSA9IGZ1bmN0aW9uKGRvYykgew0KICAgICAgICBkb2MgPSBnZXRDb250ZW50RG9jdW1lbnQo
ZG9jLCBtb2R1bGUsICJjcmVhdGVSYW5nZSIpOw0KICAgICAgICByZXR1cm4gbmV3IGFwaS5XcmFw
cGVkUmFuZ2UoYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvYykpOw0KICAgIH07DQoNCiAgICBhcGku
Y3JlYXRlUmFuZ3lSYW5nZSA9IGZ1bmN0aW9uKGRvYykgew0KICAgICAgICBkb2MgPSBnZXRDb250
ZW50RG9jdW1lbnQoZG9jLCBtb2R1bGUsICJjcmVhdGVSYW5neVJhbmdlIik7DQogICAgICAgIHJl
dHVybiBuZXcgRG9tUmFuZ2UoZG9jKTsNCiAgICB9Ow0KDQogICAgYXBpLmNyZWF0ZUlmcmFtZVJh
bmdlID0gZnVuY3Rpb24oaWZyYW1lRWwpIHsNCiAgICAgICAgbW9kdWxlLmRlcHJlY2F0aW9uTm90
aWNlKCJjcmVhdGVJZnJhbWVSYW5nZSgpIiwgImNyZWF0ZVJhbmdlKGlmcmFtZUVsKSIpOw0KICAg
ICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmdlKGlmcmFtZUVsKTsNCiAgICB9Ow0KDQogICAgYXBp
LmNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2UgPSBmdW5jdGlvbihpZnJhbWVFbCkgew0KICAgICAgICBt
b2R1bGUuZGVwcmVjYXRpb25Ob3RpY2UoImNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2UoKSIsICJjcmVh
dGVSYW5neVJhbmdlKGlmcmFtZUVsKSIpOw0KICAgICAgICByZXR1cm4gYXBpLmNyZWF0ZVJhbmd5
UmFuZ2UoaWZyYW1lRWwpOw0KICAgIH07DQoNCiAgICBhcGkuYWRkQ3JlYXRlTWlzc2luZ05hdGl2
ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKHdpbikgew0KICAgICAgICB2YXIgZG9jID0gd2luLmRvY3Vt
ZW50Ow0KICAgICAgICBpZiAodHlwZW9mIGRvYy5jcmVhdGVSYW5nZSA9PSAidW5kZWZpbmVkIikg
ew0KICAgICAgICAgICAgZG9jLmNyZWF0ZVJhbmdlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAg
ICAgICAgcmV0dXJuIGFwaS5jcmVhdGVSYW5nZShkb2MpOw0KICAgICAgICAgICAgfTsNCiAgICAg
ICAgfQ0KICAgICAgICBkb2MgPSB3aW4gPSBudWxsOw0KICAgIH0pOw0KfSk7Ci8vIFRoaXMgbW9k
dWxlIGNyZWF0ZXMgYSBzZWxlY3Rpb24gb2JqZWN0IHdyYXBwZXIgdGhhdCBjb25mb3JtcyBhcyBj
bG9zZWx5IGFzIHBvc3NpYmxlIHRvIHRoZSBTZWxlY3Rpb24gc3BlY2lmaWNhdGlvbg0KLy8gaW4g
dGhlIEhUTUwgRWRpdGluZyBzcGVjIChodHRwOi8vZHZjcy53My5vcmcvaGcvZWRpdGluZy9yYXct
ZmlsZS90aXAvZWRpdGluZy5odG1sI3NlbGVjdGlvbnMpDQpyYW5neS5jcmVhdGVNb2R1bGUoIldy
YXBwZWRTZWxlY3Rpb24iLCBmdW5jdGlvbihhcGksIG1vZHVsZSkgew0KICAgIGFwaS5yZXF1aXJl
TW9kdWxlcyggWyJEb21VdGlsIiwgIkRvbVJhbmdlIiwgIldyYXBwZWRSYW5nZSJdICk7DQoNCiAg
ICBhcGkuY29uZmlnLmNoZWNrU2VsZWN0aW9uUmFuZ2VzID0gdHJ1ZTsNCg0KICAgIHZhciBCT09M
RUFOID0gImJvb2xlYW4iOw0KICAgIHZhciBkb20gPSBhcGkuZG9tOw0KICAgIHZhciB1dGlsID0g
YXBpLnV0aWw7DQogICAgdmFyIGlzSG9zdE1ldGhvZCA9IHV0aWwuaXNIb3N0TWV0aG9kOw0KICAg
IHZhciBEb21SYW5nZSA9IGFwaS5Eb21SYW5nZTsNCiAgICB2YXIgV3JhcHBlZFJhbmdlID0gYXBp
LldyYXBwZWRSYW5nZTsNCiAgICB2YXIgRE9NRXhjZXB0aW9uID0gYXBpLkRPTUV4Y2VwdGlvbjsN
CiAgICB2YXIgRG9tUG9zaXRpb24gPSBkb20uRG9tUG9zaXRpb247DQogICAgdmFyIGdldE5hdGl2
ZVNlbGVjdGlvbjsNCiAgICB2YXIgc2VsZWN0aW9uSXNDb2xsYXBzZWQ7DQogICAgdmFyIGZlYXR1
cmVzID0gYXBpLmZlYXR1cmVzOw0KICAgIHZhciBDT05UUk9MID0gIkNvbnRyb2wiOw0KICAgIHZh
ciBnZXREb2N1bWVudCA9IGRvbS5nZXREb2N1bWVudDsNCiAgICB2YXIgZ2V0Qm9keSA9IGRvbS5n
ZXRCb2R5Ow0KICAgIHZhciByYW5nZXNFcXVhbCA9IERvbVJhbmdlLnJhbmdlc0VxdWFsOw0KDQoN
CiAgICAvLyBVdGlsaXR5IGZ1bmN0aW9uIHRvIHN1cHBvcnQgZGlyZWN0aW9uIHBhcmFtZXRlcnMg
aW4gdGhlIEFQSSB0aGF0IG1heSBiZSBhIHN0cmluZyAoImJhY2t3YXJkIiBvciAiZm9yd2FyZCIp
IG9yIGENCiAgICAvLyBCb29sZWFuICh0cnVlIGZvciBiYWNrd2FyZHMpLg0KICAgIGZ1bmN0aW9u
IGlzRGlyZWN0aW9uQmFja3dhcmQoZGlyKSB7DQogICAgICAgIHJldHVybiAodHlwZW9mIGRpciA9
PSAic3RyaW5nIikgPyAoZGlyID09ICJiYWNrd2FyZCIpIDogISFkaXI7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gZ2V0V2luZG93KHdpbiwgbWV0aG9kTmFtZSkgew0KICAgICAgICBpZiAoIXdpbikg
ew0KICAgICAgICAgICAgcmV0dXJuIHdpbmRvdzsNCiAgICAgICAgfSBlbHNlIGlmIChkb20uaXNX
aW5kb3cod2luKSkgew0KICAgICAgICAgICAgcmV0dXJuIHdpbjsNCiAgICAgICAgfSBlbHNlIGlm
ICh3aW4gaW5zdGFuY2VvZiBXcmFwcGVkU2VsZWN0aW9uKSB7DQogICAgICAgICAgICByZXR1cm4g
d2luLndpbjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhciBkb2MgPSBkb20uZ2V0
Q29udGVudERvY3VtZW50KHdpbiwgbW9kdWxlLCBtZXRob2ROYW1lKTsNCiAgICAgICAgICAgIHJl
dHVybiBkb20uZ2V0V2luZG93KGRvYyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlv
biBnZXRXaW5TZWxlY3Rpb24od2luUGFyYW0pIHsNCiAgICAgICAgcmV0dXJuIGdldFdpbmRvdyh3
aW5QYXJhbSwgImdldFdpblNlbGVjdGlvbiIpLmdldFNlbGVjdGlvbigpOw0KICAgIH0NCg0KICAg
IGZ1bmN0aW9uIGdldERvY1NlbGVjdGlvbih3aW5QYXJhbSkgew0KICAgICAgICByZXR1cm4gZ2V0
V2luZG93KHdpblBhcmFtLCAiZ2V0RG9jU2VsZWN0aW9uIikuZG9jdW1lbnQuc2VsZWN0aW9uOw0K
ICAgIH0NCg0KICAgIC8vIFRlc3QgZm9yIHRoZSBSYW5nZS9UZXh0UmFuZ2UgYW5kIFNlbGVjdGlv
biBmZWF0dXJlcyByZXF1aXJlZA0KICAgIC8vIFRlc3QgZm9yIGFiaWxpdHkgdG8gcmV0cmlldmUg
c2VsZWN0aW9uDQogICAgdmFyIGltcGxlbWVudHNXaW5HZXRTZWxlY3Rpb24gPSBpc0hvc3RNZXRo
b2Qod2luZG93LCAiZ2V0U2VsZWN0aW9uIiksDQogICAgICAgIGltcGxlbWVudHNEb2NTZWxlY3Rp
b24gPSB1dGlsLmlzSG9zdE9iamVjdChkb2N1bWVudCwgInNlbGVjdGlvbiIpOw0KDQogICAgZmVh
dHVyZXMuaW1wbGVtZW50c1dpbkdldFNlbGVjdGlvbiA9IGltcGxlbWVudHNXaW5HZXRTZWxlY3Rp
b247DQogICAgZmVhdHVyZXMuaW1wbGVtZW50c0RvY1NlbGVjdGlvbiA9IGltcGxlbWVudHNEb2NT
ZWxlY3Rpb247DQoNCiAgICB2YXIgdXNlRG9jdW1lbnRTZWxlY3Rpb24gPSBpbXBsZW1lbnRzRG9j
U2VsZWN0aW9uICYmICghaW1wbGVtZW50c1dpbkdldFNlbGVjdGlvbiB8fCBhcGkuY29uZmlnLnBy
ZWZlclRleHRSYW5nZSk7DQoNCiAgICBpZiAodXNlRG9jdW1lbnRTZWxlY3Rpb24pIHsNCiAgICAg
ICAgZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0RG9jU2VsZWN0aW9uOw0KICAgICAgICBhcGkuaXNT
ZWxlY3Rpb25WYWxpZCA9IGZ1bmN0aW9uKHdpblBhcmFtKSB7DQogICAgICAgICAgICB2YXIgZG9j
ID0gZ2V0V2luZG93KHdpblBhcmFtLCAiaXNTZWxlY3Rpb25WYWxpZCIpLmRvY3VtZW50LCBuYXRp
dmVTZWwgPSBkb2Muc2VsZWN0aW9uOw0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRo
ZSBzZWxlY3Rpb24gVGV4dFJhbmdlIGlzIGFjdHVhbGx5IGNvbnRhaW5lZCB3aXRoaW4gdGhlIGNv
cnJlY3QgZG9jdW1lbnQNCiAgICAgICAgICAgIHJldHVybiAobmF0aXZlU2VsLnR5cGUgIT0gIk5v
bmUiIHx8IGdldERvY3VtZW50KG5hdGl2ZVNlbC5jcmVhdGVSYW5nZSgpLnBhcmVudEVsZW1lbnQo
KSkgPT0gZG9jKTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2UgaWYgKGltcGxlbWVudHNXaW5HZXRT
ZWxlY3Rpb24pIHsNCiAgICAgICAgZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0V2luU2VsZWN0aW9u
Ow0KICAgICAgICBhcGkuaXNTZWxlY3Rpb25WYWxpZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAg
ICAgcmV0dXJuIHRydWU7DQogICAgICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgbW9kdWxl
LmZhaWwoIk5laXRoZXIgZG9jdW1lbnQuc2VsZWN0aW9uIG9yIHdpbmRvdy5nZXRTZWxlY3Rpb24o
KSBkZXRlY3RlZC4iKTsNCiAgICB9DQoNCiAgICBhcGkuZ2V0TmF0aXZlU2VsZWN0aW9uID0gZ2V0
TmF0aXZlU2VsZWN0aW9uOw0KDQogICAgdmFyIHRlc3RTZWxlY3Rpb24gPSBnZXROYXRpdmVTZWxl
Y3Rpb24oKTsNCiAgICB2YXIgdGVzdFJhbmdlID0gYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvY3Vt
ZW50KTsNCiAgICB2YXIgYm9keSA9IGdldEJvZHkoZG9jdW1lbnQpOw0KDQogICAgLy8gT2J0YWlu
aW5nIGEgcmFuZ2UgZnJvbSBhIHNlbGVjdGlvbg0KICAgIHZhciBzZWxlY3Rpb25IYXNBbmNob3JB
bmRGb2N1cyA9IHV0aWwuYXJlSG9zdFByb3BlcnRpZXModGVzdFNlbGVjdGlvbiwNCiAgICAgICAg
WyJhbmNob3JOb2RlIiwgImZvY3VzTm9kZSIsICJhbmNob3JPZmZzZXQiLCAiZm9jdXNPZmZzZXQi
XSk7DQoNCiAgICBmZWF0dXJlcy5zZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyA9IHNlbGVjdGlv
bkhhc0FuY2hvckFuZEZvY3VzOw0KDQogICAgLy8gVGVzdCBmb3IgZXhpc3RlbmNlIG9mIG5hdGl2
ZSBzZWxlY3Rpb24gZXh0ZW5kKCkgbWV0aG9kDQogICAgdmFyIHNlbGVjdGlvbkhhc0V4dGVuZCA9
IGlzSG9zdE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAiZXh0ZW5kIik7DQogICAgZmVhdHVyZXMuc2Vs
ZWN0aW9uSGFzRXh0ZW5kID0gc2VsZWN0aW9uSGFzRXh0ZW5kOw0KDQogICAgLy8gVGVzdCBpZiBy
YW5nZUNvdW50IGV4aXN0cw0KICAgIHZhciBzZWxlY3Rpb25IYXNSYW5nZUNvdW50ID0gKHR5cGVv
ZiB0ZXN0U2VsZWN0aW9uLnJhbmdlQ291bnQgPT0gIm51bWJlciIpOw0KICAgIGZlYXR1cmVzLnNl
bGVjdGlvbkhhc1JhbmdlQ291bnQgPSBzZWxlY3Rpb25IYXNSYW5nZUNvdW50Ow0KDQogICAgdmFy
IHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSBmYWxzZTsNCiAgICB2YXIgY29sbGFw
c2VkTm9uRWRpdGFibGVTZWxlY3Rpb25zU3VwcG9ydGVkID0gdHJ1ZTsNCg0KICAgIGlmICh1dGls
LmFyZUhvc3RNZXRob2RzKHRlc3RTZWxlY3Rpb24sIFsiYWRkUmFuZ2UiLCAiZ2V0UmFuZ2VBdCIs
ICJyZW1vdmVBbGxSYW5nZXMiXSkgJiYNCiAgICAgICAgICAgIHR5cGVvZiB0ZXN0U2VsZWN0aW9u
LnJhbmdlQ291bnQgPT0gIm51bWJlciIgJiYgZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlKSB7
DQoNCiAgICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgLy8gUHJldmlvdXNseSBhbiBp
ZnJhbWUgd2FzIHVzZWQgYnV0IHRoaXMgY2F1c2VkIHByb2JsZW1zIGluIHNvbWUgY2lyY3Vtc3Rh
bmNlcyBpbiBJRSwgc28gdGVzdHMgYXJlDQogICAgICAgICAgICAvLyBwZXJmb3JtZWQgb24gdGhl
IGN1cnJlbnQgZG9jdW1lbnQncyBzZWxlY3Rpb24uIFNlZSBpc3N1ZSAxMDkuDQoNCiAgICAgICAg
ICAgIC8vIE5vdGUgYWxzbyB0aGF0IGlmIGEgc2VsZWN0aW9uIHByZXZpb3VzbHkgZXhpc3RlZCwg
aXQgaXMgd2lwZWQgYnkgdGhlc2UgdGVzdHMuIFRoaXMgc2hvdWxkIHVzdWFsbHkgYmUgZmluZQ0K
ICAgICAgICAgICAgLy8gYmVjYXVzZSBpbml0aWFsaXphdGlvbiB1c3VhbGx5IGhhcHBlbnMgd2hl
biB0aGUgZG9jdW1lbnQgbG9hZHMsIGJ1dCBjb3VsZCBiZSBhIHByb2JsZW0gZm9yIGEgc2NyaXB0
IHRoYXQNCiAgICAgICAgICAgIC8vIGxvYWRzIGFuZCBpbml0aWFsaXplcyBSYW5neSBsYXRlci4g
SWYgYW55b25lIGNvbXBsYWlucywgY29kZSBjb3VsZCBiZSBhZGRlZCB0byBzYXZlIGFuZCByZXN0
b3JlIHRoZQ0KICAgICAgICAgICAgLy8gc2VsZWN0aW9uLg0KICAgICAgICAgICAgdmFyIHNlbCA9
IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsNCiAgICAgICAgICAgIGlmIChzZWwpIHsNCiAgICAgICAg
ICAgICAgICB2YXIgYm9keSA9IGdldEJvZHkoZG9jdW1lbnQpOw0KICAgICAgICAgICAgICAgIHZh
ciB0ZXN0RWwgPSBib2R5LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYi
KSApOw0KICAgICAgICAgICAgICAgIHRlc3RFbC5jb250ZW50RWRpdGFibGUgPSAiZmFsc2UiOw0K
ICAgICAgICAgICAgICAgIHZhciB0ZXh0Tm9kZSA9IHRlc3RFbC5hcHBlbmRDaGlsZCggZG9jdW1l
bnQuY3JlYXRlVGV4dE5vZGUoIlx1MDBhMFx1MDBhMFx1MDBhMCIpICk7DQoNCiAgICAgICAgICAg
ICAgICAvLyBUZXN0IHdoZXRoZXIgdGhlIG5hdGl2ZSBzZWxlY3Rpb24gd2lsbCBhbGxvdyBhIGNv
bGxhcHNlZCBzZWxlY3Rpb24gd2l0aGluIGEgbm9uLWVkaXRhYmxlIGVsZW1lbnQNCiAgICAgICAg
ICAgICAgICB2YXIgcjEgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOw0KDQogICAgICAgICAgICAg
ICAgcjEuc2V0U3RhcnQodGV4dE5vZGUsIDEpOw0KICAgICAgICAgICAgICAgIHIxLmNvbGxhcHNl
KHRydWUpOw0KICAgICAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyMSk7DQogICAgICAgICAgICAg
ICAgY29sbGFwc2VkTm9uRWRpdGFibGVTZWxlY3Rpb25zU3VwcG9ydGVkID0gKHNlbC5yYW5nZUNv
dW50ID09IDEpOw0KICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCg0KICAg
ICAgICAgICAgICAgIC8vIFRlc3Qgd2hldGhlciB0aGUgbmF0aXZlIHNlbGVjdGlvbiBpcyBjYXBh
YmxlIG9mIHN1cHBvcnRpbmcgbXVsdGlwbGUgcmFuZ2VzDQogICAgICAgICAgICAgICAgdmFyIHIy
ID0gcjEuY2xvbmVSYW5nZSgpOw0KICAgICAgICAgICAgICAgIHIxLnNldFN0YXJ0KHRleHROb2Rl
LCAwKTsNCiAgICAgICAgICAgICAgICByMi5zZXRFbmQodGV4dE5vZGUsIDMpOw0KICAgICAgICAg
ICAgICAgIHIyLnNldFN0YXJ0KHRleHROb2RlLCAyKTsNCiAgICAgICAgICAgICAgICBzZWwuYWRk
UmFuZ2UocjEpOw0KICAgICAgICAgICAgICAgIHNlbC5hZGRSYW5nZShyMik7DQoNCiAgICAgICAg
ICAgICAgICBzZWxlY3Rpb25TdXBwb3J0c011bHRpcGxlUmFuZ2VzID0gKHNlbC5yYW5nZUNvdW50
ID09IDIpOw0KDQogICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXANCiAgICAgICAgICAgICAgICBi
b2R5LnJlbW92ZUNoaWxkKHRlc3RFbCk7DQogICAgICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJh
bmdlcygpOw0KICAgICAgICAgICAgICAgIHIxLmRldGFjaCgpOw0KICAgICAgICAgICAgICAgIHIy
LmRldGFjaCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KSgpOw0KICAgIH0NCg0KICAgIGZl
YXR1cmVzLnNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXMgPSBzZWxlY3Rpb25TdXBwb3J0
c011bHRpcGxlUmFuZ2VzOw0KICAgIGZlYXR1cmVzLmNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0
aW9uc1N1cHBvcnRlZCA9IGNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0aW9uc1N1cHBvcnRlZDsN
Cg0KICAgIC8vIENvbnRyb2xSYW5nZXMNCiAgICB2YXIgaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9
IGZhbHNlLCB0ZXN0Q29udHJvbFJhbmdlOw0KDQogICAgaWYgKGJvZHkgJiYgaXNIb3N0TWV0aG9k
KGJvZHksICJjcmVhdGVDb250cm9sUmFuZ2UiKSkgew0KICAgICAgICB0ZXN0Q29udHJvbFJhbmdl
ID0gYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTsNCiAgICAgICAgaWYgKHV0aWwuYXJlSG9zdFBy
b3BlcnRpZXModGVzdENvbnRyb2xSYW5nZSwgWyJpdGVtIiwgImFkZCJdKSkgew0KICAgICAgICAg
ICAgaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9IHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAg
ZmVhdHVyZXMuaW1wbGVtZW50c0NvbnRyb2xSYW5nZSA9IGltcGxlbWVudHNDb250cm9sUmFuZ2U7
DQoNCiAgICAvLyBTZWxlY3Rpb24gY29sbGFwc2VkbmVzcw0KICAgIGlmIChzZWxlY3Rpb25IYXNB
bmNob3JBbmRGb2N1cykgew0KICAgICAgICBzZWxlY3Rpb25Jc0NvbGxhcHNlZCA9IGZ1bmN0aW9u
KHNlbCkgew0KICAgICAgICAgICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlID09PSBzZWwuZm9jdXNO
b2RlICYmIHNlbC5hbmNob3JPZmZzZXQgPT09IHNlbC5mb2N1c09mZnNldDsNCiAgICAgICAgfTsN
CiAgICB9IGVsc2Ugew0KICAgICAgICBzZWxlY3Rpb25Jc0NvbGxhcHNlZCA9IGZ1bmN0aW9uKHNl
bCkgew0KICAgICAgICAgICAgcmV0dXJuIHNlbC5yYW5nZUNvdW50ID8gc2VsLmdldFJhbmdlQXQo
c2VsLnJhbmdlQ291bnQgLSAxKS5jb2xsYXBzZWQgOiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICB9
DQoNCiAgICBmdW5jdGlvbiB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZShzZWwsIHJhbmdl
LCBiYWNrd2FyZCkgew0KICAgICAgICB2YXIgYW5jaG9yUHJlZml4ID0gYmFja3dhcmQgPyAiZW5k
IiA6ICJzdGFydCIsIGZvY3VzUHJlZml4ID0gYmFja3dhcmQgPyAic3RhcnQiIDogImVuZCI7DQog
ICAgICAgIHNlbC5hbmNob3JOb2RlID0gcmFuZ2VbYW5jaG9yUHJlZml4ICsgIkNvbnRhaW5lciJd
Ow0KICAgICAgICBzZWwuYW5jaG9yT2Zmc2V0ID0gcmFuZ2VbYW5jaG9yUHJlZml4ICsgIk9mZnNl
dCJdOw0KICAgICAgICBzZWwuZm9jdXNOb2RlID0gcmFuZ2VbZm9jdXNQcmVmaXggKyAiQ29udGFp
bmVyIl07DQogICAgICAgIHNlbC5mb2N1c09mZnNldCA9IHJhbmdlW2ZvY3VzUHJlZml4ICsgIk9m
ZnNldCJdOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbU5h
dGl2ZVNlbGVjdGlvbihzZWwpIHsNCiAgICAgICAgdmFyIG5hdGl2ZVNlbCA9IHNlbC5uYXRpdmVT
ZWxlY3Rpb247DQogICAgICAgIHNlbC5hbmNob3JOb2RlID0gbmF0aXZlU2VsLmFuY2hvck5vZGU7
DQogICAgICAgIHNlbC5hbmNob3JPZmZzZXQgPSBuYXRpdmVTZWwuYW5jaG9yT2Zmc2V0Ow0KICAg
ICAgICBzZWwuZm9jdXNOb2RlID0gbmF0aXZlU2VsLmZvY3VzTm9kZTsNCiAgICAgICAgc2VsLmZv
Y3VzT2Zmc2V0ID0gbmF0aXZlU2VsLmZvY3VzT2Zmc2V0Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9u
IHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCkgew0KICAgICAgICBzZWwuYW5jaG9yTm9kZSA9IHNl
bC5mb2N1c05vZGUgPSBudWxsOw0KICAgICAgICBzZWwuYW5jaG9yT2Zmc2V0ID0gc2VsLmZvY3Vz
T2Zmc2V0ID0gMDsNCiAgICAgICAgc2VsLnJhbmdlQ291bnQgPSAwOw0KICAgICAgICBzZWwuaXND
b2xsYXBzZWQgPSB0cnVlOw0KICAgICAgICBzZWwuX3Jhbmdlcy5sZW5ndGggPSAwOw0KICAgIH0N
Cg0KICAgIGZ1bmN0aW9uIGdldE5hdGl2ZVJhbmdlKHJhbmdlKSB7DQogICAgICAgIHZhciBuYXRp
dmVSYW5nZTsNCiAgICAgICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRG9tUmFuZ2UpIHsNCiAgICAg
ICAgICAgIG5hdGl2ZVJhbmdlID0gYXBpLmNyZWF0ZU5hdGl2ZVJhbmdlKHJhbmdlLmdldERvY3Vt
ZW50KCkpOw0KICAgICAgICAgICAgbmF0aXZlUmFuZ2Uuc2V0RW5kKHJhbmdlLmVuZENvbnRhaW5l
ciwgcmFuZ2UuZW5kT2Zmc2V0KTsNCiAgICAgICAgICAgIG5hdGl2ZVJhbmdlLnNldFN0YXJ0KHJh
bmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7DQogICAgICAgIH0gZWxzZSBp
ZiAocmFuZ2UgaW5zdGFuY2VvZiBXcmFwcGVkUmFuZ2UpIHsNCiAgICAgICAgICAgIG5hdGl2ZVJh
bmdlID0gcmFuZ2UubmF0aXZlUmFuZ2U7DQogICAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZXMuaW1w
bGVtZW50c0RvbVJhbmdlICYmIChyYW5nZSBpbnN0YW5jZW9mIGRvbS5nZXRXaW5kb3cocmFuZ2Uu
c3RhcnRDb250YWluZXIpLlJhbmdlKSkgew0KICAgICAgICAgICAgbmF0aXZlUmFuZ2UgPSByYW5n
ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmF0aXZlUmFuZ2U7DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gcmFuZ2VDb250YWluc1NpbmdsZUVsZW1lbnQocmFuZ2VOb2Rlcykgew0KICAgICAg
ICBpZiAoIXJhbmdlTm9kZXMubGVuZ3RoIHx8IHJhbmdlTm9kZXNbMF0ubm9kZVR5cGUgIT0gMSkg
ew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFy
IGkgPSAxLCBsZW4gPSByYW5nZU5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAg
ICAgICBpZiAoIWRvbS5pc0FuY2VzdG9yT2YocmFuZ2VOb2Rlc1swXSwgcmFuZ2VOb2Rlc1tpXSkp
IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAg
IH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0U2luZ2xl
RWxlbWVudEZyb21SYW5nZShyYW5nZSkgew0KICAgICAgICB2YXIgbm9kZXMgPSByYW5nZS5nZXRO
b2RlcygpOw0KICAgICAgICBpZiAoIXJhbmdlQ29udGFpbnNTaW5nbGVFbGVtZW50KG5vZGVzKSkg
ew0KICAgICAgICAgICAgdGhyb3cgbW9kdWxlLmNyZWF0ZUVycm9yKCJnZXRTaW5nbGVFbGVtZW50
RnJvbVJhbmdlOiByYW5nZSAiICsgcmFuZ2UuaW5zcGVjdCgpICsgIiBkaWQgbm90IGNvbnNpc3Qg
b2YgYSBzaW5nbGUgZWxlbWVudCIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBub2Rlc1sw
XTsNCiAgICB9DQoNCiAgICAvLyBTaW1wbGUsIHF1aWNrIHRlc3Qgd2hpY2ggb25seSBuZWVkcyB0
byBkaXN0aW5ndWlzaCBiZXR3ZWVuIGEgVGV4dFJhbmdlIGFuZCBhIENvbnRyb2xSYW5nZQ0KICAg
IGZ1bmN0aW9uIGlzVGV4dFJhbmdlKHJhbmdlKSB7DQogICAgICAgIHJldHVybiAhIXJhbmdlICYm
IHR5cGVvZiByYW5nZS50ZXh0ICE9ICJ1bmRlZmluZWQiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9u
IHVwZGF0ZUZyb21UZXh0UmFuZ2Uoc2VsLCByYW5nZSkgew0KICAgICAgICAvLyBDcmVhdGUgYSBS
YW5nZSBmcm9tIHRoZSBzZWxlY3RlZCBUZXh0UmFuZ2UNCiAgICAgICAgdmFyIHdyYXBwZWRSYW5n
ZSA9IG5ldyBXcmFwcGVkUmFuZ2UocmFuZ2UpOw0KICAgICAgICBzZWwuX3JhbmdlcyA9IFt3cmFw
cGVkUmFuZ2VdOw0KDQogICAgICAgIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwg
d3JhcHBlZFJhbmdlLCBmYWxzZSk7DQogICAgICAgIHNlbC5yYW5nZUNvdW50ID0gMTsNCiAgICAg
ICAgc2VsLmlzQ29sbGFwc2VkID0gd3JhcHBlZFJhbmdlLmNvbGxhcHNlZDsNCiAgICB9DQoNCiAg
ICBmdW5jdGlvbiB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCkgew0KICAgICAgICAvLyBVcGRh
dGUgdGhlIHdyYXBwZWQgc2VsZWN0aW9uIGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2
ZSBzZWxlY3Rpb24NCiAgICAgICAgc2VsLl9yYW5nZXMubGVuZ3RoID0gMDsNCiAgICAgICAgaWYg
KHNlbC5kb2NTZWxlY3Rpb24udHlwZSA9PSAiTm9uZSIpIHsNCiAgICAgICAgICAgIHVwZGF0ZUVt
cHR5U2VsZWN0aW9uKHNlbCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2YXIgY29u
dHJvbFJhbmdlID0gc2VsLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAgICAgICAgICAg
aWYgKGlzVGV4dFJhbmdlKGNvbnRyb2xSYW5nZSkpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlz
IGNhc2UgKHdoZXJlIHRoZSBzZWxlY3Rpb24gdHlwZSBpcyAiQ29udHJvbCIgYW5kIGNhbGxpbmcg
Y3JlYXRlUmFuZ2UoKSBvbiB0aGUgc2VsZWN0aW9uIHJldHVybnMNCiAgICAgICAgICAgICAgICAv
LyBhIFRleHRSYW5nZSkgY2FuIGhhcHBlbiBpbiBJRSA5LiBJdCBoYXBwZW5zLCBmb3IgZXhhbXBs
ZSwgd2hlbiBhbGwgZWxlbWVudHMgaW4gdGhlIHNlbGVjdGVkDQogICAgICAgICAgICAgICAgLy8g
Q29udHJvbFJhbmdlIGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIENvbnRyb2xSYW5nZSBhbmQg
cmVtb3ZlZCBmcm9tIHRoZSBkb2N1bWVudC4NCiAgICAgICAgICAgICAgICB1cGRhdGVGcm9tVGV4
dFJhbmdlKHNlbCwgY29udHJvbFJhbmdlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICAgICAgc2VsLnJhbmdlQ291bnQgPSBjb250cm9sUmFuZ2UubGVuZ3RoOw0KICAgICAgICAg
ICAgICAgIHZhciByYW5nZSwgZG9jID0gZ2V0RG9jdW1lbnQoY29udHJvbFJhbmdlLml0ZW0oMCkp
Ow0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlQ291bnQ7ICsr
aSkgew0KICAgICAgICAgICAgICAgICAgICByYW5nZSA9IGFwaS5jcmVhdGVSYW5nZShkb2MpOw0K
ICAgICAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlKGNvbnRyb2xSYW5nZS5pdGVtKGkp
KTsNCiAgICAgICAgICAgICAgICAgICAgc2VsLl9yYW5nZXMucHVzaChyYW5nZSk7DQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbC5yYW5nZUNv
dW50ID09IDEgJiYgc2VsLl9yYW5nZXNbMF0uY29sbGFwc2VkOw0KICAgICAgICAgICAgICAgIHVw
ZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291
bnQgLSAxXSwgZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAg
ZnVuY3Rpb24gYWRkUmFuZ2VUb0NvbnRyb2xTZWxlY3Rpb24oc2VsLCByYW5nZSkgew0KICAgICAg
ICB2YXIgY29udHJvbFJhbmdlID0gc2VsLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAg
ICAgICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7
DQoNCiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IENvbnRyb2xSYW5nZSBjb250YWluaW5nIGFsbCB0
aGUgZWxlbWVudHMgaW4gdGhlIHNlbGVjdGVkIENvbnRyb2xSYW5nZSBwbHVzIHRoZSBlbGVtZW50
DQogICAgICAgIC8vIGNvbnRhaW5lZCBieSB0aGUgc3VwcGxpZWQgcmFuZ2UNCiAgICAgICAgdmFy
IGRvYyA9IGdldERvY3VtZW50KGNvbnRyb2xSYW5nZS5pdGVtKDApKTsNCiAgICAgICAgdmFyIG5l
d0NvbnRyb2xSYW5nZSA9IGdldEJvZHkoZG9jKS5jcmVhdGVDb250cm9sUmFuZ2UoKTsNCiAgICAg
ICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbnRyb2xSYW5nZS5sZW5ndGg7IGkgPCBsZW47ICsr
aSkgew0KICAgICAgICAgICAgbmV3Q29udHJvbFJhbmdlLmFkZChjb250cm9sUmFuZ2UuaXRlbShp
KSk7DQogICAgICAgIH0NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIG5ld0NvbnRyb2xSYW5n
ZS5hZGQocmFuZ2VFbGVtZW50KTsNCiAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAg
IHRocm93IG1vZHVsZS5jcmVhdGVFcnJvcigiYWRkUmFuZ2UoKTogRWxlbWVudCB3aXRoaW4gdGhl
IHNwZWNpZmllZCBSYW5nZSBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24g
KGRvZXMgaXQgaGF2ZSBsYXlvdXQ/KSIpOw0KICAgICAgICB9DQogICAgICAgIG5ld0NvbnRyb2xS
YW5nZS5zZWxlY3QoKTsNCg0KICAgICAgICAvLyBVcGRhdGUgdGhlIHdyYXBwZWQgc2VsZWN0aW9u
IGJhc2VkIG9uIHdoYXQncyBub3cgaW4gdGhlIG5hdGl2ZSBzZWxlY3Rpb24NCiAgICAgICAgdXBk
YXRlQ29udHJvbFNlbGVjdGlvbihzZWwpOw0KICAgIH0NCg0KICAgIHZhciBnZXRTZWxlY3Rpb25S
YW5nZUF0Ow0KDQogICAgaWYgKGlzSG9zdE1ldGhvZCh0ZXN0U2VsZWN0aW9uLCAiZ2V0UmFuZ2VB
dCIpKSB7DQogICAgICAgIC8vIHRyeS9jYXRjaCBpcyBwcmVzZW50IGJlY2F1c2UgZ2V0UmFuZ2VB
dCgpIG11c3QgaGF2ZSB0aHJvd24gYW4gZXJyb3IgaW4gc29tZSBicm93c2VyIGFuZCBzb21lIHNp
dHVhdGlvbi4NCiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgSSBkaWRuJ3Qgd3JpdGUgYSBjb21t
ZW50IGFib3V0IHRoZSBzcGVjaWZpY3MgYW5kIGFtIG5vdyBzY2FyZWQgdG8gdGFrZSBpdCBvdXQu
IExldCB0aGF0IGJlIGENCiAgICAgICAgLy8gbGVzc29uIHRvIHVzIGFsbCwgZXNwZWNpYWxseSBt
ZS4NCiAgICAgICAgZ2V0U2VsZWN0aW9uUmFuZ2VBdCA9IGZ1bmN0aW9uKHNlbCwgaW5kZXgpIHsN
CiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbC5nZXRSYW5nZUF0
KGluZGV4KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7DQogICAgICAgICAgICAgICAgcmV0
dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSBlbHNlIGlmIChzZWxl
Y3Rpb25IYXNBbmNob3JBbmRGb2N1cykgew0KICAgICAgICBnZXRTZWxlY3Rpb25SYW5nZUF0ID0g
ZnVuY3Rpb24oc2VsKSB7DQogICAgICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnQoc2VsLmFu
Y2hvck5vZGUpOw0KICAgICAgICAgICAgdmFyIHJhbmdlID0gYXBpLmNyZWF0ZVJhbmdlKGRvYyk7
DQogICAgICAgICAgICByYW5nZS5zZXRTdGFydEFuZEVuZChzZWwuYW5jaG9yTm9kZSwgc2VsLmFu
Y2hvck9mZnNldCwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTsNCg0KICAgICAgICAg
ICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZW4gdGhlIHNlbGVjdGlvbiB3YXMgc2VsZWN0ZWQgYmFj
a3dhcmRzIChmcm9tIHRoZSBlbmQgdG8gdGhlIHN0YXJ0IGluIHRoZQ0KICAgICAgICAgICAgLy8g
ZG9jdW1lbnQpDQogICAgICAgICAgICBpZiAocmFuZ2UuY29sbGFwc2VkICE9PSB0aGlzLmlzQ29s
bGFwc2VkKSB7DQogICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBbmRFbmQoc2VsLmZvY3Vz
Tm9kZSwgc2VsLmZvY3VzT2Zmc2V0LCBzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCk7
DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiByYW5nZTsNCiAgICAgICAgfTsN
CiAgICB9DQoNCiAgICBmdW5jdGlvbiBXcmFwcGVkU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jU2Vs
ZWN0aW9uLCB3aW4pIHsNCiAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24gPSBzZWxlY3Rpb247
DQogICAgICAgIHRoaXMuZG9jU2VsZWN0aW9uID0gZG9jU2VsZWN0aW9uOw0KICAgICAgICB0aGlz
Ll9yYW5nZXMgPSBbXTsNCiAgICAgICAgdGhpcy53aW4gPSB3aW47DQogICAgICAgIHRoaXMucmVm
cmVzaCgpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRlbGV0ZVByb3BlcnRpZXMoc2VsKSB7DQog
ICAgICAgIHNlbC53aW4gPSBzZWwuYW5jaG9yTm9kZSA9IHNlbC5mb2N1c05vZGUgPSBzZWwuX3Jh
bmdlcyA9IG51bGw7DQogICAgICAgIHNlbC5yYW5nZUNvdW50ID0gc2VsLmFuY2hvck9mZnNldCA9
IHNlbC5mb2N1c09mZnNldCA9IDA7DQogICAgICAgIHNlbC5kZXRhY2hlZCA9IHRydWU7DQogICAg
fQ0KDQogICAgdmFyIGNhY2hlZFJhbmd5U2VsZWN0aW9ucyA9IFtdOw0KDQogICAgZnVuY3Rpb24g
ZmluZENhY2hlZFNlbGVjdGlvbih3aW4sIGFjdGlvbikgew0KICAgICAgICB2YXIgaSA9IGNhY2hl
ZFJhbmd5U2VsZWN0aW9ucy5sZW5ndGgsIGNhY2hlZCwgc2VsOw0KICAgICAgICB3aGlsZSAoaS0t
KSB7DQogICAgICAgICAgICBjYWNoZWQgPSBjYWNoZWRSYW5neVNlbGVjdGlvbnNbaV07DQogICAg
ICAgICAgICBzZWwgPSBjYWNoZWQuc2VsZWN0aW9uOw0KICAgICAgICAgICAgaWYgKGFjdGlvbiA9
PSAiZGVsZXRlQWxsIikgew0KICAgICAgICAgICAgICAgIGRlbGV0ZVByb3BlcnRpZXMoc2VsKTsN
CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FjaGVkLndpbiA9PSB3aW4pIHsNCiAgICAgICAgICAg
ICAgICBpZiAoYWN0aW9uID09ICJkZWxldGUiKSB7DQogICAgICAgICAgICAgICAgICAgIGNhY2hl
ZFJhbmd5U2VsZWN0aW9ucy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVy
biB0cnVlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJl
dHVybiBzZWw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQog
ICAgICAgIGlmIChhY3Rpb24gPT0gImRlbGV0ZUFsbCIpIHsNCiAgICAgICAgICAgIGNhY2hlZFJh
bmd5U2VsZWN0aW9ucy5sZW5ndGggPSAwOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxs
Ow0KICAgIH0NCg0KICAgIHZhciBnZXRTZWxlY3Rpb24gPSBmdW5jdGlvbih3aW4pIHsNCiAgICAg
ICAgLy8gQ2hlY2sgaWYgdGhlIHBhcmFtZXRlciBpcyBhIFJhbmd5IFNlbGVjdGlvbiBvYmplY3QN
CiAgICAgICAgaWYgKHdpbiAmJiB3aW4gaW5zdGFuY2VvZiBXcmFwcGVkU2VsZWN0aW9uKSB7DQog
ICAgICAgICAgICB3aW4ucmVmcmVzaCgpOw0KICAgICAgICAgICAgcmV0dXJuIHdpbjsNCiAgICAg
ICAgfQ0KDQogICAgICAgIHdpbiA9IGdldFdpbmRvdyh3aW4sICJnZXROYXRpdmVTZWxlY3Rpb24i
KTsNCg0KICAgICAgICB2YXIgc2VsID0gZmluZENhY2hlZFNlbGVjdGlvbih3aW4pOw0KICAgICAg
ICB2YXIgbmF0aXZlU2VsID0gZ2V0TmF0aXZlU2VsZWN0aW9uKHdpbiksIGRvY1NlbCA9IGltcGxl
bWVudHNEb2NTZWxlY3Rpb24gPyBnZXREb2NTZWxlY3Rpb24od2luKSA6IG51bGw7DQogICAgICAg
IGlmIChzZWwpIHsNCiAgICAgICAgICAgIHNlbC5uYXRpdmVTZWxlY3Rpb24gPSBuYXRpdmVTZWw7
DQogICAgICAgICAgICBzZWwuZG9jU2VsZWN0aW9uID0gZG9jU2VsOw0KICAgICAgICAgICAgc2Vs
LnJlZnJlc2goKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNlbCA9IG5ldyBXcmFw
cGVkU2VsZWN0aW9uKG5hdGl2ZVNlbCwgZG9jU2VsLCB3aW4pOw0KICAgICAgICAgICAgY2FjaGVk
UmFuZ3lTZWxlY3Rpb25zLnB1c2goIHsgd2luOiB3aW4sIHNlbGVjdGlvbjogc2VsIH0gKTsNCiAg
ICAgICAgfQ0KICAgICAgICByZXR1cm4gc2VsOw0KICAgIH07DQoNCiAgICBhcGkuZ2V0U2VsZWN0
aW9uID0gZ2V0U2VsZWN0aW9uOw0KDQogICAgYXBpLmdldElmcmFtZVNlbGVjdGlvbiA9IGZ1bmN0
aW9uKGlmcmFtZUVsKSB7DQogICAgICAgIG1vZHVsZS5kZXByZWNhdGlvbk5vdGljZSgiZ2V0SWZy
YW1lU2VsZWN0aW9uKCkiLCAiZ2V0U2VsZWN0aW9uKGlmcmFtZUVsKSIpOw0KICAgICAgICByZXR1
cm4gYXBpLmdldFNlbGVjdGlvbihkb20uZ2V0SWZyYW1lV2luZG93KGlmcmFtZUVsKSk7DQogICAg
fTsNCg0KICAgIHZhciBzZWxQcm90byA9IFdyYXBwZWRTZWxlY3Rpb24ucHJvdG90eXBlOw0KDQog
ICAgZnVuY3Rpb24gY3JlYXRlQ29udHJvbFNlbGVjdGlvbihzZWwsIHJhbmdlcykgew0KICAgICAg
ICAvLyBFbnN1cmUgdGhhdCB0aGUgc2VsZWN0aW9uIGJlY29tZXMgb2YgdHlwZSAiQ29udHJvbCIN
CiAgICAgICAgdmFyIGRvYyA9IGdldERvY3VtZW50KHJhbmdlc1swXS5zdGFydENvbnRhaW5lcik7
DQogICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSBnZXRCb2R5KGRvYykuY3JlYXRlQ29udHJvbFJh
bmdlKCk7DQogICAgICAgIGZvciAodmFyIGkgPSAwLCBlbDsgaSA8IHJhbmdlQ291bnQ7ICsraSkg
ew0KICAgICAgICAgICAgZWwgPSBnZXRTaW5nbGVFbGVtZW50RnJvbVJhbmdlKHJhbmdlc1tpXSk7
DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnRyb2xSYW5nZS5hZGQoZWwp
Ow0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBtb2R1
bGUuY3JlYXRlRXJyb3IoInNldFJhbmdlcygpOiBFbGVtZW50IHdpdGhpbiB0aGUgb25lIG9mIHRo
ZSBzcGVjaWZpZWQgUmFuZ2VzIGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlv
biAoZG9lcyBpdCBoYXZlIGxheW91dD8pIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAg
ICAgICAgY29udHJvbFJhbmdlLnNlbGVjdCgpOw0KDQogICAgICAgIC8vIFVwZGF0ZSB0aGUgd3Jh
cHBlZCBzZWxlY3Rpb24gYmFzZWQgb24gd2hhdCdzIG5vdyBpbiB0aGUgbmF0aXZlIHNlbGVjdGlv
bg0KICAgICAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgfQ0KDQogICAgLy8g
U2VsZWN0aW5nIGEgcmFuZ2UNCiAgICBpZiAoIXVzZURvY3VtZW50U2VsZWN0aW9uICYmIHNlbGVj
dGlvbkhhc0FuY2hvckFuZEZvY3VzICYmIHV0aWwuYXJlSG9zdE1ldGhvZHModGVzdFNlbGVjdGlv
biwgWyJyZW1vdmVBbGxSYW5nZXMiLCAiYWRkUmFuZ2UiXSkpIHsNCiAgICAgICAgc2VsUHJvdG8u
cmVtb3ZlQWxsUmFuZ2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLm5hdGl2ZVNl
bGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAgIHVwZGF0ZUVtcHR5U2VsZWN0
aW9uKHRoaXMpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciBhZGRSYW5nZUJhY2t3YXJkID0g
ZnVuY3Rpb24oc2VsLCByYW5nZSkgew0KICAgICAgICAgICAgdmFyIGRvYyA9IERvbVJhbmdlLmdl
dFJhbmdlRG9jdW1lbnQocmFuZ2UpOw0KICAgICAgICAgICAgdmFyIGVuZFJhbmdlID0gYXBpLmNy
ZWF0ZVJhbmdlKGRvYyk7DQogICAgICAgICAgICBlbmRSYW5nZS5jb2xsYXBzZVRvUG9pbnQocmFu
Z2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQpOw0KICAgICAgICAgICAgc2VsLm5hdGl2
ZVNlbGVjdGlvbi5hZGRSYW5nZShnZXROYXRpdmVSYW5nZShlbmRSYW5nZSkpOw0KICAgICAgICAg
ICAgc2VsLm5hdGl2ZVNlbGVjdGlvbi5leHRlbmQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdl
LnN0YXJ0T2Zmc2V0KTsNCiAgICAgICAgICAgIHNlbC5yZWZyZXNoKCk7DQogICAgICAgIH07DQoN
CiAgICAgICAgaWYgKHNlbGVjdGlvbkhhc1JhbmdlQ291bnQpIHsNCiAgICAgICAgICAgIHNlbFBy
b3RvLmFkZFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UsIGRpcmVjdGlvbikgew0KICAgICAgICAgICAg
ICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24g
JiYgdGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAgICAgICAgICAg
ICAgIGFkZFJhbmdlVG9Db250cm9sU2VsZWN0aW9uKHRoaXMsIHJhbmdlKTsNCiAgICAgICAgICAg
ICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3Rpb25CYWNrd2Fy
ZChkaXJlY3Rpb24pICYmIHNlbGVjdGlvbkhhc0V4dGVuZCkgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgYWRkUmFuZ2VCYWNrd2FyZCh0aGlzLCByYW5nZSk7DQogICAgICAgICAgICAgICAgICAg
IH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNSYW5nZUNvdW50
Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVS
YW5nZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1JhbmdlQ291bnQg
PSB0aGlzLnJhbmdlQ291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSYW5nZUNvdW50ID0gMDsNCiAgICAgICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBuYXRp
dmUgcmFuZ2Ugc28gdGhhdCBjaGFuZ2luZyB0aGUgc2VsZWN0ZWQgcmFuZ2UgZG9lcyBub3QgYWZm
ZWN0IHRoZSBzZWxlY3Rpb24uDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGNv
bnRyYXJ5IHRvIHRoZSBzcGVjIGJ1dCBpcyB0aGUgb25seSB3YXkgdG8gYWNoaWV2ZSBjb25zaXN0
ZW5jeSBiZXR3ZWVuIGJyb3dzZXJzLiBTZWUNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlz
c3VlIDgwLg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb24uYWRk
UmFuZ2UoZ2V0TmF0aXZlUmFuZ2UocmFuZ2UpLmNsb25lUmFuZ2UoKSk7DQoNCiAgICAgICAgICAg
ICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWRkaW5nIHRoZSByYW5nZSB3YXMgc3VjY2Vz
c2Z1bA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZUNvdW50ID0gdGhpcy5uYXRp
dmVTZWxlY3Rpb24ucmFuZ2VDb3VudDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRo
aXMucmFuZ2VDb3VudCA9PSBwcmV2aW91c1JhbmdlQ291bnQgKyAxKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLy8gVGhlIHJhbmdlIHdhcyBhZGRlZCBzdWNjZXNzZnVsbHkNCg0KICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIHJhbmdlIHRoYXQg
d2UgYWRkZWQgdG8gdGhlIHNlbGVjdGlvbiBpcyByZWZsZWN0ZWQgaW4gdGhlIGxhc3QgcmFuZ2Ug
ZXh0cmFjdGVkIGZyb20NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VsZWN0
aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaS5jb25maWcuY2hlY2tTZWxl
Y3Rpb25SYW5nZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2
ZVJhbmdlID0gZ2V0U2VsZWN0aW9uUmFuZ2VBdCh0aGlzLm5hdGl2ZVNlbGVjdGlvbiwgdGhpcy5y
YW5nZUNvdW50IC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXRp
dmVSYW5nZSAmJiAhcmFuZ2VzRXF1YWwobmF0aXZlUmFuZ2UsIHJhbmdlKSkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFwcGVucyBpbiBXZWJLaXQgd2l0aCwgZm9y
IGV4YW1wbGUsIGEgc2VsZWN0aW9uIHBsYWNlZCBhdCB0aGUgc3RhcnQgb2YgYSB0ZXh0IG5vZGUN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gbmV3IFdyYXBwZWRS
YW5nZShuYXRpdmVSYW5nZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAg
dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudCAtIDFdID0gcmFuZ2U7DQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2UodGhpcywgcmFuZ2Us
IHNlbGVjdGlvbklzQmFja3dhcmQodGhpcy5uYXRpdmVTZWxlY3Rpb24pKTsNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB0aGlzLmlzQ29sbGFwc2VkID0gc2VsZWN0aW9uSXNDb2xsYXBzZWQo
dGhpcyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIC8vIFRoZSByYW5nZSB3YXMgbm90IGFkZGVkIHN1Y2Nlc3NmdWxseS4gVGhl
IHNpbXBsZXN0IHRoaW5nIGlzIHRvIHJlZnJlc2gNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgIH0g
ZWxzZSB7DQogICAgICAgICAgICBzZWxQcm90by5hZGRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlLCBk
aXJlY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3Rpb25CYWNrd2FyZChkaXJl
Y3Rpb24pICYmIHNlbGVjdGlvbkhhc0V4dGVuZCkgew0KICAgICAgICAgICAgICAgICAgICBhZGRS
YW5nZUJhY2t3YXJkKHRoaXMsIHJhbmdlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAg
ICAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVNlbGVjdGlvbi5hZGRSYW5nZShnZXROYXRpdmVS
YW5nZShyYW5nZSkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgc2VsUHJv
dG8uc2V0UmFuZ2VzID0gZnVuY3Rpb24ocmFuZ2VzKSB7DQogICAgICAgICAgICBpZiAoaW1wbGVt
ZW50c0NvbnRyb2xSYW5nZSAmJiByYW5nZXMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAg
IGNyZWF0ZUNvbnRyb2xTZWxlY3Rpb24odGhpcywgcmFuZ2VzKTsNCiAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAg
ICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7
DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2VzW2ldKTsNCiAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSBlbHNlIGlmIChpc0hv
c3RNZXRob2QodGVzdFNlbGVjdGlvbiwgImVtcHR5IikgJiYgaXNIb3N0TWV0aG9kKHRlc3RSYW5n
ZSwgInNlbGVjdCIpICYmDQogICAgICAgICAgICAgICBpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYm
IHVzZURvY3VtZW50U2VsZWN0aW9uKSB7DQoNCiAgICAgICAgc2VsUHJvdG8ucmVtb3ZlQWxsUmFu
Z2VzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBBZGRlZCB0cnkvY2F0Y2ggYXMgZml4
IGZvciBpc3N1ZSAjMjENCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdGhpcy5k
b2NTZWxlY3Rpb24uZW1wdHkoKTsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBlbXB0
eSgpIG5vdCB3b3JraW5nIChpc3N1ZSAjMjQpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9j
U2VsZWN0aW9uLnR5cGUgIT0gIk5vbmUiKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFdvcmsg
YXJvdW5kIGZhaWx1cmUgdG8gZW1wdHkgYSBjb250cm9sIHNlbGVjdGlvbiBieSBpbnN0ZWFkIHNl
bGVjdGluZyBhIFRleHRSYW5nZSBhbmQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAvLyBjYWxs
aW5nIGVtcHR5KCkNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYzsNCiAgICAgICAgICAgICAg
ICAgICAgaWYgKHRoaXMuYW5jaG9yTm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9j
ID0gZ2V0RG9jdW1lbnQodGhpcy5hbmNob3JOb2RlKTsNCiAgICAgICAgICAgICAgICAgICAgfSBl
bHNlIGlmICh0aGlzLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAgICAgICAgICAg
ICAgICAgICAgICAgIHZhciBjb250cm9sUmFuZ2UgPSB0aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVS
YW5nZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xSYW5nZS5sZW5ndGgp
IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSBnZXREb2N1bWVudCggY29udHJv
bFJhbmdlLml0ZW0oMCkgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZG9jKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICB2YXIgdGV4dFJhbmdlID0gZ2V0Qm9keShkb2MpLmNyZWF0ZVRleHRSYW5nZSgp
Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFJhbmdlLnNlbGVjdCgpOw0KICAgICAgICAg
ICAgICAgICAgICAgICAgdGhpcy5kb2NTZWxlY3Rpb24uZW1wdHkoKTsNCiAgICAgICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHt9DQog
ICAgICAgICAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgfTsNCg0KICAg
ICAgICBzZWxQcm90by5hZGRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAgICAgICBp
ZiAodGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBDT05UUk9MKSB7DQogICAgICAgICAgICAgICAg
YWRkUmFuZ2VUb0NvbnRyb2xTZWxlY3Rpb24odGhpcywgcmFuZ2UpOw0KICAgICAgICAgICAgfSBl
bHNlIHsNCiAgICAgICAgICAgICAgICBXcmFwcGVkUmFuZ2UucmFuZ2VUb1RleHRSYW5nZShyYW5n
ZSkuc2VsZWN0KCk7DQogICAgICAgICAgICAgICAgdGhpcy5fcmFuZ2VzWzBdID0gcmFuZ2U7DQog
ICAgICAgICAgICAgICAgdGhpcy5yYW5nZUNvdW50ID0gMTsNCiAgICAgICAgICAgICAgICB0aGlz
LmlzQ29sbGFwc2VkID0gdGhpcy5fcmFuZ2VzWzBdLmNvbGxhcHNlZDsNCiAgICAgICAgICAgICAg
ICB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZSh0aGlzLCByYW5nZSwgZmFsc2UpOw0KICAg
ICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIHNlbFByb3RvLnNldFJhbmdlcyA9IGZ1
bmN0aW9uKHJhbmdlcykgew0KICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAg
ICAgICAgICAgIHZhciByYW5nZUNvdW50ID0gcmFuZ2VzLmxlbmd0aDsNCiAgICAgICAgICAgIGlm
IChyYW5nZUNvdW50ID4gMSkgew0KICAgICAgICAgICAgICAgIGNyZWF0ZUNvbnRyb2xTZWxlY3Rp
b24odGhpcywgcmFuZ2VzKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2VDb3VudCkgew0K
ICAgICAgICAgICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2VzWzBdKTsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBtb2R1bGUuZmFpbCgiTm8gbWVhbnMg
b2Ygc2VsZWN0aW5nIGEgUmFuZ2Ugb3IgVGV4dFJhbmdlIHdhcyBmb3VuZCIpOw0KICAgICAgICBy
ZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgc2VsUHJvdG8uZ2V0UmFuZ2VBdCA9IGZ1bmN0aW9u
KGluZGV4KSB7DQogICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5yYW5nZUNv
dW50KSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTkRFWF9TSVpFX0VS
UiIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIHJhbmdlIHRv
IHByZXNlcnZlIHNlbGVjdGlvbi1yYW5nZSBpbmRlcGVuZGVuY2UuIFNlZSBpc3N1ZSA4MC4NCiAg
ICAgICAgICAgIHJldHVybiB0aGlzLl9yYW5nZXNbaW5kZXhdLmNsb25lUmFuZ2UoKTsNCiAgICAg
ICAgfQ0KICAgIH07DQoNCiAgICB2YXIgcmVmcmVzaFNlbGVjdGlvbjsNCg0KICAgIGlmICh1c2VE
b2N1bWVudFNlbGVjdGlvbikgew0KICAgICAgICByZWZyZXNoU2VsZWN0aW9uID0gZnVuY3Rpb24o
c2VsKSB7DQogICAgICAgICAgICB2YXIgcmFuZ2U7DQogICAgICAgICAgICBpZiAoYXBpLmlzU2Vs
ZWN0aW9uVmFsaWQoc2VsLndpbikpIHsNCiAgICAgICAgICAgICAgICByYW5nZSA9IHNlbC5kb2NT
ZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg
ICAgICAgcmFuZ2UgPSBnZXRCb2R5KHNlbC53aW4uZG9jdW1lbnQpLmNyZWF0ZVRleHRSYW5nZSgp
Ow0KICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpOw0KICAgICAgICAgICAgfQ0K
DQogICAgICAgICAgICBpZiAoc2VsLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAg
ICAgICAgICAgICAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9
IGVsc2UgaWYgKGlzVGV4dFJhbmdlKHJhbmdlKSkgew0KICAgICAgICAgICAgICAgIHVwZGF0ZUZy
b21UZXh0UmFuZ2Uoc2VsLCByYW5nZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAg
ICAgICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9DQogICAgICAg
IH07DQogICAgfSBlbHNlIGlmIChpc0hvc3RNZXRob2QodGVzdFNlbGVjdGlvbiwgImdldFJhbmdl
QXQiKSAmJiB0eXBlb2YgdGVzdFNlbGVjdGlvbi5yYW5nZUNvdW50ID09ICJudW1iZXIiKSB7DQog
ICAgICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIGlm
IChpbXBsZW1lbnRzQ29udHJvbFJhbmdlICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24gJiYgc2Vs
LmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRST0wpIHsNCiAgICAgICAgICAgICAgICB1cGRhdGVD
b250cm9sU2VsZWN0aW9uKHNlbCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
ICAgIHNlbC5fcmFuZ2VzLmxlbmd0aCA9IHNlbC5yYW5nZUNvdW50ID0gc2VsLm5hdGl2ZVNlbGVj
dGlvbi5yYW5nZUNvdW50Ow0KICAgICAgICAgICAgICAgIGlmIChzZWwucmFuZ2VDb3VudCkgew0K
ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsLnJhbmdlQ291bnQ7
IGkgPCBsZW47ICsraSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsLl9yYW5nZXNbaV0g
PSBuZXcgYXBpLldyYXBwZWRSYW5nZShzZWwubmF0aXZlU2VsZWN0aW9uLmdldFJhbmdlQXQoaSkp
Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUFuY2hv
ckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291bnQgLSAxXSwg
c2VsZWN0aW9uSXNCYWNrd2FyZChzZWwubmF0aXZlU2VsZWN0aW9uKSk7DQogICAgICAgICAgICAg
ICAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbGVjdGlvbklzQ29sbGFwc2VkKHNlbCk7DQogICAg
ICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTZWxl
Y3Rpb24oc2VsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07
DQogICAgfSBlbHNlIGlmIChzZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyAmJiB0eXBlb2YgdGVz
dFNlbGVjdGlvbi5pc0NvbGxhcHNlZCA9PSBCT09MRUFOICYmIHR5cGVvZiB0ZXN0UmFuZ2UuY29s
bGFwc2VkID09IEJPT0xFQU4gJiYgZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlKSB7DQogICAg
ICAgIHJlZnJlc2hTZWxlY3Rpb24gPSBmdW5jdGlvbihzZWwpIHsNCiAgICAgICAgICAgIHZhciBy
YW5nZSwgbmF0aXZlU2VsID0gc2VsLm5hdGl2ZVNlbGVjdGlvbjsNCiAgICAgICAgICAgIGlmIChu
YXRpdmVTZWwuYW5jaG9yTm9kZSkgew0KICAgICAgICAgICAgICAgIHJhbmdlID0gZ2V0U2VsZWN0
aW9uUmFuZ2VBdChuYXRpdmVTZWwsIDApOw0KICAgICAgICAgICAgICAgIHNlbC5fcmFuZ2VzID0g
W3JhbmdlXTsNCiAgICAgICAgICAgICAgICBzZWwucmFuZ2VDb3VudCA9IDE7DQogICAgICAgICAg
ICAgICAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tTmF0aXZlU2VsZWN0aW9uKHNlbCk7DQogICAg
ICAgICAgICAgICAgc2VsLmlzQ29sbGFwc2VkID0gc2VsZWN0aW9uSXNDb2xsYXBzZWQoc2VsKTsN
CiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdXBkYXRlRW1wdHlTZWxlY3Rp
b24oc2VsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAg
ICBtb2R1bGUuZmFpbCgiTm8gbWVhbnMgb2Ygb2J0YWluaW5nIGEgUmFuZ2Ugb3IgVGV4dFJhbmdl
IGZyb20gdGhlIHVzZXIncyBzZWxlY3Rpb24gd2FzIGZvdW5kIik7DQogICAgICAgIHJldHVybiBm
YWxzZTsNCiAgICB9DQoNCiAgICBzZWxQcm90by5yZWZyZXNoID0gZnVuY3Rpb24oY2hlY2tGb3JD
aGFuZ2VzKSB7DQogICAgICAgIHZhciBvbGRSYW5nZXMgPSBjaGVja0ZvckNoYW5nZXMgPyB0aGlz
Ll9yYW5nZXMuc2xpY2UoMCkgOiBudWxsOw0KICAgICAgICB2YXIgb2xkQW5jaG9yTm9kZSA9IHRo
aXMuYW5jaG9yTm9kZSwgb2xkQW5jaG9yT2Zmc2V0ID0gdGhpcy5hbmNob3JPZmZzZXQ7DQoNCiAg
ICAgICAgcmVmcmVzaFNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgaWYgKGNoZWNrRm9yQ2hhbmdl
cykgew0KICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHJhbmdlIGNvdW50IGZpcnN0DQogICAgICAg
ICAgICB2YXIgaSA9IG9sZFJhbmdlcy5sZW5ndGg7DQogICAgICAgICAgICBpZiAoaSAhPSB0aGlz
Ll9yYW5nZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgZGlyZWN0aW9uLiBDaGVja2lu
ZyB0aGUgYW5jaG9yIHBvc2l0aW9uIGlzIHRoZSBzYW1lIGlzIGVub3VnaCBzaW5jZSB3ZSdyZSBj
aGVja2luZyBhbGwgdGhlDQogICAgICAgICAgICAvLyByYW5nZXMgYWZ0ZXIgdGhpcw0KICAgICAg
ICAgICAgaWYgKHRoaXMuYW5jaG9yTm9kZSAhPSBvbGRBbmNob3JOb2RlIHx8IHRoaXMuYW5jaG9y
T2Zmc2V0ICE9IG9sZEFuY2hvck9mZnNldCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVl
Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBGaW5hbGx5LCBjb21wYXJlIGVhY2gg
cmFuZ2UgaW4gdHVybg0KICAgICAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgICAgICAg
IGlmICghcmFuZ2VzRXF1YWwob2xkUmFuZ2VzW2ldLCB0aGlzLl9yYW5nZXNbaV0pKSB7DQogICAg
ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAg
ICAvLyBSZW1vdmFsIG9mIGEgc2luZ2xlIHJhbmdlDQogICAgdmFyIHJlbW92ZVJhbmdlTWFudWFs
bHkgPSBmdW5jdGlvbihzZWwsIHJhbmdlKSB7DQogICAgICAgIHZhciByYW5nZXMgPSBzZWwuZ2V0
QWxsUmFuZ2VzKCk7DQogICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgZm9y
ICh2YXIgaSA9IDAsIGxlbiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkgew0KICAgICAg
ICAgICAgaWYgKCFhcGkucmFuZ2VzRXF1YWwocmFuZ2UsIHJhbmdlc1tpXSkpIHsNCiAgICAgICAg
ICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2VzW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
fQ0KICAgICAgICBpZiAoIXNlbC5yYW5nZUNvdW50KSB7DQogICAgICAgICAgICB1cGRhdGVFbXB0
eVNlbGVjdGlvbihzZWwpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIGlmIChpbXBsZW1lbnRz
Q29udHJvbFJhbmdlKSB7DQogICAgICAgIHNlbFByb3RvLnJlbW92ZVJhbmdlID0gZnVuY3Rpb24o
cmFuZ2UpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmRvY1NlbGVjdGlvbi50eXBlID09IENPTlRS
T0wpIHsNCiAgICAgICAgICAgICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5kb2NTZWxlY3Rp
b24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0
U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7DQoNCiAgICAgICAgICAgICAgICAvLyBDcmVh
dGUgYSBuZXcgQ29udHJvbFJhbmdlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUg
c2VsZWN0ZWQgQ29udHJvbFJhbmdlIG1pbnVzIHRoZQ0KICAgICAgICAgICAgICAgIC8vIGVsZW1l
bnQgY29udGFpbmVkIGJ5IHRoZSBzdXBwbGllZCByYW5nZQ0KICAgICAgICAgICAgICAgIHZhciBk
b2MgPSBnZXREb2N1bWVudChjb250cm9sUmFuZ2UuaXRlbSgwKSk7DQogICAgICAgICAgICAgICAg
dmFyIG5ld0NvbnRyb2xSYW5nZSA9IGdldEJvZHkoZG9jKS5jcmVhdGVDb250cm9sUmFuZ2UoKTsN
CiAgICAgICAgICAgICAgICB2YXIgZWwsIHJlbW92ZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAg
ICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29udHJvbFJhbmdlLmxlbmd0aDsgaSA8IGxlbjsgKytp
KSB7DQogICAgICAgICAgICAgICAgICAgIGVsID0gY29udHJvbFJhbmdlLml0ZW0oaSk7DQogICAg
ICAgICAgICAgICAgICAgIGlmIChlbCAhPT0gcmFuZ2VFbGVtZW50IHx8IHJlbW92ZWQpIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0
ZW0oaSkpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg
ICAgICAgcmVtb3ZlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICAgICAgbmV3Q29udHJvbFJhbmdlLnNlbGVjdCgpOw0KDQogICAg
ICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB3cmFwcGVkIHNlbGVjdGlvbiBiYXNlZCBvbiB3aGF0
J3Mgbm93IGluIHRoZSBuYXRpdmUgc2VsZWN0aW9uDQogICAgICAgICAgICAgICAgdXBkYXRlQ29u
dHJvbFNlbGVjdGlvbih0aGlzKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAg
ICAgcmVtb3ZlUmFuZ2VNYW51YWxseSh0aGlzLCByYW5nZSk7DQogICAgICAgICAgICB9DQogICAg
ICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgICAgc2VsUHJvdG8ucmVtb3ZlUmFuZ2UgPSBmdW5j
dGlvbihyYW5nZSkgew0KICAgICAgICAgICAgcmVtb3ZlUmFuZ2VNYW51YWxseSh0aGlzLCByYW5n
ZSk7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgLy8gRGV0ZWN0aW5nIGlmIGEgc2VsZWN0aW9u
IGlzIGJhY2t3YXJkDQogICAgdmFyIHNlbGVjdGlvbklzQmFja3dhcmQ7DQogICAgaWYgKCF1c2VE
b2N1bWVudFNlbGVjdGlvbiAmJiBzZWxlY3Rpb25IYXNBbmNob3JBbmRGb2N1cyAmJiBmZWF0dXJl
cy5pbXBsZW1lbnRzRG9tUmFuZ2UpIHsNCiAgICAgICAgc2VsZWN0aW9uSXNCYWNrd2FyZCA9IGZ1
bmN0aW9uKHNlbCkgew0KICAgICAgICAgICAgdmFyIGJhY2t3YXJkID0gZmFsc2U7DQogICAgICAg
ICAgICBpZiAoc2VsLmFuY2hvck5vZGUpIHsNCiAgICAgICAgICAgICAgICBiYWNrd2FyZCA9IChk
b20uY29tcGFyZVBvaW50cyhzZWwuYW5jaG9yTm9kZSwgc2VsLmFuY2hvck9mZnNldCwgc2VsLmZv
Y3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KSA9PSAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIHJldHVybiBiYWNrd2FyZDsNCiAgICAgICAgfTsNCg0KICAgICAgICBzZWxQcm90by5pc0Jh
Y2t3YXJkID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uSXNCYWNr
d2FyZCh0aGlzKTsNCiAgICAgICAgfTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBzZWxlY3Rpb25J
c0JhY2t3YXJkID0gc2VsUHJvdG8uaXNCYWNrd2FyZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAg
ICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIC8vIENyZWF0ZSBhbiBh
bGlhcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIEZyb20gMS4zLCBldmVyeXRoaW5nIGlz
ICJiYWNrd2FyZCIgcmF0aGVyIHRoYW4gImJhY2t3YXJkcyINCiAgICBzZWxQcm90by5pc0JhY2t3
YXJkcyA9IHNlbFByb3RvLmlzQmFja3dhcmQ7DQoNCiAgICAvLyBTZWxlY3Rpb24gc3RyaW5naWZp
ZXINCiAgICAvLyBUaGlzIGlzIGNvbmZvcm1hbnQgdG8gdGhlIG9sZCBIVE1MNSBzZWxlY3Rpb25z
IGRyYWZ0IHNwZWMgYnV0IGRpZmZlcnMgZnJvbSBXZWJLaXQgYW5kIE1vemlsbGEncyBpbXBsZW1l
bnRhdGlvbi4NCiAgICAvLyBUaGUgY3VycmVudCBzcGVjIGRvZXMgbm90IHlldCBkZWZpbmUgdGhp
cyBtZXRob2QuDQogICAgc2VsUHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHsNCiAgICAgICAg
dmFyIHJhbmdlVGV4dHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMu
cmFuZ2VDb3VudDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAgICAgICByYW5nZVRleHRzW2ldID0g
IiIgKyB0aGlzLl9yYW5nZXNbaV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJhbmdlVGV4
dHMuam9pbigiIik7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGFzc2VydE5vZGVJblNhbWVEb2N1
bWVudChzZWwsIG5vZGUpIHsNCiAgICAgICAgaWYgKHNlbC53aW4uZG9jdW1lbnQgIT0gZ2V0RG9j
dW1lbnQobm9kZSkpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oIldST05H
X0RPQ1VNRU5UX0VSUiIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gTm8gY3VycmVudCBi
cm93c2VyIGNvbmZvcm1zIGZ1bGx5IHRvIHRoZSBzcGVjIGZvciB0aGlzIG1ldGhvZCwgc28gUmFu
Z3kncyBvd24gbWV0aG9kIGlzIGFsd2F5cyB1c2VkDQogICAgc2VsUHJvdG8uY29sbGFwc2UgPSBm
dW5jdGlvbihub2RlLCBvZmZzZXQpIHsNCiAgICAgICAgYXNzZXJ0Tm9kZUluU2FtZURvY3VtZW50
KHRoaXMsIG5vZGUpOw0KICAgICAgICB2YXIgcmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2Uobm9kZSk7
DQogICAgICAgIHJhbmdlLmNvbGxhcHNlVG9Qb2ludChub2RlLCBvZmZzZXQpOw0KICAgICAgICB0
aGlzLnNldFNpbmdsZVJhbmdlKHJhbmdlKTsNCiAgICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9IHRy
dWU7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9TdGFydCA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50KSB7DQogICAgICAgICAgICB2YXIgcmFuZ2Ug
PSB0aGlzLl9yYW5nZXNbMF07DQogICAgICAgICAgICB0aGlzLmNvbGxhcHNlKHJhbmdlLnN0YXJ0
Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAg
ICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTlZBTElEX1NUQVRFX0VSUiIpOw0KICAgICAg
ICB9DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmNvbGxhcHNlVG9FbmQgPSBmdW5jdGlvbigpIHsN
CiAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCkgew0KICAgICAgICAgICAgdmFyIHJhbmdlID0g
dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudCAtIDFdOw0KICAgICAgICAgICAgdGhpcy5jb2xs
YXBzZShyYW5nZS5lbmRDb250YWluZXIsIHJhbmdlLmVuZE9mZnNldCk7DQogICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCJJTlZBTElEX1NUQVRFX0VS
UiIpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8vIFRoZSBzcGVjIGlzIHZlcnkgc3BlY2lm
aWMgb24gaG93IHNlbGVjdEFsbENoaWxkcmVuIHNob3VsZCBiZSBpbXBsZW1lbnRlZCBzbyB0aGUg
bmF0aXZlIGltcGxlbWVudGF0aW9uIGlzDQogICAgLy8gbmV2ZXIgdXNlZCBieSBSYW5neS4NCiAg
ICBzZWxQcm90by5zZWxlY3RBbGxDaGlsZHJlbiA9IGZ1bmN0aW9uKG5vZGUpIHsNCiAgICAgICAg
YXNzZXJ0Tm9kZUluU2FtZURvY3VtZW50KHRoaXMsIG5vZGUpOw0KICAgICAgICB2YXIgcmFuZ2Ug
PSBhcGkuY3JlYXRlUmFuZ2Uobm9kZSk7DQogICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50
cyhub2RlKTsNCiAgICAgICAgdGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgdGhpcy5h
ZGRSYW5nZShyYW5nZSk7DQogICAgfTsNCg0KICAgIHNlbFByb3RvLmRlbGV0ZUZyb21Eb2N1bWVu
dCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAvLyBTZXBjaWFsIGJlaGF2aW91ciByZXF1aXJlZCBm
b3IgQ29udHJvbCBzZWxlY3Rpb25zDQogICAgICAgIGlmIChpbXBsZW1lbnRzQ29udHJvbFJhbmdl
ICYmIGltcGxlbWVudHNEb2NTZWxlY3Rpb24gJiYgdGhpcy5kb2NTZWxlY3Rpb24udHlwZSA9PSBD
T05UUk9MKSB7DQogICAgICAgICAgICB2YXIgY29udHJvbFJhbmdlID0gdGhpcy5kb2NTZWxlY3Rp
b24uY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgICAgIHZhciBlbGVtZW50Ow0KICAgICAgICAgICAg
d2hpbGUgKGNvbnRyb2xSYW5nZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBlbGVtZW50ID0g
Y29udHJvbFJhbmdlLml0ZW0oMCk7DQogICAgICAgICAgICAgICAgY29udHJvbFJhbmdlLnJlbW92
ZShlbGVtZW50KTsNCiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hp
bGQoZWxlbWVudCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsN
CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlQ291bnQpIHsNCiAgICAgICAgICAgIHZhciBy
YW5nZXMgPSB0aGlzLmdldEFsbFJhbmdlcygpOw0KICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5n
dGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFsbFJhbmdlcygpOw0KICAgICAgICAg
ICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kp
IHsNCiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzW2ldLmRlbGV0ZUNvbnRlbnRzKCk7DQogICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIFRoZSBzcGVjIHNheXMgbm90aGluZyBh
Ym91dCB3aGF0IHRoZSBzZWxlY3Rpb24gc2hvdWxkIGNvbnRhaW4gYWZ0ZXIgY2FsbGluZyBkZWxl
dGVDb250ZW50cyBvbiBlYWNoDQogICAgICAgICAgICAgICAgLy8gcmFuZ2UuIEZpcmVmb3ggbW92
ZXMgdGhlIHNlbGVjdGlvbiB0byB3aGVyZSB0aGUgZmluYWwgc2VsZWN0ZWQgcmFuZ2Ugd2FzLCBz
byB3ZSBlbXVsYXRlIHRoYXQNCiAgICAgICAgICAgICAgICB0aGlzLmFkZFJhbmdlKHJhbmdlc1ts
ZW4gLSAxXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLy8gVGhl
IGZvbGxvd2luZyBhcmUgbm9uLXN0YW5kYXJkIGV4dGVuc2lvbnMNCiAgICBzZWxQcm90by5lYWNo
UmFuZ2UgPSBmdW5jdGlvbihmdW5jLCByZXR1cm5WYWx1ZSkgew0KICAgICAgICBmb3IgKHZhciBp
ID0gMCwgbGVuID0gdGhpcy5fcmFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAg
ICAgICBpZiAoIGZ1bmMoIHRoaXMuZ2V0UmFuZ2VBdChpKSApICkgew0KICAgICAgICAgICAgICAg
IHJldHVybiByZXR1cm5WYWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoN
CiAgICBzZWxQcm90by5nZXRBbGxSYW5nZXMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIHJh
bmdlcyA9IFtdOw0KICAgICAgICB0aGlzLmVhY2hSYW5nZShmdW5jdGlvbihyYW5nZSkgew0KICAg
ICAgICAgICAgcmFuZ2VzLnB1c2gocmFuZ2UpOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJu
IHJhbmdlczsNCiAgICB9Ow0KDQogICAgc2VsUHJvdG8uc2V0U2luZ2xlUmFuZ2UgPSBmdW5jdGlv
bihyYW5nZSwgZGlyZWN0aW9uKSB7DQogICAgICAgIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7DQog
ICAgICAgIHRoaXMuYWRkUmFuZ2UocmFuZ2UsIGRpcmVjdGlvbik7DQogICAgfTsNCg0KICAgIHNl
bFByb3RvLmNhbGxNZXRob2RPbkVhY2hSYW5nZSA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUsIHBhcmFt
cykgew0KICAgICAgICB2YXIgcmVzdWx0cyA9IFtdOw0KICAgICAgICB0aGlzLmVhY2hSYW5nZSgg
ZnVuY3Rpb24ocmFuZ2UpIHsNCiAgICAgICAgICAgIHJlc3VsdHMucHVzaCggcmFuZ2VbbWV0aG9k
TmFtZV0uYXBwbHkocmFuZ2UsIHBhcmFtcykgKTsNCiAgICAgICAgfSApOw0KICAgICAgICByZXR1
cm4gcmVzdWx0czsNCiAgICB9Ow0KICAgIA0KICAgIGZ1bmN0aW9uIGNyZWF0ZVN0YXJ0T3JFbmRT
ZXR0ZXIoaXNTdGFydCkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSwgb2Zmc2V0KSB7
DQogICAgICAgICAgICB2YXIgcmFuZ2U7DQogICAgICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50
KSB7DQogICAgICAgICAgICAgICAgcmFuZ2UgPSB0aGlzLmdldFJhbmdlQXQoMCk7DQogICAgICAg
ICAgICAgICAgcmFuZ2VbInNldCIgKyAoaXNTdGFydCA/ICJTdGFydCIgOiAiRW5kIildKG5vZGUs
IG9mZnNldCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJhbmdlID0g
YXBpLmNyZWF0ZVJhbmdlKHRoaXMud2luLmRvY3VtZW50KTsNCiAgICAgICAgICAgICAgICByYW5n
ZS5zZXRTdGFydEFuZEVuZChub2RlLCBvZmZzZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgdGhpcy5zZXRTaW5nbGVSYW5nZShyYW5nZSwgdGhpcy5pc0JhY2t3YXJkKCkpOw0KICAgICAg
ICB9Ow0KICAgIH0NCg0KICAgIHNlbFByb3RvLnNldFN0YXJ0ID0gY3JlYXRlU3RhcnRPckVuZFNl
dHRlcih0cnVlKTsNCiAgICBzZWxQcm90by5zZXRFbmQgPSBjcmVhdGVTdGFydE9yRW5kU2V0dGVy
KGZhbHNlKTsNCiAgICANCiAgICAvLyBBZGQgY2hlZWt5IHNlbGVjdCgpIG1ldGhvZCB0byBSYW5n
ZSBwcm90b3R5cGUNCiAgICBhcGkucmFuZ2VQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oZGly
ZWN0aW9uKSB7DQogICAgICAgIGdldFNlbGVjdGlvbiggdGhpcy5nZXREb2N1bWVudCgpICkuc2V0
U2luZ2xlUmFuZ2UodGhpcywgZGlyZWN0aW9uKTsNCiAgICB9Ow0KDQogICAgc2VsUHJvdG8uY2hh
bmdlRWFjaFJhbmdlID0gZnVuY3Rpb24oZnVuYykgew0KICAgICAgICB2YXIgcmFuZ2VzID0gW107
DQogICAgICAgIHZhciBiYWNrd2FyZCA9IHRoaXMuaXNCYWNrd2FyZCgpOw0KDQogICAgICAgIHRo
aXMuZWFjaFJhbmdlKGZ1bmN0aW9uKHJhbmdlKSB7DQogICAgICAgICAgICBmdW5jKHJhbmdlKTsN
CiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHJhbmdlKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAg
dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgaWYgKGJhY2t3YXJkICYmIHJhbmdlcy5s
ZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShyYW5nZXNbMF0sICJiYWNr
d2FyZCIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zZXRSYW5nZXMocmFu
Z2VzKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBzZWxQcm90by5jb250YWluc05vZGUgPSBm
dW5jdGlvbihub2RlLCBhbGxvd1BhcnRpYWwpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaFJh
bmdlKCBmdW5jdGlvbihyYW5nZSkgew0KICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmNvbnRhaW5z
Tm9kZShub2RlLCBhbGxvd1BhcnRpYWwpOw0KICAgICAgICB9LCB0cnVlICk7DQogICAgfTsNCg0K
ICAgIHNlbFByb3RvLmdldEJvb2ttYXJrID0gZnVuY3Rpb24oY29udGFpbmVyTm9kZSkgew0KICAg
ICAgICByZXR1cm4gew0KICAgICAgICAgICAgYmFja3dhcmQ6IHRoaXMuaXNCYWNrd2FyZCgpLA0K
ICAgICAgICAgICAgcmFuZ2VCb29rbWFya3M6IHRoaXMuY2FsbE1ldGhvZE9uRWFjaFJhbmdlKCJn
ZXRCb29rbWFyayIsIFtjb250YWluZXJOb2RlXSkNCiAgICAgICAgfTsNCiAgICB9Ow0KDQogICAg
c2VsUHJvdG8ubW92ZVRvQm9va21hcmsgPSBmdW5jdGlvbihib29rbWFyaykgew0KICAgICAgICB2
YXIgc2VsUmFuZ2VzID0gW107DQogICAgICAgIGZvciAodmFyIGkgPSAwLCByYW5nZUJvb2ttYXJr
LCByYW5nZTsgcmFuZ2VCb29rbWFyayA9IGJvb2ttYXJrLnJhbmdlQm9va21hcmtzW2krK107ICkg
ew0KICAgICAgICAgICAgcmFuZ2UgPSBhcGkuY3JlYXRlUmFuZ2UodGhpcy53aW4pOw0KICAgICAg
ICAgICAgcmFuZ2UubW92ZVRvQm9va21hcmsocmFuZ2VCb29rbWFyayk7DQogICAgICAgICAgICBz
ZWxSYW5nZXMucHVzaChyYW5nZSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGJvb2ttYXJrLmJh
Y2t3YXJkKSB7DQogICAgICAgICAgICB0aGlzLnNldFNpbmdsZVJhbmdlKHNlbFJhbmdlc1swXSwg
ImJhY2t3YXJkIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNldFJhbmdl
cyhzZWxSYW5nZXMpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbFByb3RvLnRvSHRtbCA9
IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kT25FYWNoUmFuZ2Uo
InRvSHRtbCIpLmpvaW4oIiIpOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBpbnNwZWN0KHNlbCkg
ew0KICAgICAgICB2YXIgcmFuZ2VJbnNwZWN0cyA9IFtdOw0KICAgICAgICB2YXIgYW5jaG9yID0g
bmV3IERvbVBvc2l0aW9uKHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTsNCiAgICAg
ICAgdmFyIGZvY3VzID0gbmV3IERvbVBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09m
ZnNldCk7DQogICAgICAgIHZhciBuYW1lID0gKHR5cGVvZiBzZWwuZ2V0TmFtZSA9PSAiZnVuY3Rp
b24iKSA/IHNlbC5nZXROYW1lKCkgOiAiU2VsZWN0aW9uIjsNCg0KICAgICAgICBpZiAodHlwZW9m
IHNlbC5yYW5nZUNvdW50ICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgICBmb3IgKHZhciBp
ID0gMCwgbGVuID0gc2VsLnJhbmdlQ291bnQ7IGkgPCBsZW47ICsraSkgew0KICAgICAgICAgICAg
ICAgIHJhbmdlSW5zcGVjdHNbaV0gPSBEb21SYW5nZS5pbnNwZWN0KHNlbC5nZXRSYW5nZUF0KGkp
KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gIlsiICsgbmFtZSAr
ICIoUmFuZ2VzOiAiICsgcmFuZ2VJbnNwZWN0cy5qb2luKCIsICIpICsNCiAgICAgICAgICAgICAg
ICAiKShhbmNob3I6ICIgKyBhbmNob3IuaW5zcGVjdCgpICsgIiwgZm9jdXM6ICIgKyBmb2N1cy5p
bnNwZWN0KCkgKyAiXSI7DQogICAgfQ0KDQogICAgc2VsUHJvdG8uZ2V0TmFtZSA9IGZ1bmN0aW9u
KCkgew0KICAgICAgICByZXR1cm4gIldyYXBwZWRTZWxlY3Rpb24iOw0KICAgIH07DQoNCiAgICBz
ZWxQcm90by5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiBpbnNwZWN0KHRo
aXMpOw0KICAgIH07DQoNCiAgICBzZWxQcm90by5kZXRhY2ggPSBmdW5jdGlvbigpIHsNCiAgICAg
ICAgZmluZENhY2hlZFNlbGVjdGlvbih0aGlzLndpbiwgImRlbGV0ZSIpOw0KICAgICAgICBkZWxl
dGVQcm9wZXJ0aWVzKHRoaXMpOw0KICAgIH07DQoNCiAgICBXcmFwcGVkU2VsZWN0aW9uLmRldGFj
aEFsbCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBmaW5kQ2FjaGVkU2VsZWN0aW9uKG51bGwsICJk
ZWxldGVBbGwiKTsNCiAgICB9Ow0KDQogICAgV3JhcHBlZFNlbGVjdGlvbi5pbnNwZWN0ID0gaW5z
cGVjdDsNCiAgICBXcmFwcGVkU2VsZWN0aW9uLmlzRGlyZWN0aW9uQmFja3dhcmQgPSBpc0RpcmVj
dGlvbkJhY2t3YXJkOw0KDQogICAgYXBpLlNlbGVjdGlvbiA9IFdyYXBwZWRTZWxlY3Rpb247DQoN
CiAgICBhcGkuc2VsZWN0aW9uUHJvdG90eXBlID0gc2VsUHJvdG87DQoNCiAgICBhcGkuYWRkQ3Jl
YXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKHdpbikgew0KICAgICAgICBpZiAo
dHlwZW9mIHdpbi5nZXRTZWxlY3Rpb24gPT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgIHdp
bi5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0
U2VsZWN0aW9uKHdpbik7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIHdpbiA9
IG51bGw7DQogICAgfSk7DQp9KTsNCg==
</content></attachment><attachment>
<filename>porthole.min.js</filename>
<filesize>5672</filesize>
<author>XWiki.Admin</author>
<date>1372611608000</date>
<version>1.1</version>
<comment></comment><content>KGZ1bmN0aW9uKCl7dmFyIGE9ZmFsc2UsYj0veHl6Ly50ZXN0KGZ1bmN0aW9uKCl7eHl6fSk/L1xi
X3N1cGVyXGIvOi8uKi87dGhpcy5DbGFzcz1mdW5jdGlvbigpe307Q2xhc3MuZXh0ZW5kPWZ1bmN0
aW9uKGcpe3ZhciBmPXRoaXMucHJvdG90eXBlO2E9dHJ1ZTt2YXIgZT1uZXcgdGhpcygpO2E9ZmFs
c2U7Zm9yKHZhciBkIGluIGcpe2VbZF09dHlwZW9mIGdbZF09PSJmdW5jdGlvbiImJnR5cGVvZiBm
W2RdPT0iZnVuY3Rpb24iJiZiLnRlc3QoZ1tkXSk/KGZ1bmN0aW9uKGgsaSl7cmV0dXJuIGZ1bmN0
aW9uKCl7dmFyIGs9dGhpcy5fc3VwZXI7dGhpcy5fc3VwZXI9ZltoXTt2YXIgaj1pLmFwcGx5KHRo
aXMsYXJndW1lbnRzKTt0aGlzLl9zdXBlcj1rO3JldHVybiBqfX0pKGQsZ1tkXSk6Z1tkXX1mdW5j
dGlvbiBjKCl7aWYoIWEmJnRoaXMuaW5pdCl7dGhpcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRz
KX19Yy5wcm90b3R5cGU9ZTtjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jO2MuZXh0ZW5kPWFyZ3Vt
ZW50cy5jYWxsZWU7cmV0dXJuIGN9fSkoKTsoZnVuY3Rpb24oYyl7dmFyIGI9e3RyYWNlOmZ1bmN0
aW9uKGQpe2lmKGMuY29uc29sZSE9PXVuZGVmaW5lZCl7Yy5jb25zb2xlLmxvZygiUG9ydGhvbGU6
ICIrZCl9fSxlcnJvcjpmdW5jdGlvbihkKXtpZihjLmNvbnNvbGUhPT11bmRlZmluZWQpe2MuY29u
c29sZS5lcnJvcigiUG9ydGhvbGU6ICIrZCl9fX07Yi5XaW5kb3dQcm94eT1mdW5jdGlvbigpe307
Yi5XaW5kb3dQcm94eS5wcm90b3R5cGU9e3Bvc3Q6ZnVuY3Rpb24oZSxkKXt9LGFkZEV2ZW50TGlz
dGVuZXI6ZnVuY3Rpb24oZCl7fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGQpe319O2Iu
V2luZG93UHJveHlCYXNlPUNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihkKXtpZihkPT09dW5k
ZWZpbmVkKXtkPSIifXRoaXMudGFyZ2V0V2luZG93TmFtZT1kO3RoaXMub3JpZ2luPWMubG9jYXRp
b24ucHJvdG9jb2wrIi8vIitjLmxvY2F0aW9uLmhvc3Q7dGhpcy5ldmVudExpc3RlbmVycz1bXX0s
Z2V0VGFyZ2V0V2luZG93TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldFdpbmRvd05h
bWV9LGdldE9yaWdpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbn0sZ2V0VGFyZ2V0V2lu
ZG93OmZ1bmN0aW9uKCl7cmV0dXJuIGIuV2luZG93UHJveHkuZ2V0VGFyZ2V0V2luZG93KHRoaXMu
dGFyZ2V0V2luZG93TmFtZSl9LHBvc3Q6ZnVuY3Rpb24oZSxkKXtpZihkPT09dW5kZWZpbmVkKXtk
PSIqIn10aGlzLmRpc3BhdGNoTWVzc2FnZSh7ZGF0YTplLHNvdXJjZU9yaWdpbjp0aGlzLmdldE9y
aWdpbigpLHRhcmdldE9yaWdpbjpkLHNvdXJjZVdpbmRvd05hbWU6Yy5uYW1lLHRhcmdldFdpbmRv
d05hbWU6dGhpcy5nZXRUYXJnZXRXaW5kb3dOYW1lKCl9KX0sYWRkRXZlbnRMaXN0ZW5lcjpmdW5j
dGlvbihkKXt0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goZCk7cmV0dXJuIGR9LHJlbW92ZUV2ZW50
TGlzdGVuZXI6ZnVuY3Rpb24oZyl7dmFyIGQ7dHJ5e2Q9dGhpcy5ldmVudExpc3RlbmVycy5pbmRl
eE9mKGcpO3RoaXMuZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKGQsMSl9Y2F0Y2goaCl7dGhpcy5ldmVu
dExpc3RlbmVycz1bXX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oZil7dmFyIGQ7Zm9yKGQ9MDtk
PHRoaXMuZXZlbnRMaXN0ZW5lcnMubGVuZ3RoO2QrKyl7dHJ5e3RoaXMuZXZlbnRMaXN0ZW5lcnNb
ZF0oZil9Y2F0Y2goZyl7fX19fSk7Yi5XaW5kb3dQcm94eUxlZ2FjeT1iLldpbmRvd1Byb3h5QmFz
ZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZCxlKXt0aGlzLl9zdXBlcihlKTtpZihkIT09bnVsbCl7
dGhpcy5wcm94eUlGcmFtZU5hbWU9dGhpcy50YXJnZXRXaW5kb3dOYW1lKyJQcm94eUlGcmFtZSI7
dGhpcy5wcm94eUlGcmFtZUxvY2F0aW9uPWQ7dGhpcy5wcm94eUlGcmFtZUVsZW1lbnQ9dGhpcy5j
cmVhdGVJRnJhbWVQcm94eSgpfWVsc2V7dGhpcy5wcm94eUlGcmFtZUVsZW1lbnQ9bnVsbDt0aHJv
dyBuZXcgRXJyb3IoInByb3h5SUZyYW1lVXJsIGNhbid0IGJlIG51bGwiKX19LGNyZWF0ZUlGcmFt
ZVByb3h5OmZ1bmN0aW9uKCl7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7
ZC5zZXRBdHRyaWJ1dGUoImlkIix0aGlzLnByb3h5SUZyYW1lTmFtZSk7ZC5zZXRBdHRyaWJ1dGUo
Im5hbWUiLHRoaXMucHJveHlJRnJhbWVOYW1lKTtkLnNldEF0dHJpYnV0ZSgic3JjIix0aGlzLnBy
b3h5SUZyYW1lTG9jYXRpb24pO2Quc2V0QXR0cmlidXRlKCJmcmFtZUJvcmRlciIsIjEiKTtkLnNl
dEF0dHJpYnV0ZSgic2Nyb2xsaW5nIiwiYXV0byIpO2Quc2V0QXR0cmlidXRlKCJ3aWR0aCIsMzAp
O2Quc2V0QXR0cmlidXRlKCJoZWlnaHQiLDMwKTtkLnNldEF0dHJpYnV0ZSgic3R5bGUiLCJwb3Np
dGlvbjogYWJzb2x1dGU7IGxlZnQ6IC0xMDBweDsgdG9wOjBweDsiKTtpZihkLnN0eWxlLnNldEF0
dHJpYnV0ZSl7ZC5zdHlsZS5zZXRBdHRyaWJ1dGUoImNzc1RleHQiLCJwb3NpdGlvbjogYWJzb2x1
dGU7IGxlZnQ6IC0xMDBweDsgdG9wOjBweDsiKX1kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGQp
O3JldHVybiBkfSxkaXNwYXRjaE1lc3NhZ2U6ZnVuY3Rpb24oZSl7dmFyIGQ9Yy5lbmNvZGVVUklD
b21wb25lbnQ7aWYodGhpcy5wcm94eUlGcmFtZUVsZW1lbnQpe3ZhciBmPXRoaXMucHJveHlJRnJh
bWVMb2NhdGlvbisiIyIrZChiLldpbmRvd1Byb3h5LnNlcmlhbGl6ZShlKSk7dGhpcy5wcm94eUlG
cmFtZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJzcmMiLGYpO3RoaXMucHJveHlJRnJhbWVFbGVtZW50
LmhlaWdodD10aGlzLnByb3h5SUZyYW1lRWxlbWVudC5oZWlnaHQ+NTA/NTA6MTAwfX19KTtiLldp
bmRvd1Byb3h5SFRNTDU9Yi5XaW5kb3dQcm94eUJhc2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGQs
ZSl7dGhpcy5fc3VwZXIoZSk7dGhpcy5ldmVudExpc3RlbmVyQ2FsbGJhY2s9bnVsbH0sZGlzcGF0
Y2hNZXNzYWdlOmZ1bmN0aW9uKGQpe3RoaXMuZ2V0VGFyZ2V0V2luZG93KCkucG9zdE1lc3NhZ2Uo
Yi5XaW5kb3dQcm94eS5zZXJpYWxpemUoZCksZC50YXJnZXRPcmlnaW4pfSxhZGRFdmVudExpc3Rl
bmVyOmZ1bmN0aW9uKGUpe2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMubGVuZ3RoPT09MCl7dmFyIGQ9
dGhpczt0aGlzLmV2ZW50TGlzdGVuZXJDYWxsYmFjaz1mdW5jdGlvbihmKXtkLmV2ZW50TGlzdGVu
ZXIoZCxmKX07Yy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0aGlzLmV2ZW50TGlzdGVuZXJD
YWxsYmFjayxmYWxzZSl9cmV0dXJuIHRoaXMuX3N1cGVyKGUpfSxyZW1vdmVFdmVudExpc3RlbmVy
OmZ1bmN0aW9uKGQpe3RoaXMuX3N1cGVyKGQpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMubGVuZ3Ro
PT09MCl7Yy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0aGlzLmV2ZW50TGlzdGVuZXJD
YWxsYmFjayk7dGhpcy5ldmVudExpc3RlbmVyQ2FsbGJhY2s9bnVsbH19LGV2ZW50TGlzdGVuZXI6
ZnVuY3Rpb24oZSxkKXt2YXIgZj1iLldpbmRvd1Byb3h5LnVuc2VyaWFsaXplKGQuZGF0YSk7aWYo
ZiYmKGUudGFyZ2V0V2luZG93TmFtZT09IiJ8fGYuc291cmNlV2luZG93TmFtZT09ZS50YXJnZXRX
aW5kb3dOYW1lKSl7ZS5kaXNwYXRjaEV2ZW50KG5ldyBiLk1lc3NhZ2VFdmVudChmLmRhdGEsZC5v
cmlnaW4sZSkpfX19KTtpZih0eXBlb2YgYy5wb3N0TWVzc2FnZSE9PSJmdW5jdGlvbiIpe2IudHJh
Y2UoIlVzaW5nIGxlZ2FjeSBicm93c2VyIHN1cHBvcnQiKTtiLldpbmRvd1Byb3h5PWIuV2luZG93
UHJveHlMZWdhY3kuZXh0ZW5kKHt9KX1lbHNle2IudHJhY2UoIlVzaW5nIGJ1aWx0LWluIGJyb3dz
ZXIgc3VwcG9ydCIpO2IuV2luZG93UHJveHk9Yi5XaW5kb3dQcm94eUhUTUw1LmV4dGVuZCh7fSl9
Yi5XaW5kb3dQcm94eS5zZXJpYWxpemU9ZnVuY3Rpb24oZCl7aWYodHlwZW9mIEpTT049PT0idW5k
ZWZpbmVkIil7dGhyb3cgbmV3IEVycm9yKCJQb3J0aG9sZSBzZXJpYWxpemF0aW9uIGRlcGVuZHMg
b24gSlNPTiEiKX1yZXR1cm4gSlNPTi5zdHJpbmdpZnkoZCl9O2IuV2luZG93UHJveHkudW5zZXJp
YWxpemU9ZnVuY3Rpb24oZyl7aWYodHlwZW9mIEpTT049PT0idW5kZWZpbmVkIil7dGhyb3cgbmV3
IEVycm9yKCJQb3J0aG9sZSB1bnNlcmlhbGl6YXRpb24gZGVwZW5kZW5zIG9uIEpTT04hIil9dHJ5
e3ZhciBkPUpTT04ucGFyc2UoZyl9Y2F0Y2goZil7cmV0dXJuIGZhbHNlfXJldHVybiBkfTtiLldp
bmRvd1Byb3h5LmdldFRhcmdldFdpbmRvdz1mdW5jdGlvbihkKXtpZihkPT09IiIpe3JldHVybiB0
b3B9ZWxzZXtpZihkPT09InRvcCJ8fGQ9PT0icGFyZW50Iil7cmV0dXJuIGNbZF19fXJldHVybiBw
YXJlbnQuZnJhbWVzW2RdfTtiLk1lc3NhZ2VFdmVudD1mdW5jdGlvbiBhKGYsZCxlKXt0aGlzLmRh
dGE9Zjt0aGlzLm9yaWdpbj1kO3RoaXMuc291cmNlPWV9O2IuV2luZG93UHJveHlEaXNwYXRjaGVy
PXtmb3J3YXJkTWVzc2FnZUV2ZW50OmZ1bmN0aW9uKGkpe3ZhciBnLGg9Yy5kZWNvZGVVUklDb21w
b25lbnQsZixkO2lmKGRvY3VtZW50LmxvY2F0aW9uLmhhc2gubGVuZ3RoPjApe2c9Yi5XaW5kb3dQ
cm94eS51bnNlcmlhbGl6ZShoKGRvY3VtZW50LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpKSk7Zj1i
LldpbmRvd1Byb3h5LmdldFRhcmdldFdpbmRvdyhnLnRhcmdldFdpbmRvd05hbWUpO2Q9Yi5XaW5k
b3dQcm94eURpc3BhdGNoZXIuZmluZFdpbmRvd1Byb3h5T2JqZWN0SW5XaW5kb3coZixnLnNvdXJj
ZVdpbmRvd05hbWUpO2lmKGQpe2lmKGQub3JpZ2luPT09Zy50YXJnZXRPcmlnaW58fGcudGFyZ2V0
T3JpZ2luPT09IioiKXtkLmRpc3BhdGNoRXZlbnQobmV3IGIuTWVzc2FnZUV2ZW50KGcuZGF0YSxn
LnNvdXJjZU9yaWdpbixkKSl9ZWxzZXtiLmVycm9yKCJUYXJnZXQgb3JpZ2luICIrZC5vcmlnaW4r
IiBkb2VzIG5vdCBtYXRjaCBkZXNpcmVkIHRhcmdldCBvZiAiK2cudGFyZ2V0T3JpZ2luKX19ZWxz
ZXtiLmVycm9yKCJDb3VsZCBub3QgZmluZCB3aW5kb3cgcHJveHkgb2JqZWN0IG9uIHRoZSB0YXJn
ZXQgd2luZG93Iil9fX0sZmluZFdpbmRvd1Byb3h5T2JqZWN0SW5XaW5kb3c6ZnVuY3Rpb24oZCxn
KXt2YXIgZjtpZihkLlJ1bnRpbWVPYmplY3Qpe2Q9ZC5SdW50aW1lT2JqZWN0KCl9aWYoZCl7Zm9y
KGYgaW4gZCl7aWYoZC5oYXNPd25Qcm9wZXJ0eShmKSl7dHJ5e2lmKGRbZl0hPT1udWxsJiZ0eXBl
b2YgZFtmXT09PSJvYmplY3QiJiZkW2ZdIGluc3RhbmNlb2YgZC5Qb3J0aG9sZS5XaW5kb3dQcm94
eSYmZFtmXS5nZXRUYXJnZXRXaW5kb3dOYW1lKCk9PT1nKXtyZXR1cm4gZFtmXX19Y2F0Y2goaCl7
fX19fXJldHVybiBudWxsfSxzdGFydDpmdW5jdGlvbigpe2lmKGMuYWRkRXZlbnRMaXN0ZW5lcil7
Yy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLGIuV2luZG93UHJveHlEaXNwYXRjaGVyLmZvcndh
cmRNZXNzYWdlRXZlbnQsZmFsc2UpfWVsc2V7aWYoZG9jdW1lbnQuYm9keS5hdHRhY2hFdmVudCl7
Yy5hdHRhY2hFdmVudCgib25yZXNpemUiLGIuV2luZG93UHJveHlEaXNwYXRjaGVyLmZvcndhcmRN
ZXNzYWdlRXZlbnQpfWVsc2V7Yi5lcnJvcigiQ2Fubm90IGF0dGFjaCByZXNpemUgZXZlbnQiKX19
fX07aWYodHlwZW9mIGMuZXhwb3J0cyE9PSJ1bmRlZmluZWQiKXtjLmV4cG9ydHMuUG9ydGhvbGU9
Yn1lbHNle2MuUG9ydGhvbGU9Yn19KSh0aGlzKTs=
</content></attachment>
<object>
<class>
<name>XWiki.XWikiSkins</name>
<customClass></customClass>
<customMapping></customMapping>
<defaultViewSheet></defaultViewSheet>
<defaultEditSheet></defaultEditSheet>
<defaultWeb></defaultWeb>
<nameField></nameField>
<validationScript></validationScript>
<baseskin>
<customDisplay></customDisplay>
<disabled>0</disabled>
<name>baseskin</name>
<number>2</number>
<picker>0</picker>
<prettyName>Base Skin</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</baseskin>
<bookmarklet.css>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>bookmarklet.css</name>
<number>23</number>
<picker>0</picker>
<prettyName>bookmarklet.css</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</bookmarklet.css>
<bookmarklet.js>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>bookmarklet.js</name>
<number>21</number>
<picker>0</picker>
<prettyName>bookmarklet.js</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</bookmarklet.js>
<bookmarklet.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>bookmarklet.vm</name>
<number>10</number>
<picker>0</picker>
<prettyName>bookmarklet.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</bookmarklet.vm>
<bookmarkletinline.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>bookmarkletinline.vm</name>
<number>22</number>
<picker>0</picker>
<prettyName>bookmarkletinline.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</bookmarkletinline.vm>
<docextra.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>docextra.vm</name>
<number>20</number>
<picker>0</picker>
<prettyName>docextra.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</docextra.vm>
<edit.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>edit.vm</name>
<number>9</number>
<picker>0</picker>
<prettyName>Edit</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</edit.vm>
<embed.css>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>embed.css</name>
<number>15</number>
<picker>0</picker>
<prettyName>embed.css</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</embed.css>
<embed.js>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>embed.js</name>
<number>14</number>
<picker>0</picker>
<prettyName>embed.js</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</embed.js>
<embed.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>embed.vm</name>
<number>13</number>
<picker>0</picker>
<prettyName>embed.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</embed.vm>
<footer.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>footer.vm</name>
<number>6</number>
<picker>0</picker>
<prettyName>Footer</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</footer.vm>
<global.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>global.vm</name>
<number>16</number>
<picker>0</picker>
<prettyName>global.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</global.vm>
<header.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>header.vm</name>
<number>5</number>
<picker>0</picker>
<prettyName>Header</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</header.vm>
<hierarchy.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>hierarchy.vm</name>
<number>17</number>
<picker>0</picker>
<prettyName>hierarchy.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</hierarchy.vm>
<javascript.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>javascript.vm</name>
<number>19</number>
<picker>0</picker>
<prettyName>javascript.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</javascript.vm>
<layoutvars.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>layoutvars.vm</name>
<number>12</number>
<picker>0</picker>
<prettyName>layoutvars.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</layoutvars.vm>
<logo>
<customDisplay></customDisplay>
<disabled>0</disabled>
<name>logo</name>
<number>3</number>
<picker>0</picker>
<prettyName>Logo</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</logo>
<name>
<customDisplay></customDisplay>
<disabled>0</disabled>
<name>name</name>
<number>1</number>
<picker>0</picker>
<prettyName>Name</prettyName>
<size>30</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.StringClass</classType>
</name>
<style.css>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>style.css</name>
<number>4</number>
<picker>0</picker>
<prettyName>Style</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</style.css>
<stylesheets.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>stylesheets.vm</name>
<number>18</number>
<picker>0</picker>
<prettyName>stylesheets.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</stylesheets.vm>
<view.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>view.vm</name>
<number>8</number>
<picker>0</picker>
<prettyName>View</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</view.vm>
<viewheader.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>PureText</editor>
<name>viewheader.vm</name>
<number>7</number>
<picker>0</picker>
<prettyName>View Header</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</viewheader.vm>
<xwikivars.vm>
<customDisplay></customDisplay>
<disabled>0</disabled>
<editor>---</editor>
<name>xwikivars.vm</name>
<number>11</number>
<picker>0</picker>
<prettyName>xwikivars.vm</prettyName>
<rows>15</rows>
<size>80</size>
<unmodifiable>0</unmodifiable>
<validationMessage></validationMessage>
<validationRegExp></validationRegExp>
<classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
</xwikivars.vm>
</class>
<name>Bookmarklet.BookmarkletSkin</name>
<number>0</number>
<className>XWiki.XWikiSkins</className>
<guid>192ea34e-7e94-453e-84b5-11f9ef3ebeb5</guid>
<property>
<baseskin>colibri</baseskin>
</property>
<property>
<bookmarklet.css>#xdialog {
  position: absolute; top: 0; left: 0; width: 100%; height: 10000%; z-index: 100000002;
}

#xdialog-inner {
  position: relative;
  width: 1024px;
  top: 20px; left: 50%; margin-left: -512px; 
  //border: 20px solid gray;
  //border: 20px solid rgba(0,0,0,0.35);
  //border-radius: 5px;
  //box-shadow: 0 0 50px rgba(0,0,0,0.5);
  background: none;
}

#xoverlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: black;
  opacity: 0.30;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
  filter: alpha(opacity=30);
  -khtml-opacity: 0.30;
  -moz-opacity: 0.30;
}

#xdialog iframe {
  display: block;
  border: 0 none;
  width: 100%;
  z-index: 100000003;
}

#xdialog form {
  display: none;
}

#xclose {
  color: #333333;
  font-size: 32px;
  height: 32px;
  right: 0;
  position: absolute;
  top: 0;
  width: 32px;
  z-index: 100000003;
  cursor: pointer;
}</bookmarklet.css>
</property>
<property>
<bookmarklet.js>Bookmarklet = {};
Bookmarklet.open = function(url, mapping) {
  this.url = url;
  this.mapping = mapping;  
  var rangyHTML = '';    
  try {
    var rangySelection = rangy.getSelection();
    rangySelection.refresh(true);
    rangyHTML = rangySelection.toHtml();
  } catch(e) {}  
  JQuery(document.body).append("&lt;div id='divjrangy' style='display:none;'&gt;&lt;/div&gt;");
  if (rangyHTML != '') {
    rangyHTML = rangyHTML.replace(new RegExp('&lt;script[^&gt;]*&gt;([\\S\\s]*?)&lt;\/script\\s*&gt;', 'img'), '');
    rangyHTML = rangyHTML.replace(new RegExp('&lt;iframe[^&gt;]*&gt;([\\S\\s]*?)&lt;\/iframe\\s*&gt;', 'img'), '');
    rangyHTML = rangyHTML.replace(new RegExp('&lt;form[^&gt;]*&gt;([\\S\\s]*?)&lt;\/form\\s*&gt;', 'img'), '');
    rangyHTML = rangyHTML.replace(new RegExp('&lt;noscript[^&gt;]*&gt;([\\S\\s]*?)&lt;\/noscript\\s*&gt;', 'img'), '');
    rangyHTML = rangyHTML.replace(/&lt;!--[\s\S]*?--&gt;/g, '');
    rangyHTML = rangyHTML.replace(/\n|\r/g, '')
    JQuery("#divjrangy").html(rangyHTML);
    try {
    JQuery("#divjrangy").find("[onmouseover]").each(function(){
      JQuery(this).removeAttr('onmouseover');
    });
    } catch(e) {}
    try {
    JQuery("#divjrangy").find("[onmouseout]").each(function(){
      JQuery(this).removeAttr('onmouseout');
    });
    } catch(e) {}
    try {
    JQuery("#divjrangy").find("[onclick]").each(function(){
      JQuery(this).removeAttr('onclick');
    });
    } catch(e) {}
    // expand relative links to extenal links
    try {
    JQuery("#divjrangy").find("a[href]").each(function(){
      var jthis = JQuery(this);
      var href = jthis.attr('href');
      if(href.toLowerCase().indexOf(location.protocol) &lt; 0) {
        jthis.attr('href', location.protocol + '//' + location.hostname+(location.port ? ':'+location.port: '') + '/' + href);
      }
    });
    } catch(e) {}
    // expand img src to external urls
    try {
    JQuery("#divjrangy").find("img[src]").each(function(){
      var jthis = JQuery(this);
      var src = jthis.attr('src');
      if(src.toLowerCase().indexOf(location.protocol) &lt; 0) {
        jthis.attr('src', location.protocol + '//' + location.hostname+(location.port ? ':'+location.port: '') + '/' + src);
      }
    });
    } catch(e) {}
  }
  JQuery(document.body).append("\
    &lt;div id='xdialog'&gt;\
      &lt;div id='xoverlay' style='opacity: 0.5; background-color: black;'&gt;&lt;/div&gt;\
      &lt;div id='xdialog-inner' class='ui-widget-content'&gt;\
        &lt;form id='xform' name='xform' action='"+ this.url +"' method='post' target='xframe'&gt;\
          &lt;input type='hidden' id='xsource' name='xsource' value='' /&gt;\
          &lt;input type='hidden' id='xurl' name='"+ this.mapping['_url'] +"' value='' /&gt;\
          &lt;input type='hidden' id='xtitle' name='"+ this.mapping['_title'] +"' value='' /&gt;\
          &lt;input type='hidden' id='xselection' name='"+ this.mapping['_selection'] +"' /&gt;\
        &lt;/form&gt;\
        &lt;iframe id='xframe' name='xframe' src='"+ this.url +"'&gt;&lt;/iframe&gt;\
      &lt;/div&gt;\
    &lt;/div&gt;")
  JQuery('#xsource').val(window.location.href);
  JQuery('#xurl').val(window.location.href);
  JQuery('#xtitle').val(document.title);
  JQuery('#xselection').val(JQuery("#divjrangy").html());
  JQuery('#divjrangy').remove();
  JQuery('#xform').submit();
  JQuery('#xoverlay').click(function(event){
    Bookmarklet.close();
  });
}
Bookmarklet.updateHeight = function(height) {
  JQuery('#xframe').height(height + 'px');
}
Bookmarklet.close = function () {
  JQuery('#xdialog').remove();
}</bookmarklet.js>
</property>
<property>
<bookmarklet.vm>#set ($discard = $response.setContentType("text/javascript"))
#set ($isGuest = $xcontext.getUser().equals('XWiki.XWikiGuest'))
#set ($serverURL = "${request.scheme}://${request.serverName}")
#if ("$!request.serverPort" != "80")
  #set ($serverURL = "${serverURL}:${request.serverPort}")
#end
#set($bookmarkletObj = $doc.getObject("Bookmarklet.BookmarkletClass"))
#if ($bookmarkletObj)
  #set($titleMapping = $doc.getValue("mappingTitle"))
  #set($urlMapping = $doc.getValue("mappingURL"))
  #set($selectionMapping = $doc.getValue("mappingSelection"))
#else
  #set($titleMapping = "title")
  #set($urlMapping = "")
  #set($selectionMapping = "content")
#end
#set ($externalURL = $doc.getExternalURL('create', 'xpage=embed'))
var getIEVersion = function() {
  var ua = window.navigator.userAgent;
  var ie = ua.indexOf("MSIE ");
  return ((ie &gt; 0) ? parseInt(ua.substring(ie+5, ua.indexOf(".", ie))) : 0);
}
var XWiki = {};
XWiki.jsx = {};
XWiki.jsx._defs = [];
XWiki.jsx.use = function(v, url, callback) {
  if (v &amp;&amp; url) {
    if (!XWiki.jsx._defs[v]) {
      XWiki.jsx._defs[v] = url;
      if (!window[v]) {
        (function(u,f){var d=document,l='onload',r='onreadystatechange',s=d.createElement('script');
s[l]=function(){s[l]&amp;&amp;(s[l]=s[r]=null)||f()};s[r]=function(){/le|de/.test(s.readyState)&amp;&amp;s[l]()};
s.async=true;s.src=u;(d.head||d.getElementsByTagName('head')[0]).appendChild(s)})(url, callback);
      } else {
        callback();
      }
    }        
  }
};
XWiki.ssx = {};
XWiki.ssx._defs = [];
XWiki.ssx.use = function(v, url) {
  if (v &amp;&amp; url) {
    if (!XWiki.ssx._defs[v]) {
      XWiki.ssx._defs[v] = url;
      (function(u){var d=document,s=d.createElement('link');
s.type="text/css";s.rel="stylesheet";s.href=u;(d.head||d.getElementsByTagName('head')[0]).appendChild(s)})(url);
    }    
  }
};
function onMessage(messageEvent) {
  if (messageEvent.data['action']) {
    if (messageEvent.data['action'] == 'close')
      Bookmarklet.close();    
  }
  if (messageEvent.data['height'])
    Bookmarklet.updateHeight(messageEvent.data['height']);
}
XWiki.jsx.use('JQuery', "${serverURL}${xwiki.getSkinFile('jquery-1.9.1.min.js')}", function() {
JQuery = jQuery.noConflict();
var rangyurl = "${serverURL}${xwiki.getSkinFile('rangy-core.js')}";
var rangyversion = 1.2;
if (getIEVersion() &gt;= 9) {
  rangyversion = '1.3';
}
rangyurl = rangyurl.replace('rangy%2Dcore.js', 'rangy-core-' + rangyversion + '.js');
XWiki.jsx.use('Rangy', rangyurl, function() {
XWiki.jsx.use('Bookmarklet', "${serverURL}${xwiki.getSkinFile('bookmarklet.js')}", function() {
  XWiki.ssx.use('Bookmarklet', "${serverURL}${xwiki.getSkinFile('bookmarklet.css')}");
  // save original selection
        var ranges = [];
        try {
          var selection = window.getSelection();
          for (var i=0; i&lt;selection.rangeCount; i++) {
            ranges.push(selection.getRangeAt(i));
          }
        } catch(e) {}
  rangy.init();  
  // restore original selection
        if (ranges.length &gt; 0) {
          try {
            var selection = window.getSelection();
            for (i=0; i&lt; ranges.length; i++) {
              selection.addRange(ranges[i]);
            }
          } catch(e) {}
        }
  window.scrollTo(0,0);
  Bookmarklet.open("$externalURL", {'_title' : "$!titleMapping", '_url' : "$!urlMapping", '_selection' : "$!selectionMapping"});
  XWiki.jsx.use('Porthole', "${serverURL}${xwiki.getSkinFile('porthole.js')}", function() {
    // Create a proxy window to send to and receive message from the guest iframe
    window.windowProxy = new Porthole.WindowProxy("$externalURL", 'xframe');
    window.windowProxy.addEventListener(onMessage);
  });
});
});
});</bookmarklet.vm>
</property>
<property>
<bookmarkletinline.vm>#set ($bookmarkletClass = $xwiki.getClass('Bookmarklet.BookmarkletClass'))
&lt;form id='bookmarkletForm' action="" class='hidden' method='post'&gt;
&lt;input type='hidden' name='xpage' value='embed' /&gt;
&lt;input type='hidden' name='xsource' value="$escapetool.url($!request.xsource)" /&gt;
#foreach ($propName in $bookmarkletClass.getEnabledPropertyNames())
  #set ($propId = $doc.getValue($propName))
  #if ("$!propId" != "")
    #set ($propValue = $request.get($propId))
    #if ("$!propValue" != "")
      &lt;input type='hidden' name="$propId" id="$propId" value="$escapetool.xml($propValue)" /&gt;
    #end
  #end
#end
&lt;/form&gt;</bookmarkletinline.vm>
</property>
<property>
<docextra.vm>##
## Document footer: tags, creation date, modification date
##
##
&lt;div id="xdocFooter"&gt;
  #template("documentTags.vm")
  &lt;div id="xdocAuthors"&gt;
    &lt;div class="xdocCreation"&gt; ## Creation
      $msg.get('core.footer.creation', [$xwiki.getUserName($doc.creator), $xwiki.formatDate($doc.creationDate)])&lt;br/&gt;
      #if($tdoc.realLanguage != $doc.realLanguage)
        $msg.get('core.footer.translationCreation', [$tdoc.realLanguage, $xwiki.getUserName($tdoc.creator), $xwiki.formatDate($tdoc.creationDate)])&lt;br/&gt;
      #end
    &lt;/div&gt;
##    &lt;div class="xdocLastModification"&gt; ## Last modification
##      $msg.get('core.footer.modification', [$xwiki.getUserName($tdoc.author), $xwiki.formatDate($tdoc.date)])
##    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
##
##
## More document related data: comments, attachments ...
##
#if (!$isInEmbedMode)
&lt;div id="xwikidata" class="layoutsubsection"&gt;
##
## Build the list of documents extras to display, if it does not exist (default).
## List format : ['ExtraAnchor', 'ExtraName', 'ExtraTabText', ExtraNumberOfItems, 'extratemplate.vm', 'keyboardShortcut']
##
#if (!$docextras)
  #set ($docextras = [])
  #if ($showcomments)
    $xwiki.jsfx.use('uicomponents/viewers/comments.js', {'forceSkinAction': true, 'language': ${xcontext.language}})
    $xwiki.ssfx.use('uicomponents/viewers/comments.css', true)
    #set ($discard = $docextras.add(['Comments', 'comments', $msg.get('docextra.comments'), $doc.getObjects('XWiki.XWikiComments').size(), 'commentsinline.vm', $msg.get('core.shortcuts.view.comments')]))
  #end
  #if ($showannotations)
    #if (!$annotationCount)
      ## Annotation count is supposed to be defined in xwikivars.vm. If for a reason or another it is not
      ## defined at this point, we tap into the standard annotation class, and do not load again the
      ## config document. This however should not happen.
      #set ($annotationCount = $doc.getObjects('AnnotationCode.AnnotationClass').size())
    #end
    #set ($discard = $docextras.add(['Annotations', 'annotations', $msg.get('docextra.annotations'), $annotationCount, 'annotationsinline.vm', $msg.get('core.shortcuts.view.annotations')]))
  #end
  #if ($showattachments)
    $xwiki.jsfx.use('uicomponents/widgets/upload.js', {'forceSkinAction': true, 'language': ${xcontext.language}})
    $xwiki.ssfx.use('uicomponents/widgets/upload.css', true)
    $xwiki.jsfx.use('js/xwiki/viewers/attachments.js', {'forceSkinAction': true, 'language': ${xcontext.language}})
    $xwiki.ssfx.use('js/xwiki/viewers/attachments.css', true)
    ### Support attachment sorting
    #set ($sortAttachmentsBy = "$!{request.sortAttachmentsBy}")
    #if ($sortAttachmentsBy != '')
      ## Prepend request parameter
      #set ($sortAttachmentsBy = "&amp;sortAttachmentsBy=$escapetool.url(${sortAttachmentsBy})")
    #end
    #set ($discard = $docextras.add(['Attachments', 'attachments', $msg.get('docextra.attachments'), $doc.getAttachmentList().size(), "attachmentsinline.vm$!{sortAttachmentsBy}", $msg.get('core.shortcuts.view.attachments')]))
  #end
  #if ($showhistory)
    ## Pagination style
    $xwiki.ssfx.use('uicomponents/pagination/pagination.css', true)##
    #set ($discard = $docextras.add(['History', 'history', $msg.get('docextra.history'), -1, 'historyinline.vm', $msg.get('core.shortcuts.view.history')]))
  #end
  #if ($showinformation)
    #set ($discard = $docextras.add(['Information', 'information', $msg.get('docextra.information'), -1, 'informationinline.vm', $msg.get('core.shortcuts.view.information')]))
  #end
#end
##
## Put anchors before the footer, otherwise the top of each section would be hidden by the floating topmenu
##
#if ($docextras.size() &gt; 0)
&lt;div id="docextraanchors" class="invisible"&gt;
#foreach ($docextra in $docextras)&lt;span id="${docextra.get(0)}anchor"&gt;&amp;nbsp;&lt;/span&gt;#end
&lt;/div&gt;
#end
##
## Display tabs
##
#if($docextras.size() &gt; 0)
  &lt;div id="xwikidatacontents"&gt;
    &lt;div class="floatcontainer" id="docExtraTabs"&gt;
      &lt;ul class="xwikitabbar" id="docExtrasTabsUl"&gt;
        #foreach($docextra in $docextras)
          &lt;li id="${docextra.get(0)}tab"&gt;
            &lt;a id="${docextra.get(0)}link" href="$doc.getURL('view', "viewer=${docextra.get(1)}")"&gt;
              $docextra.get(2) #if($docextra.get(3) &gt;= 0) &lt;span class="itemCount"&gt;$msg.get('docextra.extranb', [$docextra.get(3)])&lt;/span&gt; #end
            &lt;/a&gt;
          &lt;/li&gt;
        #end
      &lt;/ul&gt;
    &lt;/div&gt;
    ##
    ## Display panes (AJAX placeholders)
    ##
    &lt;div id="docextrapanes"&gt;
      #foreach($docextra in $docextras)
        &lt;div id="${docextra.get(0)}pane" class="hidden empty"&gt;&lt;/div&gt;
      #end
    &lt;/div&gt;
    ##
    ## JavaScript code generation
    ##
    &lt;script type="text/javascript"&gt;
      var hashviewer = self.document.location.hash.substring(1);
      #foreach($docextra in $docextras)
        #set ($extraAnchor = $listtool.get($docextra, 0))
        #set ($extraName = $listtool.get($docextra, 1))
        #set ($extraTemplate = $listtool.get($docextra, 4))
        #set ($extraShortcut = $listtool.get($docextra, 5))
        ##
        ## Set the extra to load
        ##
        #if ($velocityCount == 1)
          var extraInit = function(){ XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", false) };
        #end
        if (hashviewer == "${extraAnchor}") {
          var extraInit = function(){ XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", true) };
        }
        ##
        ## Replace tab link
        ##
        if ($("${extraAnchor}link") != null) {
          $("${extraAnchor}link").href="#${extraAnchor}";
          Event.observe($("${extraAnchor}link"), "click", function(){ XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", false); }, false);
        }
        ##
        ## Replace top menu link (if any)
        ##
        if ($("tmShow${extraAnchor}") != null) {
          $("tmShow${extraAnchor}").href="#${extraAnchor}";
          Event.observe($("tmShow${extraAnchor}"), "click", function(){ XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", true); }, false);
        }
        ##
        ## Replace shortcut link (if any)
        ##
        if ($("${extraName}shortcut") != null) {
          $("${extraName}shortcut").down('a').href="#${extraName}";
          Event.observe($("${extraName}shortcut"), "click", function(){ XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", true); }, false);
        }
        ##
        ## Override keyboard shortcut (if any)
        ##
        #if ($keyboardShortcutsEnabled &amp;&amp; "$!extraShortcut" != "")
          shortcut.remove("$extraShortcut");
          shortcut.add("$extraShortcut", function() { XWiki.displayDocExtra("${extraAnchor}", "${extraTemplate}", true); }, { 'type':'keypress', 'propagate':false, 'disable_in_input':true });
        #end
      #end
      document.observe("dom:loaded", extraInit, false);
    &lt;/script&gt;
  &lt;/div&gt; ## xwikidatacontents
#end
&lt;/div&gt;  ## xwikidata
#end</docextra.vm>
</property>
<property>
<edit.vm>###
### Main "edit" template
###
### General wrapper for edit actions
###
##
## Is the document being edited by another user?
## If yes, warn about it and show a forcing link:
##
#if($tdoc.getLocked() &amp;&amp; "$!request.get('force')" == '')
  #template("startpage.vm")
  &lt;div class="main layoutsubsection"&gt;
   &lt;div id="mainContentArea"&gt;
    ##
    $response.setStatus(423)
    #set($newquerystring = "$!{request.getQueryString().replaceAll('&amp;', '&amp;amp;').replaceAll('&amp;amp;amp;', '&amp;amp;')}"
                         + '&amp;amp;force=1')
    #set($forceEditURL = $doc.getURL($xcontext.getAction(), ${newquerystring}))
    #xwikimessageboxstart($msg.get('notice') "$msg.get('doclockedby') $xwiki.getUserName($doc.getLockingUser())")
    &lt;a href="$forceEditURL"&gt;$msg.get('forcelock')&lt;/a&gt;
    #xwikimessageboxend()
    ##
   &lt;/div&gt;## mainContentArea
  &lt;/div&gt;## main layoutsubsection
  #template("endpage.vm")
#else
  ##
  ## Determine what editor to show
  ##
  #if("$!editor" == '')
    ## Normally no special characters should exist in the editor parameter, so this is just a protection measure.
    #set($editor = "$!{escapetool.xml($request.getParameter('editor'))}")
    #if($editor == '')
      ## Determine the sheets using the default document translation because objects are accessible only from the default translation.
      #if(!$services.sheet.getSheets($doc, $context.action).isEmpty())
        #set($editor = 'inline')
      #elseif (($xwiki.getUserPreference('editor') == 'Wysiwyg') &amp;&amp; ($tdoc.syntax.toIdString() == 'xwiki/1.0' &amp;&amp; !$tdoc.isAdvancedContent() || $services.wysiwyg.isSyntaxSupported($tdoc.syntax.toIdString())))
        #set($editor = 'wysiwyg')
      #else
        #set($editor = 'wiki')
      #end
    #end
  #end
  #if($editor == 'inline')
    ## The inline editor uses the view layout, unlike the rest of the editors.
    #template('startpage.vm')
    #template('editinline.vm')
    #template('endpage.vm')
  #else
  ##
  ## "Compute" the title
  ##
  #set($title = $xwiki.parseContent($msg.get('editpageTitle')))
  ##
  ## Header
  ##
  #template("xwikivars.vm")
  #template("layoutvars.vm")
  #template("htmlheader.vm")
#if($displayMainMenu)
  #template("menuview.vm")
#end
  #template("header.vm")
  #if($editor == 'wiki' || $editor == 'wysiwyg')
    &lt;form id="edit" method="post" action="$doc.getURL('preview')" class="withLock"&gt;
    &lt;div class="hidden"&gt;
    ## CSRF prevention
    &lt;input type="hidden" name="form_token" value="$!{services.csrf.getToken()}" /&gt;
    ## Pass the section number when the form is submitted in order to affect only the specified section.
    ## We need to test if the section number is present to prevent a NumberFormatException for the empty string.
    #if("$!{request.section}" != '')
      &lt;input type="hidden" name="section" value="$!{escapetool.xml($request.section)}" /&gt;
    #end
    ## This input is used by the full screen widget: it stores the selector of the maximized element, so that the full screen can be restored when coming back from preview.
    &lt;input type="hidden" name="x-maximized" value="$!{escapetool.xml($request.get('x-maximized'))}"/&gt;
    &lt;/div&gt;
  #end
  ##################
  ##   Edit zone  ##
  ##################
  &lt;div id="xwikieditor" class="layoutsection"&gt;
  &lt;div id="xwikieditorinner"&gt;
  &lt;div class="leftsidecolumns"&gt;
  &lt;div id="editcolumn" class="editor editor-${editor}"&gt;
  &lt;div class="alleditcontent"&gt;
#if ($displayContentMenu)
  &lt;div id="editmenu" class="actionmenu"&gt;
  #template("editmenu.vm")
  &lt;/div&gt;
#end
  &lt;div id="mainEditArea"&gt;
  #template("hierarchy.vm")
  #if (($editor == 'wiki' || $editor == 'wysiwyg') &amp;&amp; !$request.section)
    #template('editmeta.vm')
  #end
  #template("editmodes.vm")
  #template("edit${editor}.vm")
  ## This javascript must be placed here since it uses velocity variables set in the template above.
  &lt;script type="text/javascript"&gt;
    //&lt;![CDATA[
    if ($('tmEditWysiwyg')) {
      // Manage switch from wiki to wysiwyg, content must be preserved between those editors.
      Event.observe($('tmEditWysiwyg'), "click", function(event) {
        #if($doc.syntax.toIdString() == "xwiki/1.0")
        if (checkAdvancedContent('$msg.get("checkadvancedcontent")') == false) {
          Event.stop(event);
          return;
        }
        #end
        document.forms.${formname}.action='$doc.getURL("edit", "editor=wysiwyg&amp;$languageparams")';
        document.forms.${formname}.submit();
        Event.stop(event);
      });

      // Manage switch from wysiwyg to wiki, content must be preserved between those editors.
      Event.observe($('tmEditWiki'), "click", function(event) {
        document.forms.${formname}.action='$doc.getURL("edit", "editor=wiki&amp;$languageparams")';
        document.forms.${formname}.submit();
        Event.stop(event);
      });
    }
    //]]&gt;
  &lt;/script&gt;
  &lt;/div&gt; ## mainEditArea
  &lt;/div&gt; ## alleditcontent
  &lt;/div&gt; ## editcolumn
  &lt;div class="clearfloats"&gt;&lt;/div&gt;
  &lt;/div&gt; ## leftsidecolumns
  #template("editpanels.vm")
  &lt;div class="clearfloats"&gt;&lt;/div&gt;
  &lt;/div&gt; ## xwikieditorinner
  &lt;/div&gt; ## xwikieditor
  ##
  ## Footer
  ##
  #if($editor == 'wiki' || $editor == 'wysiwyg')
    &lt;/form&gt;
  #end
  #template("footer.vm")
  #template("htmlfooter.vm")
  #end ## $editor != 'inline'
#end</edit.vm>
</property>
<property>
<embed.css>#body #contentcolumn .main {
  padding: 0;
}

#mainContentArea, #mainEditArea {
  border: none;
}

#editPanels {
  margin-right: 2em;
  position: absolute;
  right: 0;
  top: 3em;
  width: auto;
}

#editPanels .panel {
  float: left;
}

.editor-wiki .alleditcontent, .editor-wysiwyg .alleditcontent {
  margin: 0;
}

#xwikimaincontainerinner {
  height: auto;
}

#parentinput label {
  margin-bottom: 0.5em;
}

#body #contentcolumn .main {
  height: 99%;
}

#mainContentArea {
  display: none;
  height: 96%;
}</embed.css>
</property>
<property>
<embed.js>var updateTopLocation = function() {  
  //if (topLocation &amp;&amp; topLocation != "" &amp;&amp; topLocation != "undefined") {
  //  var heightHash = $(document.body).getHeight();
  //  window.top.location = unescape(topLocation) + '#=' + heightHash;
  //}
}

function onMessage(messageEvent) {
  console.log(messageEvent);
}

var updateRedirect = function(form) {
  var xredirect = form.down('[name=xredirect]');
  if (xredirect)
    xredirect.setValue(docviewurl);
  else {
    xredirect = new Element('input', {'type':'hidden', 'name':'xredirect', 'value':docviewurl});
    form.insert({bottom:xredirect});
  }
}

document.observe("xwiki:dom:loaded", function(event) {
  windowProxy = new Porthole.WindowProxy(window.xsource);
  windowProxy.addEventListener(onMessage);
  if ($('mainContentArea'))
    $('mainContentArea').setStyle({display: 'block'});  
  var form;
  if ($('edit'))
    form = $('edit')
  else if ($('inline'))
    form = $('inline')
  else if ($('update'))
    form = $('update')
  else if ($('propupdate'))
    form = $('propupdate')
  if (form) {
    form.observe('submit', function() {
      updateRedirect(form);
    });
  }
  document.observe('xwiki:actions:cancel', function(event) {
    windowProxy.post({'action': 'close'});
    event.stop();
  });
  windowProxy.post({'height': $('body').getDimensions().height})
  document.observe('xwiki:wysiwyg:loaded', function(event) {
    windowProxy.post({'height': $('body').getDimensions().height})
  })
});</embed.js>
</property>
<property>
<embed.vm>########################################################
## Default behavior of xpage=embed
########################################################
#set($discard = $context.setLinksQueryString("xpage=embed&amp;xsource=$escapetool.url($!request.xsource)"))
#if ($context.action != "create")
#template("${context.action}.vm")
#else
#template("view.vm")
#end</embed.vm>
</property>
<property>
<footer.vm>#if($isInServletMode &amp;&amp; !$isInEmbedMode)## Visible only in a page
&lt;div id="footerglobal" class="layoutsection"&gt;
&lt;div class="minwidth"&gt;&lt;/div&gt;
&lt;hr/&gt;
  &lt;div id="xwikilicence"&gt;$!copyright&lt;/div&gt;
  #set ($version = $xwiki.getSpacePreference('version'))
  #if ("$!version" == "")
    #set ($version = $xwiki.getXWikiPreference("version"))
  #end
  #if ("$!version" != "")
    #set ($version = $xwiki.parseContent($version))
  #else
    #set ($version = $!xwiki.version)
  #end
  &lt;div id="xwikiplatformversion"&gt;$version&lt;/div&gt;
&lt;hr/&gt;
&lt;/div&gt;
#end
### TODO: Format the footer for pdf output</footer.vm>
</property>
<property>
<global.vm>###
### Global header
###
### The uppermost area of each page
### Contains the company logo, links to global actions and the search facility
###
#if(!$isInEmbedMode)
#if($isInServletMode) ## Visible only in a page
&lt;div id="headerglobal" class="layoutsection"&gt;
#if($xcontext.action == "view")
&lt;div class="minwidthb"&gt;&lt;/div&gt;
#else
&lt;div class="minwidthd"&gt;&lt;/div&gt;
#end
  &lt;div id="company"&gt;
  &lt;div id="companylogo"&gt;
    &lt;a href="$!xwiki.getURL($services.model.resolveDocument('', 'default', $doc.documentReference.extractReference('WIKI')))" title="Home" rel="home"&gt;
#if("$!{themeDocFullName}" == '')
  #set($themeDocFullName = "$!xwiki.getUserPreference('colorTheme')")
#end
#if($themeDocFullName == '')
  #set($themeDocFullName = 'ColorThemes.DefaultColorTheme')
#end
#set($themeDoc = $xwiki.getDocument($themeDocFullName))
#set($themeObj = $themeDoc.getObject('ColorThemes.ColorThemeClass'))
#set($logoname = $themeObj.getProperty('logoImage').value)
#if("$!{logoname}" != '')
  #set($logourl = $themeDoc.getAttachmentURL($logoname))
#else
  #set($logoname = $xwiki.getSkinPreference('logo', 'logo.png'))
  #set($logo = $!prefdoc.getAttachment($logoname))
  #if(!$logo)
    #set($logourl = $xwiki.getSkinFile($logoname))
  #else
    #set($logourl = $prefdoc.getAttachmentURL($logo.filename))
  #end
#end
    &lt;img src="$!logourl" alt="Wiki Logo"/&gt;
    &lt;/a&gt;
  &lt;/div&gt; ## companylogo
  &lt;/div&gt; ## company
  &lt;div id="globallinks"&gt;
    &lt;form action="#if($xwiki.exists('Main.Search'))$xwiki.getURL('Main.Search')#else$xwiki.getURL('Main.WebSearch')#end"&gt;
      &lt;div class="globalsearch"&gt;
        &lt;label class="hidden" for="headerglobalsearchinput"&gt;$msg.get('panels.search.inputLabel')&lt;/label&gt;&lt;input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="$msg.get('panels.search.inputText')" size="15"/&gt;&lt;input class="button" type="image" value="$msg.get('panels.search.submit')" alt="$msg.get('panels.search.submit')" src="$xwiki.getSkinFile('icons/xwiki/search.png')"/&gt;
      &lt;/div&gt;
    &lt;/form&gt;
#if($xwiki.isMultiLingual())
  &lt;span class="glink" id="headerlanguages"&gt;
  #set($defaultLanguage = "$!{doc.getDefaultLanguage()}")
  #if($defaultLanguage == '')
    #set($defaultLanguage = "$!{doc.getLanguage()}")
  #end
  #if($defaultLanguage == '')
    #set($defaultLanguage = "default")
  #end
  &lt;a href="$!doc.getURL("view", "language=$defaultLanguage")" class="language-default#if($tdoc.realLanguage == $defaultLanguage || ($defaultLanguage == 'default' &amp;&amp; $tdoc.realLanguage == '')) language-current#end"&gt;$defaultLanguage&lt;/a&gt;
  #set ($wikiSettingsLanguages = $!xwiki.getXWikiPreference('languages').trim().split('\s*[,| ]\s*'))
  #set ($hasLanguagesSet = $wikiSettingsLanguages.size() &gt; 1 || "$!wikiSettingsLanguages.get(0)" != '')
  #foreach($lang in $doc.translationList)
    #if(!$hasLanguagesSet || $wikiSettingsLanguages.contains($lang))
      &lt;a href="$!doc.getURL("view", "language=$lang")" class="language-translation#if($tdoc.realLanguage == $lang) language-current#end"&gt;$!lang&lt;/a&gt;
    #end
  #end
  &lt;/span&gt;
#end
  &lt;/div&gt; ## globallinks
  &lt;div class="clearfloats"&gt;&lt;/div&gt;
&lt;/div&gt; ## headerglobal
#end
#end
### TODO: Format the header for pdf output</global.vm>
</property>
<property>
<header.vm></header.vm>
</property>
<property>
<hierarchy.vm>#template('xwikivars.vm')
#set($parents = [])
#set($discard = $parents.add($doc.fullName))
#macro(computeHierarchy $doc $result $level)
  #set($parent = $doc.parent)
  #if(($parent != '') &amp;&amp; ($level &lt; 6) &amp;&amp; (!$parents.contains($parent)))
    #set($discard = $parents.add($parent))
    #set($pdoc = $xwiki.getDocument($parent).getTranslatedDocument())
    #if ($pdoc)
      #set ($pdocurl = $pdoc.getURL('view'))
      #set ($nstring = "&lt;a href='$pdocurl'&gt;$escapetool.xml(${pdoc.getPlainTitle()})&lt;/a&gt; &lt;span class='separator'&gt;&amp;#187;&lt;/span&gt; $result")
      #set ($level = $level + 1)
      #computeHierarchy($pdoc $nstring $level)
    #else
      ## No access to the parent document
      &lt;a href='$xwiki.getURL($parent)'&gt;$escapetool.xml(${parent})&lt;/a&gt; &lt;span class='separator'&gt;&amp;#187;&lt;/span&gt; $result
    #end
  #else
    $result
  #end
#end
#if($isInServletMode) ## Visible only in a page
  &lt;div id="hierarchy"&gt;
  #if ($doc.fullName != 'Main.WebHome')
    #if ($xcontext.action == 'edit' || $xcontext.action == 'inline')
      #computeHierarchy($doc "&lt;a href='${doc.getURL('view')}'&gt;$escapetool.xml($tdoc.getPlainTitle())&lt;/a&gt;" 0)
    #else
      #computeHierarchy($doc "&lt;span class='current'&gt;$escapetool.xml($tdoc.getPlainTitle())&lt;/span&gt;" 0)
    #end
  #end
  &lt;/div&gt;
#end</hierarchy.vm>
</property>
<property>
<javascript.vm>##
## CSS files related to JS libraries.
##
&lt;link href="$xwiki.getSkinFile("uicomponents/suggest/suggest.css", true)" rel="stylesheet" type="text/css" /&gt;
&lt;link href="$xwiki.getSkinFile("js/xwiki/lightbox/lightbox.css", true)" rel="stylesheet" type="text/css" /&gt;
&lt;!--[if IE]&gt;
  &lt;link href="$xwiki.getSkinFile("js/xwiki/lightbox/lightboxIE.css", true)" rel="stylesheet" type="text/css" /&gt;
&lt;![endif]--&gt;
##
## JS Libraries.
##
$xwiki.jsfx.use('js/scriptaculous/effects.js', true)
$xwiki.jsfx.use('js/xwiki/widgets/modalPopup.js', true)
$xwiki.ssfx.use('js/xwiki/widgets/modalPopup.css', {'forceSkinAction' : true, 'colorTheme' : $themeDoc})
$xwiki.jsfx.use('js/xwiki/widgets/jumpToPage.js', true)
$xwiki.ssfx.use('js/xwiki/widgets/jumpToPage.css', {'forceSkinAction' : true, 'language' : $xcontext.language})
$xwiki.jsfx.use('uicomponents/model/entityReference.js')
$xwiki.jsfx.use('uicomponents/widgets/confirmationBox.js', true)
$xwiki.ssfx.use('uicomponents/widgets/confirmationBox.css', true)
$xwiki.jsfx.use('uicomponents/widgets/confirmedAjaxRequest.js', true)
$xwiki.jsfx.use('uicomponents/widgets/notification.js', true)
$xwiki.ssfx.use('uicomponents/widgets/notification.css', true)
$xwiki.jsfx.use('uicomponents/widgets/list/xlist.js')
$xwiki.jsfx.use('uicomponents/suggest/suggest.js', {'forceSkinAction' : true, 'language' : $xcontext.language})
#if($xwiki.exists('XWiki.SearchSuggestConfig'))
  ## Hook to request the search suggest script if search suggest configuration is present.
  ## We can't just have it as a always-use SSX yet since we compute a hash to be sure to refresh
  ## the file when the configuration changes.
  ## Ideally, this code should be located in a interface extension, in the search application.
  #set($searchSuggestConfigDocument = $xwiki.getDocument('XWiki.SearchSuggestConfig'))
  #set($searchSuggestConfigObject = $searchSuggestConfigDocument.getObject('XWiki.SearchSuggestConfig'))
  #if($searchSuggestConfigObject.getProperty('activated').value == 1)
   #set($searchSuggestConfigHash = '')
   #foreach($source in $searchSuggestConfigDocument.getObjects('XWiki.SearchSuggestSourceClass'))
     #if($source.getProperty('activated').value == 1)
       #set($sourceId = "${source.get('name')}:${source.get('url')}:${source.get('highlight')}:${source.get('icon')}}")
       #set($searchSuggestConfigHash = "${searchSuggestConfigHash}|${sourceId}")
     #end
   #end
   $xwiki.jsfx.use('uicomponents/search/searchSuggest.js', {
    'forceSkinAction' : true,  
    'h' : $searchSuggestConfigHash.hashCode()  
   })
   $xwiki.ssfx.use('uicomponents/search/searchSuggest.css', true)
  #end
#end
&lt;script type="text/javascript" src="$xwiki.getSkinFile("js/prototype/prototype.js")"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="$xwiki.getSkinFile("js/xwiki/xwiki.js", true)"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
// &lt;![CDATA[
XWiki.webapppath = "${xwiki.webAppPath}";
XWiki.servletpath = "${xwiki.servletPath}";
XWiki.contextPath = "${request.contextPath}";
XWiki.mainWiki = "$!{escapetool.javascript(${xcontext.mainWikiName})}";
XWiki.currentWiki = "$!{escapetool.javascript(${xcontext.database})}";
XWiki.currentSpace = "$!{escapetool.javascript($doc.space)}";
XWiki.currentPage = "$!{escapetool.javascript($doc.name)}";
XWiki.editor = "$!{escapetool.javascript($editor)}";
XWiki.viewer = "$!{escapetool.javascript($viewer)}";
XWiki.contextaction = "${xcontext.getAction()}";
XWiki.docisnew = $!doc.isNew();
XWiki.docsyntax = "$!doc.getSyntax().toIdString()";
XWiki.docvariant = "$!{escapetool.javascript($docvariant.replace('&amp;amp;', '&amp;'))}";
XWiki.blacklistedSpaces = [ #foreach($space in $blacklistedSpaces)#if($velocityCount &gt; 1),#end"$space"#end ];
XWiki.hasEdit = $hasEdit;
XWiki.hasProgramming = $hasProgramming;
XWiki.hasBackupPackImportRights =#if ($xwiki.package) $xwiki.package.hasBackupPackImportRights()#else false#end;
window.docviewurl = "${doc.getURL('view')}";
window.docediturl = "${doc.getURL('edit')}";
window.docsaveurl = "${doc.getURL('save')}";
window.docgeturl = "${doc.getURL('get')}";
window.xsource = "$escapetool.url($!request.xsource)";
// ]]&gt;
&lt;/script&gt;
#set($editActions = ['edit', 'inline', 'admin'])
#if($editActions.contains($xcontext.action))
$xwiki.get('jsfx').use('uicomponents/lock/lock.js')
$xwiki.get('jsfx').use('uicomponents/widgets/validation/livevalidation_prototype.js')
$xwiki.get('ssfx').use('uicomponents/widgets/validation/livevalidation.css', true)
#end
##
## Hooks for inserting JavaScript skin extensions
##
## - Skin JAR extension hook. Placed first to allow other skin extensions to override it.
&lt;!-- com.xpn.xwiki.plugin.skinx.JsResourceSkinExtensionPlugin --&gt;
## - Skin file extension hook.
&lt;!-- com.xpn.xwiki.plugin.skinx.JsSkinFileExtensionPlugin --&gt;
## - Skin extension hook
&lt;!-- com.xpn.xwiki.plugin.skinx.JsSkinExtensionPlugin --&gt;
##
## Compatibility "aspect" file for deprecated code.
## Placed at the very end of the stream so that skin file extensions code can be deprecated easily as well.
##
&lt;script type="text/javascript" src="$xwiki.getSkinFile("js/xwiki/compatibility.js", false)" defer="defer"&gt;&lt;/script&gt;
#if ($isInEmbedMode)
  &lt;script type="text/javascript" src="$xwiki.getSkinFile("porthole.js", false)"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="$xwiki.getSkinFile("embed.js", true)"&gt;&lt;/script&gt;
#end
## Marker script that signals that all the deferred scripts have indeed been executed, guarding against a premature dom:loaded event
&lt;script type="text/javascript" src="$xwiki.getSkinFile("js/xwiki/markerScript.js", false)" defer="defer"&gt;&lt;/script&gt;</javascript.vm>
</property>
<property>
<layoutvars.vm>##
## In admin mode, Panels.PanelWizard must display the layout for the requested space
##
#set($spaceprefs = "")
#set($globalprefs = false)

#if($doc.name == "WebPreferences" &amp;&amp; "$!{request.space}" != "") ## space administration
  #set($spaceprefs = $request.space)
  #set($showLeftPanels =  $xwiki.getSpacePreferenceFor("showLeftPanels", $request.space))
  #set($showRightPanels = $xwiki.getSpacePreferenceFor("showRightPanels", $request.space))
#elseif($doc.fullName == "XWiki.XWikiPreferences" || "$!request.editor" == "globaladmin")
  #set($globalprefs = true)
  #set($showLeftPanels = $xwiki.getXWikiPreference("showLeftPanels"))
  #set($showRightPanels = $xwiki.getXWikiPreference("showRightPanels"))
#else
  #set($showLeftPanels = $xwiki.getSpacePreference("showLeftPanels"))
  #set($showRightPanels = $xwiki.getSpacePreference("showRightPanels"))
#end

#if(!$showLeftPanels || $showLeftPanels == "" || $showLeftPanels == "default")
  #set($showLeftPanels = "1")
#end
#if($showLeftPanels == "yes")
  #set($showLeftPanels = "1")
#end
#if($showLeftPanels == "no" || !$isInServletMode)
  #set($showLeftPanels = "0")
#end

#if(!$showRightPanels || $showRightPanels == "" || $showRightPanels == "default")
  #set($showRightPanels = "1")
#end
#if($showRightPanels == "yes")
  #set($showRightPanels = "1")
#end
#if($showRightPanels == "no" || !$isInServletMode)
  #set($showRightPanels = "0")
#end

#if($showLeftPanels)
  #if($globalprefs == true)
     #set($leftPanels = $xwiki.getXWikiPreference("leftPanels"))
  #elseif($spaceprefs != "")
     #set($leftPanels = $xwiki.getSpacePreferenceFor("leftPanels", $spaceprefs))
  #else
    #set($leftPanels = $xwiki.getUserPreference("leftPanels"))
    #if($leftPanels == "")
       #set($leftPanels = $xwiki.getSpacePreference("leftPanels"))
    #end
  #end
  #if($leftPanels == "")
      #set($showLeftPanels = "0")
  #end
#end

#if($showRightPanels)
  #if($globalprefs == true)
    #set($rightPanels = $xwiki.getXWikiPreference("rightPanels"))
  #elseif($spaceprefs != "")
    #set($rightPanels = $xwiki.getSpacePreferenceFor("rightPanels", $spaceprefs))
  #else
    #set($rightPanels = $xwiki.getUserPreference("rightPanels"))
    #if($rightPanels == "")
      #set($rightPanels = $xwiki.getSpacePreference("rightPanels"))
    #end
  #end
  #if($rightPanels == "")
      #set($showRightPanels = "0")
  #end
#end

#if($showLeftPanels == "yes")
 #if($showRightPanels == "yes")
  #set($colsclass = "show-all")
 #else
  #set($colsclass = "hide-right")
 #end
#else
 #if($showRightPanels == "yes")
  #set($colsclass = "hide-left")
 #else
  #set($colsclass = "hide-all")
 #end
#end

#if ($isInServletMode)
  #set($displayContentMenu = true)
  #set($displayShortcuts = true)
  #set($displayMainMenu = true)
  #set($displayDocExtra = true)
#end

#if ($isInEmbedMode)
  #set($displayMainMenu = false)
  #set($displayDocExtra = false)
  #set($showRightPanels = "0")
  #set($showLeftPanels = "0")
#end

#set ($layoutObj = $doc.getObject('XWiki.LayoutClass'))
#if ($layoutObj)
  #set ($displayMainMenu = $doc.getValue('displayMainMenu') == 1)
  #set ($displayContentMenu = $doc.getValue('displayContentMenu') == 1)
  #set ($displayShortcuts = $doc.getValue('displayShortcuts') == 1)
  #set ($displayDocExtra = $doc.getValue('displayDocExtra') == 1)
  #set ($showLeftPanels = $doc.getValue('showLeftPanels'))
  #set ($showRightPanels = $doc.getValue('showRightPanels'))
#end

## To let custom skins easily override layout variables, we evaluate a template that is empty by default.
#template("layoutExtraVars.vm")</layoutvars.vm>
</property>
<property>
<logo></logo>
</property>
<property>
<name>BookmarkletSkin</name>
</property>
<property>
<style.css></style.css>
</property>
<property>
<stylesheets.vm>#template('colorThemeInit.vm')
## The default stylesheet configuration option allows to override the default style.css CSS
#set ($defaultstyle = $xwiki.getSpacePreference('stylesheet'))
#if ($defaultstyle == '')
  #set ($defaultstyle = "style.css")
#end
#set ($defaultStyleURL = $xwiki.getSkinFile($defaultstyle, true))
&lt;link href="${defaultStyleURL}#if ($themeDoc)?colorTheme=$!{themeDocFullName}#end" rel="stylesheet" type="text/css" media="all" /&gt;
&lt;link href="$xwiki.getSkinFile('print.css', true)#if ($themeDoc)?colorTheme=$!{themeDocFullName}#end" rel="stylesheet" type="text/css" media="#if ($printss)all#{else}print#{end}" /&gt;
#if ($isInEmbedMode)
  &lt;link href="${xwiki.getSkinFile('embed.css', true)}#if ($themeDoc)?colorTheme=$!{themeDocFullName}#end" rel="stylesheet" type="text/css" media="all" /&gt;
#end
#set ($a11y = "$!{request.getCookie('a11y').getValue()}")
#if ($a11y == '')
  #set ($a11y = "$!{xwiki.getUserPreference('accessibility')}")
#end
#if ($a11y == '1')
  &lt;link href="$xwiki.getSkinFile('css/accessibility.css', true)" rel="stylesheet" type="text/css" media="all" /&gt;
#end
## The stylesheets configuration option allows to override the alternate stylesheets
## style1.css, style2.css and style3.css
#set ($stylesheets = $xwiki.getSpacePreference('stylesheets'))
#if ($stylesheets != '')
  #foreach ($stylesheet in $stylesheets.split(','))
    #if (!$stylesheet.equalsIgnoreCase($defaultstyle))
      &lt;link href="$xwiki.getSkinFile($stylesheet, true)" rel="alternate stylesheet" type="text/css" title="Alternate StyleSheet ${velocityCount}" /&gt;
    #end
  #end
#end
## IE specific stylesheets
&lt;!--[if IE]&gt;
  &lt;link href="$xwiki.getSkinFile('ie-all.css', true)#if ($themeDoc)?colorTheme=$!{themeDocFullName}#end" rel="stylesheet" type="text/css" /&gt;
&lt;![endif]--&gt;
&lt;!--[if IE 6]&gt;
  &lt;link href="$xwiki.getSkinFile('ie-6.css', true)#if ($themeDoc)?colorTheme=$!{themeDocFullName}#end" rel="stylesheet" type="text/css" /&gt;
&lt;![endif]--&gt;
## Hook for inserting CSS skin extensions
## - Skin JAR extension hook. Placed first to allow other skin extensions to override it.
&lt;!-- com.xpn.xwiki.plugin.skinx.CssResourceSkinExtensionPlugin --&gt;
&lt;!-- com.xpn.xwiki.plugin.skinx.CssSkinExtensionPlugin --&gt;
&lt;!-- com.xpn.xwiki.plugin.skinx.CssSkinFileExtensionPlugin --&gt;</stylesheets.vm>
</property>
<property>
<view.vm></view.vm>
</property>
<property>
<viewheader.vm></viewheader.vm>
</property>
<property>
<xwikivars.vm>#if (!$XWIKIVARS_VM)
#set ($XWIKIVARS_VM = true)
#template("frequentlyUsedDocs.vm")
#set ($isGuest = $xcontext.getUser().equals('XWiki.XWikiGuest'))
#set ($isSuperAdmin = ($xcontext.user == 'XWiki.superadmin'))
#set ($hasEdit = $xwiki.hasAccessLevel('edit'))
#set ($hasAdmin = $xwiki.hasAccessLevel('admin'))
#set ($hasComment = $xwiki.hasAccessLevel('comment'))
## To query for a right at wiki level, we use a reserved space name, and for space level, a reserved
## document name.  These are very unlikely to be used otherwise (i.e., it is expected that there is no
## existing space or documents using these names).  Note that this hack will be unnecessary when the
## new authorization service is made the default, as it will provide an API for checking these
## rights directly.
#set ($reservedSpaceName = 'SpaceReservedForInternalXWikiUsagejDGER5nj3KOE5ouUFUc7OYru')
#set ($reservedDocumentName = 'DocumentReservedForInternalXWikiUsageMK9DxecV0XcDGnIeqzNDB4K')
#set ($hasCreateSpace = $xwiki.hasAccessLevel('edit', "${reservedSpaceName}.DocumentReservedForInternalXWikiUsage"))
#set ($hasCreatePage = $xwiki.hasAccessLevel('edit', "${doc.space}.${reservedDocumentName}"))
#set ($hasGlobalAdmin = $xwiki.hasAccessLevel('admin', $xcontext.user, 'XWiki.XWikiPreferences'))
## Note: The document name is not internally used to determine if a user has programming access level. We pass XWiki.XWikiPreferences for consistency with the call for global admin
#set ($hasProgramming = $xwiki.hasAccessLevel('programming', $xcontext.user, 'XWiki.XWikiPreferences'))
#set ($hasSpaceAdmin = $xwiki.hasAccessLevel('admin', $xcontext.user, "${doc.space}.WebPreferences"))
#set ($hasWatch = $xwiki.watchlist &amp;&amp; !$isGuest &amp;&amp; !$isSuperAdmin &amp;&amp; $xwiki.exists($services.model.serialize($services.model.createDocumentReference($xcontext.database, 'XWiki', 'XWikiUserWatchListSheet'), 'local')))
#set ($hasDashboard = $xwiki.exists($services.model.serialize($services.model.createDocumentReference($xcontext.database, 'Dashboard', 'XWikiUserDashboardSheet'), 'local')))
##
## Are comments, attachments, history etc. enabled?
##
#macro (retrieveSetting $settingName $settingValue)
  #set ($settingValue = "$!{xwiki.getSpacePreference($settingName)}")
  #if ($settingValue != 'false' &amp;&amp; $settingValue != 'no' &amp;&amp; $settingValue != '0')
    #set ($settingValue = true)
  #else
    #set ($settingValue = false)
  #end
#end
#retrieveSetting('showcomments' $settingValue)
#set ($showcomments = $settingValue)
#retrieveSetting('showattachments' $settingValue)
#set ($showattachments = $settingValue)
#retrieveSetting('showhistory' $settingValue)
#set ($showhistory = $settingValue)
#retrieveSetting('showinformation' $settingValue)
#set ($showinformation = $settingValue)
##
## Annotations are special, they can be hidden from the Page Elements administrative settings,
## and they can be disabled per-space from the Annotations administration category.
#retrieveSetting('showannotations' $settingValue)
#set ($showannotations = $settingValue)
#if ($showannotations)
  ## The general settings allow displaying the tab
  #set ($showannotations = false)
  #if ($xwiki.exists('AnnotationCode.AnnotationConfig'))
    #set ($annotationConfigObject = $xwiki.getDocument('AnnotationCode.AnnotationConfig').getObject('AnnotationCode.AnnotationConfig'))
    #if ($annotationConfigObject.getProperty('activated').value != 0 &amp;&amp; !$annotationConfigObject.getProperty('exceptionSpaces').value.contains($doc.space))
      #set ($showannotations = true)
      #set ($annotationClass = $annotationConfigObject.getProperty('annotationClass').value)
      #set ($annotationCount = $doc.getObjects($annotationClass).size())
    #end
  #end
#end
##
##
#set ($isReadOnly = $xwiki.isReadOnly())
#set ($spaceViewUrl = $spaceDoc.getURL('view'))
#set ($viewUrl = $doc.getURL('view'))
#set ($userObj = $!crtUserDoc.getObject('XWiki.XWikiUsers', 0))
## =====================================================================================
## Advanced users are:
## - super admin
## - user documents who have their usertype property set to "Advanced"
## - guest users who have admin rights (i.e. when the wiki is empty with no rights set)
## =====================================================================================
#if ($isSuperAdmin)
  #set ($isAdvancedUser = true)
#elseif ($isGuest &amp;&amp; $hasAdmin)
  #set ($isAdvancedUser = true)
#elseif (!$userObj.getProperty('usertype').value)
  #set ($isAdvancedUser = false)
#else
  #set ($isAdvancedUser = ($userObj.getProperty('usertype').value == 'Advanced'))
#end
## ======================================================================================
## Compute list of spaces to blacklist so that simple users don't see them.
## TODO : replace this list by a hidden space feature.
## ======================================================================================
#if ($hasAdmin || $isAdvancedUser)
  #set ($blacklistedSpaces = [])
#else
  #set ($blacklistedSpaces = ['Import', 'Panels', 'Scheduler', 'Stats', 'XAppClasses', 'XAppSheets', 'XAppTemplates', 'XWiki', 'WatchCode', 'WatchSheets', 'XApp', 'WatchAdmin', 'Watch', 'ColorThemes', 'AnnotationCode'])
#end
## ======================================================================================
## Since the WysiwygService does not trigger the evaluation of the xwikivars.vm, we need a way to make this variable
## visible to the GWT Service calls (and potentially other java code). We set it on the session so it's set when the 
## page to be edited with the wysiwyg is displayed, and it's available on the session for the WysiwygService functions, 
## such as getSpaceNames(). This hack is to be removed when the blacklistedSpaces will be set as a configuration 
## preference and all public API will do the hidden spaces filtering by default. 
## ======================================================================================
#set ($discard = $request.getSession().setAttribute('blacklistedSpaces', $blacklistedSpaces))
#set ($parent ="&lt;a href='$parentDoc.getURL()'&gt;$escapetool.xml(${parentDoc.displayTitle})&lt;/a&gt;")
#if ($tdoc)
  #set ($headertitle = "&lt;a href='$viewUrl'&gt;$escapetool.xml(${tdoc.displayTitle})&lt;/a&gt;")
#else
  #set ($headertitle = "&lt;a href='$viewUrl'&gt;$escapetool.xml(${doc.displayTitle})&lt;/a&gt;")
#end
#set ($skin = $xwiki.getSkin())
## Compute the copyright and evaluate its content with Velocity to allow users to put some scripts inside
#set ($copyright = $xwiki.parseContent($xwiki.getSpaceCopyright()))
#set ($xwikimode = $xcontext.getMode())
#set ($logredir = $escapetool.xml($xwiki.relativeRequestURL))
##
#if ($xwiki.exists('XWiki.MaintenanceInfo'))
  #set ($maintenanceinfo = 'XWiki.MaintenanceInfo')
#elseif ($xwiki.exists('xwiki:XWiki.MaintenanceInfo'))
  #set ($maintenanceinfo = 'xwiki:XWiki.MaintenanceInfo')
#end
## Check language option
#set ($languageparams = '')
#if ($xwiki.isMultiLingual() &amp;&amp; ("$!{tdoc.realLanguage}" != ''))
  #set ($languageparams = "language=${tdoc.realLanguage}")
#end
## Check revision option
#if ($request.rev)
  #set ($revparams = "rev=$!{escapetool.url(${request.rev})}")
#else
  #set ($revparams = '')
#end
#if ($revparams != '' &amp;&amp; $languageparams != '')
  #set ($docvariant = "$languageparams&amp;amp;$revparams")
#else
  #set ($docvariant = "${languageparams}${revparams}")
#end
#set ($keyboardShortcutsEnabled = $isAdvancedUser)
#set ($isInPortletMode = $xwikimode == 1 || "$!request.getAttribute('javax.portlet.request')" != '')
#set ($isInEmbedMode = ("$request.xpage" == "embed" || ($request.xredirect &amp;&amp; $request.xredirect.contains("xpage=embed"))) &amp;&amp; !$isInPortletMode)
#if ($request.xredirect &amp;&amp; $request.xredirect.contains('xpage=embed'))
  #set($discard = $context.setLinksQueryString("xpage=embed"))
#end
#set ($isInServletMode = $xwikimode == 0 &amp;&amp; !$isInPortletMode)
#template("deprecatedVars.vm")
#end</xwikivars.vm>
</property>
</object>
<content></content></xwikidoc>
